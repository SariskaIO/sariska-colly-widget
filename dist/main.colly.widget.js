!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="http://localhost:8081/",n(n.s=378)}([function(e,t,n){"use strict";var r;n.r(t),n.d(t,"XMPPEvents",(function(){return r})),function(e){e.ADD_ICE_CANDIDATE_FAILED="xmpp.add_ice_candidate_failed",e.AUDIO_MUTED_BY_FOCUS="xmpp.audio_muted_by_focus",e.VIDEO_MUTED_BY_FOCUS="xmpp.video_muted_by_focus",e.AUTHENTICATION_REQUIRED="xmpp.authentication_required",e.BRIDGE_DOWN="xmpp.bridge_down",e.CALL_ACCEPTED="xmpp.callaccepted.jingle",e.CALL_INCOMING="xmpp.callincoming.jingle",e.CALL_ENDED="xmpp.callended.jingle",e.CHAT_ERROR_RECEIVED="xmpp.chat_error_received",e.SETTINGS_ERROR_RECEIVED="xmpp.settings_error_received",e.CONFERENCE_PROPERTIES_CHANGED="xmpp.conference_properties_changed",e.CONNECTION_ESTABLISHED="xmpp.connection.connected",e.CONNECTION_FAILED="xmpp.connection.failed",e.CONNECTION_INTERRUPTED="xmpp.connection.interrupted",e.CONNECTION_RESTORED="xmpp.connection.restored",e.CONNECTION_ICE_FAILED="xmpp.connection.ice.failed",e.CONNECTION_RESTARTED="xmpp.connection.restart",e.CONNECTION_STATUS_CHANGED="xmpp.connection.status.changed",e.DISPLAY_NAME_CHANGED="xmpp.display_name_changed",e.EMUC_ROOM_ADDED="xmpp.emuc_room_added",e.EMUC_ROOM_REMOVED="xmpp.emuc_room_removed",e.ETHERPAD="xmpp.etherpad",e.FOCUS_DISCONNECTED="xmpp.focus_disconnected",e.FOCUS_LEFT="xmpp.focus_left",e.GRACEFUL_SHUTDOWN="xmpp.graceful_shutdown",e.ICE_RESTARTING="rtc.ice_restarting",e.ICE_RESTART_SUCCESS="rtc.ice_restart_success",e.KICKED="xmpp.kicked",e.LOCAL_ROLE_CHANGED="xmpp.localrole_changed",e.MEETING_ID_SET="xmpp.meeting_id_set",e.MESSAGE_RECEIVED="xmpp.message_received",e.INVITE_MESSAGE_RECEIVED="xmpp.invite_message_received",e.PRIVATE_MESSAGE_RECEIVED="xmpp.private_message_received",e.MUC_MEMBER_BOT_TYPE_CHANGED="xmpp.muc_member_bot_type_changed",e.MUC_DESTROYED="xmpp.muc_destroyed",e.MUC_JOIN_IN_PROGRESS="xmpp.muc_join_in_progress",e.MUC_JOINED="xmpp.muc_joined",e.MUC_MEMBER_JOINED="xmpp.muc_member_joined",e.MUC_MEMBER_LEFT="xmpp.muc_member_left",e.MUC_LOBBY_MEMBER_JOINED="xmpp.muc_lobby_member_joined",e.MUC_LOBBY_MEMBER_UPDATED="xmpp.muc_lobby_member_updated",e.MUC_LOBBY_MEMBER_LEFT="xmpp.muc_lobby_member_left",e.MUC_DENIED_ACCESS="xmpp.muc_denied access",e.MUC_LEFT="xmpp.muc_left",e.MUC_ROLE_CHANGED="xmpp.muc_role_changed",e.MUC_LOCK_CHANGED="xmpp.muc_lock_changed",e.MUC_MEMBERS_ONLY_CHANGED="xmpp.muc_members_only_changed",e.PARTICIPANT_AUDIO_MUTED="xmpp.audio_muted",e.PARTICIPANT_VIDEO_MUTED="xmpp.video_muted",e.PARTICIPANT_VIDEO_TYPE_CHANGED="xmpp.video_type",e.PARTICIPANT_FEATURES_CHANGED="xmpp.participant_features_changed",e.PASSWORD_REQUIRED="xmpp.password_required",e.PHONE_NUMBER_CHANGED="conference.phoneNumberChanged",e.PRESENCE_RECEIVED="xmpp.presence_received",e.PRESENCE_STATUS="xmpp.presence_status",e.PROMPT_FOR_LOGIN="xmpp.prompt_for_login",e.READY_TO_JOIN="xmpp.ready_to_join",e.RECORDER_STATE_CHANGED="xmpp.recorderStateChanged",e.REMOTE_STATS="xmpp.remote_stats",e.RENEGOTIATION_FAILED="xmpp.renegotiation_failed",e.RESERVATION_ERROR="xmpp.room_reservation_error",e.ROOM_CONNECT_ERROR="xmpp.room_connect_error",e.ROOM_CONNECT_NOT_ALLOWED_ERROR="xmpp.room_connect_error.not_allowed",e.ROOM_JOIN_ERROR="xmpp.room_join_error",e.ROOM_CONNECT_MEMBERS_ONLY_ERROR="xmpp.room_connect_error.members_only",e.ROOM_MAX_USERS_ERROR="xmpp.room_max_users_error",e.SENDING_CHAT_MESSAGE="xmpp.sending_chat_message",e.SENDING_PRIVATE_CHAT_MESSAGE="xmpp.sending_private_chat_message",e.SESSION_ACCEPT="xmpp.session_accept",e.SESSION_ACCEPT_ERROR="xmpp.session_accept_error",e.SESSION_ACCEPT_TIMEOUT="xmpp.session_accept_timeout",e.SOURCE_ADD="xmpp.source_add",e.SOURCE_ADD_ERROR="xmpp.source_add_error",e.SOURCE_REMOVE="xmpp.source_remove",e.SOURCE_REMOVE_ERROR="xmpp.source_remove_error",e.SPEAKER_STATS_RECEIVED="xmpp.speaker_stats_received",e.CONFERENCE_TIMESTAMP_RECEIVED="xmpp.conference_timestamp_received",e.AV_MODERATION_APPROVED="xmpp.av_moderation.approved",e.AV_MODERATION_REJECTED="xmpp.av_moderation.rejected",e.AV_MODERATION_RECEIVED="xmpp.av_moderation.received",e.AV_MODERATION_CHANGED="xmpp.av_moderation.changed",e.AV_MODERATION_PARTICIPANT_APPROVED="xmpp.av_moderation.participant.approved",e.AV_MODERATION_PARTICIPANT_REJECTED="xmpp.av_moderation.participant.rejected",e.BREAKOUT_ROOMS_MOVE_TO_ROOM="xmpp.breakout-rooms.move-to-room",e.BREAKOUT_ROOMS_EVENT="xmpp.breakout-rooms.event",e.BREAKOUT_ROOMS_UPDATED="xmpp.breakout-rooms.updated",e.START_MUTED_FROM_FOCUS="xmpp.start_muted_from_focus",e.SUBJECT_CHANGED="xmpp.subject_changed",e.SUSPEND_DETECTED="xmpp.suspend_detected",e.TRANSCRIPTION_STATUS_CHANGED="xmpp.transcription_status_changed",e.TRANSPORT_INFO="xmpp.transportinfo.jingle",e.VIDEO_SIP_GW_AVAILABILITY_CHANGED="xmpp.videoSIPGWAvailabilityChanged",e.VIDEO_SIP_GW_SESSION_STATE_CHANGED="xmpp.videoSIPGWSessionStateChanged",e.ICE_CONNECTION_STATE_CHANGED="xmpp.ice_connection_state_changed",e.JSON_MESSAGE_RECEIVED="xmmp.json_message_received"}(r||(r={}))},function(e,t,n){"use strict";var r;n.r(t),n.d(t,"JitsiConferenceEvents",(function(){return r})),n.d(t,"AUDIO_INPUT_STATE_CHANGE",(function(){return i})),n.d(t,"AUDIO_UNMUTE_PERMISSIONS_CHANGED",(function(){return o})),n.d(t,"AUTH_STATUS_CHANGED",(function(){return a})),n.d(t,"BEFORE_STATISTICS_DISPOSED",(function(){return s})),n.d(t,"CONFERENCE_ERROR",(function(){return c})),n.d(t,"CONFERENCE_FAILED",(function(){return u})),n.d(t,"CONFERENCE_JOIN_IN_PROGRESS",(function(){return l})),n.d(t,"CONFERENCE_JOINED",(function(){return d})),n.d(t,"CONFERENCE_LEFT",(function(){return f})),n.d(t,"CONFERENCE_UNIQUE_ID_SET",(function(){return h})),n.d(t,"CONNECTION_ESTABLISHED",(function(){return p})),n.d(t,"CONNECTION_INTERRUPTED",(function(){return m})),n.d(t,"CONNECTION_RESTORED",(function(){return v})),n.d(t,"DATA_CHANNEL_OPENED",(function(){return g})),n.d(t,"DISPLAY_NAME_CHANGED",(function(){return y})),n.d(t,"DOMINANT_SPEAKER_CHANGED",(function(){return _})),n.d(t,"CONFERENCE_CREATED_TIMESTAMP",(function(){return b})),n.d(t,"DTMF_SUPPORT_CHANGED",(function(){return E})),n.d(t,"ENDPOINT_MESSAGE_RECEIVED",(function(){return S})),n.d(t,"ENDPOINT_STATS_RECEIVED",(function(){return C})),n.d(t,"JVB121_STATUS",(function(){return w})),n.d(t,"KICKED",(function(){return T})),n.d(t,"PARTICIPANT_KICKED",(function(){return D})),n.d(t,"LAST_N_ENDPOINTS_CHANGED",(function(){return A})),n.d(t,"FORWARDED_SOURCES_CHANGED",(function(){return R})),n.d(t,"LOCK_STATE_CHANGED",(function(){return k})),n.d(t,"SERVER_REGION_CHANGED",(function(){return O})),n.d(t,"_MEDIA_SESSION_STARTED",(function(){return j})),n.d(t,"_MEDIA_SESSION_ACTIVE_CHANGED",(function(){return P})),n.d(t,"MEMBERS_ONLY_CHANGED",(function(){return I})),n.d(t,"MESSAGE_RECEIVED",(function(){return N})),n.d(t,"NO_AUDIO_INPUT",(function(){return M})),n.d(t,"NOISY_MIC",(function(){return x})),n.d(t,"NON_PARTICIPANT_MESSAGE_RECEIVED",(function(){return L})),n.d(t,"PRIVATE_MESSAGE_RECEIVED",(function(){return F})),n.d(t,"PARTICIPANT_CONN_STATUS_CHANGED",(function(){return B})),n.d(t,"PARTCIPANT_FEATURES_CHANGED",(function(){return U})),n.d(t,"PARTICIPANT_PROPERTY_CHANGED",(function(){return V})),n.d(t,"P2P_STATUS",(function(){return H})),n.d(t,"PHONE_NUMBER_CHANGED",(function(){return G})),n.d(t,"PROPERTIES_CHANGED",(function(){return J})),n.d(t,"RECORDER_STATE_CHANGED",(function(){return z})),n.d(t,"VIDEO_SIP_GW_AVAILABILITY_CHANGED",(function(){return W})),n.d(t,"VIDEO_SIP_GW_SESSION_STATE_CHANGED",(function(){return K})),n.d(t,"START_MUTED_POLICY_CHANGED",(function(){return q})),n.d(t,"STARTED_MUTED",(function(){return $})),n.d(t,"SUBJECT_CHANGED",(function(){return X})),n.d(t,"SUSPEND_DETECTED",(function(){return Y})),n.d(t,"TALK_WHILE_MUTED",(function(){return Q})),n.d(t,"TRACK_ADDED",(function(){return Z})),n.d(t,"TRACK_AUDIO_LEVEL_CHANGED",(function(){return ee})),n.d(t,"TRACK_MUTE_CHANGED",(function(){return te})),n.d(t,"TRACK_REMOVED",(function(){return ne})),n.d(t,"TRACK_UNMUTE_REJECTED",(function(){return re})),n.d(t,"TRANSCRIPTION_STATUS_CHANGED",(function(){return ie})),n.d(t,"USER_JOINED",(function(){return oe})),n.d(t,"USER_LEFT",(function(){return ae})),n.d(t,"USER_ROLE_CHANGED",(function(){return se})),n.d(t,"USER_STATUS_CHANGED",(function(){return ce})),n.d(t,"VIDEO_UNMUTE_PERMISSIONS_CHANGED",(function(){return ue})),n.d(t,"BOT_TYPE_CHANGED",(function(){return le})),n.d(t,"LOBBY_USER_JOINED",(function(){return de})),n.d(t,"LOBBY_USER_UPDATED",(function(){return fe})),n.d(t,"LOBBY_USER_LEFT",(function(){return he})),n.d(t,"AV_MODERATION_APPROVED",(function(){return pe})),n.d(t,"AV_MODERATION_REJECTED",(function(){return me})),n.d(t,"AV_MODERATION_CHANGED",(function(){return ve})),n.d(t,"AV_MODERATION_PARTICIPANT_APPROVED",(function(){return ge})),n.d(t,"AV_MODERATION_PARTICIPANT_REJECTED",(function(){return ye})),n.d(t,"FACE_LANDMARK_ADDED",(function(){return _e})),n.d(t,"BREAKOUT_ROOMS_MOVE_TO_ROOM",(function(){return be})),n.d(t,"BREAKOUT_ROOMS_UPDATED",(function(){return Ee})),n.d(t,"SUBTITLES_RECEIVED",(function(){return Se})),n.d(t,"ANALYTICS_EVENT_RECEIVED",(function(){return Ce})),n.d(t,"TRACK_UPDATED",(function(){return we})),function(e){e.AUDIO_INPUT_STATE_CHANGE="conference.audio_input_state_changed",e.AUDIO_UNMUTE_PERMISSIONS_CHANGED="conference.audio_unmute_permissions_changed",e.AUTH_STATUS_CHANGED="conference.auth_status_changed",e.BEFORE_STATISTICS_DISPOSED="conference.beforeStatisticsDisposed",e.CONFERENCE_ERROR="conference.error",e.CONFERENCE_FAILED="conference.failed",e.CONFERENCE_JOIN_IN_PROGRESS="conference.join_in_progress",e.CONFERENCE_JOINED="conference.joined",e.CONFERENCE_LEFT="conference.left",e.CONFERENCE_UNIQUE_ID_SET="conference.unique_id_set",e.CONNECTION_ESTABLISHED="conference.connectionEstablished",e.CONNECTION_INTERRUPTED="conference.connectionInterrupted",e.CONNECTION_RESTORED="conference.connectionRestored",e.DATA_CHANNEL_OPENED="conference.dataChannelOpened",e.DISPLAY_NAME_CHANGED="conference.displayNameChanged",e.DOMINANT_SPEAKER_CHANGED="conference.dominantSpeaker",e.CONFERENCE_CREATED_TIMESTAMP="conference.createdTimestamp",e.DTMF_SUPPORT_CHANGED="conference.dtmfSupportChanged",e.ENDPOINT_MESSAGE_RECEIVED="conference.endpoint_message_received",e.ENDPOINT_STATS_RECEIVED="conference.endpoint_stats_received",e.JVB121_STATUS="conference.jvb121Status",e.KICKED="conference.kicked",e.PARTICIPANT_KICKED="conference.participant_kicked",e.LAST_N_ENDPOINTS_CHANGED="conference.lastNEndpointsChanged",e.FORWARDED_SOURCES_CHANGED="conference.forwardedSourcesChanged",e.LOCK_STATE_CHANGED="conference.lock_state_changed",e.SERVER_REGION_CHANGED="conference.server_region_changed",e._MEDIA_SESSION_STARTED="conference.media_session.started",e._MEDIA_SESSION_ACTIVE_CHANGED="conference.media_session.active_changed",e.MEMBERS_ONLY_CHANGED="conference.membersOnlyChanged",e.MESSAGE_RECEIVED="conference.messageReceived",e.NO_AUDIO_INPUT="conference.no_audio_input",e.NOISY_MIC="conference.noisy_mic",e.NON_PARTICIPANT_MESSAGE_RECEIVED="conference.non_participant_message_received",e.PRIVATE_MESSAGE_RECEIVED="conference.privateMessageReceived",e.PARTICIPANT_CONN_STATUS_CHANGED="conference.participant_conn_status_changed",e.PARTCIPANT_FEATURES_CHANGED="conference.partcipant_features_changed",e.PARTICIPANT_PROPERTY_CHANGED="conference.participant_property_changed",e.P2P_STATUS="conference.p2pStatus",e.PHONE_NUMBER_CHANGED="conference.phoneNumberChanged",e.PROPERTIES_CHANGED="conference.propertiesChanged",e.RECORDER_STATE_CHANGED="conference.recorderStateChanged",e.VIDEO_SIP_GW_AVAILABILITY_CHANGED="conference.videoSIPGWAvailabilityChanged",e.VIDEO_SIP_GW_SESSION_STATE_CHANGED="conference.videoSIPGWSessionStateChanged",e.START_MUTED_POLICY_CHANGED="conference.start_muted_policy_changed",e.STARTED_MUTED="conference.started_muted",e.SUBJECT_CHANGED="conference.subjectChanged",e.SUSPEND_DETECTED="conference.suspendDetected",e.TALK_WHILE_MUTED="conference.talk_while_muted",e.TRACK_ADDED="conference.trackAdded",e.TRACK_AUDIO_LEVEL_CHANGED="conference.audioLevelsChanged",e.TRACK_MUTE_CHANGED="conference.trackMuteChanged",e.TRACK_REMOVED="conference.trackRemoved",e.TRACK_UNMUTE_REJECTED="conference.trackUnmuteRejected",e.TRANSCRIPTION_STATUS_CHANGED="conference.transcriptionStatusChanged",e.USER_JOINED="conference.userJoined",e.USER_LEFT="conference.userLeft",e.USER_ROLE_CHANGED="conference.roleChanged",e.USER_STATUS_CHANGED="conference.statusChanged",e.VIDEO_UNMUTE_PERMISSIONS_CHANGED="conference.video_unmute_permissions_changed",e.BOT_TYPE_CHANGED="conference.bot_type_changed",e.LOBBY_USER_JOINED="conference.lobby.userJoined",e.LOBBY_USER_UPDATED="conference.lobby.userUpdated",e.LOBBY_USER_LEFT="conference.lobby.userLeft",e.AV_MODERATION_APPROVED="conference.av_moderation.approved",e.AV_MODERATION_REJECTED="conference.av_moderation.rejected",e.AV_MODERATION_CHANGED="conference.av_moderation.changed",e.AV_MODERATION_PARTICIPANT_APPROVED="conference.av_moderation.participant.approved",e.AV_MODERATION_PARTICIPANT_REJECTED="conference.av_moderation.participant.rejected",e.FACE_LANDMARK_ADDED="conference.face_landmark.added",e.BREAKOUT_ROOMS_MOVE_TO_ROOM="conference.breakout-rooms.move-to-room",e.BREAKOUT_ROOMS_UPDATED="conference.breakout-rooms.updated",e.SUBTITLES_RECEIVED="conference.subtitles.received",e.ANALYTICS_EVENT_RECEIVED="analytics.event.received",e.TRACK_UPDATED="conference.track.updated"}(r||(r={}));var i=r.AUDIO_INPUT_STATE_CHANGE,o=r.AUDIO_UNMUTE_PERMISSIONS_CHANGED,a=r.AUTH_STATUS_CHANGED,s=r.BEFORE_STATISTICS_DISPOSED,c=r.CONFERENCE_ERROR,u=r.CONFERENCE_FAILED,l=r.CONFERENCE_JOIN_IN_PROGRESS,d=r.CONFERENCE_JOINED,f=r.CONFERENCE_LEFT,h=r.CONFERENCE_UNIQUE_ID_SET,p=r.CONNECTION_ESTABLISHED,m=r.CONNECTION_INTERRUPTED,v=r.CONNECTION_RESTORED,g=r.DATA_CHANNEL_OPENED,y=r.DISPLAY_NAME_CHANGED,_=r.DOMINANT_SPEAKER_CHANGED,b=r.CONFERENCE_CREATED_TIMESTAMP,E=r.DTMF_SUPPORT_CHANGED,S=r.ENDPOINT_MESSAGE_RECEIVED,C=r.ENDPOINT_STATS_RECEIVED,w=r.JVB121_STATUS,T=r.KICKED,D=r.PARTICIPANT_KICKED,A=r.LAST_N_ENDPOINTS_CHANGED,R=r.FORWARDED_SOURCES_CHANGED,k=r.LOCK_STATE_CHANGED,O=r.SERVER_REGION_CHANGED,j=r._MEDIA_SESSION_STARTED,P=r._MEDIA_SESSION_ACTIVE_CHANGED,I=r.MEMBERS_ONLY_CHANGED,N=r.MESSAGE_RECEIVED,M=r.NO_AUDIO_INPUT,x=r.NOISY_MIC,L=r.NON_PARTICIPANT_MESSAGE_RECEIVED,F=r.PRIVATE_MESSAGE_RECEIVED,B=r.PARTICIPANT_CONN_STATUS_CHANGED,U=r.PARTCIPANT_FEATURES_CHANGED,V=r.PARTICIPANT_PROPERTY_CHANGED,H=r.P2P_STATUS,G=r.PHONE_NUMBER_CHANGED,J=r.PROPERTIES_CHANGED,z=r.RECORDER_STATE_CHANGED,W=r.VIDEO_SIP_GW_AVAILABILITY_CHANGED,K=r.VIDEO_SIP_GW_SESSION_STATE_CHANGED,q=r.START_MUTED_POLICY_CHANGED,$=r.STARTED_MUTED,X=r.SUBJECT_CHANGED,Y=r.SUSPEND_DETECTED,Q=r.TALK_WHILE_MUTED,Z=r.TRACK_ADDED,ee=r.TRACK_AUDIO_LEVEL_CHANGED,te=r.TRACK_MUTE_CHANGED,ne=r.TRACK_REMOVED,re=r.TRACK_UNMUTE_REJECTED,ie=r.TRANSCRIPTION_STATUS_CHANGED,oe=r.USER_JOINED,ae=r.USER_LEFT,se=r.USER_ROLE_CHANGED,ce=r.USER_STATUS_CHANGED,ue=r.VIDEO_UNMUTE_PERMISSIONS_CHANGED,le=r.BOT_TYPE_CHANGED,de=r.LOBBY_USER_JOINED,fe=r.LOBBY_USER_UPDATED,he=r.LOBBY_USER_LEFT,pe=r.AV_MODERATION_APPROVED,me=r.AV_MODERATION_REJECTED,ve=r.AV_MODERATION_CHANGED,ge=r.AV_MODERATION_PARTICIPANT_APPROVED,ye=r.AV_MODERATION_PARTICIPANT_REJECTED,_e=r.FACE_LANDMARK_ADDED,be=r.BREAKOUT_ROOMS_MOVE_TO_ROOM,Ee=r.BREAKOUT_ROOMS_UPDATED,Se=r.SUBTITLES_RECEIVED,Ce=r.ANALYTICS_EVENT_RECEIVED,we=r.TRACK_UPDATED},function(e,t,n){(function(r){var i,o,a;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}a=function(){"use strict";var e=void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function t(e){return(t="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(e){return s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":s(e)})(e)}function n(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var i=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},o=function(e){if("string"!=typeof e)throw new Error("str2binl was passed a non-string");for(var t=[],n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t},a=function(e,t,n,r,o,a){return i((s=i(i(t,e),i(r,a)))<<(c=o)|s>>>32-c,n);var s,c},c=function(e,t,n,r,i,o,s){return a(t&n|~t&r,e,t,i,o,s)},u=function(e,t,n,r,i,o,s){return a(t&r|n&~r,e,t,i,o,s)},l=function(e,t,n,r,i,o,s){return a(t^n^r,e,t,i,o,s)},d=function(e,t,n,r,i,o,s){return a(n^(t|~r),e,t,i,o,s)},f=function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n,r,o,a,s=1732584193,f=-271733879,h=-1732584194,p=271733878,m=0;m<e.length;m+=16)n=s,r=f,o=h,a=p,s=c(s,f,h,p,e[m+0],7,-680876936),p=c(p,s,f,h,e[m+1],12,-389564586),h=c(h,p,s,f,e[m+2],17,606105819),f=c(f,h,p,s,e[m+3],22,-1044525330),s=c(s,f,h,p,e[m+4],7,-176418897),p=c(p,s,f,h,e[m+5],12,1200080426),h=c(h,p,s,f,e[m+6],17,-1473231341),f=c(f,h,p,s,e[m+7],22,-45705983),s=c(s,f,h,p,e[m+8],7,1770035416),p=c(p,s,f,h,e[m+9],12,-1958414417),h=c(h,p,s,f,e[m+10],17,-42063),f=c(f,h,p,s,e[m+11],22,-1990404162),s=c(s,f,h,p,e[m+12],7,1804603682),p=c(p,s,f,h,e[m+13],12,-40341101),h=c(h,p,s,f,e[m+14],17,-1502002290),f=c(f,h,p,s,e[m+15],22,1236535329),s=u(s,f,h,p,e[m+1],5,-165796510),p=u(p,s,f,h,e[m+6],9,-1069501632),h=u(h,p,s,f,e[m+11],14,643717713),f=u(f,h,p,s,e[m+0],20,-373897302),s=u(s,f,h,p,e[m+5],5,-701558691),p=u(p,s,f,h,e[m+10],9,38016083),h=u(h,p,s,f,e[m+15],14,-660478335),f=u(f,h,p,s,e[m+4],20,-405537848),s=u(s,f,h,p,e[m+9],5,568446438),p=u(p,s,f,h,e[m+14],9,-1019803690),h=u(h,p,s,f,e[m+3],14,-187363961),f=u(f,h,p,s,e[m+8],20,1163531501),s=u(s,f,h,p,e[m+13],5,-1444681467),p=u(p,s,f,h,e[m+2],9,-51403784),h=u(h,p,s,f,e[m+7],14,1735328473),f=u(f,h,p,s,e[m+12],20,-1926607734),s=l(s,f,h,p,e[m+5],4,-378558),p=l(p,s,f,h,e[m+8],11,-2022574463),h=l(h,p,s,f,e[m+11],16,1839030562),f=l(f,h,p,s,e[m+14],23,-35309556),s=l(s,f,h,p,e[m+1],4,-1530992060),p=l(p,s,f,h,e[m+4],11,1272893353),h=l(h,p,s,f,e[m+7],16,-155497632),f=l(f,h,p,s,e[m+10],23,-1094730640),s=l(s,f,h,p,e[m+13],4,681279174),p=l(p,s,f,h,e[m+0],11,-358537222),h=l(h,p,s,f,e[m+3],16,-722521979),f=l(f,h,p,s,e[m+6],23,76029189),s=l(s,f,h,p,e[m+9],4,-640364487),p=l(p,s,f,h,e[m+12],11,-421815835),h=l(h,p,s,f,e[m+15],16,530742520),f=l(f,h,p,s,e[m+2],23,-995338651),s=d(s,f,h,p,e[m+0],6,-198630844),p=d(p,s,f,h,e[m+7],10,1126891415),h=d(h,p,s,f,e[m+14],15,-1416354905),f=d(f,h,p,s,e[m+5],21,-57434055),s=d(s,f,h,p,e[m+12],6,1700485571),p=d(p,s,f,h,e[m+3],10,-1894986606),h=d(h,p,s,f,e[m+10],15,-1051523),f=d(f,h,p,s,e[m+1],21,-2054922799),s=d(s,f,h,p,e[m+8],6,1873313359),p=d(p,s,f,h,e[m+15],10,-30611744),h=d(h,p,s,f,e[m+6],15,-1560198380),f=d(f,h,p,s,e[m+13],21,1309151649),s=d(s,f,h,p,e[m+4],6,-145523070),p=d(p,s,f,h,e[m+11],10,-1120210379),h=d(h,p,s,f,e[m+2],15,718787259),f=d(f,h,p,s,e[m+9],21,-343485551),s=i(s,n),f=i(f,r),h=i(h,o),p=i(p,a);return[s,f,h,p]},h={hexdigest:function(e){return function(e){for(var t="",n=0;n<4*e.length;n++)t+="0123456789abcdef".charAt(e[n>>2]>>n%4*8+4&15)+"0123456789abcdef".charAt(e[n>>2]>>n%4*8&15);return t}(f(o(e),8*e.length))},hash:function(e){return function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}(f(o(e),8*e.length))}};function p(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;var n,r,i,o,a,s,c,u,l=new Array(80),d=1732584193,f=-271733879,h=-1732584194,p=271733878,g=-1009589776;for(n=0;n<e.length;n+=16){for(o=d,a=f,s=h,c=p,u=g,r=0;r<80;r++)l[r]=r<16?e[n+r]:_(l[r-3]^l[r-8]^l[r-14]^l[r-16],1),i=y(y(_(d,5),m(r,f,h,p)),y(y(g,l[r]),v(r))),g=p,p=h,h=_(f,30),f=d,d=i;d=y(d,o),f=y(f,a),h=y(h,s),p=y(p,c),g=y(g,u)}return[d,f,h,p,g]}function m(e,t,n,r){return e<20?t&n|~t&r:e<40?t^n^r:e<60?t&n|t&r|n&r:t^n^r}function v(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function g(e,t){var n=b(e);n.length>16&&(n=p(n,8*e.length));for(var r=new Array(16),i=new Array(16),o=0;o<16;o++)r[o]=909522486^n[o],i[o]=1549556828^n[o];var a=p(r.concat(b(t)),512+8*t.length);return p(i.concat(a),672)}function y(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function _(e,t){return e<<t|e>>>32-t}function b(e){for(var t=[],n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<24-n%32;return t}function E(e){for(var t,n,r="",i=0;i<4*e.length;i+=3)for(t=(e[i>>2]>>8*(3-i%4)&255)<<16|(e[i+1>>2]>>8*(3-(i+1)%4)&255)<<8|e[i+2>>2]>>8*(3-(i+2)%4)&255,n=0;n<4;n++)8*i+6*n>32*e.length?r+="=":r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t>>6*(3-n)&63);return r}function S(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>24-n%32&255);return t}var C={b64_hmac_sha1:function(e,t){return E(g(e,t))},b64_sha1:function(e){return E(p(b(e),8*e.length))},binb2str:S,core_hmac_sha1:g,str_hmac_sha1:function(e,t){return S(g(e,t))},str_sha1:function(e){return S(p(b(e),8*e.length))}},w=function(e){var t,n,r="",i=e.length;for(t=0;t<i;t++)(n=e.charCodeAt(t))>=0&&n<=127?r+=e.charAt(t):n>2047?(r+=String.fromCharCode(224|n>>12&15),r+=String.fromCharCode(128|n>>6&63),r+=String.fromCharCode(128|n>>0&63)):(r+=String.fromCharCode(192|n>>6&31),r+=String.fromCharCode(128|n>>0&63));return r},T=function(e){for(var n in e=e||{})if(Object.prototype.hasOwnProperty.call(e,n)){var r="",i="",o="",a=e[n],s="object"===t(a),c=escape(unescape(s?a.value:a));s&&(r=a.expires?";expires="+a.expires:"",i=a.domain?";domain="+a.domain:"",o=a.path?";path="+a.path:""),document.cookie=n+"="+c+r+i+o}};function D(e,t){return new k.Builder(e,t)}function A(e){return new k.Builder("iq",e)}function R(e){return new k.Builder("presence",e)}var k={VERSION:"@VERSION@",NS:{HTTPBIND:"http://jabber.org/protocol/httpbind",BOSH:"urn:xmpp:xbosh",CLIENT:"jabber:client",AUTH:"jabber:iq:auth",ROSTER:"jabber:iq:roster",PROFILE:"jabber:iq:profile",DISCO_INFO:"http://jabber.org/protocol/disco#info",DISCO_ITEMS:"http://jabber.org/protocol/disco#items",MUC:"http://jabber.org/protocol/muc",SASL:"urn:ietf:params:xml:ns:xmpp-sasl",STREAM:"http://etherx.jabber.org/streams",FRAMING:"urn:ietf:params:xml:ns:xmpp-framing",BIND:"urn:ietf:params:xml:ns:xmpp-bind",SESSION:"urn:ietf:params:xml:ns:xmpp-session",VERSION:"jabber:iq:version",STANZAS:"urn:ietf:params:xml:ns:xmpp-stanzas",XHTML_IM:"http://jabber.org/protocol/xhtml-im",XHTML:"http://www.w3.org/1999/xhtml"},XHTML:{tags:["a","blockquote","br","cite","em","img","li","ol","p","span","strong","ul","body"],attributes:{a:["href"],blockquote:["style"],br:[],cite:["style"],em:[],img:["src","alt","style","height","width"],li:["style"],ol:["style"],p:["style"],span:["style"],strong:[],ul:["style"],body:[]},css:["background-color","color","font-family","font-size","font-style","font-weight","margin-left","margin-right","text-align","text-decoration"],validTag:function(e){for(var t=0;t<k.XHTML.tags.length;t++)if(e===k.XHTML.tags[t])return!0;return!1},validAttribute:function(e,t){if(void 0!==k.XHTML.attributes[e]&&k.XHTML.attributes[e].length>0)for(var n=0;n<k.XHTML.attributes[e].length;n++)if(t===k.XHTML.attributes[e][n])return!0;return!1},validCSS:function(e){for(var t=0;t<k.XHTML.css.length;t++)if(e===k.XHTML.css[t])return!0;return!1}},Status:{ERROR:0,CONNECTING:1,CONNFAIL:2,AUTHENTICATING:3,AUTHFAIL:4,CONNECTED:5,DISCONNECTED:6,DISCONNECTING:7,ATTACHED:8,REDIRECT:9,CONNTIMEOUT:10,BINDREQUIRED:11},ErrorCondition:{BAD_FORMAT:"bad-format",CONFLICT:"conflict",MISSING_JID_NODE:"x-strophe-bad-non-anon-jid",NO_AUTH_MECH:"no-auth-mech",UNKNOWN_REASON:"unknown"},LogLevel:{DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},ElementType:{NORMAL:1,TEXT:3,CDATA:4,FRAGMENT:11},TIMEOUT:1.1,SECONDARY_TIMEOUT:.1,addNamespace:function(e,t){k.NS[e]=t},forEachChild:function(e,t,n){for(var r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];i.nodeType!==k.ElementType.NORMAL||t&&!this.isTagEqual(i,t)||n(i)}},isTagEqual:function(e,t){return e.tagName===t},_xmlGenerator:null,_makeGenerator:function(){var e;return void 0===document.implementation.createDocument||document.implementation.createDocument&&document.documentMode&&document.documentMode<10?(e=this._getIEXmlDom()).appendChild(e.createElement("strophe")):e=document.implementation.createDocument("jabber:client","strophe",null),e},xmlGenerator:function(){return k._xmlGenerator||(k._xmlGenerator=k._makeGenerator()),k._xmlGenerator},_getIEXmlDom:function(){for(var e=null,t=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"],n=0;n<t.length&&null===e;n++)try{e=new ActiveXObject(t[n])}catch(t){e=null}return e},xmlElement:function(e){if(!e)return null;for(var n=k.xmlGenerator().createElement(e),r=1;r<arguments.length;r++){var i=arguments[r];if(i)if("string"==typeof i||"number"==typeof i)n.appendChild(k.xmlTextNode(i));else if("object"===t(i)&&"function"==typeof i.sort)for(var o=0;o<i.length;o++){var a=i[o];"object"===t(a)&&"function"==typeof a.sort&&void 0!==a[1]&&null!==a[1]&&n.setAttribute(a[0],a[1])}else if("object"===t(i))for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&void 0!==i[s]&&null!==i[s]&&n.setAttribute(s,i[s])}return n},xmlescape:function(e){return e=(e=(e=(e=(e=e.replace(/\&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/'/g,"&apos;")).replace(/"/g,"&quot;")},xmlunescape:function(e){return e=(e=(e=(e=(e=e.replace(/\&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&apos;/g,"'")).replace(/&quot;/g,'"')},xmlTextNode:function(e){return k.xmlGenerator().createTextNode(e)},xmlHtmlNode:function(e){var t;return DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)),t},getText:function(e){if(!e)return null;var t="";0===e.childNodes.length&&e.nodeType===k.ElementType.TEXT&&(t+=e.nodeValue);for(var n=0;n<e.childNodes.length;n++)e.childNodes[n].nodeType===k.ElementType.TEXT&&(t+=e.childNodes[n].nodeValue);return k.xmlescape(t)},copyElement:function(e){var t;if(e.nodeType===k.ElementType.NORMAL){t=k.xmlElement(e.tagName);for(var n=0;n<e.attributes.length;n++)t.setAttribute(e.attributes[n].nodeName,e.attributes[n].value);for(var r=0;r<e.childNodes.length;r++)t.appendChild(k.copyElement(e.childNodes[r]))}else e.nodeType===k.ElementType.TEXT&&(t=k.xmlGenerator().createTextNode(e.nodeValue));return t},createHtml:function(e){var n;if(e.nodeType===k.ElementType.NORMAL){var r=e.nodeName.toLowerCase();if(k.XHTML.validTag(r))try{n=k.xmlElement(r);for(var i=0;i<k.XHTML.attributes[r].length;i++){var o=k.XHTML.attributes[r][i],a=e.getAttribute(o);if(null!=a&&""!==a&&!1!==a&&0!==a)if("style"===o&&"object"===t(a)&&void 0!==a.cssText&&(a=a.cssText),"style"===o){for(var s=[],c=a.split(";"),u=0;u<c.length;u++){var l=c[u].split(":"),d=l[0].replace(/^\s*/,"").replace(/\s*$/,"").toLowerCase();if(k.XHTML.validCSS(d)){var f=l[1].replace(/^\s*/,"").replace(/\s*$/,"");s.push(d+": "+f)}}s.length>0&&(a=s.join("; "),n.setAttribute(o,a))}else n.setAttribute(o,a)}for(var h=0;h<e.childNodes.length;h++)n.appendChild(k.createHtml(e.childNodes[h]))}catch(e){n=k.xmlTextNode("")}else{n=k.xmlGenerator().createDocumentFragment();for(var p=0;p<e.childNodes.length;p++)n.appendChild(k.createHtml(e.childNodes[p]))}}else if(e.nodeType===k.ElementType.FRAGMENT){n=k.xmlGenerator().createDocumentFragment();for(var m=0;m<e.childNodes.length;m++)n.appendChild(k.createHtml(e.childNodes[m]))}else e.nodeType===k.ElementType.TEXT&&(n=k.xmlTextNode(e.nodeValue));return n},escapeNode:function(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},unescapeNode:function(e){return"string"!=typeof e?e:e.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},getNodeFromJid:function(e){return e.indexOf("@")<0?null:e.split("@")[0]},getDomainFromJid:function(e){var t=k.getBareJidFromJid(e);if(t.indexOf("@")<0)return t;var n=t.split("@");return n.splice(0,1),n.join("@")},getResourceFromJid:function(e){if(!e)return null;var t=e.split("/");return t.length<2?null:(t.splice(0,1),t.join("/"))},getBareJidFromJid:function(e){return e?e.split("/")[0]:null},_handleError:function(e){void 0!==e.stack&&k.fatal(e.stack),e.sourceURL?k.fatal("error: "+this.handler+" "+e.sourceURL+":"+e.line+" - "+e.name+": "+e.message):e.fileName?k.fatal("error: "+this.handler+" "+e.fileName+":"+e.lineNumber+" - "+e.name+": "+e.message):k.fatal("error: "+e.message)},log:function(e,n){e===this.LogLevel.FATAL&&"object"===t(window.console)&&"function"==typeof window.console.error&&window.console.error(n)},debug:function(e){this.log(this.LogLevel.DEBUG,e)},info:function(e){this.log(this.LogLevel.INFO,e)},warn:function(e){this.log(this.LogLevel.WARN,e)},error:function(e){this.log(this.LogLevel.ERROR,e)},fatal:function(e){this.log(this.LogLevel.FATAL,e)},serialize:function(e){if(!e)return null;"function"==typeof e.tree&&(e=e.tree());var t=n(Array(e.attributes.length).keys()).map((function(t){return e.attributes[t].nodeName}));t.sort();var r=t.reduce((function(t,n){return"".concat(t," ").concat(n,'="').concat(k.xmlescape(e.attributes.getNamedItem(n).value),'"')}),"<".concat(e.nodeName));if(e.childNodes.length>0){r+=">";for(var i=0;i<e.childNodes.length;i++){var o=e.childNodes[i];switch(o.nodeType){case k.ElementType.NORMAL:r+=k.serialize(o);break;case k.ElementType.TEXT:r+=k.xmlescape(o.nodeValue);break;case k.ElementType.CDATA:r+="<![CDATA["+o.nodeValue+"]]>"}}r+="</"+e.nodeName+">"}else r+="/>";return r},_requestId:0,_connectionPlugins:{},addConnectionPlugin:function(e,t){k._connectionPlugins[e]=t},Builder:function(e,t){"presence"!==e&&"message"!==e&&"iq"!==e||(t&&!t.xmlns?t.xmlns=k.NS.CLIENT:t||(t={xmlns:k.NS.CLIENT})),this.nodeTree=k.xmlElement(e,t),this.node=this.nodeTree}};k.Builder.prototype={tree:function(){return this.nodeTree},toString:function(){return k.serialize(this.nodeTree)},up:function(){return this.node=this.node.parentNode,this},root:function(){return this.node=this.nodeTree,this},attrs:function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(void 0===e[t]?this.node.removeAttribute(t):this.node.setAttribute(t,e[t]));return this},c:function(e,t,n){var r=k.xmlElement(e,t,n);return this.node.appendChild(r),"string"!=typeof n&&"number"!=typeof n&&(this.node=r),this},cnode:function(e){var t,n=k.xmlGenerator();try{t=void 0!==n.importNode}catch(e){t=!1}var r=t?n.importNode(e,!0):k.copyElement(e);return this.node.appendChild(r),this.node=r,this},t:function(e){var t=k.xmlTextNode(e);return this.node.appendChild(t),this},h:function(e){var t=document.createElement("body");t.innerHTML=e;for(var n=k.createHtml(t);n.childNodes.length>0;)this.node.appendChild(n.childNodes[0]);return this}},k.Handler=function(e,t,n,r,i,o,a){this.handler=e,this.ns=t,this.name=n,this.type=r,this.id=i,this.options=a||{matchBareFromJid:!1,ignoreNamespaceFragment:!1},this.options.matchBare&&(k.warn('The "matchBare" option is deprecated, use "matchBareFromJid" instead.'),this.options.matchBareFromJid=this.options.matchBare,delete this.options.matchBare),this.options.matchBareFromJid?this.from=o?k.getBareJidFromJid(o):null:this.from=o,this.user=!0},k.Handler.prototype={getNamespace:function(e){var t=e.getAttribute("xmlns");return t&&this.options.ignoreNamespaceFragment&&(t=t.split("#")[0]),t},namespaceMatch:function(e){var t=this,n=!1;return!this.ns||(k.forEachChild(e,null,(function(e){t.getNamespace(e)===t.ns&&(n=!0)})),n||this.getNamespace(e)===this.ns)},isMatch:function(e){var t=e.getAttribute("from");this.options.matchBareFromJid&&(t=k.getBareJidFromJid(t));var n=e.getAttribute("type");return!(!this.namespaceMatch(e)||this.name&&!k.isTagEqual(e,this.name)||this.type&&(Array.isArray(this.type)?-1===this.type.indexOf(n):n!==this.type)||this.id&&e.getAttribute("id")!==this.id||this.from&&t!==this.from)},run:function(e){var t=null;try{t=this.handler(e)}catch(e){throw k._handleError(e),e}return t},toString:function(){return"{Handler: "+this.handler+"("+this.name+","+this.id+","+this.ns+")}"}},k.TimedHandler=function(e,t){this.period=e,this.handler=t,this.lastCalled=(new Date).getTime(),this.user=!0},k.TimedHandler.prototype={run:function(){return this.lastCalled=(new Date).getTime(),this.handler()},reset:function(){this.lastCalled=(new Date).getTime()},toString:function(){return"{TimedHandler: "+this.handler+"("+this.period+")}"}},k.Connection=function(e,t){var n=this;this.service=e,this.options=t||{};var r=this.options.protocol||"";for(var i in 0===e.indexOf("ws:")||0===e.indexOf("wss:")||0===r.indexOf("ws")?this._proto=new k.Websocket(this):this._proto=new k.Bosh(this),this.jid="",this.domain=null,this.features=null,this._sasl_data={},this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.protocolErrorHandlers={HTTP:{},websocket:{}},this._idleTimeout=null,this._disconnectTimeout=null,this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.do_authentication=!0,this.paused=!1,this.restored=!1,this._data=[],this._uniqueId=0,this._sasl_success_handler=null,this._sasl_failure_handler=null,this._sasl_challenge_handler=null,this.maxRetries=5,this._idleTimeout=setTimeout((function(){return n._onIdle()}),100),T(this.options.cookies),this.registerSASLMechanisms(this.options.mechanisms),k._connectionPlugins)if(Object.prototype.hasOwnProperty.call(k._connectionPlugins,i)){var o=function(){};o.prototype=k._connectionPlugins[i],this[i]=new o,this[i].init(this)}},k.Connection.prototype={reset:function(){this._proto._reset(),this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.restored=!1,this._data=[],this._requests=[],this._uniqueId=0},pause:function(){this.paused=!0},resume:function(){this.paused=!1},getUniqueId:function(e){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));return"string"==typeof e||"number"==typeof e?t+":"+e:t+""},addProtocolErrorHandler:function(e,t,n){this.protocolErrorHandlers[e][t]=n},connect:function(e,t,n,r,i,o,a){this.jid=e,this.authzid=k.getBareJidFromJid(this.jid),this.authcid=a||k.getNodeFromJid(this.jid),this.pass=t,this.servtype="xmpp",this.connect_callback=n,this.disconnecting=!1,this.connected=!1,this.authenticated=!1,this.restored=!1,this.domain=k.getDomainFromJid(this.jid),this._changeConnectStatus(k.Status.CONNECTING,null),this._proto._connect(r,i,o)},attach:function(e,t,n,r,i,o,a){if(!(this._proto instanceof k.Bosh)){var s=new Error('The "attach" method can only be used with a BOSH connection.');throw s.name="StropheSessionError",s}this._proto._attach(e,t,n,r,i,o,a)},restore:function(e,t,n,r,i){if(!this._sessionCachingSupported()){var o=new Error('The "restore" method can only be used with a BOSH connection.');throw o.name="StropheSessionError",o}this._proto._restore(e,t,n,r,i)},_sessionCachingSupported:function(){if(this._proto instanceof k.Bosh){if(!JSON)return!1;try{sessionStorage.setItem("_strophe_","_strophe_"),sessionStorage.removeItem("_strophe_")}catch(e){return!1}return!0}return!1},xmlInput:function(e){},xmlOutput:function(e){},rawInput:function(e){},rawOutput:function(e){},nextValidRid:function(e){},send:function(e){if(null!==e){if("function"==typeof e.sort)for(var t=0;t<e.length;t++)this._queueData(e[t]);else"function"==typeof e.tree?this._queueData(e.tree()):this._queueData(e);this._proto._send()}},flush:function(){clearTimeout(this._idleTimeout),this._onIdle()},sendPresence:function(e,t,n,r){var i=this,o=null;"function"==typeof e.tree&&(e=e.tree());var a=e.getAttribute("id");if(a||(a=this.getUniqueId("sendPresence"),e.setAttribute("id",a)),"function"==typeof t||"function"==typeof n){var s=this.addHandler((function(e){o&&i.deleteTimedHandler(o),"error"===e.getAttribute("type")?n&&n(e):t&&t(e)}),null,"presence",null,a);r&&(o=this.addTimedHandler(r,(function(){return i.deleteHandler(s),n&&n(null),!1})))}return this.send(e),a},sendIQ:function(e,t,n,r){var i=this,o=null;"function"==typeof e.tree&&(e=e.tree());var a=e.getAttribute("id");if(a||(a=this.getUniqueId("sendIQ"),e.setAttribute("id",a)),"function"==typeof t||"function"==typeof n){var s=this.addHandler((function(e){o&&i.deleteTimedHandler(o);var r=e.getAttribute("type");if("result"===r)t&&t(e);else{if("error"!==r){var a=new Error("Got bad IQ type of ".concat(r));throw a.name="StropheError",a}n&&n(e)}}),null,"iq",["error","result"],a);r&&(o=this.addTimedHandler(r,(function(){return i.deleteHandler(s),n&&n(null),!1})))}return this.send(e),a},_queueData:function(e){if(null===e||!e.tagName||!e.childNodes){var t=new Error("Cannot queue non-DOMElement.");throw t.name="StropheError",t}this._data.push(e)},_sendRestart:function(){var e=this;this._data.push("restart"),this._proto._sendRestart(),this._idleTimeout=setTimeout((function(){return e._onIdle()}),100)},addTimedHandler:function(e,t){var n=new k.TimedHandler(e,t);return this.addTimeds.push(n),n},deleteTimedHandler:function(e){this.removeTimeds.push(e)},addHandler:function(e,t,n,r,i,o,a){var s=new k.Handler(e,t,n,r,i,o,a);return this.addHandlers.push(s),s},deleteHandler:function(e){this.removeHandlers.push(e);var t=this.addHandlers.indexOf(e);t>=0&&this.addHandlers.splice(t,1)},registerSASLMechanisms:function(e){this.mechanisms={},(e=e||[k.SASLAnonymous,k.SASLExternal,k.SASLMD5,k.SASLOAuthBearer,k.SASLXOAuth2,k.SASLPlain,k.SASLSHA1]).forEach(this.registerSASLMechanism.bind(this))},registerSASLMechanism:function(e){this.mechanisms[e.prototype.name]=e},disconnect:function(e){if(this._changeConnectStatus(k.Status.DISCONNECTING,e),k.warn("Disconnect was called because: "+e),this.connected){var t=!1;this.disconnecting=!0,this.authenticated&&(t=R({xmlns:k.NS.CLIENT,type:"unavailable"})),this._disconnectTimeout=this._addSysTimedHandler(3e3,this._onDisconnectTimeout.bind(this)),this._proto._disconnect(t)}else k.warn("Disconnect was called before Strophe connected to the server"),this._proto._abortAllRequests(),this._doDisconnect()},_changeConnectStatus:function(e,t,n){for(var r in k._connectionPlugins)if(Object.prototype.hasOwnProperty.call(k._connectionPlugins,r)){var i=this[r];if(i.statusChanged)try{i.statusChanged(e,t)}catch(e){k.error("".concat(r," plugin caused an exception changing status: ").concat(e))}}if(this.connect_callback)try{this.connect_callback(e,t,n)}catch(e){k._handleError(e),k.error("User connection callback caused an exception: ".concat(e))}},_doDisconnect:function(e){"number"==typeof this._idleTimeout&&clearTimeout(this._idleTimeout),null!==this._disconnectTimeout&&(this.deleteTimedHandler(this._disconnectTimeout),this._disconnectTimeout=null),k.debug("_doDisconnect was called"),this._proto._doDisconnect(),this.authenticated=!1,this.disconnecting=!1,this.restored=!1,this.handlers=[],this.timedHandlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._changeConnectStatus(k.Status.DISCONNECTED,e),this.connected=!1},_dataRecv:function(e,t){var n=this;k.debug("_dataRecv called");var r=this._proto._reqToData(e);if(null!==r){for(this.xmlInput!==k.Connection.prototype.xmlInput&&(r.nodeName===this._proto.strip&&r.childNodes.length?this.xmlInput(r.childNodes[0]):this.xmlInput(r)),this.rawInput!==k.Connection.prototype.rawInput&&(t?this.rawInput(t):this.rawInput(k.serialize(r)));this.removeHandlers.length>0;){var i=this.removeHandlers.pop(),o=this.handlers.indexOf(i);o>=0&&this.handlers.splice(o,1)}for(;this.addHandlers.length>0;)this.handlers.push(this.addHandlers.pop());if(this.disconnecting&&this._proto._emptyQueue())this._doDisconnect();else{var a=r.getAttribute("type");if(null!==a&&"terminate"===a){if(this.disconnecting)return;var s=r.getAttribute("condition"),c=r.getElementsByTagName("conflict");return null!==s?("remote-stream-error"===s&&c.length>0&&(s="conflict"),this._changeConnectStatus(k.Status.CONNFAIL,s)):this._changeConnectStatus(k.Status.CONNFAIL,k.ErrorCondition.UNKOWN_REASON),void this._doDisconnect(s)}k.forEachChild(r,null,(function(e){var t=n.handlers;n.handlers=[];for(var r=0;r<t.length;r++){var i=t[r];try{(!i.isMatch(e)||!n.authenticated&&i.user||i.run(e))&&n.handlers.push(i)}catch(e){k.warn("Removing Strophe handlers due to uncaught exception: "+e.message)}}}))}}},mechanisms:{},_connect_cb:function(e,t,n){var r;k.debug("_connect_cb was called"),this.connected=!0;try{r=this._proto._reqToData(e)}catch(e){if(e.name!==k.ErrorCondition.BAD_FORMAT)throw e;this._changeConnectStatus(k.Status.CONNFAIL,k.ErrorCondition.BAD_FORMAT),this._doDisconnect(k.ErrorCondition.BAD_FORMAT)}if(r&&(this.xmlInput!==k.Connection.prototype.xmlInput&&(r.nodeName===this._proto.strip&&r.childNodes.length?this.xmlInput(r.childNodes[0]):this.xmlInput(r)),this.rawInput!==k.Connection.prototype.rawInput&&(n?this.rawInput(n):this.rawInput(k.serialize(r))),this._proto._connect_cb(r)!==k.Status.CONNFAIL))if(r.getElementsByTagNameNS?r.getElementsByTagNameNS(k.NS.STREAM,"features").length>0:r.getElementsByTagName("stream:features").length>0||r.getElementsByTagName("features").length>0){var i=[],o=r.getElementsByTagName("mechanism");if(o.length>0)for(var a=0;a<o.length;a++){var s=k.getText(o[a]);this.mechanisms[s]&&i.push(this.mechanisms[s])}0!==i.length||0!==r.getElementsByTagName("auth").length?!1!==this.do_authentication&&this.authenticate(i):this._proto._no_auth_received(t)}else this._proto._no_auth_received(t)},sortMechanismsByPriority:function(e){for(var t=0;t<e.length-1;++t){for(var n=t,r=t+1;r<e.length;++r)e[r].prototype.priority>e[n].prototype.priority&&(n=r);if(n!==t){var i=e[t];e[t]=e[n],e[n]=i}}return e},authenticate:function(e){this._attemptSASLAuth(e)||this._attemptLegacyAuth()},_attemptSASLAuth:function(e){e=this.sortMechanismsByPriority(e||[]);for(var t=!1,n=0;n<e.length;++n)if(e[n].prototype.test(this)){this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge_cb.bind(this),null,"challenge",null,null),this._sasl_mechanism=new e[n],this._sasl_mechanism.onStart(this);var r=D("auth",{xmlns:k.NS.SASL,mechanism:this._sasl_mechanism.name});if(this._sasl_mechanism.isClientFirst){var i=this._sasl_mechanism.onChallenge(this,null);r.t(btoa(i))}this.send(r.tree()),t=!0;break}return t},_sasl_challenge_cb:function(e){var t=atob(k.getText(e)),n=this._sasl_mechanism.onChallenge(this,t),r=D("response",{xmlns:k.NS.SASL});return""!==n&&r.t(btoa(n)),this.send(r.tree()),!0},_attemptLegacyAuth:function(){null===k.getNodeFromJid(this.jid)?(this._changeConnectStatus(k.Status.CONNFAIL,k.ErrorCondition.MISSING_JID_NODE),this.disconnect(k.ErrorCondition.MISSING_JID_NODE)):(this._changeConnectStatus(k.Status.AUTHENTICATING,null),this._addSysHandler(this._onLegacyAuthIQResult.bind(this),null,null,null,"_auth_1"),this.send(A({type:"get",to:this.domain,id:"_auth_1"}).c("query",{xmlns:k.NS.AUTH}).c("username",{}).t(k.getNodeFromJid(this.jid)).tree()))},_onLegacyAuthIQResult:function(e){var t=A({type:"set",id:"_auth_2"}).c("query",{xmlns:k.NS.AUTH}).c("username",{}).t(k.getNodeFromJid(this.jid)).up().c("password").t(this.pass);return k.getResourceFromJid(this.jid)||(this.jid=k.getBareJidFromJid(this.jid)+"/strophe"),t.up().c("resource",{}).t(k.getResourceFromJid(this.jid)),this._addSysHandler(this._auth2_cb.bind(this),null,null,null,"_auth_2"),this.send(t.tree()),!1},_sasl_success_cb:function(e){var t=this;if(this._sasl_data["server-signature"]){var n,r=atob(k.getText(e)).match(/([a-z]+)=([^,]+)(,|$)/);if("v"===r[1]&&(n=r[2]),n!==this._sasl_data["server-signature"])return this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_data={},this._sasl_failure_cb(null)}k.info("SASL authentication succeeded."),this._sasl_mechanism&&this._sasl_mechanism.onSuccess(),this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null);var i=[],o=function(e,n){for(;e.length;)t.deleteHandler(e.pop());return t._onStreamFeaturesAfterSASL(n),!1};return i.push(this._addSysHandler((function(e){return o(i,e)}),null,"stream:features",null,null)),i.push(this._addSysHandler((function(e){return o(i,e)}),k.NS.STREAM,"features",null,null)),this._sendRestart(),!1},_onStreamFeaturesAfterSASL:function(e){this.features=e;for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];"bind"===n.nodeName&&(this.do_bind=!0),"session"===n.nodeName&&(this.do_session=!0)}return this.do_bind?(this.options.explicitResourceBinding?this._changeConnectStatus(k.Status.BINDREQUIRED,null):this.bind(),!1):(this._changeConnectStatus(k.Status.AUTHFAIL,null),!1)},bind:function(){if(this.do_bind){this._addSysHandler(this._onResourceBindResultIQ.bind(this),null,null,null,"_bind_auth_2");var e=k.getResourceFromJid(this.jid);e?this.send(A({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:k.NS.BIND}).c("resource",{}).t(e).tree()):this.send(A({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:k.NS.BIND}).tree())}else k.log(k.LogLevel.INFO,'Strophe.Connection.prototype.bind called but "do_bind" is false')},_onResourceBindResultIQ:function(e){var t;if("error"===e.getAttribute("type"))return k.warn("Resource binding failed."),e.getElementsByTagName("conflict").length>0&&(t=k.ErrorCondition.CONFLICT),this._changeConnectStatus(k.Status.AUTHFAIL,t,e),!1;var n=e.getElementsByTagName("bind");if(!(n.length>0))return k.warn("Resource binding failed."),this._changeConnectStatus(k.Status.AUTHFAIL,null,e),!1;var r=n[0].getElementsByTagName("jid");r.length>0&&(this.jid=k.getText(r[0]),this.do_session?this._establishSession():(this.authenticated=!0,this._changeConnectStatus(k.Status.CONNECTED,null)))},_establishSession:function(){if(!this.do_session)throw new Error("Strophe.Connection.prototype._establishSession "+"called but apparently ".concat(k.NS.SESSION," wasn't advertised by the server"));this._addSysHandler(this._onSessionResultIQ.bind(this),null,null,null,"_session_auth_2"),this.send(A({type:"set",id:"_session_auth_2"}).c("session",{xmlns:k.NS.SESSION}).tree())},_onSessionResultIQ:function(e){if("result"===e.getAttribute("type"))this.authenticated=!0,this._changeConnectStatus(k.Status.CONNECTED,null);else if("error"===e.getAttribute("type"))return k.warn("Session creation failed."),this._changeConnectStatus(k.Status.AUTHFAIL,null,e),!1;return!1},_sasl_failure_cb:function(e){return this._sasl_success_handler&&(this.deleteHandler(this._sasl_success_handler),this._sasl_success_handler=null),this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_mechanism&&this._sasl_mechanism.onFailure(),this._changeConnectStatus(k.Status.AUTHFAIL,null,e),!1},_auth2_cb:function(e){return"result"===e.getAttribute("type")?(this.authenticated=!0,this._changeConnectStatus(k.Status.CONNECTED,null)):"error"===e.getAttribute("type")&&(this._changeConnectStatus(k.Status.AUTHFAIL,null,e),this.disconnect("authentication failed")),!1},_addSysTimedHandler:function(e,t){var n=new k.TimedHandler(e,t);return n.user=!1,this.addTimeds.push(n),n},_addSysHandler:function(e,t,n,r,i){var o=new k.Handler(e,t,n,r,i);return o.user=!1,this.addHandlers.push(o),o},_onDisconnectTimeout:function(){return k.debug("_onDisconnectTimeout was called"),this._changeConnectStatus(k.Status.CONNTIMEOUT,null),this._proto._onDisconnectTimeout(),this._doDisconnect(),!1},_onIdle:function(){for(var e=this;this.addTimeds.length>0;)this.timedHandlers.push(this.addTimeds.pop());for(;this.removeTimeds.length>0;){var t=this.removeTimeds.pop(),n=this.timedHandlers.indexOf(t);n>=0&&this.timedHandlers.splice(n,1)}for(var r=(new Date).getTime(),i=[],o=0;o<this.timedHandlers.length;o++){var a=this.timedHandlers[o];!this.authenticated&&a.user||(a.lastCalled+a.period-r<=0?a.run()&&i.push(a):i.push(a))}this.timedHandlers=i,clearTimeout(this._idleTimeout),this._proto._onIdle(),this.connected&&(this._idleTimeout=setTimeout((function(){return e._onIdle()}),100))}},k.SASLMechanism=function(e,t,n){this.name=e,this.isClientFirst=t,this.priority=n},k.SASLMechanism.prototype={test:function(e){return!0},onStart:function(e){this._connection=e},onChallenge:function(e,t){throw new Error("You should implement challenge handling!")},onFailure:function(){this._connection=null},onSuccess:function(){this._connection=null}},k.SASLAnonymous=function(){},k.SASLAnonymous.prototype=new k.SASLMechanism("ANONYMOUS",!1,20),k.SASLAnonymous.prototype.test=function(e){return null===e.authcid},k.SASLPlain=function(){},k.SASLPlain.prototype=new k.SASLMechanism("PLAIN",!0,50),k.SASLPlain.prototype.test=function(e){return null!==e.authcid},k.SASLPlain.prototype.onChallenge=function(e){var t=e.authzid;return t+="\0",t+=e.authcid,t+="\0",t+=e.pass,w(t)},k.SASLSHA1=function(){},k.SASLSHA1.prototype=new k.SASLMechanism("SCRAM-SHA-1",!0,70),k.SASLSHA1.prototype.test=function(e){return null!==e.authcid},k.SASLSHA1.prototype.onChallenge=function(e,t,n){var r=n||h.hexdigest(""+1234567890*Math.random()),i="n="+w(e.authcid);return i+=",r=",i+=r,e._sasl_data.cnonce=r,e._sasl_data["client-first-message-bare"]=i,i="n,,"+i,this.onChallenge=function(e,t){for(var n,r,i,o,a,s,c,u,l="c=biws,",d="".concat(e._sasl_data["client-first-message-bare"],",").concat(t,","),f=e._sasl_data.cnonce,h=/([a-z]+)=([^,]+)(,|$)/;t.match(h);){var p=t.match(h);switch(t=t.replace(p[0],""),p[1]){case"r":n=p[2];break;case"s":r=p[2];break;case"i":i=p[2]}}if(n.substr(0,f.length)!==f)return e._sasl_data={},e._sasl_failure_cb();d+=l+="r="+n,r=atob(r),r+="\0\0\0";var m=w(e.pass);for(o=s=C.core_hmac_sha1(m,r),c=1;c<i;c++){for(a=C.core_hmac_sha1(m,C.binb2str(s)),u=0;u<5;u++)o[u]^=a[u];s=a}o=C.binb2str(o);var v=C.core_hmac_sha1(o,"Client Key"),g=C.str_hmac_sha1(o,"Server Key"),y=C.core_hmac_sha1(C.str_sha1(C.binb2str(v)),d);for(e._sasl_data["server-signature"]=C.b64_hmac_sha1(g,d),u=0;u<5;u++)v[u]^=y[u];return l+=",p="+btoa(C.binb2str(v))},i},k.SASLMD5=function(){},k.SASLMD5.prototype=new k.SASLMechanism("DIGEST-MD5",!1,60),k.SASLMD5.prototype.test=function(e){return null!==e.authcid},k.SASLMD5.prototype._quote=function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},k.SASLMD5.prototype.onChallenge=function(e,t,n){for(var r=/([a-z]+)=("[^"]+"|[^,"]+)(?:,|$)/,i=n||h.hexdigest(""+1234567890*Math.random()),o="",a=null,s="";t.match(r);){var c=t.match(r);switch(t=t.replace(c[0],""),c[2]=c[2].replace(/^"(.+)"$/,"$1"),c[1]){case"realm":o=c[2];break;case"nonce":s=c[2];break;case"qop":c[2];break;case"host":a=c[2]}}var u=e.servtype+"/"+e.domain;null!==a&&(u=u+"/"+a);var l=w(e.authcid+":"+o+":"+this._connection.pass),d=h.hash(l)+":"+s+":"+i,f="AUTHENTICATE:"+u,p="";return p+="charset=utf-8,",p+="username="+this._quote(w(e.authcid))+",",p+="realm="+this._quote(o)+",",p+="nonce="+this._quote(s)+",",p+="nc=00000001,",p+="cnonce="+this._quote(i)+",",p+="digest-uri="+this._quote(u)+",",p+="response="+h.hexdigest(h.hexdigest(d)+":"+s+":00000001:"+i+":auth:"+h.hexdigest(f))+",",p+="qop=auth",this.onChallenge=function(){return""},p},k.SASLOAuthBearer=function(){},k.SASLOAuthBearer.prototype=new k.SASLMechanism("OAUTHBEARER",!0,40),k.SASLOAuthBearer.prototype.test=function(e){return null!==e.pass},k.SASLOAuthBearer.prototype.onChallenge=function(e){var t="n,";return null!==e.authcid&&(t=t+"a="+e.authzid),t+=",",t+="",t+="auth=Bearer ",t+=e.pass,t+="",w(t+="")},k.SASLExternal=function(){},k.SASLExternal.prototype=new k.SASLMechanism("EXTERNAL",!0,10),k.SASLExternal.prototype.onChallenge=function(e){return e.authcid===e.authzid?"":e.authzid},k.SASLXOAuth2=function(){},k.SASLXOAuth2.prototype=new k.SASLMechanism("X-OAUTH2",!0,30),k.SASLXOAuth2.prototype.test=function(e){return null!==e.pass},k.SASLXOAuth2.prototype.onChallenge=function(e){var t="\0";return null!==e.authcid&&(t+=e.authzid),t+="\0",t+=e.pass,w(t)};var O={Strophe:k,$build:D,$iq:A,$msg:function(e){return new k.Builder("message",e)},$pres:R,SHA1:C,MD5:h,b64_hmac_sha1:C.b64_hmac_sha1,b64_sha1:C.b64_sha1,str_hmac_sha1:C.str_hmac_sha1,str_sha1:C.str_sha1},j=O.Strophe,P=O.$build;j.Request=function(e,t,n,r){this.id=++j._requestId,this.xmlData=e,this.data=j.serialize(e),this.origFunc=t,this.func=t,this.rid=n,this.date=NaN,this.sends=r||0,this.abort=!1,this.dead=null,this.age=function(){return this.date?(new Date-this.date)/1e3:0},this.timeDead=function(){return this.dead?(new Date-this.dead)/1e3:0},this.xhr=this._newXHR()},j.Request.prototype={getResponse:function(){var e=null;if(this.xhr.responseXML&&this.xhr.responseXML.documentElement){if("parsererror"===(e=this.xhr.responseXML.documentElement).tagName)throw j.error("invalid response received"),j.error("responseText: "+this.xhr.responseText),j.error("responseXML: "+j.serialize(this.xhr.responseXML)),new Error("parsererror")}else if(this.xhr.responseText){if(j.debug("Got responseText but no responseXML; attempting to parse it with DOMParser..."),!(e=(new DOMParser).parseFromString(this.xhr.responseText,"application/xml").documentElement))throw new Error("Parsing produced null node");if(e.querySelector("parsererror")){j.error("invalid response received: "+e.querySelector("parsererror").textContent),j.error("responseText: "+this.xhr.responseText);var t=new Error;throw t.name=j.ErrorCondition.BAD_FORMAT,t}}return e},_newXHR:function(){var e=null;return window.XMLHttpRequest?(e=new XMLHttpRequest).overrideMimeType&&e.overrideMimeType("text/xml; charset=utf-8"):window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),e.onreadystatechange=this.func.bind(null,this),e}},j.Bosh=function(e){this._conn=e,this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.hold=1,this.wait=60,this.window=5,this.errors=0,this.inactivity=null,this.lastResponseHeaders=null,this._requests=[]},j.Bosh.prototype={strip:null,_buildBody:function(){var e=P("body",{rid:this.rid++,xmlns:j.NS.HTTPBIND});return null!==this.sid&&e.attrs({sid:this.sid}),this._conn.options.keepalive&&this._conn._sessionCachingSupported()&&this._cacheSession(),e},_reset:function(){this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.errors=0,this._conn._sessionCachingSupported()&&window.sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)},_connect:function(e,t,n){this.wait=e||this.wait,this.hold=t||this.hold,this.errors=0;var r=this._buildBody().attrs({to:this._conn.domain,"xml:lang":"en",wait:this.wait,hold:this.hold,content:"text/xml; charset=utf-8",ver:"1.6","xmpp:version":"1.0","xmlns:xmpp":j.NS.BOSH});n&&r.attrs({route:n});var i=this._conn._connect_cb;this._requests.push(new j.Request(r.tree(),this._onRequestStateChange.bind(this,i.bind(this._conn)),r.tree().getAttribute("rid"))),this._throttledRequestHandler()},_attach:function(e,t,n,r,i,o,a){this._conn.jid=e,this.sid=t,this.rid=n,this._conn.connect_callback=r,this._conn.domain=j.getDomainFromJid(this._conn.jid),this._conn.authenticated=!0,this._conn.connected=!0,this.wait=i||this.wait,this.hold=o||this.hold,this.window=a||this.window,this._conn._changeConnectStatus(j.Status.ATTACHED,null)},_restore:function(e,t,n,r,i){var o=JSON.parse(window.sessionStorage.getItem("strophe-bosh-session"));if(!(null!=o&&o.rid&&o.sid&&o.jid&&(null==e||j.getBareJidFromJid(o.jid)===j.getBareJidFromJid(e)||null===j.getNodeFromJid(e)&&j.getDomainFromJid(o.jid)===e))){var a=new Error("_restore: no restoreable session.");throw a.name="StropheSessionError",a}this._conn.restored=!0,this._attach(o.jid,o.sid,o.rid,t,n,r,i)},_cacheSession:function(){this._conn.authenticated?this._conn.jid&&this.rid&&this.sid&&window.sessionStorage.setItem("strophe-bosh-session",JSON.stringify({jid:this._conn.jid,rid:this.rid,sid:this.sid})):window.sessionStorage.removeItem("strophe-bosh-session")},_connect_cb:function(e){var t=e.getAttribute("type");if(null!==t&&"terminate"===t){var n=e.getAttribute("condition");j.error("BOSH-Connection failed: "+n);var r=e.getElementsByTagName("conflict");return null!==n?("remote-stream-error"===n&&r.length>0&&(n="conflict"),this._conn._changeConnectStatus(j.Status.CONNFAIL,n)):this._conn._changeConnectStatus(j.Status.CONNFAIL,"unknown"),this._conn._doDisconnect(n),j.Status.CONNFAIL}this.sid||(this.sid=e.getAttribute("sid"));var i=e.getAttribute("requests");i&&(this.window=parseInt(i,10));var o=e.getAttribute("hold");o&&(this.hold=parseInt(o,10));var a=e.getAttribute("wait");a&&(this.wait=parseInt(a,10));var s=e.getAttribute("inactivity");s&&(this.inactivity=parseInt(s,10))},_disconnect:function(e){this._sendTerminate(e)},_doDisconnect:function(){this.sid=null,this.rid=Math.floor(4294967295*Math.random()),this._conn._sessionCachingSupported()&&window.sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)},_emptyQueue:function(){return 0===this._requests.length},_callProtocolErrorHandlers:function(e){var t=this._getRequestStatus(e),n=this._conn.protocolErrorHandlers.HTTP[t];n&&n.call(this,t)},_hitError:function(e){this.errors++,j.warn("request errored, status: "+e+", number of errors: "+this.errors),this.errors>4&&this._conn._onDisconnectTimeout()},_no_auth_received:function(e){j.warn("Server did not yet offer a supported authentication mechanism. Sending a blank poll request."),e=e?e.bind(this._conn):this._conn._connect_cb.bind(this._conn);var t=this._buildBody();this._requests.push(new j.Request(t.tree(),this._onRequestStateChange.bind(this,e),t.tree().getAttribute("rid"))),this._throttledRequestHandler()},_onDisconnectTimeout:function(){this._abortAllRequests()},_abortAllRequests:function(){for(;this._requests.length>0;){var e=this._requests.pop();e.abort=!0,e.xhr.abort(),e.xhr.onreadystatechange=function(){}}},_onIdle:function(){var e=this._conn._data;if(this._conn.authenticated&&0===this._requests.length&&0===e.length&&!this._conn.disconnecting&&(j.debug("no requests during idle cycle, sending blank request"),e.push(null)),!this._conn.paused){if(this._requests.length<2&&e.length>0){for(var t=this._buildBody(),n=0;n<e.length;n++)null!==e[n]&&("restart"===e[n]?t.attrs({to:this._conn.domain,"xml:lang":"en","xmpp:restart":"true","xmlns:xmpp":j.NS.BOSH}):t.cnode(e[n]).up());delete this._conn._data,this._conn._data=[],this._requests.push(new j.Request(t.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),t.tree().getAttribute("rid"))),this._throttledRequestHandler()}if(this._requests.length>0){var r=this._requests[0].age();null!==this._requests[0].dead&&this._requests[0].timeDead()>Math.floor(j.SECONDARY_TIMEOUT*this.wait)&&this._throttledRequestHandler(),r>Math.floor(j.TIMEOUT*this.wait)&&(j.warn("Request "+this._requests[0].id+" timed out, over "+Math.floor(j.TIMEOUT*this.wait)+" seconds since last activity"),this._throttledRequestHandler())}}},_getRequestStatus:function(e,t){var n;if(4===e.xhr.readyState)try{n=e.xhr.status}catch(e){j.error("Caught an error while retrieving a request's status, reqStatus: "+n)}return void 0===n&&(n="number"==typeof t?t:0),n},_onRequestStateChange:function(e,t){if(j.debug("request id "+t.id+"."+t.sends+" state changed to "+t.xhr.readyState),t.abort)t.abort=!1;else if(4===t.xhr.readyState){var n=this._getRequestStatus(t);if(this.lastResponseHeaders=t.xhr.getAllResponseHeaders(),this.disconnecting&&n>=400)return this._hitError(n),void this._callProtocolErrorHandlers(t);var r=n>0&&n<500,i=t.sends>this._conn.maxRetries;if((r||i)&&(this._removeRequest(t),j.debug("request id "+t.id+" should now be removed")),200===n){var o=this._requests[0]===t;(this._requests[1]===t||o&&this._requests.length>0&&this._requests[0].age()>Math.floor(j.SECONDARY_TIMEOUT*this.wait))&&this._restartRequest(0),this._conn.nextValidRid(Number(t.rid)+1),j.debug("request id "+t.id+"."+t.sends+" got 200"),e(t),this.errors=0}else 0===n||n>=400&&n<600||n>=12e3?(j.error("request id "+t.id+"."+t.sends+" error "+n+" happened"),this._hitError(n),this._callProtocolErrorHandlers(t),n>=400&&n<500&&(this._conn._changeConnectStatus(j.Status.DISCONNECTING,null),this._conn._doDisconnect())):j.error("request id "+t.id+"."+t.sends+" error "+n+" happened");r||i?i&&!this._conn.connected&&this._conn._changeConnectStatus(j.Status.CONNFAIL,"giving-up"):this._throttledRequestHandler()}},_processRequest:function(e){var t=this,n=this._requests[e],r=this._getRequestStatus(n,-1);if(n.sends>this._conn.maxRetries)this._conn._onDisconnectTimeout();else{var i=n.age(),o=!isNaN(i)&&i>Math.floor(j.TIMEOUT*this.wait),a=null!==n.dead&&n.timeDead()>Math.floor(j.SECONDARY_TIMEOUT*this.wait),s=4===n.xhr.readyState&&(r<1||r>=500);if((o||a||s)&&(a&&j.error("Request ".concat(this._requests[e].id," timed out (secondary), restarting")),n.abort=!0,n.xhr.abort(),n.xhr.onreadystatechange=function(){},this._requests[e]=new j.Request(n.xmlData,n.origFunc,n.rid,n.sends),n=this._requests[e]),0===n.xhr.readyState){j.debug("request id "+n.id+"."+n.sends+" posting");try{var c=this._conn.options.contentType||"text/xml; charset=utf-8";n.xhr.open("POST",this._conn.service,!this._conn.options.sync),void 0!==n.xhr.setRequestHeader&&n.xhr.setRequestHeader("Content-Type",c),this._conn.options.withCredentials&&(n.xhr.withCredentials=!0)}catch(e){return j.error("XHR open failed: "+e.toString()),this._conn.connected||this._conn._changeConnectStatus(j.Status.CONNFAIL,"bad-service"),void this._conn.disconnect()}var u=function(){if(n.date=new Date,t._conn.options.customHeaders){var e=t._conn.options.customHeaders;for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.xhr.setRequestHeader(r,e[r])}n.xhr.send(n.data)};if(n.sends>1){var l=1e3*Math.min(Math.floor(j.TIMEOUT*this.wait),Math.pow(n.sends,3));setTimeout((function(){u()}),l)}else u();n.sends++,this._conn.xmlOutput!==j.Connection.prototype.xmlOutput&&(n.xmlData.nodeName===this.strip&&n.xmlData.childNodes.length?this._conn.xmlOutput(n.xmlData.childNodes[0]):this._conn.xmlOutput(n.xmlData)),this._conn.rawOutput!==j.Connection.prototype.rawOutput&&this._conn.rawOutput(n.data)}else j.debug("_processRequest: "+(0===e?"first":"second")+" request has readyState of "+n.xhr.readyState)}},_removeRequest:function(e){j.debug("removing request");for(var t=this._requests.length-1;t>=0;t--)e===this._requests[t]&&this._requests.splice(t,1);e.xhr.onreadystatechange=function(){},this._throttledRequestHandler()},_restartRequest:function(e){var t=this._requests[e];null===t.dead&&(t.dead=new Date),this._processRequest(e)},_reqToData:function(e){try{return e.getResponse()}catch(e){if("parsererror"!==e.message)throw e;this._conn.disconnect("strophe-parsererror")}},_sendTerminate:function(e){j.debug("_sendTerminate was called");var t=this._buildBody().attrs({type:"terminate"});e&&t.cnode(e.tree());var n=new j.Request(t.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),t.tree().getAttribute("rid"));this._requests.push(n),this._throttledRequestHandler()},_send:function(){var e=this;clearTimeout(this._conn._idleTimeout),this._throttledRequestHandler(),this._conn._idleTimeout=setTimeout((function(){return e._conn._onIdle()}),100)},_sendRestart:function(){this._throttledRequestHandler(),clearTimeout(this._conn._idleTimeout)},_throttledRequestHandler:function(){this._requests?j.debug("_throttledRequestHandler called with "+this._requests.length+" requests"):j.debug("_throttledRequestHandler called with undefined requests"),this._requests&&0!==this._requests.length&&(this._requests.length>0&&this._processRequest(0),this._requests.length>1&&Math.abs(this._requests[0].rid-this._requests[1].rid)<this.window&&this._processRequest(1))}};var I=O.Strophe,N=O.$build;return I.Websocket=function(e){this._conn=e,this.strip="wrapper";var t=e.service;if(0!==t.indexOf("ws:")&&0!==t.indexOf("wss:")){var n="";"ws"===e.options.protocol&&"https:"!==window.location.protocol?n+="ws":n+="wss",n+="://"+window.location.host,0!==t.indexOf("/")?n+=window.location.pathname+t:n+=t,e.service=n}},I.Websocket.prototype={_buildStream:function(){return N("open",{xmlns:I.NS.FRAMING,to:this._conn.domain,version:"1.0"})},_check_streamerror:function(e,t){var n;if(0===(n=e.getElementsByTagNameNS?e.getElementsByTagNameNS(I.NS.STREAM,"error"):e.getElementsByTagName("stream:error")).length)return!1;for(var r=n[0],i="",o="",a=0;a<r.childNodes.length;a++){var s=r.childNodes[a];if("urn:ietf:params:xml:ns:xmpp-streams"!==s.getAttribute("xmlns"))break;"text"===s.nodeName?o=s.textContent:i=s.nodeName}var c="WebSocket stream error: ";return c+=i||"unknown",o&&(c+=" - "+o),I.error(c),this._conn._changeConnectStatus(t,i),this._conn._doDisconnect(),!0},_reset:function(){},_connect:function(){this._closeSocket(),this.socket=new WebSocket(this._conn.service,"xmpp"),this.socket.onopen=this._onOpen.bind(this),this.socket.onerror=this._onError.bind(this),this.socket.onclose=this._onClose.bind(this),this.socket.onmessage=this._connect_cb_wrapper.bind(this)},_connect_cb:function(e){if(this._check_streamerror(e,I.Status.CONNFAIL))return I.Status.CONNFAIL},_handleStreamStart:function(e){var t=!1,n=e.getAttribute("xmlns");"string"!=typeof n?t="Missing xmlns in <open />":n!==I.NS.FRAMING&&(t="Wrong xmlns in <open />: "+n);var r=e.getAttribute("version");return"string"!=typeof r?t="Missing version in <open />":"1.0"!==r&&(t="Wrong version in <open />: "+r),!t||(this._conn._changeConnectStatus(I.Status.CONNFAIL,t),this._conn._doDisconnect(),!1)},_connect_cb_wrapper:function(e){if(0===e.data.indexOf("<open ")||0===e.data.indexOf("<?xml")){var t=e.data.replace(/^(<\?.*?\?>\s*)*/,"");if(""===t)return;var n=(new DOMParser).parseFromString(t,"text/xml").documentElement;this._conn.xmlInput(n),this._conn.rawInput(e.data),this._handleStreamStart(n)&&this._connect_cb(n)}else if(0===e.data.indexOf("<close ")){var r=(new DOMParser).parseFromString(e.data,"text/xml").documentElement;this._conn.xmlInput(r),this._conn.rawInput(e.data);var i=r.getAttribute("see-other-uri");if(i){var o=this._conn.service;(o.indexOf("wss:")>=0&&i.indexOf("wss:")>=0||o.indexOf("ws:")>=0)&&(this._conn._changeConnectStatus(I.Status.REDIRECT,"Received see-other-uri, resetting connection"),this._conn.reset(),this._conn.service=i,this._connect())}else this._conn._changeConnectStatus(I.Status.CONNFAIL,"Received closing stream"),this._conn._doDisconnect()}else{var a=this._streamWrap(e.data),s=(new DOMParser).parseFromString(a,"text/xml").documentElement;this.socket.onmessage=this._onMessage.bind(this),this._conn._connect_cb(s,null,e.data)}},_disconnect:function(e){if(this.socket&&this.socket.readyState!==WebSocket.CLOSED){e&&this._conn.send(e);var t=N("close",{xmlns:I.NS.FRAMING});this._conn.xmlOutput(t.tree());var n=I.serialize(t);this._conn.rawOutput(n);try{this.socket.send(n)}catch(e){I.warn("Couldn't send <close /> tag.")}}this._conn._doDisconnect()},_doDisconnect:function(){I.debug("WebSockets _doDisconnect was called"),this._closeSocket()},_streamWrap:function(e){return"<wrapper>"+e+"</wrapper>"},_closeSocket:function(){if(this.socket)try{this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null,this.socket.close()}catch(e){I.debug(e.message)}this.socket=null},_emptyQueue:function(){return!0},_onClose:function(e){this._conn.connected&&!this._conn.disconnecting?(I.error("Websocket closed unexpectedly"),this._conn._doDisconnect()):e&&1006===e.code&&!this._conn.connected&&this.socket?(I.error("Websocket closed unexcectedly"),this._conn._changeConnectStatus(I.Status.CONNFAIL,"The WebSocket connection could not be established or was disconnected."),this._conn._doDisconnect()):I.debug("Websocket closed")},_no_auth_received:function(e){I.error("Server did not offer a supported authentication mechanism"),this._conn._changeConnectStatus(I.Status.CONNFAIL,I.ErrorCondition.NO_AUTH_MECH),e&&e.call(this._conn),this._conn._doDisconnect()},_onDisconnectTimeout:function(){},_abortAllRequests:function(){},_onError:function(e){I.error("Websocket error "+e),this._conn._changeConnectStatus(I.Status.CONNFAIL,"The WebSocket connection could not be established or was disconnected."),this._disconnect()},_onIdle:function(){var e=this._conn._data;if(e.length>0&&!this._conn.paused){for(var t=0;t<e.length;t++)if(null!==e[t]){var n=void 0;n="restart"===e[t]?this._buildStream().tree():e[t];var r=I.serialize(n);this._conn.xmlOutput(n),this._conn.rawOutput(r),this.socket.send(r)}this._conn._data=[]}},_onMessage:function(e){var t,n='<close xmlns="urn:ietf:params:xml:ns:xmpp-framing" />';if(e.data===n)return this._conn.rawInput(n),this._conn.xmlInput(e),void(this._conn.disconnecting||this._conn._doDisconnect());if(0===e.data.search("<open ")){if(t=(new DOMParser).parseFromString(e.data,"text/xml").documentElement,!this._handleStreamStart(t))return}else{var r=this._streamWrap(e.data);t=(new DOMParser).parseFromString(r,"text/xml").documentElement}return this._check_streamerror(t,I.Status.ERROR)?void 0:this._conn.disconnecting&&"presence"===t.firstChild.nodeName&&"unavailable"===t.firstChild.getAttribute("type")?(this._conn.xmlInput(t),void this._conn.rawInput(I.serialize(t))):void this._conn._dataRecv(t,e.data)},_onOpen:function(){I.debug("Websocket open");var e=this._buildStream();this._conn.xmlOutput(e.tree());var t=I.serialize(e);this._conn.rawOutput(t),this.socket.send(t)},_reqToData:function(e){return e},_send:function(){this._conn.flush()},_sendRestart:function(){clearTimeout(this._conn._idleTimeout),this._conn._onIdle.bind(this._conn)()}},e.Strophe=O.Strophe,e.$build=O.$build,e.$iq=O.$iq,e.$msg=O.$msg,e.$pres=O.$pres,O},"object"===s(t)&&void 0!==e?e.exports=a():void 0===(o="function"==typeof(i=a)?i.call(t,n,t,e):i)||(e.exports=o)}).call(this,n(53))},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.AUDIO="audio",e.PRESENTER="presenter",e.VIDEO="video"}(r||(r={}))},function(e,t,n){var r=n(278),i=n(610),o={},a=[],s=r.levels.TRACE;e.exports={addGlobalTransport:function(e){r.addGlobalTransport(e)},removeGlobalTransport:function(e){r.removeGlobalTransport(e)},setGlobalOptions:function(e){r.setGlobalOptions(e)},getLogger:function(e,t,n){var i=new r(s,e,t,n);return e?(o[e]=o[e]||[],o[e].push(i)):a.push(i),i},setLogLevelById:function(e,t){for(var n=t?o[t]||[]:a,r=0;r<n.length;r++)n[r].setLevel(e)},setLogLevel:function(e){s=e;for(var t=0;t<a.length;t++)a[t].setLevel(e);for(var n in o){var r=o[n]||[];for(t=0;t<r.length;t++)r[t].setLevel(e)}},levels:r.levels,LogCollector:i}},function(e,t,n){"use strict";var r=n(305);t.a=new r.a},function(e,t,n){var r=n(27),i=n(73),o=n(58),a=n(59),s=n(74),c=function e(t,n,c){var u,l,d,f,h=t&e.F,p=t&e.G,m=t&e.P,v=t&e.B,g=p?r:t&e.S?r[n]||(r[n]={}):(r[n]||{}).prototype,y=p?i:i[n]||(i[n]={}),_=y.prototype||(y.prototype={});for(u in p&&(c=n),c)d=((l=!h&&g&&void 0!==g[u])?g:c)[u],f=v&&l?s(d,r):m&&"function"==typeof d?s(Function.call,d):d,g&&a(g,u,d,t&e.U),y[u]!=d&&o(y,u,f),m&&_[u]!=d&&(_[u]=d)};r.core=i,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,n){"use strict";var r=n(48),i=Object.getPrototypeOf,o=r.a.slice,a=r.a.flat?function(e){return r.a.flat.call(e)}:function(e){return r.a.concat.apply([],e)},s=n(71),c=n(101),u=n(100),l=n(171),d=u.a.hasOwnProperty,f=d.toString,h=f.call(Object);var p=n(47),m={type:!0,src:!0,nonce:!0,noModule:!0};var v=function(e,t,n){var r,i=(n=n||p.a).createElement("script");if(i.text=e,t)for(r in m)t[r]&&(i[r]=t[r]);n.head.appendChild(i).parentNode.removeChild(i)},g=n(172);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _=/HTML$/i,b=function e(t,n){return new e.fn.init(t,n)};function E(e){var t=!!e&&e.length,n=Object(g.a)(e);return"function"!=typeof e&&!function(e){return null!=e&&e===e.window}(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}b.fn=b.prototype={jquery:"@VERSION",constructor:b,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return b.each(this,e)},map:function(e){return this.pushStack(b.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(b.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(b.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()}},b.extend=b.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"!==y(a)&&"function"!=typeof a&&(a={}),s===c&&(a=this,s--);s<c;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(u&&r&&(b.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||b.isPlainObject(n)?n:{},i=!1,a[t]=b.extend(u,o,r)):void 0!==r&&(a[t]=r));return a},b.extend({expando:"jQuery"+("@VERSION"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==l.a.call(e))&&(!(t=i(e))||"function"==typeof(n=d.call(t,"constructor")&&t.constructor)&&f.call(n)===h)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){v(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(E(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i)return e.textContent;if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=b.text(t);return n},makeArray:function(e,t){var n=t||[];return null!=e&&(E(Object(e))?b.merge(n,"string"==typeof e?[e]:e):s.a.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:c.a.call(t,e,n)},isXMLDoc:function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!_.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,s=[];if(E(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return a(s)},guid:1,support:{}}),"function"==typeof Symbol&&(b.fn[Symbol.iterator]=r.a[Symbol.iterator]),b.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){u.a["[object "+t+"]"]=t.toLowerCase()}));t.a=b},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return T}));var r=n(34),i=n.n(r),o=n(1),a=n(37),s=n(11),c=n(46),u=n(5),l=n(128),d=n.n(l),f=n(308),h=n(72),p=n(173),m=n(309),v=n(310),g=n(102);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E,S=n(4).getLogger(e),C=!1;function w(e){h.a.isBackendInitialized()||h.a.initBackend({callStatsID:e.callStatsID,callStatsSecret:e.callStatsSecret,userName:e.userName,aliasName:e.aliasName,applicationName:e.applicationName,getWiFiStatsMethod:e.getWiFiStatsMethod,confID:e.confID,siteID:e.siteID,configParams:e.configParams})||S.error("CallStats Backend initialization failed bad")}function T(e,t){this.rtpStatsMap=new Map,this.eventEmitter=new i.a,this.xmpp=e,this.options=t||{},this.callStatsIntegrationEnabled=this.options.callStatsID&&this.options.callStatsSecret&&this.options.enableCallStats&&!0!==T.disableThirdPartyRequests,this.callStatsIntegrationEnabled&&(this.callStatsApplicationLogsDisabled=this.options.callStatsApplicationLogsDisabled,u.a.isReactNative()?w(this.options):function(e){C||(d.a.loadScript(e.customScriptUrl||g.a,!0,!0,void 0,(function(){return w(e)})),C=!0)}(this.options),this.options.confID||S.warn('"confID" is not defined')),this.callsStatsInstances=new Map,T.instances.add(this)}T.init=function(e){T.audioLevelsEnabled=!e.disableAudioLevels,"number"==typeof e.pcStatsInterval&&(T.pcStatsInterval=e.pcStatsInterval),"number"==typeof e.audioLevelsInterval&&(T.audioLevelsInterval=e.audioLevelsInterval),"number"==typeof e.longTasksStatsInterval&&(T.longTasksStatsInterval=e.longTasksStatsInterval),T.disableThirdPartyRequests=e.disableThirdPartyRequests},T.audioLevelsEnabled=!1,T.audioLevelsInterval=200,T.pcStatsInterval=1e4,T.disableThirdPartyRequests=!1,T.analytics=f.a,T.analyticsEventEmitter=new i.a,Object.defineProperty(T,"instances",{get:function(){return E||(E=new Set),E}}),T.prototype.startRemoteStats=function(e){this.stopRemoteStats(e);try{var t=new v.a(e,T.audioLevelsInterval,T.pcStatsInterval,this.eventEmitter);t.start(T.audioLevelsEnabled),this.rtpStatsMap.set(e.id,t)}catch(e){S.error("Failed to start collecting remote statistics: ".concat(e))}},T.localStats=[],T.startLocalStats=function(e,t){if(T.audioLevelsEnabled){var n=new p.a(e,T.audioLevelsInterval,t);this.localStats.push(n),n.start()}},T.prototype.addAudioLevelListener=function(e){T.audioLevelsEnabled&&this.eventEmitter.on(c.a,e)},T.prototype.removeAudioLevelListener=function(e){T.audioLevelsEnabled&&this.eventEmitter.removeListener(c.a,e)},T.prototype.addBeforeDisposedListener=function(e){this.eventEmitter.on(c.b,e)},T.prototype.removeBeforeDisposedListener=function(e){this.eventEmitter.removeListener(c.b,e)},T.prototype.addConnectionStatsListener=function(e){this.eventEmitter.on(c.d,e)},T.prototype.removeConnectionStatsListener=function(e){this.eventEmitter.removeListener(c.d,e)},T.prototype.addByteSentStatsListener=function(e){this.eventEmitter.on(c.c,e)},T.prototype.removeByteSentStatsListener=function(e){this.eventEmitter.removeListener(c.c,e)},T.prototype.addLongTasksStatsListener=function(e){this.eventEmitter.on(c.e,e)},T.prototype.attachLongTasksStats=function(e){var t=this;u.a.supportsPerformanceObserver()?(this.performanceObserverStats=new m.a(this.eventEmitter,T.longTasksStatsInterval),e.on(o.CONFERENCE_JOINED,(function(){return t.performanceObserverStats.startObserver()})),e.on(o.CONFERENCE_LEFT,(function(){return t.performanceObserverStats.stopObserver()}))):S.warn("Performance observer for long tasks not supported by browser!")},T.prototype.getLongTasksStats=function(){return this.performanceObserverStats?this.performanceObserverStats.getLongTasksStats():null},T.prototype.removeLongTasksStatsListener=function(e){this.eventEmitter.removeListener(c.e,e)},T.prototype.setSpeakerList=function(e){for(var t=0,n=Array.from(this.rtpStatsMap.values());t<n.length;t++){var r=n[t];r.peerconnection.isP2P||r.setSpeakerList(e)}},T.prototype.dispose=function(){try{this.callsStatsInstances.size||this.eventEmitter.emit(c.b);var e,t=_(this.callsStatsInstances.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;this.stopCallStats(n.tpc)}}catch(e){t.e(e)}finally{t.f()}var r,i=_(this.rtpStatsMap.keys());try{for(i.s();!(r=i.n()).done;){var o=r.value;this._stopRemoteStats(o)}}catch(e){i.e(e)}finally{i.f()}this.eventEmitter&&this.eventEmitter.removeAllListeners()}finally{T.instances.delete(this)}},T.stopLocalStats=function(e){if(T.audioLevelsEnabled)for(var t=0;t<T.localStats.length;t++)if(T.localStats[t].stream===e){T.localStats.splice(t,1)[0].stop();break}},T.prototype._stopRemoteStats=function(e){var t=this.rtpStatsMap.get(e);t&&(t.stop(),this.rtpStatsMap.delete(e))},T.prototype.stopRemoteStats=function(e){this._stopRemoteStats(e.id)},T.prototype.startCallStats=function(e,t){if(this.callStatsIntegrationEnabled)if(this.callsStatsInstances.has(e.id))S.error("CallStats instance for ${tpc} exists already");else{S.info("Starting CallStats for ".concat(e,"..."));var n=new h.a(e,{confID:this.options.confID,remoteUserID:t});this.callsStatsInstances.set(e.id,n)}},T._getAllCallStatsInstances=function(){var e,t=new Set,n=_(T.instances);try{for(n.s();!(e=n.n()).done;){var r,i=_(e.value.callsStatsInstances.values());try{for(i.s();!(r=i.n()).done;){var o=r.value;t.add(o)}}catch(e){i.e(e)}finally{i.f()}}}catch(e){n.e(e)}finally{n.f()}return t},T.prototype.stopCallStats=function(e){var t=this.callsStatsInstances.get(e.id);t&&(1===this.callsStatsInstances.size&&this.eventEmitter.emit(c.b),this.callsStatsInstances.delete(e.id),t.sendTerminateEvent())},T.prototype.isCallstatsEnabled=function(){return this.callStatsIntegrationEnabled},T.prototype.sendConnectionResumeOrHoldEvent=function(e,t){var n=this.callsStatsInstances.get(e.id);n&&n.sendResumeOrHoldEvent(t)},T.prototype.sendIceConnectionFailedEvent=function(e){var t=this.callsStatsInstances.get(e.id);t&&t.sendIceConnectionFailedEvent()},T.prototype.sendMuteEvent=function(e,t,n){var r=e&&this.callsStatsInstances.get(e.id);h.a.sendMuteEvent(t,n,r)},T.prototype.sendScreenSharingEvent=function(e,t){var n,r=_(this.callsStatsInstances.values());try{for(r.s();!(n=r.n()).done;){n.value.sendScreenSharingEvent(e,t)}}catch(e){r.e(e)}finally{r.f()}},T.prototype.sendDominantSpeakerEvent=function(e){var t,n=_(this.callsStatsInstances.values());try{for(n.s();!(t=n.n()).done;){t.value.sendDominantSpeakerEvent()}}catch(e){n.e(e)}finally{n.f()}this.xmpp.sendDominantSpeakerEvent(e)},T.sendActiveDeviceListEvent=function(e){var t=T._getAllCallStatsInstances();if(t.size){var n,r=_(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;h.a.sendActiveDeviceListEvent(e,i)}}catch(e){r.e(e)}finally{r.f()}}else h.a.sendActiveDeviceListEvent(e,null)},T.prototype.associateStreamWithVideoTag=function(e,t,n,r,i,o){var a=this.callsStatsInstances.get(e.id);a&&a.associateStreamWithVideoTag(t,n,r,i,o)},T.sendGetUserMediaFailed=function(e){var t=e instanceof a.a?function(e){var t=new Error;return t.stack=e.stack,t.name=(e.name||"Unknown error")+(e.gum&&e.gum.error&&e.gum.error.name?" - ".concat(e.gum.error.name):""),t.constraintName=e.gum&&e.gum.constraints?JSON.stringify(e.gum.constraints):"",t.message=e.message,t}(e):e,n=T._getAllCallStatsInstances();if(n.size){var r,i=_(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;h.a.sendGetUserMediaFailed(t,o)}}catch(e){i.e(e)}finally{i.f()}}else h.a.sendGetUserMediaFailed(t,null)},T.prototype.sendCreateOfferFailed=function(e,t){var n=this.callsStatsInstances.get(t.id);n&&n.sendCreateOfferFailed(e)},T.prototype.sendCreateAnswerFailed=function(e,t){var n=this.callsStatsInstances.get(t.id);n&&n.sendCreateAnswerFailed(e)},T.prototype.sendSetLocalDescFailed=function(e,t){var n=this.callsStatsInstances.get(t.id);n&&n.sendSetLocalDescFailed(e)},T.prototype.sendSetRemoteDescFailed=function(e,t){var n=this.callsStatsInstances.get(t.id);n&&n.sendSetRemoteDescFailed(e)},T.prototype.sendAddIceCandidateFailed=function(e,t){var n=this.callsStatsInstances.get(t.id);n&&n.sendAddIceCandidateFailed(e)},T.sendLog=function(e){var t,n=new Set,r=_(T.instances);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.callStatsApplicationLogsDisabled)return;i.callsStatsInstances.size&&n.add(i.callsStatsInstances.values().next().value)}}catch(e){r.e(e)}finally{r.f()}if(n.size){var o,a=_(n);try{for(a.s();!(o=a.n()).done;){var s=o.value;h.a.sendApplicationLog(e,s)}}catch(e){a.e(e)}finally{a.f()}}else h.a.sendApplicationLog(e,null)},T.prototype.sendFeedback=function(e,t){return T.analytics.sendEvent(s.n,{rating:e,comment:t}),h.a.sendFeedback(this.options.confID,e,t)},T.LOCAL_JID=n(613).LOCAL_JID,T.reportGlobalError=function(e){e instanceof a.a&&e.gum?T.sendGetUserMediaFailed(e):T.sendLog(e)},T.sendAnalyticsAndLog=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e?(t="object"===y(e)?e:{name:e,properties:n},S.log(JSON.stringify(t)),this.analytics.sendEvent(e,n)):S.warn("No event or event name given.")},T.sendAnalytics=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.analytics.sendEvent(e,t),T.analyticsEventEmitter.emit(o.ANALYTICS_EVENT_RECEIVED,e,t)},T.prototype.addAnalyticsEventListener=function(e){T.analyticsEventEmitter.on(o.ANALYTICS_EVENT_RECEIVED,e)},T.prototype.removeAnalyticsEventListener=function(e){T.analyticsEventEmitter.removeListener(o.ANALYTICS_EVENT_RECEIVED,e)}}).call(this,"/index.js")},function(e,t,n){"use strict";var r;n.r(t),n.d(t,"RTCEvents",(function(){return r})),n.d(t,"CREATE_ANSWER_FAILED",(function(){return i})),n.d(t,"CREATE_OFFER_FAILED",(function(){return o})),n.d(t,"DATA_CHANNEL_OPEN",(function(){return a})),n.d(t,"ENDPOINT_CONN_STATUS_CHANGED",(function(){return s})),n.d(t,"DOMINANT_SPEAKER_CHANGED",(function(){return c})),n.d(t,"LASTN_ENDPOINT_CHANGED",(function(){return u})),n.d(t,"FORWARDED_SOURCES_CHANGED",(function(){return l})),n.d(t,"PERMISSIONS_CHANGED",(function(){return d})),n.d(t,"SENDER_VIDEO_CONSTRAINTS_CHANGED",(function(){return f})),n.d(t,"LASTN_VALUE_CHANGED",(function(){return h})),n.d(t,"LOCAL_TRACK_SSRC_UPDATED",(function(){return p})),n.d(t,"LOCAL_TRACK_MAX_ENABLED_RESOLUTION_CHANGED",(function(){return m})),n.d(t,"TRACK_ATTACHED",(function(){return v})),n.d(t,"REMOTE_TRACK_ADDED",(function(){return g})),n.d(t,"REMOTE_TRACK_MUTE",(function(){return y})),n.d(t,"REMOTE_TRACK_REMOVED",(function(){return _})),n.d(t,"REMOTE_TRACK_UNMUTE",(function(){return b})),n.d(t,"SET_LOCAL_DESCRIPTION_FAILED",(function(){return E})),n.d(t,"SET_REMOTE_DESCRIPTION_FAILED",(function(){return S})),n.d(t,"AUDIO_OUTPUT_DEVICE_CHANGED",(function(){return C})),n.d(t,"DEVICE_LIST_CHANGED",(function(){return w})),n.d(t,"DEVICE_LIST_WILL_CHANGE",(function(){return T})),n.d(t,"DEVICE_LIST_AVAILABLE",(function(){return D})),n.d(t,"ENDPOINT_MESSAGE_RECEIVED",(function(){return A})),n.d(t,"ENDPOINT_STATS_RECEIVED",(function(){return R})),n.d(t,"LOCAL_UFRAG_CHANGED",(function(){return k})),n.d(t,"REMOTE_UFRAG_CHANGED",(function(){return O})),function(e){e.CREATE_ANSWER_FAILED="rtc.create_answer_failed",e.CREATE_OFFER_FAILED="rtc.create_offer_failed",e.DATA_CHANNEL_OPEN="rtc.data_channel_open",e.ENDPOINT_CONN_STATUS_CHANGED="rtc.endpoint_conn_status_changed",e.DOMINANT_SPEAKER_CHANGED="rtc.dominant_speaker_changed",e.LASTN_ENDPOINT_CHANGED="rtc.lastn_endpoint_changed",e.FORWARDED_SOURCES_CHANGED="rtc.forwarded_sources_changed",e.PERMISSIONS_CHANGED="rtc.permissions_changed",e.SENDER_VIDEO_CONSTRAINTS_CHANGED="rtc.sender_video_constraints_changed",e.LASTN_VALUE_CHANGED="rtc.lastn_value_changed",e.LOCAL_TRACK_SSRC_UPDATED="rtc.local_track_ssrc_updated",e.LOCAL_TRACK_MAX_ENABLED_RESOLUTION_CHANGED="rtc.local_track_max_enabled_resolution_changed",e.TRACK_ATTACHED="rtc.track_attached",e.REMOTE_TRACK_ADDED="rtc.remote_track_added",e.REMOTE_TRACK_MUTE="rtc.remote_track_mute",e.REMOTE_TRACK_REMOVED="rtc.remote_track_removed",e.REMOTE_TRACK_UNMUTE="rtc.remote_track_unmute",e.SET_LOCAL_DESCRIPTION_FAILED="rtc.set_local_description_failed",e.SET_REMOTE_DESCRIPTION_FAILED="rtc.set_remote_description_failed",e.AUDIO_OUTPUT_DEVICE_CHANGED="rtc.audio_output_device_changed",e.DEVICE_LIST_CHANGED="rtc.device_list_changed",e.DEVICE_LIST_WILL_CHANGE="rtc.device_list_will_change",e.DEVICE_LIST_AVAILABLE="rtc.device_list_available",e.ENDPOINT_MESSAGE_RECEIVED="rtc.endpoint_message_received",e.ENDPOINT_STATS_RECEIVED="rtc.endpoint_stats_received",e.LOCAL_UFRAG_CHANGED="rtc.local_ufrag_changed",e.REMOTE_UFRAG_CHANGED="rtc.remote_ufrag_changed"}(r||(r={}));var i=r.CREATE_ANSWER_FAILED,o=r.CREATE_OFFER_FAILED,a=r.DATA_CHANNEL_OPEN,s=r.ENDPOINT_CONN_STATUS_CHANGED,c=r.DOMINANT_SPEAKER_CHANGED,u=r.LASTN_ENDPOINT_CHANGED,l=r.FORWARDED_SOURCES_CHANGED,d=r.PERMISSIONS_CHANGED,f=r.SENDER_VIDEO_CONSTRAINTS_CHANGED,h=r.LASTN_VALUE_CHANGED,p=r.LOCAL_TRACK_SSRC_UPDATED,m=r.LOCAL_TRACK_MAX_ENABLED_RESOLUTION_CHANGED,v=r.TRACK_ATTACHED,g=r.REMOTE_TRACK_ADDED,y=r.REMOTE_TRACK_MUTE,_=r.REMOTE_TRACK_REMOVED,b=r.REMOTE_TRACK_UNMUTE,E=r.SET_LOCAL_DESCRIPTION_FAILED,S=r.SET_REMOTE_DESCRIPTION_FAILED,C=r.AUDIO_OUTPUT_DEVICE_CHANGED,w=r.DEVICE_LIST_CHANGED,T=r.DEVICE_LIST_WILL_CHANGE,D=r.DEVICE_LIST_AVAILABLE,A=r.ENDPOINT_MESSAGE_RECEIVED,R=r.ENDPOINT_STATS_RECEIVED,k=r.LOCAL_UFRAG_CHANGED,O=r.REMOTE_UFRAG_CHANGED;t.default=r},function(e,t,n){"use strict";(function(e){var r=n(4),i=n(33),o=n.n(i),a=n(15),s=n(5),c=n(116),u=n.n(c);function l(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=f(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function f(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=Object(r.getLogger)(e),m={filterSpecialChars:function(e){return e?e.replace(/[\\\/\{,\}\+]/g,""):e},iceparams:function(e,t){var n,r,i=null;return(r=m.findLine(e,"a=ice-ufrag:",t))&&(n=m.findLine(e,"a=ice-pwd:",t))&&(i={ufrag:m.parseICEUfrag(r),pwd:m.parseICEPwd(n)}),i},parseICEUfrag:function(e){return e.substring(12)},buildICEUfrag:function(e){return"a=ice-ufrag:".concat(e)},parseICEPwd:function(e){return e.substring(10)},buildICEPwd:function(e){return"a=ice-pwd:".concat(e)},parseMID:function(e){return e.substring(6)},parseMSIDAttribute:function(e){var t=e.find((function(e){return e.indexOf(" msid:")>0}));if(t){var n=t.substring(t.indexOf(" msid:")+6);return m.filterSpecialChars(n)}},parseMLine:function(e){var t={},n=e.substring(2).split(" ");return t.media=n.shift(),t.port=n.shift(),t.proto=n.shift(),""===n[n.length-1]&&n.pop(),t.fmt=n,t},buildMLine:function(e){return"m=".concat(e.media," ").concat(e.port," ").concat(e.proto," ").concat(e.fmt.join(" "))},parseRTPMap:function(e){var t={},n=e.substring(9).split(" ");return t.id=n.shift(),n=n[0].split("/"),t.name=n.shift(),t.clockrate=n.shift(),t.channels=n.length?n.shift():"1",t},parseSCTPMap:function(e){var t=e.substring(10).split(" ");return[t[0],t[1],t.length>2?t[2]:null]},parseSCTPPort:function(e){return e.substring(12)},buildRTPMap:function(e){var t="a=rtpmap:".concat(e.getAttribute("id")," ").concat(e.getAttribute("name"),"/").concat(e.getAttribute("clockrate"));return e.getAttribute("channels")&&"1"!==e.getAttribute("channels")&&(t+="/".concat(e.getAttribute("channels"))),t},parseCrypto:function(e){var t={},n=e.substring(9).split(" ");return t.tag=n.shift(),t["crypto-suite"]=n.shift(),t["key-params"]=n.shift(),n.length&&(t["session-params"]=n.join(" ")),t},parseFingerprint:function(e){var t={},n=e.substring(14).split(" ");return t.hash=n.shift(),t.fingerprint=n.shift(),t},parseFmtp:function(e){var t=[],n=e.split(" ");n.shift(),n=n.join(" ").split(";");for(var r=0;r<n.length;r++){for(var i=n[r].split("=")[0];i.length&&" "===i[0];)i=i.substring(1);var o=n[r].split("=")[1];i&&o?t.push({name:i,value:o}):i&&t.push({name:"",value:i})}return t},parseICECandidate:function(e){var t={},n=e.split(" ");t.foundation=n[0].substring(12),t.component=n[1],t.protocol=n[2].toLowerCase(),t.priority=n[3],t.ip=n[4],t.port=n[5],t.type=n[7],t.generation=0;for(var r=8;r<n.length;r+=2)switch(n[r]){case"raddr":t["rel-addr"]=n[r+1];break;case"rport":t["rel-port"]=n[r+1];break;case"generation":t.generation=n[r+1];break;case"tcptype":t.tcptype=n[r+1];break;default:p.debug('parseICECandidate not translating "'.concat(n[r],'" = "').concat(n[r+1],'"'))}return t.network="1",t.id=Math.random().toString(36).substr(2,10),t},buildICECandidate:function(e){var t=["a=candidate:".concat(e.foundation),e.component,e.protocol,e.priority,e.ip,e.port,"typ",e.type].join(" ");switch(t+=" ",e.type){case"srflx":case"prflx":case"relay":e.hasOwnAttribute("rel-addr")&&e.hasOwnAttribute("rel-port")&&(t+="raddr",t+=" ",t+=e["rel-addr"],t+=" ",t+="rport",t+=" ",t+=e["rel-port"],t+=" ")}return e.hasOwnAttribute("tcptype")&&(t+="tcptype",t+=" ",t+=e.tcptype,t+=" "),t+="generation",t+=" ",t+=e.hasOwnAttribute("generation")?e.generation:"0"},parseSSRC:function(e){for(var t=new Map,n=e.split("\r\n"),r=0;r<n.length;r++)if("a=ssrc:"===n[r].substring(0,7)){var i=n[r].split("a=ssrc:")[1].split(" ")[0];t.get(i)||t.set(i,[]),t.get(i).push(n[r])}return t},parseSourceNameLine:function(e){var t=e.find((function(e){return e.indexOf(" name:")>0}));return null==t?void 0:t.substring(t.indexOf(" name:")+6)},parseRTCPFB:function(e){var t=e.substr(10).split(" "),n={};return n.pt=t.shift(),n.type=t.shift(),n.params=t,n},parseExtmap:function(e){var t=e.substr(9).split(" "),n={};return n.value=t.shift(),-1===n.value.indexOf("/")?n.direction="both":(n.direction=n.value.substr(n.value.indexOf("/")+1),n.value=n.value.substr(0,n.value.indexOf("/"))),n.uri=t.shift(),n.params=t,n},findLine:function(e,t,n){for(var r=e.split("\r\n"),i=0;i<r.length;i++)if(r[i].substring(0,t.length)===t)return r[i];if(!n)return!1;r=n.split("\r\n");for(var o=0;o<r.length;o++)if(r[o].substring(0,t.length)===t)return r[o];return!1},findLines:function(e,t,n){for(var r=e.split("\r\n"),i=[],o=0;o<r.length;o++)r[o].substring(0,t.length)===t&&i.push(r[o]);if(i.length||!n)return i;r=n.split("\r\n");for(var a=0;a<r.length;a++)r[a].substring(0,t.length)===t&&i.push(r[a]);return i},candidateToJingle:function(e){if(0===e.indexOf("candidate:"))e="a=".concat(e);else if("a=candidate:"!==e.substring(0,12))return p.warn("parseCandidate called with a line that is not a candidate line"),p.warn(e),null;"\r\n"===e.substring(e.length-2)&&(e=e.substring(0,e.length-2));var t={},n=e.split(" ");if("typ"!==n[6])return p.warn("did not find typ in the right place"),p.warn(e),null;t.foundation=n[0].substring(12),t.component=n[1],t.protocol=n[2].toLowerCase(),t.priority=n[3],t.ip=n[4],t.port=n[5],t.type=n[7],t.generation="0";for(var r=8;r<n.length;r+=2)switch(n[r]){case"raddr":t["rel-addr"]=n[r+1];break;case"rport":t["rel-port"]=n[r+1];break;case"generation":t.generation=n[r+1];break;case"tcptype":t.tcptype=n[r+1];break;default:p.debug('not translating "'.concat(n[r],'" = "').concat(n[r+1],'"'))}return t.network="1",t.id=Math.random().toString(36).substr(2,10),t},candidateFromJingle:function(e){var t="a=candidate:";t+=e.getAttribute("foundation"),t+=" ",t+=e.getAttribute("component"),t+=" ";var n=e.getAttribute("protocol");switch(s.a.isFirefox()&&"ssltcp"===n.toLowerCase()&&(n="tcp"),t+=n,t+=" ",t+=e.getAttribute("priority"),t+=" ",t+=e.getAttribute("ip"),t+=" ",t+=e.getAttribute("port"),t+=" ",t+="typ",t+=" ".concat(e.getAttribute("type")),t+=" ",e.getAttribute("type")){case"srflx":case"prflx":case"relay":e.getAttribute("rel-addr")&&e.getAttribute("rel-port")&&(t+="raddr",t+=" ",t+=e.getAttribute("rel-addr"),t+=" ",t+="rport",t+=" ",t+=e.getAttribute("rel-port"),t+=" ")}return"tcp"===n.toLowerCase()&&(t+="tcptype",t+=" ",t+=e.getAttribute("tcptype"),t+=" "),t+="generation",t+=" ",t+=e.getAttribute("generation")||"0","".concat(t,"\r\n")},parsePrimaryVideoSsrc:function(e){var t=e.ssrcs.map((function(e){return e.id})).filter((function(e,t,n){return n.indexOf(e)===t})).length,n=e.ssrcGroups&&e.ssrcGroups.length||0;if(!(t>1&&0===n)){var r=null;if(1===t)r=e.ssrcs[0].id;else if(2===t){var i=e.ssrcGroups.find((function(e){return"FID"===e.semantics}));i&&(r=i.ssrcs.split(" ")[0])}else if(t>=3){var o=e.ssrcGroups.find((function(e){return"SIM"===e.semantics}));o&&(r=o.ssrcs.split(" ")[0])}return r}},generateSsrc:function(){return u.a.randomInt(1,4294967295)},getSsrcAttribute:function(e,t,n){for(var r=0;r<e.ssrcs.length;++r){var i=e.ssrcs[r];if(i.id===t&&i.attribute===n)return i.value}},parseGroupSsrcs:function(e){return e.ssrcs.split(" ").map((function(e){return parseInt(e,10)}))},getMedia:function(e,t){return e.media.find((function(e){return e.type===t}))},getUfrag:function(e){var t=e.split("\n").filter((function(e){return e.startsWith("a=ice-ufrag:")}));if(t.length>0)return t[0].substr("a=ice-ufrag:".length)},preferCodec:function(e,t){if(e&&t){var n=e.rtp.filter((function(e){return e.codec&&e.codec.toLowerCase()===t.toLowerCase()})).map((function(e){return e.payload}));if(n){var r,i=e.payloads.toString().split(" ").map((function(e){return parseInt(e,10)})),o=d(n.reverse());try{for(o.s();!(r=o.n()).done;){var a=r.value,s=i.indexOf(a);i.splice(s,1),i.unshift(a)}}catch(e){o.e(e)}finally{o.f()}e.payloads=i.join(" ")}}},stripCodec:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e&&t){var r,i=[],s=[],c=t.toLowerCase()===o.a.H264&&n,u=d(e.rtp);try{for(u.s();!(r=u.n()).done;){var f=r.value;f.codec&&f.codec.toLowerCase()===t.toLowerCase()&&(c?i.push(f.payload):s.push(f.payload))}}catch(e){u.e(e)}finally{u.f()}if(c&&(s=e.fmtp.filter((function(e){return i.indexOf(e.payload)>-1&&e.config.includes("profile-level-id=64")})).map((function(e){return e.payload}))),s.length>0){var h,p=s.map((function(e){return"apt=".concat(e)})),m=e.fmtp.filter((function(e){return-1!==p.indexOf(e.config)}));(h=s).push.apply(h,l(m.map((function(e){return e.payload}))));var v=e.payloads.toString().split(" ").map(Number),g=v.filter((function(e){return-1===s.indexOf(e)}));0===g.length?(e.port=0,e.direction=a.a.INACTIVE,e.payloads="*"):e.payloads=g.join(" "),e.rtp=e.rtp.filter((function(e){return-1!==g.indexOf(e.payload)})),e.fmtp=e.fmtp.filter((function(e){return-1!==g.indexOf(e.payload)})),e.rtcpFb&&(e.rtcpFb=e.rtcpFb.filter((function(e){return-1!==g.indexOf(e.payload)})))}}}};t.a=m}).call(this,"/index.js")},function(e,t,n){"use strict";var r;n.d(t,"t",(function(){return i})),n.d(t,"u",(function(){return o})),n.d(t,"v",(function(){return a})),n.d(t,"w",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return p})),n.d(t,"h",(function(){return m})),n.d(t,"i",(function(){return v})),n.d(t,"j",(function(){return g})),n.d(t,"k",(function(){return y})),n.d(t,"l",(function(){return _})),n.d(t,"m",(function(){return b})),n.d(t,"n",(function(){return E})),n.d(t,"o",(function(){return S})),n.d(t,"p",(function(){return C})),n.d(t,"q",(function(){return w})),n.d(t,"r",(function(){return T})),n.d(t,"s",(function(){return D})),n.d(t,"z",(function(){return A})),n.d(t,"B",(function(){return R})),n.d(t,"A",(function(){return k})),n.d(t,"C",(function(){return O})),n.d(t,"D",(function(){return j})),n.d(t,"E",(function(){return P})),n.d(t,"I",(function(){return I})),n.d(t,"L",(function(){return N})),n.d(t,"F",(function(){return M})),n.d(t,"G",(function(){return x})),n.d(t,"H",(function(){return L})),n.d(t,"J",(function(){return F})),n.d(t,"K",(function(){return B})),n.d(t,"M",(function(){return U})),n.d(t,"x",(function(){return V})),n.d(t,"y",(function(){return H})),n.d(t,"N",(function(){return G})),function(e){e.TYPE_OPERATIONAL="operational",e.TYPE_PAGE="page",e.TYPE_TRACK="track",e.TYPE_UI="ui",e.ACTION_JINGLE_RESTART="restart",e.ACTION_JINGLE_SA_TIMEOUT="session-accept.timeout",e.ACTION_JINGLE_SI_RECEIVED="session-initiate.received",e.ACTION_JINGLE_SI_TIMEOUT="session-initiate.timeout",e.ACTION_JINGLE_TERMINATE="terminate",e.ACTION_JINGLE_TR_RECEIVED="transport-replace.received",e.ACTION_JINGLE_TR_SUCCESS="transport-replace.success",e.ACTION_P2P_DECLINED="decline",e.ACTION_P2P_ESTABLISHED="established",e.ACTION_P2P_FAILED="failed",e.ACTION_P2P_SWITCH_TO_JVB="switch.to.jvb",e.AVAILABLE_DEVICE="available.device",e.CONNECTION_DISCONNECTED="connection.disconnected",e.FEEDBACK="feedback",e.ICE_DURATION="ice.duration",e.ICE_ESTABLISHMENT_DURATION_DIFF="ice.establishment.duration.diff",e.ICE_STATE_CHANGED="ice.state.changed",e.NO_BYTES_SENT="track.no-bytes-sent",e.TRACK_UNMUTED="track.unmuted"}(r||(r={}));var i=r.TYPE_OPERATIONAL,o=r.TYPE_PAGE,a=r.TYPE_TRACK,s=r.TYPE_UI,c=r.ACTION_JINGLE_RESTART,u=r.ACTION_JINGLE_SA_TIMEOUT,l=r.ACTION_JINGLE_SI_RECEIVED,d=r.ACTION_JINGLE_SI_TIMEOUT,f=r.ACTION_JINGLE_TERMINATE,h=r.ACTION_JINGLE_TR_RECEIVED,p=r.ACTION_JINGLE_TR_SUCCESS,m=r.ACTION_P2P_DECLINED,v=r.ACTION_P2P_ESTABLISHED,g=r.ACTION_P2P_FAILED,y=r.ACTION_P2P_SWITCH_TO_JVB,_=r.AVAILABLE_DEVICE,b=r.CONNECTION_DISCONNECTED,E=r.FEEDBACK,S=r.ICE_DURATION,C=r.ICE_ESTABLISHMENT_DURATION_DIFF,w=r.ICE_STATE_CHANGED,T=r.NO_BYTES_SENT,D=r.TRACK_UNMUTED,A=function(){return{action:"bridge.down",actionSubject:"bridge.down",type:i}},R=function(e,t,n){return{type:r.TYPE_OPERATIONAL,action:"connection.failed",attributes:Object.assign({error_type:e,error_message:t},n)}},k=function(e,t){return{action:e,attributes:t,source:"conference",type:r.TYPE_OPERATIONAL}},O=function(e,t){return{action:"connection.stage.reached",actionSubject:e,attributes:t,source:"connection.stage.reached",type:r.TYPE_OPERATIONAL}},j=function(){return{action:"focus.left",actionSubject:"focus.left",type:r.TYPE_OPERATIONAL}},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:r.TYPE_OPERATIONAL,source:"get.user.media",action:e,attributes:t}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:r.TYPE_OPERATIONAL,source:"peer.conn.status",action:"duration",attributes:e}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:r.TYPE_OPERATIONAL,source:"track.streaming.status",action:"duration",attributes:e}},M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:r.TYPE_OPERATIONAL,action:e,source:"jingle",attributes:t}},x=function(e,t){return{attributes:{media_type:e,value:t},action:"track.no.data.from.source",type:r.TYPE_OPERATIONAL}},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:r.TYPE_OPERATIONAL,action:e,source:"p2p",attributes:t}},F=function(e){return{type:r.TYPE_OPERATIONAL,action:"remotely.muted",mediaType:e}},B=function(e){return{type:r.TYPE_OPERATIONAL,action:"rtp.stats",attributes:e}},U=function(e){return{type:r.TYPE_OPERATIONAL,action:"transport.stats",attributes:e}},V=function(e,t,n){return{type:r.TYPE_OPERATIONAL,action:"audio.output.problem",attributes:{userID:e,localAudioLevels:t,remoteAudioLevels:n}}},H=function(e,t){return{type:r.TYPE_OPERATIONAL,action:"bridge-channel.error",attributes:{code:e,reason:t}}},G=function(e){return O("ttfm",e)}},function(e,t,n){"use strict";var r=n(4),i=n(5);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=Object(r.getLogger)("FeatureFlags"),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"init",value:function(e){var t;this._sourceNameSignaling=Boolean(e.sourceNameSignaling),this._sendMultipleVideoStreams=Boolean(e.sendMultipleVideoStreams),this._usesUnifiedPlan=i.a.supportsUnifiedPlan()&&(!i.a.isChromiumBased()||null===(t=e.enableUnifiedOnChrome)||void 0===t||t),a.info("Source name signaling: ".concat(this._sourceNameSignaling,",")+" Send multiple video streams: ".concat(this._sendMultipleVideoStreams,",")+" uses Unified plan: ".concat(this._usesUnifiedPlan))}},{key:"isMultiStreamSupportEnabled",value:function(){return this._sourceNameSignaling&&this._sendMultipleVideoStreams&&this._usesUnifiedPlan}},{key:"isSourceNameSignalingEnabled",value:function(){return this._sourceNameSignaling}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=new s},function(e,t,n){var r=n(14),i=n(266);n(603);var o={},a={},s={};function c(e,n){var c=s[e];return c||((c=(c=function(e,n){var r=a[e];if(!r){if(!(r=(r=o[e])?r():n?t.aO_.load(e):i(e)))throw Error("Component not found: "+e);a[e]=r}return r}(e,n)).Component||c)._d_||(c=r(c,c.renderer)),c.prototype.e_=e,s[e]=c,c)}t.r=function(e,t){return o[e]=t,delete a[e],delete s[e],e},t._T_=function(e,t,n){return new(c(e,n))(t)}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(598),o=n(599),a=n(99);e.exports=function(e,t){if(e._d_)return e;var n,s=function(){},c=r(e);if("function"==c)n=e.prototype;else{if("object"!=c)throw TypeError();n=e}function u(e){o.call(this,e)}function l(e){i.call(this,e)}return s.prototype=n,n._d_||a(s,o),n=u.prototype=s.prototype,u._d_=!0,a(l,i),n._i_=l,n._t_=t,u}},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.INACTIVE="inactive",e.RECVONLY="recvonly",e.SENDONLY="sendonly",e.SENDRECV="sendrecv"}(r||(r={}))},function(e,t,n){e.exports=n(585)},function(e,t,n){var r=n(85),i=r.I_,o=n(167),a=o.u_,s=n(13),c=n(268),u=!0===r.aR_,l=n(607),d=n(608);function f(e,t){return"#"===e[0]?e.substring(1):t.id+"-"+t._Q_(e)}function h(e){e.isSync()||e.global.$wa||(e.on("beginAsync",p),e.on("beginDetachedAsync",m),e.global.$wa=!0)}function p(e){var t=e.parentOut,n=e.out,r=t.h_;void 0!==r&&(n.h_=new o(n,r)),n.c(t.m_,t.o_,t.aQ_)}function m(e){var t=e.out;p(e),t.on("beginAsync",p),t.on("beginDetachedAsync",m)}function v(e,t,n){var r=n&&n.onInput,o=t.e_,p=!0===t.c_,m=!0===t.d_,v=n&&p;return function(t,g){h(g);var y,_,b,E=a(g),S=E.k_,C=S._w_,w=void 0!==C,T=E.p_,D=g.m_,A=D&&D.id,R=g.o_;if(C?(y=C.id,_=!0,S._w_=null):T?(b=g.aQ_,y=null!=R?f(R.toString(),T):T._R_()):y=S._R_(),u)t=(C=s._T_(n,y,t,g,o,b,A)).ab_;else{if(!C){if(w&&(C=i[y])&&C.e_!==o&&(C.destroy(),C=void 0),C)_=!0;else if(_=!1,C=s._T_(o,y),!0===v){v=!1;var k="function"==typeof n?n.prototype:n;c(k,C.constructor.prototype)}if(C.___=!0,void 0!==b&&C._A_(b,A),!1===_&&C._C_(t,g),t=C._m_(t,r,g),!0===_&&(!1===C._p_||!1===C.shouldUpdate(t,C.P_)))return g.aS_(C),S._Z_[y]=!0,void C.O_()}C.Y_=g.global,C._D_(g)}var O=l(E,C,R,D,p,m);O._L_=_,e(t,g,O,C,C._y_),d(g,O),E.p_=T}}e.exports=v,v.ay_=f,v.aP_=h},function(e,t,n){"use strict";var r;n.r(t),n.d(t,"VideoType",(function(){return r})),function(e){e.CAMERA="camera",e.DESKTOP="desktop"}(r||(r={}))},function(e,t,n){"use strict";var r=n(214).bp_;e.exports=function(e,t,n,i,o,a,s){return new r(e,t,n,i,o,a,s)}},function(e,t,n){"use strict";e.exports=function(e){var t=0;return function(){return e+t++}}},function(e,t,n){"use strict";(function(e){var r=n(4),i=n(34),o=n.n(i),a=n(80),s=n.n(a),c=n(37),u=n(26),l=n(118),d=n.n(l),f=n(9),h=n(178),p=n.n(h),m=n(18),v=n(11),g=n(5),y=n(10),_=n(8),b=n(22),E=n.n(b),S=n(35),C=n(70);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var i=k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R(this,n)}}function R(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},j=Object(r.getLogger)(e);g.a.usesAdapter()&&n(690);var P,I=new o.a,N={video:{height:{ideal:720,max:720,min:180},width:{ideal:1280,max:1280,min:320}}},M="default",x=!1,L=!1,F=!1,B=!1,U=!1,V=null,H=document.createElement("audio"),G=void 0!==H.setSinkId,J=[];function z(){}function W(e,t){var n=Boolean(t)&&t.getAudioTracks().length>0,r=Boolean(t)&&t.getVideoTracks().length>0,i={};-1!==e.indexOf("video")&&(i.video=r),-1!==e.indexOf("audio")&&(i.audio=n),I.emit(f.default.PERMISSIONS_CHANGED,i)}function K(e){var t=e.filter((function(e){return"audioinput"===e.kind})).length,n=e.filter((function(e){return"audiooutput"===e.kind})).length,r=e.filter((function(e){return"videoinput"===e.kind})).length,i=e.filter((function(e){return"videooutput"===e.kind})).length;e.forEach((function(e){var o={audio_input_device_count:t,audio_output_device_count:n,video_input_device_count:r,video_output_device_count:i,device_id:e.deviceId,device_group_id:e.groupId,device_kind:e.kind,device_label:e.label};_.a.sendAnalytics(v.l,o)}))}function q(e){(function(e){return e.length!==J.length||e.map(t).sort().join("")!==J.map(t).sort().join("");function t(e){return JSON.stringify({kind:e.kind,deviceId:e.deviceId,groupId:e.groupId,label:e.label,facing:e.facing})}})(e)&&(J=e.slice(0),j.info("list of media devices has changed:",J),K(J),I.emit(f.default.DEVICE_LIST_WILL_CHANGE,J),I.emit(f.default.DEVICE_LIST_CHANGED,J))}var $=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}(o,e);var t,n,r,i=A(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,I)}return t=o,(n=[{key:"init",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"boolean"==typeof n.disableAEC&&(F=n.disableAEC,j.info("Disable AEC: ".concat(F))),"boolean"==typeof n.disableNS&&(B=n.disableNS,j.info("Disable NS: ".concat(B))),"boolean"==typeof n.disableAP&&(L=n.disableAP,j.info("Disable AP: ".concat(L))),"boolean"==typeof n.disableAGC&&(U=n.disableAGC,j.info("Disable AGC: ".concat(U))),"boolean"==typeof(null===(e=n.audioQuality)||void 0===e?void 0:e.stereo)&&(V=n.audioQuality.stereo,j.info("Stereo: ".concat(V))),window.clearInterval(P),P=void 0,g.a.isReactNative()?(this.RTCPeerConnectionType=RTCPeerConnection,this.attachMediaStream=void 0,this.getStreamID=function(e){var t=e.id;return"number"==typeof t?t:y.a.filterSpecialChars(t)},this.getTrackID=function(e){return e.id}):(this.RTCPeerConnectionType=RTCPeerConnection,this.attachMediaStream=X((function(e,t){e&&(e.srcObject=t)})),this.getStreamID=function(e){return e.id},this.getTrackID=function(e){return e.id}),this.pcConstraints=g.a.isChromiumBased()||g.a.isReactNative()?{optional:[{googScreencastMinBitrate:100},{googCpuOveruseDetection:!0}]}:{},C.b.init(n),this.isDeviceListAvailable()&&this.enumerateDevices((function(e){J=e.slice(0),j.debug("Available devices: ",J),K(J),I.emit(f.default.DEVICE_LIST_AVAILABLE,J),g.a.supportsDeviceChangeEvent()?navigator.mediaDevices.addEventListener("devicechange",(function(){return t.enumerateDevices(z)})):P=window.setInterval((function(){return t.enumerateDevices(z)}),3e3)}))}},{key:"enumerateDevices",value:function(e){navigator.mediaDevices.enumerateDevices().then((function(t){q(t),e(t)})).catch((function(t){j.warn("Failed to  enumerate devices. ".concat(t)),q([]),e([])}))}},{key:"_getUserMedia",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise((function(r,i){var o,a=!1;"number"==typeof n&&!isNaN(n)&&n>0&&(o=setTimeout((function(){a=!0,o=void 0,i(new c.a(u.TIMEOUT))}),n)),navigator.mediaDevices.getUserMedia(t).then((function(t){j.log("onUserMediaSuccess"),W(e,t),a||(void 0!==o&&clearTimeout(o),r(t))})).catch((function(n){j.warn("Failed to get access to local media. ".concat(n," ").concat(JSON.stringify(t)));var r=new c.a(n,t,e);a||(void 0!==o&&clearTimeout(o),i(r)),r.name===u.PERMISSION_DENIED&&W(e,void 0)}))}))}},{key:"_getDesktopMedia",value:function(){return C.b.isSupported()?new Promise((function(e,t){C.b.obtainStream((function(t){e(t)}),(function(e){t(e)}))})):Promise.reject(new Error("Desktop sharing is not supported!"))}},{key:"_getMissingTracks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=[],r=e.includes("audio"),i=t&&t.getAudioTracks().length>0;r&&!i&&n.push("audio");var o=e.includes("video"),a=t&&t.getVideoTracks().length>0;return o&&!a&&n.push("video"),n}},{key:"obtainAudioAndVideoPermissions",value:function(e){var t=this,n=e.timeout,r=O(e,["timeout"]),i=[],o=function(){if(-1===(r.devices||[]).indexOf("desktop"))return Promise.resolve();var e=r.desktopSharingSourceDevice;if(e){var t=J&&J.find((function(t){return"videoinput"===t.kind&&(t.deviceId===e||t.label===e)}));if(!t)return Promise.reject(new c.a({name:"ConstraintNotSatisfiedError"},{},[e]));var i={video:{deviceId:t.deviceId}};return this._getUserMedia(["video"],i,n).then((function(e){return{sourceType:"device",stream:e}}))}return this._getDesktopMedia()}.bind(this),a=function(){var e=(r.devices||["audio","video"]).filter((function(e){return"audio"===e||"video"===e}));if(!e.length)return Promise.resolve();var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s()(t.constraints||N);if(e.indexOf("video")>=0){if(p.a[t.resolution]){var r=p.a[t.resolution];n.video.height={ideal:r.height},n.video.width={ideal:r.width}}if(n.video||(n.video={}),g.a.isWebKitBased()&&(n.video.height&&n.video.height.ideal?n.video.height={ideal:n.video.height.ideal}:j.warn("Ideal camera height missing, camera may not start properly"),n.video.width&&n.video.width.ideal?n.video.width={ideal:n.video.width.ideal}:j.warn("Ideal camera width missing, camera may not start properly")),t.cameraDeviceId)n.video.deviceId=t.cameraDeviceId;else{var i=t.facingMode||d.a.USER;n.video.facingMode=i}}else n.video=!1;return e.indexOf("audio")>=0?(n.audio&&"boolean"!=typeof n.audio||(n.audio={}),n.audio={autoGainControl:!U&&!L,deviceId:t.micDeviceId,echoCancellation:!F&&!L,noiseSuppression:!B&&!L},V&&Object.assign(n.audio,{channelCount:2})):n.audio=!1,n}(e,r);return j.info("Got media constraints: ",JSON.stringify(t)),this._getUserMedia(e,t,n)}.bind(this);return o().then((function(e){if(e){var t=e.stream,n=e.sourceId,r=e.sourceType,o=t.getAudioTracks();if(o.length){var a=new MediaStream(o);i.push({stream:a,sourceId:n,sourceType:r,track:a.getAudioTracks()[0]})}var s=t.getVideoTracks();if(s.length){var c=new MediaStream(s);i.push({stream:c,sourceId:n,sourceType:r,track:c.getVideoTracks()[0],videoType:m.VideoType.DESKTOP})}}})).then(a).then((function(e){if(e){var t=e.getAudioTracks();if(t.length){var n=new MediaStream(t);i.push({stream:n,track:n.getAudioTracks()[0],effects:r.effects})}var o=e.getVideoTracks();if(o.length){var a=new MediaStream(o);i.push({stream:a,track:a.getVideoTracks()[0],videoType:m.VideoType.CAMERA,effects:r.effects})}}})).then((function(){return i})).catch((function(e){return i.forEach((function(e){var n=e.stream;t.stopMediaStream(n)})),Promise.reject(e)}))}},{key:"isDeviceListAvailable",value:function(){return Boolean(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)}},{key:"isDeviceChangeAvailable",value:function(e){return"output"===e||"audiooutput"===e?G:"audioinput"!==e&&"input"!==e||!g.a.isIosBrowser()}},{key:"stopMediaStream",value:function(e){e&&(e.getTracks().forEach((function(e){e.stop&&e.stop()})),e.stop&&e.stop(),e.release&&e.release())}},{key:"isDesktopSharingEnabled",value:function(){return C.b.isSupported()}},{key:"setAudioOutputDevice",value:function(e){return this.isDeviceChangeAvailable("output")?H.setSinkId(e).then((function(){M=e,x=!0,j.log("Audio output device set to ".concat(e)),I.emit(f.default.AUDIO_OUTPUT_DEVICE_CHANGED,e)})):Promise.reject(new Error("Audio output device change is not supported"))}},{key:"setDesktopSharingFrameRate",value:function(e){C.b.setDesktopSharingFrameRate(e)}},{key:"getAudioOutputDevice",value:function(){return M}},{key:"getCurrentlyAvailableMediaDevices",value:function(){return J}},{key:"arePermissionsGrantedForAvailableDevices",value:function(){return J.some((function(e){return Boolean(e.label)}))}},{key:"getEventDataForActiveDevice",value:function(e){var t=[],n={deviceId:e.deviceId,kind:e.kind,label:e.label,groupId:e.groupId};return t.push(n),{deviceList:t}}},{key:"setSuspendVideo",value:function(e,t){e.optional||(e.optional=[]),e.optional=e.optional.filter((function(e){return!e.hasOwnProperty("googSuspendBelowMinBitrate")})),t&&e.optional.push({googSuspendBelowMinBitrate:"true"})}}])&&T(t.prototype,n),r&&T(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(S.a));function X(e){return function(t,n){var r=e.apply($,arguments);return n&&$.isDeviceChangeAvailable("output")&&n.getAudioTracks&&n.getAudioTracks().length&&x&&t.setSinkId($.getAudioOutputDevice()).catch((function(e){var n=new c.a(e,null,["audiooutput"]);E.a.callUnhandledRejectionHandler({promise:this,reason:n}),j.warn("Failed to set audio output device for the element. Default audio output device will be used instead",t,n)})),r}}t.a=$}).call(this,"/index.js")},function(e,t){var n=[],r=window.onerror;var i=window.onunhandledrejection;window.onerror=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.forEach((function(e){return e.apply(void 0,t)})),r&&r.apply(void 0,t)},window.onunhandledrejection=function(e){n.forEach((function(t){return t(null,null,null,null,e.reason)})),i&&i(e)};var o={addHandler:function(e){n.push(e)},callErrorHandler:function(e){var t=window.onerror;t&&t(null,null,null,null,e)},callUnhandledRejectionHandler:function(e){var t=window.onunhandledrejection;t&&t(e)}};e.exports=o},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return N}));var r=n(4),i=n(1),o=n(133),a=n.n(o),s=n(3),c=n(9),u=n(5),l=n(12),d=n(8),f=n(22),h=n.n(f),p=n(35),m=n(56),v=n(336),g=n(337),y=n(21),_=n(338);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var i=k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return R(e)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=Object(r.getLogger)(e),j=0,P=0;function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){var t=e.sourceId,n=e.sourceType,r=e.stream,i=e.track,o=e.videoType,a=e.effects,s=i.getSettings(),c=s.deviceId,u=s.facingMode;return P=Object(m.d)(P),new g.a({deviceId:c,facingMode:u,mediaType:i.kind,rtcId:P,sourceId:t,sourceType:n,stream:r,track:i,videoType:o||null,effects:a})}))}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(f,e);var t,n,r,o=D(f);function f(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return C(this,f),(t=o.call(this)).conference=e,t.peerConnections=new Map,t.localTracks=[],t.options=n,t._channel=null,t._lastN=void 0,t._lastNEndpoints=null,t._forwardedSources=null,t._maxFrameHeight=void 0,t._selectedEndpoints=null,t._lastNChangeListener=t._onLastNChanged.bind(R(t)),t._forwardedSourcesChangeListener=t._onForwardedSourcesChanged.bind(R(t)),t._onDeviceListChanged=t._onDeviceListChanged.bind(R(t)),t._updateAudioOutputForAudioTracks=t._updateAudioOutputForAudioTracks.bind(R(t)),t._videoType=a.a.NONE,y.a.isDeviceChangeAvailable("output")&&(y.a.addListener(c.default.AUDIO_OUTPUT_DEVICE_CHANGED,t._updateAudioOutputForAudioTracks),y.a.addListener(c.default.DEVICE_LIST_CHANGED,t._onDeviceListChanged)),t}return t=f,r=[{key:"createLocalTracks",value:function(e){return I(e)}},{key:"obtainAudioAndVideoPermissions",value:function(e){return y.a.obtainAudioAndVideoPermissions(e).then((function(e){return I(e)}))}},{key:"addListener",value:function(e,t){y.a.addListener(e,t)}},{key:"removeListener",value:function(e,t){y.a.removeListener(e,t)}},{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.options=e,y.a.init(this.options)}},{key:"attachMediaStream",value:function(e,t){return y.a.attachMediaStream(e,t)}},{key:"getStreamID",value:function(e){return y.a.getStreamID(e)}},{key:"getTrackID",value:function(e){return y.a.getTrackID(e)}},{key:"isDeviceListAvailable",value:function(){return y.a.isDeviceListAvailable()}},{key:"isDeviceChangeAvailable",value:function(e){return y.a.isDeviceChangeAvailable(e)}},{key:"isWebRtcSupported",value:function(){return u.a.isSupported()}},{key:"getAudioOutputDevice",value:function(){return y.a.getAudioOutputDevice()}},{key:"getCurrentlyAvailableMediaDevices",value:function(){return y.a.getCurrentlyAvailableMediaDevices()}},{key:"arePermissionsGrantedForAvailableDevices",value:function(){return y.a.arePermissionsGrantedForAvailableDevices()}},{key:"getEventDataForActiveDevice",value:function(e){return y.a.getEventDataForActiveDevice(e)}},{key:"setAudioOutputDevice",value:function(e){return y.a.setAudioOutputDevice(e)}},{key:"isUserStream",value:function(e){return f.isUserStreamById(y.a.getStreamID(e))}},{key:"isUserStreamById",value:function(e){return e&&"mixedmslabel"!==e&&"default"!==e}},{key:"enumerateDevices",value:function(e){y.a.enumerateDevices(e)}},{key:"stopMediaStream",value:function(e){y.a.stopMediaStream(e)}},{key:"isDesktopSharingEnabled",value:function(){return y.a.isDesktopSharingEnabled()}}],(n=[{key:"destroy",value:function(){y.a.removeListener(c.default.AUDIO_OUTPUT_DEVICE_CHANGED,this._updateAudioOutputForAudioTracks),y.a.removeListener(c.default.DEVICE_LIST_CHANGED,this._onDeviceListChanged),this._channelOpenListener&&this.removeListener(c.default.DATA_CHANNEL_OPEN,this._channelOpenListener)}},{key:"initializeBridgeChannel",value:function(e,t){var n=this;this._channel=new v.a(e,t,this.eventEmitter),this._channelOpenListener=function(){var e=function(e,t,n){h.a.callErrorHandler(e),O.error("Cannot send ".concat(t,"(").concat(JSON.stringify(n),") endpoint message"),e)};if(n._receiverVideoConstraints)try{n._channel.sendNewReceiverVideoConstraintsMessage(n._receiverVideoConstraints)}catch(t){e(t,"ReceiverVideoConstraints",n._receiverVideoConstraints)}if(n._selectedEndpoints)try{n._channel.sendSelectedEndpointsMessage(n._selectedEndpoints)}catch(t){e(t,"SelectedEndpointsChangedEvent",n._selectedEndpoints)}if(void 0!==n._maxFrameHeight)try{n._channel.sendReceiverVideoConstraintMessage(n._maxFrameHeight)}catch(t){e(t,"ReceiverVideoConstraint",n._maxFrameHeight)}if(void 0!==n._lastN&&-1!==n._lastN)try{n._channel.sendSetLastNMessage(n._lastN)}catch(t){e(t,"LastNChangedEvent",n._lastN)}if(!l.a.isSourceNameSignalingEnabled())try{n._channel.sendVideoTypeMessage(n._videoType)}catch(t){e(t,"VideoTypeMessage",n._videoType)}},this.addListener(c.default.DATA_CHANNEL_OPEN,this._channelOpenListener),this.addListener(c.default.LASTN_ENDPOINT_CHANGED,this._lastNChangeListener),l.a.isSourceNameSignalingEnabled()&&this.addListener(c.default.FORWARDED_SOURCES_CHANGED,this._forwardedSourcesChangeListener)}},{key:"_onDeviceListChanged",value:function(){this._updateAudioOutputForAudioTracks(y.a.getAudioOutputDevice())}},{key:"_onLastNChanged",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this._lastNEndpoints||[],r=[],o=[];this._lastNEndpoints=t,r=n.filter((function(t){return!e.isInLastN(t)})),o=t.filter((function(e){return-1===n.indexOf(e)})),this.conference.eventEmitter.emit(i.LAST_N_ENDPOINTS_CHANGED,r,o)}},{key:"_onForwardedSourcesChanged",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this._forwardedSources||[],r=[],o=[];this._forwardedSources=t,r=n.filter((function(t){return!e.isInForwardedSources(t)})),o=t.filter((function(e){return-1===n.indexOf(e)})),this.conference.eventEmitter.emit(i.FORWARDED_SOURCES_CHANGED,r,o,Date.now())}},{key:"onCallEnded",value:function(){this._channel&&(this._channel&&"websocket"===this._channel.mode&&this._channel.close(),this._channel=null)}},{key:"setDesktopSharingFrameRate",value:function(e){y.a.setDesktopSharingFrameRate(e)}},{key:"setNewReceiverVideoConstraints",value:function(e){this._receiverVideoConstraints=e,this._channel&&this._channel.isOpen()&&this._channel.sendNewReceiverVideoConstraintsMessage(e)}},{key:"setReceiverVideoConstraint",value:function(e){this._maxFrameHeight=e,this._channel&&this._channel.isOpen()&&this._channel.sendReceiverVideoConstraintMessage(e)}},{key:"setVideoType",value:function(e){this._videoType!==e&&(this._videoType=e,this._channel&&this._channel.isOpen()&&this._channel.sendVideoTypeMessage(e))}},{key:"sendSourceVideoType",value:function(e,t){this._channel&&this._channel.isOpen()&&this._channel.sendSourceVideoTypeMessage(e,t)}},{key:"selectEndpoints",value:function(e){this._selectedEndpoints=e,this._channel&&this._channel.isOpen()&&this._channel.sendSelectedEndpointsMessage(e)}},{key:"createPeerConnection",value:function(e,t,n,r){var i=JSON.parse(JSON.stringify(y.a.pcConstraints));void 0!==r.abtestSuspendVideo&&(y.a.setSuspendVideo(i,r.abtestSuspendVideo),d.a.analytics.addPermanentProperties({abtestSuspendVideo:r.abtestSuspendVideo})),r.enableInsertableStreams&&(O.debug("E2EE - setting insertable streams constraints"),t.encodedInsertableStreams=!0),(u.a.isReactNative()||u.a.isChromiumBased()&&!r.usesUnifiedPlan)&&(O.debug("WebRTC application is running in plan-b mode"),t.sdpSemantics="plan-b"),r.forceTurnRelay&&(t.iceTransportPolicy="relay"),t.bundlePolicy="max-bundle",j=Object(m.d)(j);var o=new _.a(this,j,e,t,i,n,r);return this.peerConnections.set(o.id,o),o}},{key:"_removePeerConnection",value:function(e){var t=e.id;return!!this.peerConnections.has(t)&&(this.peerConnections.delete(t),!0)}},{key:"addLocalTrack",value:function(e){if(!e)throw new Error("track must not be null nor undefined");this.localTracks.push(e),e.conference=this.conference}},{key:"getForwardedSources",value:function(){return this._forwardedSources}},{key:"getLocalVideoTrack",value:function(){var e=this.getLocalTracks(s.a.VIDEO);return e.length?e[0]:void 0}},{key:"getLocalVideoTracks",value:function(){return this.getLocalTracks(s.a.VIDEO)}},{key:"getLocalAudioTrack",value:function(){var e=this.getLocalTracks(s.a.AUDIO);return e.length?e[0]:void 0}},{key:"getLocalEndpointId",value:function(){return this.conference.myUserId()}},{key:"getLocalTracks",value:function(e){var t=this.localTracks.slice();return void 0!==e&&(t=t.filter((function(t){return t.getType()===e}))),t}},{key:"getRemoteTracks",value:function(e){var t,n=[],r=E(this.peerConnections.values());try{for(r.s();!(t=r.n()).done;){var i=t.value.getRemoteTracks(void 0,e);i&&(n=n.concat(i))}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"setAudioMute",value:function(e){var t=[];return this.getLocalTracks(s.a.AUDIO).forEach((function(n){t.push(e?n.mute():n.unmute())})),Promise.all(t)}},{key:"setVideoMute",value:function(e){var t=[];return this.getLocalTracks(s.a.VIDEO).concat(this.getLocalTracks(s.a.PRESENTER)).forEach((function(n){t.push(e?n.mute():n.unmute())})),Promise.all(t)}},{key:"removeLocalTrack",value:function(e){var t=this.localTracks.indexOf(e);-1!==t&&this.localTracks.splice(t,1)}},{key:"closeBridgeChannel",value:function(){this._channel&&(this._channel.close(),this._channel=null,this.removeListener(c.default.LASTN_ENDPOINT_CHANGED,this._lastNChangeListener))}},{key:"setAudioLevel",value:function(e,t,n,r){var i=e.getTrackBySSRC(t);i&&(i.isAudioTrack()?(i.isLocal()!==r&&O.error("".concat(i," was expected to ").concat(r?"be":"not be"," local")),i.setAudioLevel(n,e)):O.warn("Received audio level for non-audio track: ".concat(t)))}},{key:"sendChannelMessage",value:function(e,t){if(!this._channel)throw new Error("Channel support is disabled!");this._channel.sendMessage(e,t)}},{key:"sendEndpointStatsMessage",value:function(e){this._channel&&this._channel.isOpen()&&this._channel.sendEndpointStatsMessage(e)}},{key:"setLastN",value:function(e){this._lastN!==e&&(this._lastN=e,this._channel&&this._channel.isOpen()&&this._channel.sendSetLastNMessage(e),this.eventEmitter.emit(c.default.LASTN_VALUE_CHANGED,e))}},{key:"isInLastN",value:function(e){return!this._lastNEndpoints||this._lastNEndpoints.indexOf(e)>-1}},{key:"isInForwardedSources",value:function(e){return!this._forwardedSources||this._forwardedSources.indexOf(e)>-1}},{key:"_updateAudioOutputForAudioTracks",value:function(e){var t,n=E(this.getRemoteTracks(s.a.AUDIO));try{for(n.s();!(t=n.n()).done;)t.value.setAudioOutput(e)}catch(e){n.e(e)}finally{n.f()}}}])&&w(t.prototype,n),r&&w(t,r),Object.defineProperty(t,"prototype",{writable:!1}),f}(p.a)}).call(this,"/index.js")},function(e,t,n){"use strict";var r;n.r(t),n.d(t,"JitsiTrackEvents",(function(){return r})),n.d(t,"LOCAL_TRACK_STOPPED",(function(){return i})),n.d(t,"TRACK_AUDIO_LEVEL_CHANGED",(function(){return o})),n.d(t,"TRACK_AUDIO_OUTPUT_CHANGED",(function(){return a})),n.d(t,"TRACK_MUTE_CHANGED",(function(){return s})),n.d(t,"TRACK_VIDEOTYPE_CHANGED",(function(){return c})),n.d(t,"NO_DATA_FROM_SOURCE",(function(){return u})),n.d(t,"NO_AUDIO_INPUT",(function(){return l})),n.d(t,"TRACK_STREAMING_STATUS_CHANGED",(function(){return d})),function(e){e.LOCAL_TRACK_STOPPED="track.stopped",e.TRACK_AUDIO_LEVEL_CHANGED="track.audioLevelsChanged",e.TRACK_AUDIO_OUTPUT_CHANGED="track.audioOutputChanged",e.TRACK_MUTE_CHANGED="track.trackMuteChanged",e.TRACK_VIDEOTYPE_CHANGED="track.videoTypeChanged",e.NO_DATA_FROM_SOURCE="track.no_data_from_source",e.NO_AUDIO_INPUT="track.no_audio_input",e.TRACK_STREAMING_STATUS_CHANGED="track.streaming_status_changed"}(r||(r={}));var i=r.LOCAL_TRACK_STOPPED,o=r.TRACK_AUDIO_LEVEL_CHANGED,a=r.TRACK_AUDIO_OUTPUT_CHANGED,s=r.TRACK_MUTE_CHANGED,c=r.TRACK_VIDEOTYPE_CHANGED,u=r.NO_DATA_FROM_SOURCE,l=r.NO_AUDIO_INPUT,d=r.TRACK_STREAMING_STATUS_CHANGED},function(e,t,n){var r=n(31);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){"use strict";var r;n.r(t),n.d(t,"JitsiTrackErrors",(function(){return r})),n.d(t,"CONSTRAINT_FAILED",(function(){return i})),n.d(t,"ELECTRON_DESKTOP_PICKER_ERROR",(function(){return o})),n.d(t,"ELECTRON_DESKTOP_PICKER_NOT_FOUND",(function(){return a})),n.d(t,"GENERAL",(function(){return s})),n.d(t,"NOT_FOUND",(function(){return c})),n.d(t,"PERMISSION_DENIED",(function(){return u})),n.d(t,"SCREENSHARING_GENERIC_ERROR",(function(){return l})),n.d(t,"SCREENSHARING_USER_CANCELED",(function(){return d})),n.d(t,"TIMEOUT",(function(){return f})),n.d(t,"TRACK_IS_DISPOSED",(function(){return h})),n.d(t,"TRACK_NO_STREAM_FOUND",(function(){return p})),n.d(t,"UNSUPPORTED_RESOLUTION",(function(){return m})),function(e){e.CONSTRAINT_FAILED="gum.constraint_failed",e.ELECTRON_DESKTOP_PICKER_ERROR="gum.electron_desktop_picker_error",e.ELECTRON_DESKTOP_PICKER_NOT_FOUND="gum.electron_desktop_picker_not_found",e.GENERAL="gum.general",e.NOT_FOUND="gum.not_found",e.PERMISSION_DENIED="gum.permission_denied",e.SCREENSHARING_GENERIC_ERROR="gum.screensharing_generic_error",e.SCREENSHARING_USER_CANCELED="gum.screensharing_user_canceled",e.TIMEOUT="gum.timeout",e.TRACK_IS_DISPOSED="track.track_is_disposed",e.TRACK_NO_STREAM_FOUND="track.no_stream_found",e.UNSUPPORTED_RESOLUTION="gum.unsupported_resolution"}(r||(r={}));var i=r.CONSTRAINT_FAILED,o=r.ELECTRON_DESKTOP_PICKER_ERROR,a=r.ELECTRON_DESKTOP_PICKER_NOT_FOUND,s=r.GENERAL,c=r.NOT_FOUND,u=r.PERMISSION_DENIED,l=r.SCREENSHARING_GENERIC_ERROR,d=r.SCREENSHARING_USER_CANCELED,f=r.TIMEOUT,h=r.TRACK_IS_DISPOSED,p=r.TRACK_NO_STREAM_FOUND,m=r.UNSUPPORTED_RESOLUTION},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(80),i=n.n(r),o=n(32),a=n.n(o),s=n(15),c=n(5),u=n(12),l=n(10);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function h(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e){for(var t=e.split("\r\nm="),n=1,r=t.length;n<r;n++){var i="m=".concat(t[n]);n!==r-1&&(i+="\r\n"),t[n]=i}var o="".concat(t.shift(),"\r\n");this.media=t,this.raw=o+t.join(""),this.session=o}m.prototype.failICE=!1,m.prototype.removeTcpCandidates=!1,m.prototype.removeUdpCandidates=!1,m.prototype.addMlineForNewLocalSource=function(e){var t=this.media.length,n=a.a.parse(this.raw),r=i()(n.media.find((function(t){return t.type===e})));r.mid=t,r.direction=s.a.RECVONLY,r.msid=void 0,r.ssrcs=void 0,r.ssrcGroups=void 0,n.media=n.media.concat(r),n.groups.forEach((function(e){if("BUNDLE"===e.type){var n=e.mids.split(" ");n.push(t),e.mids=n.join(" ")}})),this.raw=a.a.write(n)},m.prototype.getMediaSsrcMap=function(){for(var e=this,t={},n=function(n){var r={mediaindex:n,mid:l.a.parseMID(l.a.findLine(e.media[n],"a=mid:")),ssrcs:{},ssrcGroups:[]};t[n]=r,l.a.findLines(e.media[n],"a=ssrc:").forEach((function(e){var t=e.substring(7).split(" ")[0];r.ssrcs[t]||(r.ssrcs[t]={ssrc:t,lines:[]}),r.ssrcs[t].lines.push(e)})),l.a.findLines(e.media[n],"a=ssrc-group:").forEach((function(e){var t=e.indexOf(" "),n=e.substr(0,t).substr(13),i=e.substr(14+n.length).split(" ");i.length&&r.ssrcGroups.push({semantics:n,ssrcs:i})}))},r=0;r<this.media.length;r++)n(r);return t},m.prototype.containsSSRC=function(e){var t=this.getMediaSsrcMap(),n=!1;return Object.keys(t).forEach((function(r){n||t[r].ssrcs[e]&&(n=!0)})),n},m.prototype.toJingle=function(e,t){l.a.findLines(this.session,"a=group:").forEach((function(t){var n=t.split(" "),r=n.shift().substr(8);e.c("group",{xmlns:"urn:xmpp:jingle:apps:grouping:0",semantics:r});for(var i=0;i<n.length;i++)e.c("content",{name:n[i]}).up();e.up()}));for(var n=0;n<this.media.length;n++){var r=l.a.parseMLine(this.media[n].split("\r\n")[0]);if("audio"===r.media||"video"===r.media||"application"===r.media){var i=void 0,o=l.a.findLine(this.media[n],"a=ssrc:");i=!!o&&o.substring(7).split(" ")[0],e.c("content",{creator:t,name:r.media});var a=l.a.findLine(this.media[n],"a=mid:");if(a){var h=l.a.parseMID(a);e.attrs({name:h})}if("audio"===r.media||"video"===r.media){e.c("description",{xmlns:"urn:xmpp:jingle:apps:rtp:1",media:r.media}),i&&e.attrs({ssrc:i});for(var p=0;p<r.fmt.length;p++){var m=l.a.findLine(this.media[n],"a=rtpmap:".concat(r.fmt[p]));e.c("payload-type",l.a.parseRTPMap(m));var v=l.a.findLine(this.media[n],"a=fmtp:".concat(r.fmt[p]));if(v)for(var g=l.a.parseFmtp(v),y=0;y<g.length;y++)e.c("parameter",g[y]).up();this.rtcpFbToJingle(n,e,r.fmt[p]),e.up()}if(i){var _,b=f(l.a.parseSSRC(this.media[n]));try{for(b.s();!(_=b.n()).done;){var E=d(_.value,2),S=E[0],C=E[1],w=l.a.parseSourceNameLine(C);e.c("source",{ssrc:S,name:u.a.isSourceNameSignalingEnabled()?w:void 0,xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0"});var T=l.a.parseMSIDAttribute(C);T&&(e.c("parameter"),e.attrs({name:"msid"}),e.attrs({value:T}),e.up()),e.up()}}catch(e){b.e(e)}finally{b.f()}l.a.findLines(this.media[n],"a=ssrc-group:").forEach((function(t){var n=t.indexOf(" "),r=t.substr(0,n).substr(13),i=t.substr(14+r.length).split(" ");i.length&&(e.c("ssrc-group",{semantics:r,xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0"}),i.forEach((function(t){return e.c("source",{ssrc:t}).up()})),e.up())}))}var D=l.a.findLines(this.media[n],"a=rid:");if(D.length&&c.a.usesRidsForSimulcast()){var A=D.map((function(e){return e.split(":")[1]})).map((function(e){return e.split(" ")[0]}));A.forEach((function(t){e.c("source",{rid:t,xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0"}),e.up()})),l.a.findLine(this.media[n],"a=simulcast:")&&(e.c("rid-group",{semantics:"SIM",xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0"}),A.forEach((function(t){e.c("source",{rid:t}).up()})),e.up())}l.a.findLine(this.media[n],"a=rtcp-mux")&&e.c("rtcp-mux").up(),this.rtcpFbToJingle(n,e,"*");for(var R=l.a.findLines(this.media[n],"a=extmap:"),k=0;k<R.length;k++){var O=l.a.parseExtmap(R[k]);if(e.c("rtp-hdrext",{xmlns:"urn:xmpp:jingle:apps:rtp:rtp-hdrext:0",uri:O.uri,id:O.value}),O.hasOwnProperty("direction"))switch(O.direction){case s.a.SENDONLY:e.attrs({senders:"responder"});break;case s.a.RECVONLY:e.attrs({senders:"initiator"});break;case s.a.SENDRECV:e.attrs({senders:"both"});break;case s.a.INACTIVE:e.attrs({senders:"none"})}e.up()}e.up()}this.transportToJingle(n,e);var j=this.media[n];l.a.findLine(j,"a=".concat(s.a.SENDRECV),this.session)?e.attrs({senders:"both"}):l.a.findLine(j,"a=".concat(s.a.SENDONLY),this.session)?e.attrs({senders:"initiator"}):l.a.findLine(j,"a=".concat(s.a.RECVONLY),this.session)?e.attrs({senders:"responder"}):l.a.findLine(j,"a=".concat(s.a.INACTIVE),this.session)&&e.attrs({senders:"none"}),"0"!==r.port||l.a.findLine(j,"a=bundle-only",this.session)||e.attrs({senders:"rejected"}),e.up()}}return e.up(),e},m.prototype.transportToJingle=function(e,t){var n=this;t.c("transport");var r=l.a.findLine(this.media[e],"a=sctp-port:",this.session),i=l.a.findLine(this.media[e],"a=sctpmap:",this.session);if(r){var o=l.a.parseSCTPPort(r);t.c("sctpmap",{xmlns:"urn:xmpp:jingle:transports:dtls-sctp:1",number:o,protocol:"webrtc-datachannel"}),t.attrs({streams:0}),t.up()}else if(i){var a=l.a.parseSCTPMap(i);t.c("sctpmap",{xmlns:"urn:xmpp:jingle:transports:dtls-sctp:1",number:a[0],protocol:a[1]}),a.length>2?t.attrs({streams:a[2]}):t.attrs({streams:0}),t.up()}l.a.findLines(this.media[e],"a=fingerprint:",this.session).forEach((function(r){var i=l.a.parseFingerprint(r);i.xmlns="urn:xmpp:jingle:apps:dtls:0",t.c("fingerprint").t(i.fingerprint),delete i.fingerprint;var o=l.a.findLine(n.media[e],"a=setup:",n.session);o&&(i.setup=o.substr(8)),t.attrs(i),t.up()}));var s=l.a.iceparams(this.media[e],this.session);s&&(s.xmlns="urn:xmpp:jingle:transports:ice-udp:1",t.attrs(s),l.a.findLines(this.media[e],"a=candidate:",this.session).forEach((function(e){var r=l.a.candidateToJingle(e);n.failICE&&(r.ip="1.1.1.1");var i=r&&"string"==typeof r.protocol?r.protocol.toLowerCase():"";n.removeTcpCandidates&&("tcp"===i||"ssltcp"===i)||n.removeUdpCandidates&&"udp"===i||t.c("candidate",r).up()})));t.up()},m.prototype.rtcpFbToJingle=function(e,t,n){l.a.findLines(this.media[e],"a=rtcp-fb:".concat(n)).forEach((function(e){var n=l.a.parseRTCPFB(e);"trr-int"===n.type?(t.c("rtcp-fb-trr-int",{xmlns:"urn:xmpp:jingle:apps:rtp:rtcp-fb:0",value:n.params[0]}),t.up()):(t.c("rtcp-fb",{xmlns:"urn:xmpp:jingle:apps:rtp:rtcp-fb:0",type:n.type}),n.params.length>0&&t.attrs({subtype:n.params[0]}),t.up())}))},m.prototype.rtcpFbFromJingle=function(e,t){var n="",r=e.find('>rtcp-fb-trr-int[xmlns="urn:xmpp:jingle:apps:rtp:rtcp-fb:0"]');return r.length&&(n+="a=rtcp-fb:* trr-int ",r.attr("value")?n+=r.attr("value"):n+="0",n+="\r\n"),e.find('>rtcp-fb[xmlns="urn:xmpp:jingle:apps:rtp:rtcp-fb:0"]').each((function(e,r){n+="a=rtcp-fb:".concat(t," ").concat(r.getAttribute("type")),r.hasAttribute("subtype")&&(n+=" ".concat(r.getAttribute("subtype"))),n+="\r\n"})),n},m.prototype.fromJingle=function(e){var t=this,n=Date.now();this.raw="v=0\r\n"+"o=- ".concat(n," 2 IN IP4 0.0.0.0\r\n")+"s=-\r\nt=0 0\r\n";var r=$(e).find('>group[xmlns="urn:xmpp:jingle:apps:grouping:0"]');r.length&&r.each((function(e,n){var r=$(n).find(">content").map((function(e,t){return t.getAttribute("name")})).get();r.length>0&&(t.raw+="a=group:".concat(n.getAttribute("semantics")||n.getAttribute("type")," ").concat(r.join(" "),"\r\n"))})),this.session=this.raw,e.find(">content").each((function(e,n){var r=t.jingle2media($(n));t.media.push(r)})),this.raw=this.session+this.media.join("")},m.prototype.jingle2media=function(e){var t=this,n=e.find(">description"),r=e.find('>transport[xmlns="urn:xmpp:jingle:transports:ice-udp:1"]'),i="",o=r.find('>sctpmap[xmlns="urn:xmpp:jingle:transports:dtls-sctp:1"]'),a={media:n.attr("media"),port:"9"};switch("rejected"===e.attr("senders")&&(a.port="0"),r.find('>fingerprint[xmlns="urn:xmpp:jingle:apps:dtls:0"]').length?a.proto=o.length?"UDP/DTLS/SCTP":"UDP/TLS/RTP/SAVPF":a.proto="UDP/TLS/RTP/SAVPF",o.length?(i+="m=application ".concat(a.port," UDP/DTLS/SCTP webrtc-datachannel\r\n"),i+="a=sctp-port:".concat(o.attr("number"),"\r\n"),i+="a=max-message-size:262144\r\n"):(a.fmt=n.find(">payload-type").map((function(e,t){return t.getAttribute("id")})).get(),i+="".concat(l.a.buildMLine(a),"\r\n")),i+="c=IN IP4 0.0.0.0\r\n",o.length||(i+="a=rtcp:1 IN IP4 0.0.0.0\r\n"),r.length&&(r.attr("ufrag")&&(i+="".concat(l.a.buildICEUfrag(r.attr("ufrag")),"\r\n")),r.attr("pwd")&&(i+="".concat(l.a.buildICEPwd(r.attr("pwd")),"\r\n")),r.find('>fingerprint[xmlns="urn:xmpp:jingle:apps:dtls:0"]').each((function(e,t){i+="a=fingerprint:".concat(t.getAttribute("hash")),i+=" ".concat($(t).text()),i+="\r\n",t.hasAttribute("setup")&&(i+="a=setup:".concat(t.getAttribute("setup"),"\r\n"))}))),r.find(">candidate").each((function(e,n){var r=n.getAttribute("protocol");r="string"==typeof r?r.toLowerCase():"",t.removeTcpCandidates&&("tcp"===r||"ssltcp"===r)||t.removeUdpCandidates&&"udp"===r||(t.failICE&&n.setAttribute("ip","1.1.1.1"),i+=l.a.candidateFromJingle(n))})),e.attr("senders")){case"initiator":i+="a=".concat(s.a.SENDONLY,"\r\n");break;case"responder":i+="a=".concat(s.a.RECVONLY,"\r\n");break;case"none":i+="a=".concat(s.a.INACTIVE,"\r\n");break;case"both":i+="a=".concat(s.a.SENDRECV,"\r\n")}i+="a=mid:".concat(e.attr("name"),"\r\n"),n.find(">rtcp-mux").length&&(i+="a=rtcp-mux\r\n"),n.find(">payload-type").each((function(e,n){i+="".concat(l.a.buildRTPMap(n),"\r\n"),$(n).find(">parameter").length&&(i+="a=fmtp:".concat(n.getAttribute("id")," "),i+=$(n).find(">parameter").map((function(e,t){var n=t.getAttribute("name");return(n?"".concat(n,"="):"")+t.getAttribute("value")})).get().join("; "),i+="\r\n"),i+=t.rtcpFbFromJingle($(n),n.getAttribute("id"))})),i+=this.rtcpFbFromJingle(n,"*"),n.find('>rtp-hdrext[xmlns="urn:xmpp:jingle:apps:rtp:rtp-hdrext:0"]').each((function(e,t){i+="a=extmap:".concat(t.getAttribute("id")," ").concat(t.getAttribute("uri"),"\r\n")})),n.find('>ssrc-group[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each((function(e,t){var n=t.getAttribute("semantics"),r=$(t).find(">source").map((function(e,t){return t.getAttribute("ssrc")})).get();r.length&&(i+="a=ssrc-group:".concat(n," ").concat(r.join(" "),"\r\n"))}));var c="",u="";return n.find('>source[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each((function(e,t){var n=t.getAttribute("ssrc"),r=!0,i="";$(t).find(">parameter").each((function(e,t){var o=t.getAttribute("name"),a=t.getAttribute("value");a=l.a.filterSpecialChars(a),i+="a=ssrc:".concat(n," ").concat(o),a&&a.length&&(i+=":".concat(a)),i+="\r\n",(null==a?void 0:a.includes("mixedmslabel"))&&(r=!1)})),r?c+=i:u+=i})),i+=u+c}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";var r;n.r(t),n.d(t,"JitsiConferenceErrors",(function(){return r})),n.d(t,"AUTHENTICATION_REQUIRED",(function(){return i})),n.d(t,"CHAT_ERROR",(function(){return o})),n.d(t,"SETTINGS_ERROR",(function(){return a})),n.d(t,"CONFERENCE_DESTROYED",(function(){return s})),n.d(t,"CONFERENCE_MAX_USERS",(function(){return c})),n.d(t,"CONNECTION_ERROR",(function(){return u})),n.d(t,"CONFERENCE_RESTARTED",(function(){return l})),n.d(t,"NOT_ALLOWED_ERROR",(function(){return d})),n.d(t,"MEMBERS_ONLY_ERROR",(function(){return f})),n.d(t,"CONFERENCE_ACCESS_DENIED",(function(){return h})),n.d(t,"FOCUS_DISCONNECTED",(function(){return p})),n.d(t,"FOCUS_LEFT",(function(){return m})),n.d(t,"GRACEFUL_SHUTDOWN",(function(){return v})),n.d(t,"ICE_FAILED",(function(){return g})),n.d(t,"INCOMPATIBLE_SERVER_VERSIONS",(function(){return y})),n.d(t,"OFFER_ANSWER_FAILED",(function(){return _})),n.d(t,"PASSWORD_NOT_SUPPORTED",(function(){return b})),n.d(t,"PASSWORD_REQUIRED",(function(){return E})),n.d(t,"RESERVATION_ERROR",(function(){return S})),n.d(t,"VIDEOBRIDGE_NOT_AVAILABLE",(function(){return C})),function(e){e.AUTHENTICATION_REQUIRED="conference.authenticationRequired",e.CHAT_ERROR="conference.chatError",e.SETTINGS_ERROR="conference.settingsError",e.CONFERENCE_DESTROYED="conference.destroyed",e.CONFERENCE_MAX_USERS="conference.max_users",e.CONNECTION_ERROR="conference.connectionError",e.CONFERENCE_RESTARTED="conference.restarted",e.NOT_ALLOWED_ERROR="conference.connectionError.notAllowed",e.MEMBERS_ONLY_ERROR="conference.connectionError.membersOnly",e.CONFERENCE_ACCESS_DENIED="conference.connectionError.accessDenied",e.FOCUS_DISCONNECTED="conference.focusDisconnected",e.FOCUS_LEFT="conference.focusLeft",e.GRACEFUL_SHUTDOWN="conference.gracefulShutdown",e.ICE_FAILED="conference.iceFailed",e.INCOMPATIBLE_SERVER_VERSIONS="conference.incompatible_server_versions",e.OFFER_ANSWER_FAILED="conference.offerAnswerFailed",e.PASSWORD_NOT_SUPPORTED="conference.passwordNotSupported",e.PASSWORD_REQUIRED="conference.passwordRequired",e.RESERVATION_ERROR="conference.reservationError",e.VIDEOBRIDGE_NOT_AVAILABLE="conference.videobridgeNotAvailable"}(r||(r={}));var i=r.AUTHENTICATION_REQUIRED,o=r.CHAT_ERROR,a=r.SETTINGS_ERROR,s=r.CONFERENCE_DESTROYED,c=r.CONFERENCE_MAX_USERS,u=r.CONNECTION_ERROR,l=r.CONFERENCE_RESTARTED,d=r.NOT_ALLOWED_ERROR,f=r.MEMBERS_ONLY_ERROR,h=r.CONFERENCE_ACCESS_DENIED,p=r.FOCUS_DISCONNECTED,m=r.FOCUS_LEFT,v=r.GRACEFUL_SHUTDOWN,g=r.ICE_FAILED,y=r.INCOMPATIBLE_SERVER_VERSIONS,_=r.OFFER_ANSWER_FAILED,b=r.PASSWORD_NOT_SUPPORTED,E=r.PASSWORD_REQUIRED,S=r.RESERVATION_ERROR,C=r.VIDEOBRIDGE_NOT_AVAILABLE},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){return"object"===n(e)?null!==e:"function"==typeof e}},function(e,t,n){var r=n(616),i=n(617);t.write=i,t.parse=r.parse,t.parseFmtpConfig=r.parseFmtpConfig,t.parseParams=r.parseParams,t.parsePayloads=r.parsePayloads,t.parseRemoteCandidates=r.parseRemoteCandidates,t.parseImageAttributes=r.parseImageAttributes,t.parseSimulcastStreamList=r.parseSimulcastStreamList},function(e,t){e.exports={H264:"h264",OPUS:"opus",ULPFEC:"ulpfec",VP8:"vp8",VP9:"vp9"}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i,o="object"===("undefined"==typeof Reflect?"undefined":r(Reflect))?Reflect:null,a=o&&"function"==typeof o.apply?o.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};i=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function c(){c.init.call(this)}e.exports=c,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}y(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&y(e,"error",t,n)}(e,i,{once:!0})}))},c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var u=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+r(e))}function d(e){return void 0===e._maxListeners?c.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var i,o,a,s;if(l(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=d(e))>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,s=c,console&&console.warn&&console.warn(s)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function m(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):g(i,i.length)}function v(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+r(e));e.addEventListener(t,(function r(o){i.once&&e.removeEventListener(t,r),n(o)}))}}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),c.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},c.prototype.getMaxListeners=function(){return d(this)},c.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)a(c,this,t);else{var u=c.length,l=g(c,u);for(n=0;n<u;++n)a(l[n],this,t)}return!0},c.prototype.addListener=function(e,t){return f(this,e,t,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(e,t){return f(this,e,t,!0)},c.prototype.once=function(e,t){return l(t),this.on(e,p(this,e,t)),this},c.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,p(this,e,t)),this},c.prototype.removeListener=function(e,t){var n,r,i,o,a;if(l(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},c.prototype.listeners=function(e){return m(this,e,!0)},c.prototype.rawListeners=function(e){return m(this,e,!1)},c.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},c.prototype.listenerCount=v,c.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(34),i=n.n(r);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new i.a;o(this,e),this.eventEmitter=t,this.addEventListener=this.on=this.addListener,this.removeEventListener=this.off=this.removeListener}var t,n,r;return t=e,(n=[{key:"addListener",value:function(e,t){var n=this;return this.eventEmitter.addListener(e,t),function(){return n.removeEventListener(e,t)}}},{key:"removeListener",value:function(e,t){this.eventEmitter.removeListener(e,t)}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){var r=n(136)("wks"),i=n(104),o=n(27).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){"use strict";var r=n(26);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o={};function a(e,t,n){if("object"===i(e)&&void 0!==e.name)switch(this.gum={error:e,constraints:t,devices:n&&Array.isArray(n)?n.slice(0):void 0},e.name){case"NotAllowedError":case"PermissionDeniedError":case"SecurityError":this.name=r.PERMISSION_DENIED,this.message=o[this.name]+(this.gum.devices||[]).join(", ");break;case"DevicesNotFoundError":case"NotFoundError":this.name=r.NOT_FOUND,this.message=o[this.name]+(this.gum.devices||[]).join(", ");break;case"ConstraintNotSatisfiedError":case"OverconstrainedError":var a=e.constraintName||e.constraint;t&&t.video&&(!n||n.indexOf("video")>-1)&&("minWidth"===a||"maxWidth"===a||"minHeight"===a||"maxHeight"===a||"width"===a||"height"===a||"deviceId"===a)?(this.name=r.UNSUPPORTED_RESOLUTION,this.message=o[this.name]+function(e,t){if(t&&t.video&&t.video.mandatory)switch(e){case"width":return t.video.mandatory.minWidth;case"height":return t.video.mandatory.minHeight;default:return t.video.mandatory[e]||""}return""}(a,t)):(this.name=r.CONSTRAINT_FAILED,this.message=o[this.name]+e.constraintName);break;default:this.name=r.GENERAL,this.message=e.message||o[this.name]}else{if("string"!=typeof e)throw new Error("Invalid arguments");o[e]?(this.name=e,this.message=t||o[e]):this.message=e}this.stack=e.stack||(new Error).stack}o[r.UNSUPPORTED_RESOLUTION]="Video resolution is not supported: ",o[r.SCREENSHARING_USER_CANCELED]="User canceled screen sharing prompt",o[r.SCREENSHARING_GENERIC_ERROR]="Unknown error from screensharing",o[r.ELECTRON_DESKTOP_PICKER_ERROR]="Unkown error from desktop picker",o[r.ELECTRON_DESKTOP_PICKER_NOT_FOUND]="Failed to detect desktop picker",o[r.GENERAL]="Generic getUserMedia error",o[r.PERMISSION_DENIED]="User denied permission to use device(s): ",o[r.NOT_FOUND]="Requested device(s) was/were not found: ",o[r.CONSTRAINT_FAILED]="Constraint could not be satisfied: ",o[r.TIMEOUT]="Could not start media source. Timeout occured!",o[r.TRACK_IS_DISPOSED]="Track has been already disposed",o[r.TRACK_NO_STREAM_FOUND]="Track does not have an associated Media Stream",a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,t.a=a},function(e,t,n){var r=n(76),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){e.exports=!n(29)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){"use strict";var r;n.r(t),n.d(t,"DetectionEvents",(function(){return r})),n.d(t,"DETECTOR_STATE_CHANGE",(function(){return i})),n.d(t,"AUDIO_INPUT_STATE_CHANGE",(function(){return o})),n.d(t,"NO_AUDIO_INPUT",(function(){return a})),n.d(t,"VAD_NOISY_DEVICE",(function(){return s})),n.d(t,"VAD_REPORT_PUBLISHED",(function(){return c})),n.d(t,"VAD_SCORE_PUBLISHED",(function(){return u})),n.d(t,"VAD_TALK_WHILE_MUTED",(function(){return l})),function(e){e.DETECTOR_STATE_CHANGE="detector_state_change",e.AUDIO_INPUT_STATE_CHANGE="audio_input_state_changed",e.NO_AUDIO_INPUT="no_audio_input_detected",e.VAD_NOISY_DEVICE="detection.vad_noise_device",e.VAD_REPORT_PUBLISHED="vad-report-published",e.VAD_SCORE_PUBLISHED="detection.vad_score_published",e.VAD_TALK_WHILE_MUTED="detection.vad_talk_while_muted"}(r||(r={}));var i=r.DETECTOR_STATE_CHANGE,o=r.AUDIO_INPUT_STATE_CHANGE,a=r.NO_AUDIO_INPUT,s=r.VAD_NOISY_DEVICE,c=r.VAD_REPORT_PUBLISHED,u=r.VAD_SCORE_PUBLISHED,l=r.VAD_TALK_WHILE_MUTED},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return P})),n.d(t,"d",(function(){return I})),n.d(t,"c",(function(){return N})),n.d(t,"b",(function(){return M})),n.d(t,"e",(function(){return x}));var r=n(4),i=n(2),o=(n(614),n(90)),a=n(45),s=n(0),c=n(5),u=n(146),l=n(12),d=n(8),f=n(22),h=n.n(f),p=n(35),m=n(116),v=n.n(m),g=n(225),y=n(93),_=n(320),b=n(326),E=n(332),S=n(333),C=n(334);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var i=k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R(this,n)}}function R(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=Object(r.getLogger)(e),j=/<failure.*><not-allowed\/><text>(.*)<\/text><\/failure>/gi;var P=[{urls:"stun:meet-jit-si-turnrelay.jitsi.net:443"}],I="type",N="http://jitsi.org/protocol/jigasi",M="https://jitsi.org/meet/e2ee",x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}(p,e);var t,n,r,f=A(p);function p(e,t){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(n=f.call(this)).connection=null,n.disconnectInProgress=!1,n.connectionTimes={},n.options=e,n.token=t,n.authenticatedUser=!1,Object(C.a)(),Object(E.a)();var i=e.xmppPing||{};return i.domain=e.hosts.domain,n.connection=function(e){var t=e.enableWebsocketResume,n=e.serviceUrl,r=void 0===n?"/http-bind":n,i=e.shard,o=e.token,a=e.websocketKeepAlive,s=e.websocketKeepAliveUrl,c=e.xmppPing;return o&&(r+="".concat(-1===r.indexOf("?")?"?":"&","token=").concat(o)),new y.a({enableWebsocketResume:t,serviceUrl:r,websocketKeepAlive:a,websocketKeepAliveUrl:s,xmppPing:c,shard:i})}({enableWebsocketResume:e.enableWebsocketResume,serviceUrl:e.serviceUrl||e.bosh,token:t,websocketKeepAlive:e.websocketKeepAlive,websocketKeepAliveUrl:e.websocketKeepAliveUrl,xmppPing:i,shard:null===(r=e.deploymentInfo)||void 0===r?void 0:r.shard}),n.connection.on(y.a.Events.CONN_SHARD_CHANGED,(function(){var e={shard_changed:!0,suspend_time:n.connection.ping.getPingSuspendTime(),time_since_last_success:n.connection.getTimeSinceLastSuccess()};n.eventEmitter.emit(a.CONNECTION_FAILED,o.OTHER_ERROR,void 0,void 0,e)})),n._initStrophePlugins(),n.caps=new g.a(n.connection,"https://jitsi.org/jitsi-meet"),n.initFeaturesList(),n}return t=p,(n=[{key:"initFeaturesList",value:function(){this.caps.addFeature("urn:xmpp:jingle:1"),this.caps.addFeature("urn:xmpp:jingle:apps:rtp:1"),this.caps.addFeature("urn:xmpp:jingle:transports:ice-udp:1"),this.caps.addFeature("urn:xmpp:jingle:apps:dtls:0"),this.caps.addFeature("urn:xmpp:jingle:transports:dtls-sctp:1"),this.caps.addFeature("urn:xmpp:jingle:apps:rtp:audio"),this.caps.addFeature("urn:xmpp:jingle:apps:rtp:video"),this.caps.addFeature("http://jitsi.org/json-encoded-sources"),!this.options.disableRtx&&c.a.supportsRTX()&&this.caps.addFeature("urn:ietf:rfc:4588"),!0===this.options.enableOpusRed&&c.a.supportsAudioRed()&&this.caps.addFeature("http://jitsi.org/opus-red"),(void 0===this.options.enableRemb||this.options.enableRemb)&&this.caps.addFeature("http://jitsi.org/remb"),c.a.isFirefox()||void 0!==this.options.enableTcc&&!this.options.enableTcc||this.caps.addFeature("http://jitsi.org/tcc"),this.caps.addFeature("urn:ietf:rfc:5761"),this.caps.addFeature("urn:ietf:rfc:5888"),c.a.isChromiumBased()&&!0===this.options.enableLipSync&&(O.info("Lip-sync enabled !"),this.caps.addFeature("http://jitsi.org/meet/lipsync")),this.connection.rayo&&this.caps.addFeature("urn:xmpp:rayo:client:1"),u.a.isSupported(this.options)&&this.caps.addFeature(M,!1,!0),l.a.isSourceNameSignalingEnabled()&&(O.info("Source-name signaling is enabled"),this.caps.addFeature("http://jitsi.org/source-name"))}},{key:"getConnection",value:function(){return this.connection}},{key:"connectionHandler",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,c=window.performance.now(),u=i.Strophe.getStatusString(n).toLowerCase();if(this.connectionTimes[u]=c,O.log("(TIME) Strophe ".concat(u).concat(r?"[".concat(r,"]"):"",":\t"),c),this.eventEmitter.emit(s.XMPPEvents.CONNECTION_STATUS_CHANGED,t,n,r),this._maybeSendDeploymentInfoStat(),n===i.Strophe.Status.CONNECTED||n===i.Strophe.Status.ATTACHED)this._sysMessageHandler&&(this.connection._stropheConn.deleteHandler(this._sysMessageHandler),this._sysMessageHandler=null),this.sendDiscoInfo&&this.connection.jingle.getStunAndTurnCredentials(),O.info("My Jabber ID: ".concat(this.connection.jid)),this._resetState(),this.sendDeploymentInfo=!1,this.sendDiscoInfo&&this.caps.getFeaturesAndIdentities(this.options.hosts.domain).then((function(t){var n=t.features,r=t.identities;n.has(i.Strophe.NS.PING)||O.error("Ping NOT supported by ".concat(e.options.hosts.domain," - please enable ping in your XMPP server config")),e._processDiscoInfoIdentities(r,void 0)})).catch((function(t){var n="Feature discovery error";h.a.callErrorHandler(new Error("".concat(n,": ").concat(t))),O.error(n,t),e._maybeSendDeploymentInfoStat(!0)})),this.sendDiscoInfo=!1,t.password&&(this.authenticatedUser=!0),this.connection&&this.connection.connected&&i.Strophe.getResourceFromJid(this.connection.jid)&&this.eventEmitter.emit(a.CONNECTION_ESTABLISHED,i.Strophe.getResourceFromJid(this.connection.jid));else if(n===i.Strophe.Status.CONNFAIL)"x-strophe-bad-non-anon-jid"===r?this.anonymousConnectionFailed=!0:this.connectionFailed=!0,this.lastErrorMsg=r,"giving-up"===r&&this.eventEmitter.emit(a.CONNECTION_FAILED,o.OTHER_ERROR,r);else if(n===i.Strophe.Status.ERROR)this.lastErrorMsg=r;else if(n===i.Strophe.Status.DISCONNECTED){this.connection.ping.stopInterval();var l=Boolean(this.disconnectInProgress),d=r||this.lastErrorMsg;if(this.anonymousConnectionFailed)this.eventEmitter.emit(a.CONNECTION_FAILED,o.PASSWORD_REQUIRED);else if(this.connectionFailed)this.eventEmitter.emit(a.CONNECTION_FAILED,o.OTHER_ERROR,d,void 0,this._getConnectionFailedReasonDetails());else if(l)this.eventEmitter.emit(a.CONNECTION_DISCONNECTED,d);else{O.error("XMPP connection dropped!");var f=i.Strophe.getLastErrorStatus();f>=500&&f<600?this.eventEmitter.emit(a.CONNECTION_FAILED,o.SERVER_ERROR,d||"server-error",void 0,this._getConnectionFailedReasonDetails()):this.eventEmitter.emit(a.CONNECTION_FAILED,o.CONNECTION_DROPPED_ERROR,d||"connection-dropped-error",void 0,this._getConnectionFailedReasonDetails())}}else if(n===i.Strophe.Status.AUTHFAIL){var p=this.getConnection().getLastFailedMessage();this.eventEmitter.emit(a.CONNECTION_FAILED,o.PASSWORD_REQUIRED,r||this._parseConnectionFailedMessage(p),t)}}},{key:"_processDiscoInfoIdentities",value:function(e,t){var n=this;e.forEach((function(e){if("av_moderation"===e.type&&(n.avModerationComponentAddress=e.name),"speakerstats"===e.type&&(n.speakerStatsComponentAddress=e.name),"conference_duration"===e.type&&(n.conferenceDurationComponentAddress=e.name),"lobbyrooms"===e.type){n.lobbySupported=!0;var r=function(e){e.forEach((function(e){e.endsWith("#displayname_required")&&n.eventEmitter.emit(a.DISPLAY_NAME_REQUIRED)}))};t?r(t):e.name&&n.caps.getFeaturesAndIdentities(e.name,e.type).then((function(e){var t=e.features;return r(t)})).catch((function(e){return O.warn("Error getting features from lobby.",e&&e.message)}))}"shard"===e.type&&(n.options.deploymentInfo.shard=n.connection.shard=e.name),"region"===e.type&&(n.options.deploymentInfo.region=n.connection.region=e.name),"breakout_rooms"===e.type&&(n.breakoutRoomsComponentAddress=e.name)})),this._maybeSendDeploymentInfoStat(!0),(this.avModerationComponentAddress||this.speakerStatsComponentAddress||this.conferenceDurationComponentAddress||this.breakoutRoomsComponentAddress)&&this.connection.addHandler(this._onPrivateMessage.bind(this),null,"message",null,null)}},{key:"_parseConnectionFailedMessage",value:function(e){if(!e)return null;var t=j.exec(e);return t?t[1]:null}},{key:"_connect",value:function(e,t){this._resetState(),this.sendDiscoInfo=!0,this.sendDeploymentInfo=!0,this.connection._stropheConn&&this.connection._stropheConn._addSysHandler?this._sysMessageHandler=this.connection._stropheConn._addSysHandler(this._onSystemMessage.bind(this),null,"message"):O.warn("Cannot attach strophe system handler, jiconop cannot operate"),this.connection.connect(e,t,this.connectionHandler.bind(this,{jid:e,password:t}))}},{key:"_onSystemMessage",value:function(e){if(0!==$(e).find(">services").length||0!==$(e).find(">query").length){this.sendDiscoInfo=!1;var t=this.connection.jingle.onReceiveStunAndTurnCredentials(e),n=Object(g.b)(e),r=n.features,i=n.identities;this._processDiscoInfoIdentities(i,r),(t||i.size>0||r.size>0)&&(this.connection._stropheConn.deleteHandler(this._sysMessageHandler),this._sysMessageHandler=null)}}},{key:"attach",value:function(e){this._resetState(),this.sendDiscoInfo=!0;var t=this.connectionTimes.attaching=window.performance.now();O.log("(TIME) Strophe Attaching:\t",t),this.connection.attach(e.jid,e.sid,parseInt(e.rid,10)+1,this.connectionHandler.bind(this,{jid:e.jid,password:e.password}))}},{key:"_resetState",value:function(){this.anonymousConnectionFailed=!1,this.connectionFailed=!1,this.lastErrorMsg=void 0,this.disconnectInProgress=void 0}},{key:"connect",value:function(e,t){if(!e){var n=this.options.hosts,r=n.anonymousdomain,i=n.domain,o=r||i,a=window.location;if(r){var s=a&&a.search;(s&&-1!==s.indexOf("login=true")||this.token)&&(o=i)}e=o||a&&a.hostname}return this._connect(e,t)}},{key:"createRoom",value:function(e,t,n){var r=e.domain||t.customDomain,i="".concat(this.getRoomJid(e,r),"/"),o=n?n(this.connection.jid,this.authenticatedUser):v.a.randomHexString(8).toLowerCase();return O.info("JID ".concat(this.connection.jid," using MUC nickname ").concat(o)),i+=o,this.connection.emuc.createRoom(i,null,t)}},{key:"getRoomJid",value:function(e,t){return"".concat(e,"@").concat(t||this.options.hosts.muc.toLowerCase())}},{key:"isRoomCreated",value:function(e,t){return this.connection.emuc.isRoomCreated(this.getRoomJid(e,t))}},{key:"getJid",value:function(){return this.connection.jid}},{key:"getJingleLog",value:function(){var e=this.connection.jingle;return e?e.getLog():{}}},{key:"getXmppLog",value:function(){return(this.connection.logger||{}).log||null}},{key:"dial",value:function(){var e;(e=this.connection.rayo).dial.apply(e,arguments)}},{key:"ping",value:function(e){var t=this;return new Promise((function(n,r){t.connection.ping.ping(t.connection.pingDomain,n,r,e)}))}},{key:"getSessions",value:function(){return this.connection.jingle.sessions}},{key:"disconnect",value:function(e){var t=this;return this.disconnectInProgress?this.disconnectInProgress:this.connection?(this.disconnectInProgress=new Promise((function(e){t.eventEmitter.on(s.XMPPEvents.CONNECTION_STATUS_CHANGED,(function n(r,o){o===i.Strophe.Status.DISCONNECTED&&(e(),t.eventEmitter.removeListener(s.XMPPEvents.CONNECTION_STATUS_CHANGED,n))}))})),this._cleanupXmppConnection(e),this.disconnectInProgress):Promise.resolve()}},{key:"_cleanupXmppConnection",value:function(e){if(!this.connection.isUsingWebSocket&&this.connection.flush(),!this.connection.isUsingWebSocket&&null!=e){var t=e.type;if(("beforeunload"===t||"unload"===t)&&(this.connection.options.sync=!0,this.connection.sendUnavailableBeacon()))return}this.connection.disconnect(),!0!==this.connection.options.sync&&this.connection.flush()}},{key:"_initStrophePlugins",value:function(){var e={jvb:{iceServers:[]},p2p:{iceServers:[]}},t=this.options.p2p&&this.options.p2p.stunServers||P;Array.isArray(t)&&(O.info("P2P STUN servers: ",t),e.p2p.iceServers=t),this.options.p2p&&this.options.p2p.iceTransportPolicy&&(O.info("P2P ICE transport policy: ",this.options.p2p.iceTransportPolicy),e.p2p.iceTransportPolicy=this.options.p2p.iceTransportPolicy),this.connection.addConnectionPlugin("emuc",new _.a(this)),this.connection.addConnectionPlugin("jingle",new b.a(this,this.eventEmitter,e)),this.connection.addConnectionPlugin("rayo",new S.a)}},{key:"_getConnectionFailedReasonDetails",value:function(){var e={};if(this.options.deploymentInfo&&this.options.deploymentInfo.shard&&this.connection.lastResponseHeaders){var t=this.connection.lastResponseHeaders.trim().split(/[\r\n]+/),n={};t.forEach((function(e){var t=e.split(": "),r=t.shift(),i=t.join(": ");n[r]=i})),e.shard_changed=this.options.deploymentInfo.shard!==n["x-jitsi-shard"]}return e.suspend_time=this.connection.ping.getPingSuspendTime(),e.time_since_last_success=this.connection.getTimeSinceLastSuccess(),e}},{key:"sendDominantSpeakerEvent",value:function(e){if(this.speakerStatsComponentAddress&&e){var t=Object(i.$msg)({to:this.speakerStatsComponentAddress});t.c("speakerstats",{xmlns:"http://jitsi.org/jitmeet",room:e}).up(),this.connection.send(t)}}},{key:"sendFaceExpressionEvent",value:function(e,t){if(this.speakerStatsComponentAddress&&e){var n=Object(i.$msg)({to:this.speakerStatsComponentAddress});n.c("faceExpression",{xmlns:"http://jitsi.org/jitmeet",room:e,expression:t.faceExpression,duration:t.duration}).up(),this.connection.send(n)}}},{key:"tryParseJSONAndVerify",value:function(e){if(!e)return!1;try{var t=JSON.parse(e);if(t&&"object"===w(t)){var n=t[I];if(void 0!==n)return t;O.debug("parsing valid json but does not have correct structure","topic: ",n)}}catch(t){return O.error("Error parsing json ".concat(e),t),!1}return!1}},{key:"_onPrivateMessage",value:function(e){var t=e.getAttribute("from");if(t!==this.speakerStatsComponentAddress&&t!==this.conferenceDurationComponentAddress&&t!==this.avModerationComponentAddress&&t!==this.breakoutRoomsComponentAddress)return!0;var n=$(e).find(">json-message").text(),r=this.tryParseJSONAndVerify(n);return!r||("speakerstats"===r[I]&&r.users?this.eventEmitter.emit(s.XMPPEvents.SPEAKER_STATS_RECEIVED,r.users):"conference_duration"===r[I]&&r.created_timestamp?this.eventEmitter.emit(s.XMPPEvents.CONFERENCE_TIMESTAMP_RECEIVED,r.created_timestamp):"av_moderation"===r[I]?this.eventEmitter.emit(s.XMPPEvents.AV_MODERATION_RECEIVED,r):"breakout_rooms"===r[I]&&this.eventEmitter.emit(s.XMPPEvents.BREAKOUT_ROOMS_EVENT,r),!0)}},{key:"_maybeSendDeploymentInfoStat",value:function(e){var t=[i.Strophe.Status.ERROR,i.Strophe.Status.CONNFAIL,i.Strophe.Status.AUTHFAIL,i.Strophe.Status.DISCONNECTED,i.Strophe.Status.CONNTIMEOUT];if(e||t.includes(this.connection.status)&&this.sendDeploymentInfo){var n=this.options.deploymentInfo;if(n&&Object.keys(n).length>0){var r={id:"deployment_info"};for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o]);d.a.sendLog(JSON.stringify(r))}this.sendDeploymentInfo=!1}}}])&&T(t.prototype,n),r&&T(t,r),Object.defineProperty(t,"prototype",{writable:!1}),p}(p.a)}).call(this,"/index.js")},function(e,t,n){var r=n(25),i=n(230),o=n(81),a=Object.defineProperty;t.f=n(39)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";var r,i,o;n.r(t),n.d(t,"VideoSIPGWStatusConstants",(function(){return r})),n.d(t,"VideoSIPGWStateConstants",(function(){return i})),n.d(t,"VideoSIPGWErrorConstants",(function(){return o})),n.d(t,"STATUS_AVAILABLE",(function(){return a})),n.d(t,"STATUS_UNDEFINED",(function(){return s})),n.d(t,"STATUS_BUSY",(function(){return c})),n.d(t,"STATE_ON",(function(){return u})),n.d(t,"STATE_OFF",(function(){return l})),n.d(t,"STATE_PENDING",(function(){return d})),n.d(t,"STATE_RETRYING",(function(){return f})),n.d(t,"STATE_FAILED",(function(){return h})),n.d(t,"ERROR_NO_CONNECTION",(function(){return p})),n.d(t,"ERROR_SESSION_EXISTS",(function(){return m})),function(e){e.STATUS_AVAILABLE="available",e.STATUS_UNDEFINED="undefined",e.STATUS_BUSY="busy"}(r||(r={})),function(e){e.STATE_ON="on",e.STATE_OFF="off",e.STATE_PENDING="pending",e.STATE_RETRYING="retrying",e.STATE_FAILED="failed"}(i||(i={})),function(e){e.ERROR_NO_CONNECTION="error_no_connection",e.ERROR_SESSION_EXISTS="error_session_already_exists"}(o||(o={}));var a=r.STATUS_AVAILABLE,s=r.STATUS_UNDEFINED,c=r.STATUS_BUSY,u=i.STATE_ON,l=i.STATE_OFF,d=i.STATE_PENDING,f=i.STATE_RETRYING,h=i.STATE_FAILED,p=o.ERROR_NO_CONNECTION,m=o.ERROR_SESSION_EXISTS},function(e,t,n){var r=n(82);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";var r;n.r(t),n.d(t,"JitsiConnectionEvents",(function(){return r})),n.d(t,"CONNECTION_DISCONNECTED",(function(){return i})),n.d(t,"CONNECTION_ESTABLISHED",(function(){return o})),n.d(t,"CONNECTION_FAILED",(function(){return a})),n.d(t,"WRONG_STATE",(function(){return s})),n.d(t,"DISPLAY_NAME_REQUIRED",(function(){return c})),function(e){e.CONNECTION_DISCONNECTED="connection.connectionDisconnected",e.CONNECTION_ESTABLISHED="connection.connectionEstablished",e.CONNECTION_FAILED="connection.connectionFailed",e.WRONG_STATE="connection.wrongState",e.DISPLAY_NAME_REQUIRED="connection.display_name_required"}(r||(r={}));var i=r.CONNECTION_DISCONNECTED,o=r.CONNECTION_ESTABLISHED,a=r.CONNECTION_FAILED,s=r.WRONG_STATE,c=r.DISPLAY_NAME_REQUIRED},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return c})),function(e){e.AUDIO_LEVEL="statistics.audioLevel",e.BEFORE_DISPOSED="statistics.before_disposed",e.BYTE_SENT_STATS="statistics.byte_sent_stats",e.CONNECTION_STATS="statistics.connectionstats",e.LONG_TASKS_STATS="statistics.long_tasks_stats"}(r||(r={}));var i=r.AUDIO_LEVEL,o=r.BEFORE_DISPOSED,a=r.BYTE_SENT_STATS,s=r.CONNECTION_STATS,c=r.LONG_TASKS_STATS},function(e,t,n){"use strict";t.a=window.document},function(e,t,n){"use strict";t.a=[]},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return s})),function(e){e.PEER_MUTED_CHANGED="signaling.peerMuted",e.PEER_VIDEO_TYPE_CHANGED="signaling.peerVideoType",e.SOURCE_MUTED_CHANGED="signaling.sourceMuted",e.SOURCE_VIDEO_TYPE_CHANGED="signaling.sourceVideoType"}(r||(r={}));var i=r.PEER_MUTED_CHANGED,o=r.PEER_VIDEO_TYPE_CHANGED,a=r.SOURCE_MUTED_CHANGED,s=r.SOURCE_VIDEO_TYPE_CHANGED},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";(function(e){var r,i,o=n(79),a=n(4),s=n(325),c=n.n(s),u=Object(a.getLogger)(e);function l(){return"".concat(Math.random().toString(16),"000000000").substr(2,8)}t.a={_storage:o.b,init:function(e){this._storage=e||o.b},get callStatsUserName(){var e;return r||(r=this._storage.getItem("callStatsUserName"))||(e=c.a.generateUsername(),u.log("generated callstats uid",e),r=e,this._storage.setItem("callStatsUserName",r)),r},get machineId(){if(!i){var e=this._storage.getItem("billingId");i=e||this._storage.getItem("jitsiMeetId"),e?this._storage.setItem("jitsiMeetId",e):i||(t=l()+l()+l()+l(),u.log("generated id",t),i=t,this._storage.setItem("jitsiMeetId",i))}var t;return i},get sessionId(){return this._storage.getItem("sessionId")},set sessionId(e){e?this._storage.setItem("sessionId",e):this._storage.removeItem("sessionId")}}}).call(this,"/index.js")},function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return h}));var r=n(32);function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){return parseInt(e.ssrcs.split(" ")[0],10)}function l(e){return parseInt(e.ssrcs.split(" ")[1],10)}function d(e){return e.ssrcs?e.ssrcs.map((function(e){return e.id})).filter((function(e,t,n){return n.indexOf(e)===t})).length:0}var f=function(){function e(t){if(a(this,e),!t)throw new Error("mLine is undefined");this.mLine=t}return c(e,[{key:"ssrcs",get:function(){return this.mLine.ssrcs||(this.mLine.ssrcs=[]),this.mLine.ssrcs},set:function(e){this.mLine.ssrcs=e}},{key:"direction",get:function(){return this.mLine.direction},set:function(e){this.mLine.direction=e}},{key:"ssrcGroups",get:function(){return this.mLine.ssrcGroups||(this.mLine.ssrcGroups=[]),this.mLine.ssrcGroups},set:function(e){this.mLine.ssrcGroups=e}},{key:"getSSRCAttrValue",value:function(e,t){var n=this.ssrcs.find((function(n){return n.id===e&&n.attribute===t}));return n&&n.value}},{key:"removeSSRC",value:function(e){this.mLine.ssrcs&&this.mLine.ssrcs.length&&(this.mLine.ssrcs=this.mLine.ssrcs.filter((function(t){return t.id!==e})))}},{key:"addSSRCAttribute",value:function(e){this.ssrcs.push(e)}},{key:"findGroup",value:function(e,t){return this.ssrcGroups.find((function(n){return n.semantics===e&&(!t||t===n.ssrcs)}))}},{key:"findGroups",value:function(e){return this.ssrcGroups.filter((function(t){return t.semantics===e}))}},{key:"findGroupByPrimarySSRC",value:function(e,t){return this.ssrcGroups.find((function(n){return n.semantics===e&&u(n)===t}))}},{key:"findSSRCByMSID",value:function(e){return this.ssrcs.find((function(t){return"msid"===t.attribute&&(null===e||t.value===e)}))}},{key:"getSSRCCount",value:function(){return d(this.mLine)}},{key:"containsAnySSRCGroups",value:function(){return void 0!==this.mLine.ssrcGroups}},{key:"getPrimaryVideoSsrc",value:function(){var e=this.mLine.type;if("video"!==e)throw new Error("getPrimarySsrc doesn't work with '".concat(e,"'"));if(1===d(this.mLine))return this.mLine.ssrcs[0].id;if(this.mLine.ssrcGroups){var t=this.findGroup("SIM");if(t)return u(t);var n=this.findGroup("FID");if(n)return u(n);var r=this.findGroup("FEC-FR");if(r)return u(r)}}},{key:"getRtxSSRC",value:function(e){var t=this.findGroupByPrimarySSRC("FID",e);return t&&l(t)}},{key:"getSSRCs",value:function(){return this.ssrcs.map((function(e){return e.id})).filter((function(e,t,n){return n.indexOf(e)===t}))}},{key:"getPrimaryVideoSSRCs",value:function(){var e=this.mLine.type;if("video"!==e)throw new Error("getPrimaryVideoSSRCs doesn't work with ".concat(e));var t,n=this.getSSRCs(),r=i(this.ssrcGroups);try{for(r.s();!(t=r.n()).done;){var o=t.value;if("FID"===o.semantics||"FEC-FR"===o.semantics){var a=l(o);n.splice(n.indexOf(a),1)}}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"dumpSSRCGroups",value:function(){return JSON.stringify(this.mLine.ssrcGroups)}},{key:"removeGroupsWithSSRC",value:function(e){this.mLine.ssrcGroups&&(this.mLine.ssrcGroups=this.mLine.ssrcGroups.filter((function(t){return-1===t.ssrcs.indexOf("".concat(e))})))}},{key:"removeGroupsBySemantics",value:function(e){this.mLine.ssrcGroups&&(this.mLine.ssrcGroups=this.mLine.ssrcGroups.filter((function(t){return t.semantics!==e})))}},{key:"replaceSSRC",value:function(e,t){this.mLine.ssrcs&&this.mLine.ssrcs.forEach((function(n){n.id===e&&(n.id=t)}))}},{key:"addSSRCGroup",value:function(e){this.ssrcGroups.push(e)}}]),e}(),h=function(){function e(t){a(this,e),this.parsedSDP=r.parse(t)}return c(e,[{key:"selectMedia",value:function(e){var t=this.parsedSDP.media.filter((function(t){return t.type===e})).map((function(e){return new f(e)}));return null!=t?t:null}},{key:"toRawSDP",value:function(){return r.write(this.parsedSDP)}}]),e}()},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":n(window))&&(r=window)}e.exports=r},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(274);e.exports=function e(t){if(!t)return null;var n=r(t);if("string"!==n){var o="";if(Array.isArray(t))for(var a=0,s=t.length;a<s;a++){var c=e(t[a]);c&&(o+=c+(";"!==c[c.length-1]?";":""))}else if("object"===n)for(var u in t){var l=t[u];null!=l&&("number"==typeof l&&l&&(l+="px"),o+=i.bb_(u)+":"+l+";")}return o||null}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="ws://localhost:4000/api/v1/messaging/websocket",i="wss://api.sariska.io/api/v1/media/websocket",o="https://api.sariska.io/api/v1/misc/get-presigned",a="https://api.sariska.io/api/v1/misc/generate-token";r="wss://api.sariska.io/api/v1/messaging/websocket",i="wss://api.sariska.io/api/v1/media/websocket",o="https://api.sariska.io/api/v1/misc/get-presigned",a="https://api.sariska.io/api/v1/misc/generate-token",t.RECORDING_TOGGLE="RECORDING_TOGGLE",t.GET_PRESIGNED_URL=o,t.GENERATE_TOKEN_URL=a,t.MESSAGING_SERVICE_WEBSOCKET=r,t.MEDIA_SERVICE_WEBSOCKET=i,t.EMPTY="EMPTY",t.pageSize=20,t.BACK="back",t.RELAOD="reload",t.SECRET_SALT="R43TWE",t.FRAMERATE=30,t.PRIMARY_BUTTON="PRIMARY_BUTTON",t.PRIMARY_BUTTON_WITH_INPUT="PRIMARY_BUTTON_WITH_INPUT",t.PRIMARY_BUTTON_WITH_WIDGET_OPEN="PRIMARY_BUTTON_WITH_WIDGET_OPEN",t.PRIMARY_BUTTON_WITH_WIDGET_CLOSE="PRIMARY_BUTTON_WITH_WIDGET_CLOSE",t.INVITE_PEOPLE="INVITE_PEOPLE",t.AUDIO="AUDIO",t.IS_MEDIA="isMedia",t.IS_SCREEN_SHARING="screenSharing",t.IS_REOCRDING="recording",t.IS_CHAT="isChat",t.SYNC_WITH_CURRENT_URL="syncUrl",t.CANCEL_POPUP="CANCEL_POPUP",t.JOIN_SESSION="JOIN_SESSION",t.MUTE_ALL_TOGGLE="muteAll",t.VIDEO_TOGGLE="videoEnabled",t.WIDGET_TOGGLE="videoWidget",t.FULL_SCREEN_TOGGLE="fullScreenToggle",t.MIC_TOGGLE="audioEnabled",t.CALL_END="CALL_END",t.WIDGET_ACTION="WIDGET_ACTION",t.timeout=2e3,t.CB__TOOLBOX_CONTAINER="cb--toolbox-container",t.CB__CUSTOM_MOUSE_CLASS="cb__customMouse",t.INIT_CHAT="INIT_CHAT",t.AFTER_CLOSE_SESSION_PUBLISHER="AFTER_CLOSE_SESSION_PUBLISHER",t.AFTER_CLOSE_SESSION_SUBSCRIBER="AFTER_CLOSE_SESSION_SUBSCRIBER",t.CLOSE_SESSION="close_session",t.REPORT_PROBLEM="REPORT_PROBLEM",t.ERROR="ERROR",t.GOOGLE_API_FEEDBACK_URL="https://docs.google.com/forms/u/0/d/e/1FAIpQLSdwCSJinbN0OMHTxRksOq9f6ZelI-FyGypFXn_8jV8MR09LgQ/formResponse",t.EMOJI_RANGES_REGEX=/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC68(?:\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83E\uDDD1(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFE])|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83E\uDDD1(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC3B\u200D\u2744|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E-\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDF])\u200D[\u2640\u2642])\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g,function(e){e.PresenceDiff="presence_diff",e.PresenceState="presence_state",e.PrivateMessage="new_message",e.WidgetAction="widget_action",e.UserJoined="user_joined",e.MessageCount="archived_message_count",e.ArchivedMessage="archived_message"}(t.ChannelMesssageEvents||(t.ChannelMesssageEvents={}))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){var t=e;return e>=Number.MAX_SAFE_INTEGER&&(t=0),t+1}function o(e){return e.length>0?e.reduce((function(e,t){return e+t}))/e.length:0}function a(e){return e.filter((function(e){return e>=0}))}n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return s}));var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.average=0,this.n=0}var t,n,i;return t=e,(n=[{key:"addNext",value:function(e){"number"==typeof e&&(this.n+=1,this.average=this.average+(e-this.average)/this.n)}},{key:"getAverage",value:function(){return this.average}}])&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";var r;n.r(t),n.d(t,"ConnectionQualityEvents",(function(){return r})),n.d(t,"LOCAL_STATS_UPDATED",(function(){return i})),n.d(t,"REMOTE_STATS_UPDATED",(function(){return o})),function(e){e.LOCAL_STATS_UPDATED="cq.local_stats_updated",e.REMOTE_STATS_UPDATED="cq.remote_stats_updated"}(r||(r={}));var i=r.LOCAL_STATS_UPDATED,o=r.REMOTE_STATS_UPDATED},function(e,t,n){var r=n(42),i=n(103);e.exports=n(39)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(27),i=n(58),o=n(65),a=n(104)("src"),s=n(383),c=(""+s).split("toString");n(73).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var u="function"==typeof n;u&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(u&&(o(n,a)||i(n,a,e[t]?""+e[t]:c.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},function(e,t,n){var r=n(6),i=n(29),o=n(82),a=/"/g,s=function(e,t,n,r){var i=String(o(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),r(r.P+r.F*i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",n)}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(274),o=n(167).u_,a=n(217),s=n(277).NOOP,c=function(){return s},u=/^\d[\d[\]]*$/,l="undefined"==typeof window;function d(e,t,n){var r=t?t.length:0;if(0===r)return n;for(var i,o=n||{},a=r;a--;)o["on"+(i=t[a])[0]]=e.d(i[0],i[1],i[2],i[3]);return o}e.exports=function(e,t,n,f,h,p,m,v,g){if(t){var y=n&&n(),_=m&&m.n_;if("string"==typeof t)u.test(v)||(v="@"+v),f?(e.bd_(t,y,v,m,d(m,g,p)),f(e),e.be_()):e.bf_(t,y,v,m,d(m,g,p));else{null==y?y={renderBody:f}:"object"===r(y)&&(y=function(e){var t={};for(var n in e)t[i.bc_(n)]=e[n];return t}(y),f&&(y.renderBody=f));var b=t._||t.render||t.renderer&&t.renderer.renderer||t.renderer;if(b)e.c(m,v,g),b(y,e),e.m_=null;else{var E=t&&t.renderBody||t,S="function"==typeof E;if(E.safeHTML)return void e.write(t.safeHTML);if(S){var C=m?m._N_:0,w=E===s,T=l?1&C:w;if(e.bf(v,_,T),!w&&S){var D=o(e),A=D.p_,R=D.k_;D.p_=new a(_,A.id+"-"+A._Q_(v),R),E.toJSON=c,h?E.apply(null,[e].concat(h,y)):E(e,y),D.p_=A}e.ef()}else e.error("Invalid dynamic tag value")}}}else f&&(e.bf(v,_,l&&m&&1&m._N_),f(e),e.ef())}},function(e,t,n){(function(e,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i="[object Arguments]",o="[object Map]",a="[object Object]",s="[object Set]",c=/^\[object .+?Constructor\]$/,u=/^(?:0|[1-9]\d*)$/,l={};l["[object Float32Array]"]=l["[object Float64Array]"]=l["[object Int8Array]"]=l["[object Int16Array]"]=l["[object Int32Array]"]=l["[object Uint8Array]"]=l["[object Uint8ClampedArray]"]=l["[object Uint16Array]"]=l["[object Uint32Array]"]=!0,l[i]=l["[object Array]"]=l["[object ArrayBuffer]"]=l["[object Boolean]"]=l["[object DataView]"]=l["[object Date]"]=l["[object Error]"]=l["[object Function]"]=l[o]=l["[object Number]"]=l[a]=l["[object RegExp]"]=l[s]=l["[object String]"]=l["[object WeakMap]"]=!1;var d="object"==(void 0===e?"undefined":r(e))&&e&&e.Object===Object&&e,f="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,h=d||f||Function("return this")(),p="object"==r(t)&&t&&!t.nodeType&&t,m=p&&"object"==r(n)&&n&&!n.nodeType&&n,v=m&&m.exports===p,g=v&&d.process,y=function(){try{return g&&g.binding&&g.binding("util")}catch(e){}}(),_=y&&y.isTypedArray;function b(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function E(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function S(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var C,w,T,D=Array.prototype,A=Function.prototype,R=Object.prototype,k=h["__core-js_shared__"],O=A.toString,j=R.hasOwnProperty,P=(C=/[^.]+$/.exec(k&&k.keys&&k.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"",I=R.toString,N=RegExp("^"+O.call(j).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),M=v?h.Buffer:void 0,x=h.Symbol,L=h.Uint8Array,F=R.propertyIsEnumerable,B=D.splice,U=x?x.toStringTag:void 0,V=Object.getOwnPropertySymbols,H=M?M.isBuffer:void 0,G=(w=Object.keys,T=Object,function(e){return w(T(e))}),J=ye(h,"DataView"),z=ye(h,"Map"),W=ye(h,"Promise"),K=ye(h,"Set"),q=ye(h,"WeakMap"),$=ye(Object,"create"),X=Se(J),Y=Se(z),Q=Se(W),Z=Se(K),ee=Se(q),te=x?x.prototype:void 0,ne=te?te.valueOf:void 0;function re(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ie(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function oe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ae(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new oe;++t<n;)this.add(e[t])}function se(e){var t=this.__data__=new ie(e);this.size=t.size}function ce(e,t){var n=Te(e),r=!n&&we(e),i=!n&&!r&&De(e),o=!n&&!r&&!i&&je(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=s.length;for(var u in e)!t&&!j.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Ee(u,c))||s.push(u);return s}function ue(e,t){for(var n=e.length;n--;)if(Ce(e[n][0],t))return n;return-1}function le(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":U&&U in Object(e)?function(e){var t=j.call(e,U),n=e[U];try{e[U]=void 0;var r=!0}catch(e){}var i=I.call(e);r&&(t?e[U]=n:delete e[U]);return i}(e):function(e){return I.call(e)}(e)}function de(e){return Oe(e)&&le(e)==i}function fe(e,t,n,r,c){return e===t||(null==e||null==t||!Oe(e)&&!Oe(t)?e!=e&&t!=t:function(e,t,n,r,c,u){var l=Te(e),d=Te(t),f=l?"[object Array]":be(e),h=d?"[object Array]":be(t),p=(f=f==i?a:f)==a,m=(h=h==i?a:h)==a,v=f==h;if(v&&De(e)){if(!De(t))return!1;l=!0,p=!1}if(v&&!p)return u||(u=new se),l||je(e)?me(e,t,n,r,c,u):function(e,t,n,r,i,a,c){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new L(e),new L(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ce(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case o:var u=E;case s:var l=1&r;if(u||(u=S),e.size!=t.size&&!l)return!1;var d=c.get(e);if(d)return d==t;r|=2,c.set(e,t);var f=me(u(e),u(t),r,i,a,c);return c.delete(e),f;case"[object Symbol]":if(ne)return ne.call(e)==ne.call(t)}return!1}(e,t,f,n,r,c,u);if(!(1&n)){var g=p&&j.call(e,"__wrapped__"),y=m&&j.call(t,"__wrapped__");if(g||y){var _=g?e.value():e,b=y?t.value():t;return u||(u=new se),c(_,b,n,r,u)}}if(!v)return!1;return u||(u=new se),function(e,t,n,r,i,o){var a=1&n,s=ve(e),c=s.length,u=ve(t).length;if(c!=u&&!a)return!1;var l=c;for(;l--;){var d=s[l];if(!(a?d in t:j.call(t,d)))return!1}var f=o.get(e);if(f&&o.get(t))return f==t;var h=!0;o.set(e,t),o.set(t,e);var p=a;for(;++l<c;){d=s[l];var m=e[d],v=t[d];if(r)var g=a?r(v,m,d,t,e,o):r(m,v,d,e,t,o);if(!(void 0===g?m===v||i(m,v,n,r,o):g)){h=!1;break}p||(p="constructor"==d)}if(h&&!p){var y=e.constructor,_=t.constructor;y==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _||(h=!1)}return o.delete(e),o.delete(t),h}(e,t,n,r,c,u)}(e,t,n,r,fe,c))}function he(e){return!(!ke(e)||function(e){return!!P&&P in e}(e))&&(Ae(e)?N:c).test(Se(e))}function pe(e){if(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||R,t!==r)return G(e);var t,n,r,i=[];for(var o in Object(e))j.call(e,o)&&"constructor"!=o&&i.push(o);return i}function me(e,t,n,r,i,o){var a=1&n,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var u=o.get(e);if(u&&o.get(t))return u==t;var l=-1,d=!0,f=2&n?new ae:void 0;for(o.set(e,t),o.set(t,e);++l<s;){var h=e[l],p=t[l];if(r)var m=a?r(p,h,l,t,e,o):r(h,p,l,e,t,o);if(void 0!==m){if(m)continue;d=!1;break}if(f){if(!b(t,(function(e,t){if(a=t,!f.has(a)&&(h===e||i(h,e,n,r,o)))return f.push(t);var a}))){d=!1;break}}else if(h!==p&&!i(h,p,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function ve(e){return function(e,t,n){var r=t(e);return Te(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,Pe,_e)}function ge(e,t){var n,i,o=e.__data__;return("string"==(i=r(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function ye(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return he(n)?n:void 0}re.prototype.clear=function(){this.__data__=$?$(null):{},this.size=0},re.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},re.prototype.get=function(e){var t=this.__data__;if($){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return j.call(t,e)?t[e]:void 0},re.prototype.has=function(e){var t=this.__data__;return $?void 0!==t[e]:j.call(t,e)},re.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=$&&void 0===t?"__lodash_hash_undefined__":t,this},ie.prototype.clear=function(){this.__data__=[],this.size=0},ie.prototype.delete=function(e){var t=this.__data__,n=ue(t,e);return!(n<0)&&(n==t.length-1?t.pop():B.call(t,n,1),--this.size,!0)},ie.prototype.get=function(e){var t=this.__data__,n=ue(t,e);return n<0?void 0:t[n][1]},ie.prototype.has=function(e){return ue(this.__data__,e)>-1},ie.prototype.set=function(e,t){var n=this.__data__,r=ue(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},oe.prototype.clear=function(){this.size=0,this.__data__={hash:new re,map:new(z||ie),string:new re}},oe.prototype.delete=function(e){var t=ge(this,e).delete(e);return this.size-=t?1:0,t},oe.prototype.get=function(e){return ge(this,e).get(e)},oe.prototype.has=function(e){return ge(this,e).has(e)},oe.prototype.set=function(e,t){var n=ge(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},ae.prototype.add=ae.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ae.prototype.has=function(e){return this.__data__.has(e)},se.prototype.clear=function(){this.__data__=new ie,this.size=0},se.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},se.prototype.get=function(e){return this.__data__.get(e)},se.prototype.has=function(e){return this.__data__.has(e)},se.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ie){var r=n.__data__;if(!z||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new oe(r)}return n.set(e,t),this.size=n.size,this};var _e=V?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}(V(e),(function(t){return F.call(e,t)})))}:function(){return[]},be=le;function Ee(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||u.test(e))&&e>-1&&e%1==0&&e<t}function Se(e){if(null!=e){try{return O.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ce(e,t){return e===t||e!=e&&t!=t}(J&&"[object DataView]"!=be(new J(new ArrayBuffer(1)))||z&&be(new z)!=o||W&&"[object Promise]"!=be(W.resolve())||K&&be(new K)!=s||q&&"[object WeakMap]"!=be(new q))&&(be=function(e){var t=le(e),n=t==a?e.constructor:void 0,r=n?Se(n):"";if(r)switch(r){case X:return"[object DataView]";case Y:return o;case Q:return"[object Promise]";case Z:return s;case ee:return"[object WeakMap]"}return t});var we=de(function(){return arguments}())?de:function(e){return Oe(e)&&j.call(e,"callee")&&!F.call(e,"callee")},Te=Array.isArray;var De=H||function(){return!1};function Ae(e){if(!ke(e))return!1;var t=le(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Re(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function ke(e){var t=r(e);return null!=e&&("object"==t||"function"==t)}function Oe(e){return null!=e&&"object"==r(e)}var je=_?function(e){return function(t){return e(t)}}(_):function(e){return Oe(e)&&Re(e.length)&&!!l[le(e)]};function Pe(e){return null!=(t=e)&&Re(t.length)&&!Ae(t)?ce(e):pe(e);var t}n.exports=function(e,t){return fe(e,t)}}).call(this,n(53),n(98)(e))},function(e,t,n){"use strict";var r;n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),function(e){e.PENDING="pending",e.ACTIVE="active",e.ENDED="ended"}(r||(r={}));var i=r.PENDING,o=r.ACTIVE,a=r.ENDED},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.ACCEPT="session-accept",e.CONNECTION_ERROR="connection-error-encountered",e.INITIATE="session-initiate",e.TERMINATE="session-terminate",e.TRANSPORT_INFO="transport-info",e.UNAVAILABLE="unavailable"}(r||(r={}))},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(137),i=n(82);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(138),i=n(103),o=n(66),a=n(81),s=n(65),c=n(230),u=Object.getOwnPropertyDescriptor;t.f=n(39)?u:function(e,t){if(e=o(e),t=a(t,!0),c)try{return u(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(65),i=n(44),o=n(189)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){"use strict";e.exports=function(e){var t=e.renderer||e._||"function"==typeof e&&e||function(n,r){(t=e.renderer||e._||e.render)(n,r)};return function(e,n,r,i,o){n.c(r,i,o),t(e,n)}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var r=n(37),i=n(26),o=n(5);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=n(4).getLogger(e),c=5,u={obtainStream:null,init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e,this.obtainStream=this._createObtainStreamMethod(),this.obtainStream||s.info("Desktop sharing disabled")},_createObtainStreamMethod:function(){return o.a.isNWJS()?function(e,t){window.JitsiMeetNW.obtainDesktopStream(e,(function(e,n){var o;o=e&&"InvalidStateError"===e.name?new r.a(i.SCREENSHARING_USER_CANCELED):new r.a(e,n,["desktop"]),"function"==typeof t&&t(o)}))}:o.a.isElectron()?this.obtainScreenOnElectron:o.a.isReactNative()&&o.a.supportsGetDisplayMedia()?this.obtainScreenFromGetDisplayMediaRN:o.a.supportsGetDisplayMedia()?this.obtainScreenFromGetDisplayMedia:(s.log("Screen sharing not supported on ",o.a.getName()),null)},_getAudioConstraints:function(){var e=this.options.audioQuality;return!(null==e?void 0:e.stereo)||{autoGainControl:!1,channelCount:2,echoCancellation:!1,noiseSuppression:!1}},isSupported:function(){return null!==this.obtainStream},obtainScreenOnElectron:function(e,t){var n=this;if(window.JitsiMeetScreenObtainer&&window.JitsiMeetScreenObtainer.openDesktopPicker){var o=this.options,a=o.desktopSharingFrameRate,s=o.desktopSharingSources;window.JitsiMeetScreenObtainer.openDesktopPicker({desktopSharingSources:s||["screen","window"]},(function(o,s){var u,l,d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(o){var f=!1;if(d){f={};var h=n._getAudioConstraints();"boolean"!=typeof h&&(f={optional:h}),"screen"===s&&(f.mandatory={chromeMediaSource:"desktop"})}var p={audio:f,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:o,minFrameRate:null!==(u=null==a?void 0:a.min)&&void 0!==u?u:c,maxFrameRate:null!==(l=null==a?void 0:a.max)&&void 0!==l?l:c,maxWidth:window.screen.width,maxHeight:window.screen.height}}};navigator.mediaDevices.getUserMedia(p).then((function(t){return e({stream:t,sourceId:o,sourceType:s})}),t)}else t(new r.a(i.SCREENSHARING_USER_CANCELED))}),(function(e){return t(new r.a(i.ELECTRON_DESKTOP_PICKER_ERROR,e))}))}else t(new r.a(i.ELECTRON_DESKTOP_PICKER_NOT_FOUND))},obtainScreenFromGetDisplayMedia:function(e,t){var n;n=navigator.getDisplayMedia?navigator.getDisplayMedia.bind(navigator):navigator.mediaDevices.getDisplayMedia.bind(navigator.mediaDevices);var o=this.options.desktopSharingFrameRate,c="object"!==a(o)||{frameRate:o},u=this._getAudioConstraints();c.frameRate&&delete c.frameRate.min;var l={video:c,audio:u,cursor:"always"};s.info("Using getDisplayMedia for screen sharing",l),n(l).then((function(t){e({stream:t,sourceId:t.id})})).catch((function(e){var n={errorName:e&&e.name,errorMsg:e&&e.message,errorStack:e&&e.stack};s.error("getDisplayMedia error",l,n),n.errorMsg&&-1!==n.errorMsg.indexOf("denied by system")?t(new r.a(i.PERMISSION_DENIED)):t(new r.a(i.SCREENSHARING_USER_CANCELED))}))},obtainScreenFromGetDisplayMediaRN:function(e,t){s.info("Using getDisplayMedia for screen sharing"),navigator.mediaDevices.getDisplayMedia({video:!0}).then((function(t){e({stream:t,sourceId:t.id})})).catch((function(){t(new r.a(i.SCREENSHARING_USER_CANCELED))}))},setDesktopSharingFrameRate:function(e){s.info("Setting the desktop capture rate to ".concat(e)),this.options.desktopSharingFrameRate={min:c,max:e}}};t.b=u}).call(this,"/index.js")},function(e,t,n){"use strict";var r=n(48);t.a=r.a.push},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return P}));var r=n(5),i=n(22),o=n.n(i);function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u,l=n(4).getLogger(e),d="createOffer",f="createAnswer",h="setLocalDescription",p="setRemoteDescription",m="addIceCandidate",v="getUserMedia",g="iceConnectionFailure",y="applicationLog",_="fabricHold",b="fabricResume",E="audioMute",S="audioUnmute",C="videoPause",w="videoResume",T="screenShareStart",D="screenShareStop",A="dominantSpeaker",R="activeDeviceList",k="error",O="event",j="mstWithUserID",P=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.confID=n.confID,this.tpc=t,this.peerconnection=t.peerconnection,this.remoteUserID=n.remoteUserID||"jitsi",this.hasFabric=!1,e.fabrics.add(this),e.backendInitialized&&(this._addNewFabric(),1===e.fabrics.size&&e._emptyReportQueue(this))}var t,n,i;return t=e,i=[{key:"_addNewFabricCallback",value:function(t,n){e.backend&&"success"!==t&&l.error("Monitoring status: ".concat(t," msg: ").concat(n))}},{key:"_initCallback",value:function(t,n){if(l.log("CallStats Status: err=".concat(t," msg=").concat(n)),"success"===t){e.backendInitialized=!0;var r,i=!1,o=null,s=a(e.fabrics.values());try{for(s.s();!(r=s.n()).done;){var c=r.value;c.hasFabric||(l.debug("addNewFabric - initCallback"),c._addNewFabric()&&(i=!0,o||(o=c)))}}catch(e){s.e(e)}finally{s.f()}i&&e._emptyReportQueue(o)}}},{key:"_emptyReportQueue",value:function(t){var n,r=t.confID,i=t.peerconnection,o=a(e.reportsQueue);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(s.type===k){var c=s.data;e._reportError(t,c.type,c.error,c.pc||i)}else if(s.type===O){var u=s.data;e.backend.sendFabricEvent(s.pc||i,u.event,r,u.eventData)}else if(s.type===j){var l=s.data;e.backend.associateMstWithUserID(s.pc||i,l.callStatsId,r,l.ssrc,l.usageLabel,l.containerId)}}}catch(e){o.e(e)}finally{o.f()}e.reportsQueue.length=0}},{key:"_reportError",value:function(t,n,r,i){var o=r;o||(l.warn("No error is passed!"),o=new Error("Unknown error")),e.backendInitialized&&t?e.backend.reportError(i,t.confID,n,o):e.reportsQueue.push({type:k,data:{error:o,pc:i,type:n}})}},{key:"_reportEvent",value:function(t,n,r){var i=t&&t.peerconnection,o=t&&t.confID;e.backendInitialized&&t?e.backend.sendFabricEvent(i,n,o,r):e.reportsQueue.push({confID:o,pc:i,type:O,data:{event:n,eventData:r}})}},{key:"_traceAndCatchBackendCalls",value:function(e){for(var t=function(){var t=i[n],r=e[t];e[t]=function(){try{for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return r.apply(e,n)}catch(e){o.a.callErrorHandler(e)}}},n=0,i=["associateMstWithUserID","sendFabricEvent","sendUserFeedback"];n<i.length;n++)t();for(var a=function(){var t=c[s],n=e[t];e[t]=function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];l.debug(t,i),n.apply(e,i)}},s=0,c=["associateMstWithUserID","sendFabricEvent","sendUserFeedback"];s<c.length;s++)a();var u=e.reportError;e.reportError=function(t,n,i){for(var a=arguments.length,s=new Array(a>3?a-3:0),c=3;c<a;c++)s[c-3]=arguments[c];i===y?r.a.isReactNative()||console&&console.debug("reportError",t,n,i):l.debug.apply(l,["reportError",t,n,i].concat(s));try{u.call.apply(u,[e,t,n,i].concat(s))}catch(e){i===y?console&&console.error("reportError",e):o.a.callErrorHandler(e)}}}},{key:"fabrics",get:function(){return u||(u=new Set),u}},{key:"initBackend",value:function(t){if(e.backend)throw new Error("CallStats backend has been initialized already!");try{var n=callstats;e.backend=new n,e._traceAndCatchBackendCalls(e.backend),e.userID={aliasName:t.aliasName,userName:t.userName},e.callStatsID=t.callStatsID,e.callStatsSecret=t.callStatsSecret;var i=Object.assign({},t.configParams);if(t.applicationName&&(i.applicationVersion="".concat(t.applicationName," (").concat(r.a.getName(),")")),t.confID){var a=t.confID.match(/.*\/(.*)\/.*/);i.siteID=t.siteID||a&&a[1]||"/"}e.backend.initialize(e.callStatsID,e.callStatsSecret,e.userID,e._initCallback,void 0,i);var s=t.getWiFiStatsMethod;return s&&(e.backend.attachWifiStatsHandler(s),s().then((function(e){e&&l.info("Reported wifi addresses:",JSON.parse(e).addresses)})).catch((function(){}))),!0}catch(t){return o.a.callErrorHandler(t),e.backend=null,l.error(t),!1}}},{key:"isBackendInitialized",value:function(){return Boolean(e.backend)}},{key:"sendActiveDeviceListEvent",value:function(t,n){e._reportEvent(n,R,t)}},{key:"sendApplicationLog",value:function(t,n){try{e._reportError(n,y,t,n&&n.peerconnection)}catch(e){console&&"function"==typeof console.error&&console.error("sendApplicationLog failed",e)}}},{key:"sendFeedback",value:function(t,n,r){return new Promise((function(i,o){if(e.backend)e.backend.sendUserFeedback(t,{userID:e.userID,overall:n,comment:r},(function(e,t){"success"===e?i(t):o(t)}));else{var a="Failed to submit feedback to CallStats - no backend";l.error(a),o(a)}}))}},{key:"sendGetUserMediaFailed",value:function(t,n){e._reportError(n,v,t,null)}},{key:"sendMuteEvent",value:function(t,n,r){var i;i="video"===n?t?C:w:t?E:S,e._reportEvent(r,i)}}],(n=[{key:"_addNewFabric",value:function(){l.info("addNewFabric",this.remoteUserID);try{var t={remoteEndpointType:this.tpc.isP2P?e.backend.endpointType.peer:e.backend.endpointType.server},n=e.backend.addNewFabric(this.peerconnection,this.remoteUserID,e.backend.fabricUsage.multiplex,this.confID,t,e._addNewFabricCallback);this.hasFabric=!0;var r="success"===n.status;return r||l.error("callstats fabric not initilized",n.message),r}catch(e){return o.a.callErrorHandler(e),!1}}},{key:"associateStreamWithVideoTag",value:function(t,n,r,i,o){if(e.backend){var a=n?e.userID:r;e.backendInitialized?e.backend.associateMstWithUserID(this.peerconnection,a,this.confID,t,i,o):e.reportsQueue.push({type:j,pc:this.peerconnection,data:{callStatsId:a,containerId:o,ssrc:t,usageLabel:i}})}}},{key:"sendDominantSpeakerEvent",value:function(){e._reportEvent(this,A)}},{key:"sendTerminateEvent",value:function(){e.backendInitialized&&e.backend.sendFabricEvent(this.peerconnection,e.backend.fabricEvent.fabricTerminated,this.confID),e.fabrics.delete(this)}},{key:"sendIceConnectionFailedEvent",value:function(){e._reportError(this,g,null,this.peerconnection)}},{key:"sendCreateOfferFailed",value:function(t){e._reportError(this,d,t,this.peerconnection)}},{key:"sendCreateAnswerFailed",value:function(t){e._reportError(this,f,t,this.peerconnection)}},{key:"sendResumeOrHoldEvent",value:function(t){e._reportEvent(this,t?b:_)}},{key:"sendScreenSharingEvent",value:function(t,n){var r;n&&(r={ssrc:n}),e._reportEvent(this,t?T:D,r)}},{key:"sendSetLocalDescFailed",value:function(t){e._reportError(this,h,t,this.peerconnection)}},{key:"sendSetRemoteDescFailed",value:function(t){e._reportError(this,p,t,this.peerconnection)}},{key:"sendAddIceCandidateFailed",value:function(t){e._reportError(this,m,t,this.peerconnection)}}])&&c(t.prototype,n),i&&c(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();P.backend=null,P.reportsQueue=[],P.backendInitialized=!1,P.callStatsID=null,P.callStatsSecret=null,P.userID=null}).call(this,"/index.js")},function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(50);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";var r=n(29);e.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function e(t){switch(r(t)){case"string":return t||null;case"object":var n="",i="";if(Array.isArray(t))for(var o=0,a=t.length;o<a;o++){var s=e(t[o]);s&&(n+=i+s,i=" ")}else for(var c in t)t[c]&&(n+=i+c,i=" ");return n||null;default:return null}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return A}));n(306);var r=n(307),i=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s={Chrome:"chrome",Chromium:"chrome",Opera:"opera",Firefox:"firefox","Internet Explorer":"iexplorer",Safari:"safari"};function c(){var e=navigator.userAgent;if(e.match(/Electron/))return{name:"electron",version:e.match(/Electron(?:\s|\/)([\d.]+)/)[1]}}function u(){var e=navigator.userAgent;if(e.match(/JitsiMeetNW/))return{name:"nwjs",version:e.match(/JitsiMeetNW\/([\d.]+)/)[1]}}function l(){var e,t,n=navigator.userAgent.match(/\b(react[ \t_-]*native)(?:\/(\S+))?/i);if(n||"ReactNative"===navigator.product)return n&&n.length>2&&(t=n[1],e=n[2]),t||(t="react-native"),e||(e="unknown"),{name:"react-native",version:e}}function d(e){for(var t,n=[l,c,u],r=0;r<n.length;r++)if(t=n[r]())return t;var i=e.getBrowserName();return i in s?{name:s[i],version:e.getBrowserVersion()}:(t=function(){var e=navigator.userAgent,t={name:"unknown",version:void 0};if(e.match(/Chrome/)&&!e.match(/Edge/))if(e.match(/Edg(A?)/)){var n=e.match(/Chrome\/([\d.]+)/)[1];Number.parseInt(n,10)>72&&(t.name="chrome",t.version=n)}else t.name="chrome",t.version=e.match(/Chrome\/([\d.]+)/)[1];return t}())||{name:"unknown",version:void 0}}var f=function(){function e(t){var n,r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._bowser=i.a.getParser(navigator.userAgent),void 0===t){var o=d(this._bowser);n=o.name,r=o.version}else t.name in s?(n=s[t.name],r=t.version):(n="unknown",r=void 0);this._name=n,this._version=r}var t,n,r;return t=e,(n=[{key:"getName",value:function(){return this._name}},{key:"isChrome",value:function(){return"chrome"===this._name}},{key:"isOpera",value:function(){return"opera"===this._name}},{key:"isFirefox",value:function(){return"firefox"===this._name}},{key:"isIExplorer",value:function(){return"iexplorer"===this._name}},{key:"isSafari",value:function(){return"safari"===this._name}},{key:"isNWJS",value:function(){return"nwjs"===this._name}},{key:"isElectron",value:function(){return"electron"===this._name}},{key:"isReactNative",value:function(){return"react-native"===this._name}},{key:"getVersion",value:function(){return this._version}},{key:"_checkCondition",value:function(e){if(this._version)return this._bowser.satisfies(e)}},{key:"isVersionGreaterThan",value:function(e){return this._checkCondition(o({},this._name,">".concat(e)))}},{key:"isVersionLessThan",value:function(e){return this._checkCondition(o({},this._name,"<".concat(e)))}},{key:"isVersionEqualTo",value:function(e){return this._checkCondition(o({},this._name,"~".concat(e)))}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();var h=n(34),p=n.n(h);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=function(e){_(n,e);var t=E(n);function n(){var e;v(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return T(C(e=t.call.apply(t,[this].concat(i))),"_storage",{}),e}return y(n,[{key:"clear",value:function(){this._storage={}}},{key:"length",get:function(){return Object.keys(this._storage).length}},{key:"getItem",value:function(e){return this._storage[e]}},{key:"setItem",value:function(e,t){this._storage[e]=t}},{key:"removeItem",value:function(e){delete this._storage[e]}},{key:"key",value:function(e){var t=Object.keys(this._storage);if(!(t.length<=e))return t[e]}},{key:"serialize",value:function(){return JSON.stringify(this._storage)}}]),n}(p.a),A=new(function(e){_(n,e);var t=E(n);function n(){var e;v(this,n),e=t.call(this);try{e._storage=window.localStorage,e._localStorageDisabled=!1}catch(e){}return e._storage||(console.warn("Local storage is disabled."),e._storage=new D,e._localStorageDisabled=!0),e}return y(n,[{key:"isLocalStorageDisabled",value:function(){return this._localStorageDisabled}},{key:"clear",value:function(){this._storage.clear(),this.emit("changed")}},{key:"length",get:function(){return this._storage.length}},{key:"getItem",value:function(e){return this._storage.getItem(e)}},{key:"setItem",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._storage.setItem(e,t),n||this.emit("changed")}},{key:"removeItem",value:function(e){this._storage.removeItem(e),this.emit("changed")}},{key:"key",value:function(e){return this._storage.key(e)}},{key:"serialize",value:function(){if(this.isLocalStorageDisabled())return this._storage.serialize();for(var e=this._storage.length,t={},n=0;n<e;n++){var r=this._storage.key(n);t[r]=this._storage.getItem(r)}return JSON.stringify(t)}}]),n}(p.a))},function(e,t,n){(function(e,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i="[object Arguments]",o="[object Function]",a="[object GeneratorFunction]",s="[object Map]",c="[object Set]",u=/\w*$/,l=/^\[object .+?Constructor\]$/,d=/^(?:0|[1-9]\d*)$/,f={};f[i]=f["[object Array]"]=f["[object ArrayBuffer]"]=f["[object DataView]"]=f["[object Boolean]"]=f["[object Date]"]=f["[object Float32Array]"]=f["[object Float64Array]"]=f["[object Int8Array]"]=f["[object Int16Array]"]=f["[object Int32Array]"]=f[s]=f["[object Number]"]=f["[object Object]"]=f["[object RegExp]"]=f[c]=f["[object String]"]=f["[object Symbol]"]=f["[object Uint8Array]"]=f["[object Uint8ClampedArray]"]=f["[object Uint16Array]"]=f["[object Uint32Array]"]=!0,f["[object Error]"]=f[o]=f["[object WeakMap]"]=!1;var h="object"==(void 0===e?"undefined":r(e))&&e&&e.Object===Object&&e,p="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,m=h||p||Function("return this")(),v="object"==r(t)&&t&&!t.nodeType&&t,g=v&&"object"==r(n)&&n&&!n.nodeType&&n,y=g&&g.exports===v;function _(e,t){return e.set(t[0],t[1]),e}function b(e,t){return e.add(t),e}function E(e,t,n,r){var i=-1,o=e?e.length:0;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function S(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function C(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function w(e,t){return function(n){return e(t(n))}}function T(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var D,A=Array.prototype,R=Function.prototype,k=Object.prototype,O=m["__core-js_shared__"],j=(D=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+D:"",P=R.toString,I=k.hasOwnProperty,N=k.toString,M=RegExp("^"+P.call(I).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=y?m.Buffer:void 0,L=m.Symbol,F=m.Uint8Array,B=w(Object.getPrototypeOf,Object),U=Object.create,V=k.propertyIsEnumerable,H=A.splice,G=Object.getOwnPropertySymbols,J=x?x.isBuffer:void 0,z=w(Object.keys,Object),W=ge(m,"DataView"),K=ge(m,"Map"),q=ge(m,"Promise"),$=ge(m,"Set"),X=ge(m,"WeakMap"),Y=ge(Object,"create"),Q=Se(W),Z=Se(K),ee=Se(q),te=Se($),ne=Se(X),re=L?L.prototype:void 0,ie=re?re.valueOf:void 0;function oe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ae(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function se(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ce(e){this.__data__=new ae(e)}function ue(e,t){var n=we(e)||function(e){return function(e){return function(e){return!!e&&"object"==r(e)}(e)&&Te(e)}(e)&&I.call(e,"callee")&&(!V.call(e,"callee")||N.call(e)==i)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],o=n.length,a=!!o;for(var s in e)!t&&!I.call(e,s)||a&&("length"==s||be(s,o))||n.push(s);return n}function le(e,t,n){var r=e[t];I.call(e,t)&&Ce(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function de(e,t){for(var n=e.length;n--;)if(Ce(e[n][0],t))return n;return-1}function fe(e,t,n,r,l,d,h){var p;if(r&&(p=d?r(e,l,d,h):r(e)),void 0!==p)return p;if(!Re(e))return e;var m=we(e);if(m){if(p=function(e){var t=e.length,n=e.constructor(t);t&&"string"==typeof e[0]&&I.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!t)return function(e,t){var n=-1,r=e.length;t||(t=Array(r));for(;++n<r;)t[n]=e[n];return t}(e,p)}else{var v=_e(e),g=v==o||v==a;if(De(e))return function(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}(e,t);if("[object Object]"==v||v==i||g&&!d){if(S(e))return d?e:{};if(p=function(e){return"function"!=typeof e.constructor||Ee(e)?{}:(t=B(e),Re(t)?U(t):{});var t}(g?{}:e),!t)return function(e,t){return me(e,ye(e),t)}(e,function(e,t){return e&&me(t,ke(t),e)}(p,e))}else{if(!f[v])return d?e:{};p=function(e,t,n,r){var i=e.constructor;switch(t){case"[object ArrayBuffer]":return pe(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return function(e,t){var n=t?pe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var n=t?pe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,r);case s:return function(e,t,n){return E(t?n(C(e),!0):C(e),_,new e.constructor)}(e,r,n);case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,u.exec(e));return t.lastIndex=e.lastIndex,t}(e);case c:return function(e,t,n){return E(t?n(T(e),!0):T(e),b,new e.constructor)}(e,r,n);case"[object Symbol]":return o=e,ie?Object(ie.call(o)):{}}var o}(e,v,fe,t)}}h||(h=new ce);var y=h.get(e);if(y)return y;if(h.set(e,p),!m)var w=n?function(e){return function(e,t,n){var r=t(e);return we(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,ke,ye)}(e):ke(e);return function(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););}(w||e,(function(i,o){w&&(i=e[o=i]),le(p,o,fe(i,t,n,r,o,e,h))})),p}function he(e){return!(!Re(e)||(t=e,j&&j in t))&&(Ae(e)||S(e)?M:l).test(Se(e));var t}function pe(e){var t=new e.constructor(e.byteLength);return new F(t).set(new F(e)),t}function me(e,t,n,r){n||(n={});for(var i=-1,o=t.length;++i<o;){var a=t[i],s=r?r(n[a],e[a],a,n,e):void 0;le(n,a,void 0===s?e[a]:s)}return n}function ve(e,t){var n,i,o=e.__data__;return("string"==(i=r(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function ge(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return he(n)?n:void 0}oe.prototype.clear=function(){this.__data__=Y?Y(null):{}},oe.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},oe.prototype.get=function(e){var t=this.__data__;if(Y){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return I.call(t,e)?t[e]:void 0},oe.prototype.has=function(e){var t=this.__data__;return Y?void 0!==t[e]:I.call(t,e)},oe.prototype.set=function(e,t){return this.__data__[e]=Y&&void 0===t?"__lodash_hash_undefined__":t,this},ae.prototype.clear=function(){this.__data__=[]},ae.prototype.delete=function(e){var t=this.__data__,n=de(t,e);return!(n<0)&&(n==t.length-1?t.pop():H.call(t,n,1),!0)},ae.prototype.get=function(e){var t=this.__data__,n=de(t,e);return n<0?void 0:t[n][1]},ae.prototype.has=function(e){return de(this.__data__,e)>-1},ae.prototype.set=function(e,t){var n=this.__data__,r=de(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},se.prototype.clear=function(){this.__data__={hash:new oe,map:new(K||ae),string:new oe}},se.prototype.delete=function(e){return ve(this,e).delete(e)},se.prototype.get=function(e){return ve(this,e).get(e)},se.prototype.has=function(e){return ve(this,e).has(e)},se.prototype.set=function(e,t){return ve(this,e).set(e,t),this},ce.prototype.clear=function(){this.__data__=new ae},ce.prototype.delete=function(e){return this.__data__.delete(e)},ce.prototype.get=function(e){return this.__data__.get(e)},ce.prototype.has=function(e){return this.__data__.has(e)},ce.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ae){var r=n.__data__;if(!K||r.length<199)return r.push([e,t]),this;n=this.__data__=new se(r)}return n.set(e,t),this};var ye=G?w(G,Object):function(){return[]},_e=function(e){return N.call(e)};function be(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||d.test(e))&&e>-1&&e%1==0&&e<t}function Ee(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||k)}function Se(e){if(null!=e){try{return P.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ce(e,t){return e===t||e!=e&&t!=t}(W&&"[object DataView]"!=_e(new W(new ArrayBuffer(1)))||K&&_e(new K)!=s||q&&"[object Promise]"!=_e(q.resolve())||$&&_e(new $)!=c||X&&"[object WeakMap]"!=_e(new X))&&(_e=function(e){var t=N.call(e),n="[object Object]"==t?e.constructor:void 0,r=n?Se(n):void 0;if(r)switch(r){case Q:return"[object DataView]";case Z:return s;case ee:return"[object Promise]";case te:return c;case ne:return"[object WeakMap]"}return t});var we=Array.isArray;function Te(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!Ae(e)}var De=J||function(){return!1};function Ae(e){var t=Re(e)?N.call(e):"";return t==o||t==a}function Re(e){var t=r(e);return!!e&&("object"==t||"function"==t)}function ke(e){return Te(e)?ue(e):function(e){if(!Ee(e))return z(e);var t=[];for(var n in Object(e))I.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}n.exports=function(e){return fe(e,!0,!0)}}).call(this,n(53),n(98)(e))},function(e,t,n){var r=n(31);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(6),i=n(73),o=n(29);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",a)}},function(e,t,n){var r=n(74),i=n(137),o=n(44),a=n(38),s=n(205);e.exports=function(e,t){var n=1==e,c=2==e,u=3==e,l=4==e,d=6==e,f=5==e||d,h=t||s;return function(t,s,p){for(var m,v,g=o(t),y=i(g),_=r(s,p,3),b=a(y.length),E=0,S=n?h(t,b):c?h(t,0):void 0;b>E;E++)if((f||E in y)&&(v=_(m=y[E],E,g),e))if(n)S[E]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return E;case 2:S.push(m)}else if(l)return!1;return d?-1:u||l?l:S}}},function(e,t,n){var r=n(126),i=r.K_,o=r.al_,a=r.aj_,s=r.ai_,c=window.$MUID||(window.$MUID={i:0}),u=c.i++,l={},d=document,f={};function h(e){var t=i.get(e.fragment||e);t&&(t._e_(),delete l[t.id])}function p(){return"c"+c.i++}t.am_=u,t.I_=l,t.ap_=function(e,t){for(var n,r,o="string"==typeof e?(t||d).getElementById(e):e;o;){if(o.fragment?o.fragment.endNode===o?o=o.fragment.startNode:(o=o.fragment,n=i.get(o)):(r=a.get(o))&&(n=r.aU_),n)return n;o=o.previousSibling||o.parentNode}},t.aW_=h,t.J_=function e(t,n){if(h(t),1===t.nodeType||12===t.nodeType){var r;n&&(r=o.get(t))&&t===n.q_[r]&&(i.get(t)&&/\[\]$/.test(r)?delete n.q_[r][i.get(t).id]:delete n.q_[r]);for(var a=t.firstChild;a&&a!==t.endNode;)e(a,n),a=a.nextSibling}},t._Y_=function(){return p},t._H_=function(e,t,n,r){if(t){var i=e.id;return r?[t,i,n,r]:[t,i,n]}},t.an_=function(e){var t,n=a.get(e);return n?t=n.aV_:(t=s.get(e))||(t=e.getAttribute("data-marko"),s.set(e,t=t?JSON.parse(t):f)),t},t.av_=function(e,t,n,r){/\[\]$/.test(t)?(e[t]=e[t]||{})[r]=n:e[t]=n},t.aX_=function(e,t){return"#"===e[0]&&(e=e.replace("#"+t+"-","")),e}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(55),a=n(218),s=n(624);function c(e,t,n){var r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),i=-1!==e.indexOf("?")?"&":"?";return e.match(r)?e.replace(r,"$1"+t+"="+n+"$2"):e+i+t+"="+n}t.each=function(e){return[].slice.call(e||[])},t.getMethod=function(e){return e.replace(/_([a-z])/g,(function(e){return e[1].toUpperCase()}))},t.checkFalsy=function(e){return null==e||isNaN(e)||!1===e},t.splitUrl=function(e){var t,n,r;return(n=e.indexOf("#"))>=0?(t=e.slice(n),e=e.slice(0,n)):t="",(n=e.indexOf("?"))>=0?(r=e.slice(n),e=e.slice(0,n)):r="",{url:e,params:r,hash:t}},t.updateQueryStringParameter=c,t.getQueryStringValue=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},t.getURL=function(e,t){return c(e,"guestName",t)},t.pathFromUrl=function(e){var n;return n=0===(e=t.splitUrl(e).url).indexOf("file://")?e.replace(new RegExp("^file://(localhost)?"),""):e.replace(new RegExp("^([^:]+:)?//([^:/]+)(:\\d*)?/"),"/"),decodeURIComponent(n)},t.pickBestMatch=function(e,n,r){var i,o={score:0,object:null};return n.forEach((function(n){(i=t.numberOfMatchingSegments(e,r(n)))>o.score&&(o={object:n,score:i})})),o.score>0?o:null},t.numberOfMatchingSegments=function(e,t){if((e=u(e))===(t=u(t)))return 1e4;for(var n=e.split("/").reverse(),r=t.split("/").reverse(),i=Math.min(n.length,r.length),o=0;o<i&&n[o]===r[o];)++o;return o},t.pathsMatch=function(e,n){return t.numberOfMatchingSegments(e,n)>0},t.getLocation=function(e){var t=document.createElement("a");return t.href=e,""===t.host&&(t.href=t.href),t},t.updateSearch=function(e,t,n){return""===e?"?"+n:"?"+e.slice(1).split("&").map((function(e){return e.split("=")})).filter((function(e){return e[0]!==t})).map((function(e){return[e[0],e[1]].join("=")})).concat(n).join("&")};function u(e){return e.replace(/^\/+/,"").replace(/\\/g,"/").toLowerCase()}function l(){var e={};return location.href.split("?")[1]?(location.href.split("?")[1].split("&").forEach((function(t){e[t.split("=")[0]]=t.split("=")[1]})),e):{}}t.array=function(e){return[].slice.call(e)},t.normalisePath=u,t.cipher=function(e){var t=function(e){return e.split("").map((function(e){return e.charCodeAt(0)}))},n=function(e){return("0"+Number(e).toString(16)).substr(-2)},r=function(n){return t(e).reduce((function(e,t){return e^t}),n)};return function(e){return e.toString().split("").map(t).map(r).map(n).join("")}},t.decipher=function(e){var t=function(t){return(n=e,n.split("").map((function(e){return e.charCodeAt(0)}))).reduce((function(e,t){return e^t}),t);var n};return function(e){return e.match(/.{1,2}/g).map((function(e){return parseInt(e,16)})).map(t).map((function(e){return String.fromCharCode(e)})).join("")}},t.getRandomColor=function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},t.getQueryParams=l,t.syncWithParams=function(e){var t=l(),n=window.location.pathname.split("/")[2],r=t.name;return n&&(e.name=r,e.session_id=n),e},t.syncWithLocalStorage=function(e,t){var n=t.room,r=t.user;return n&&(e.session_id=n.session_id),r&&(e.id=r.id,e.name=r.name,e.email=r.email,e.avatar=r.avatar),e},t.getMouseId=function(e){return"cb--custom-mouse-"+e},t.appendInlineStyle=function(){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");e.appendChild(t),t.type="text/css",t.appendChild(document.createTextNode(".cb__customMouse{position:fixed;top:0;left:0;z-index:2147483638}.cb__customMouse svg{height:24px;width:24px}.cb__customMouse .cb__customMouse__userName{font-family:Roboto,sans-serif;padding:5px;font-size:14px;line-height:16px;color:#fff;font-weight:500;margin-left:14px;border-radius:5px}.cb__customMouse.cb__customMouse--hidden{display:none}"))},t.inIframe=function(){return window!=top},t.getTime=function(e){var t=new Date(e),n=t.getTime()+198e5,r=(t=new Date(n)).getHours(),i=t.getMinutes().toString();i=1===i.length?"0"+i:i;var o=r>12?r-12+":"+i+" PM":r+":"+i+" AM",a=t.toLocaleString("en-us",{month:"short"});return t.getDate()+" "+a+", "+o},t.getTimeLocal=function(){var e=new Date,t=e.getHours(),n=e.getMinutes().toString();n=1===n.length?"0"+n:n;var r=t>12?t-12+":"+n+" PM":t+":"+n+" AM",i=e.toLocaleString("en-us",{month:"short"});return e.getDate()+" "+i+", "+r},t.getTop=function(e){return"-"+(26*(e.length-1)+31)+"px"},t.getText=function(e){return e?"Minimize":"Maximize"},t.getUserFromSubscriber=function(e){try{var t=e.stream.connection.options.metadata;return JSON.parse(t)}catch(e){return{}}},t.getPresignedUrl=function(e){return new Promise((function(t,n){var r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.getL("cb__token")},body:JSON.stringify({fileType:e.fileType,fileName:e.fileName})};fetch(o.GET_PRESIGNED_URL,r).then((function(e){if(e.ok)return e.json()})).then((function(e){t(e)})).catch((function(e){n(e)}))}))},t.compressFile=function(e,t){return new Promise((function(n,r){"attachment"===t?n(e):new s(e,{quality:.6,success:function(e){n(e)},error:function(e){r(e.message)}})}))},t.getUniqueNumber=function(){return Math.floor(1e5+9e5*Math.random())},t.formatBytes=function(e){return e<1024?e+" Bytes":e<1048576?(e/1024).toFixed(3)+" KB":e<1073741824?(e/1048576).toFixed(3)+" MB":(e/1073741824).toFixed(3)+" GB"},t.getFileNameFromUrl=function(e){var t=e.split("/");return t[t.length-1]},t.radioOrCheckbox=function(e){return"checkbox"===e.type||"radio"===e.type},t.getDimensions=function(){return{x:Math.max(document.documentElement.clientWidth,window.innerWidth||0),y:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}},t.urlify=function(e){return e.replace(/(https?:\/\/[^\s]+)/g,(function(e){return'<a target="_blank" href="'+e+'">'+e+"</a>"}))},t.isOnlyEmojis=function(e){return!function(e){return e.replace(new RegExp(o.EMOJI_RANGES_REGEX,"g"),"")}(e).length},t.getToken=function(e){return r(this,void 0,void 0,(function(){var t,n,r,s;return i(this,(function(i){switch(i.label){case 0:t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{id:e.id,name:e.name,email:e.email,avatar:e.avatar,moderator:e.moderator},sessionId:e.session_id,apiKey:"279703aabe964548333cc2ea35fcbece728302ae92aa3f892bc8a2"})},i.label=1;case 1:return i.trys.push([1,5,,6]),[4,fetch(o.GENERATE_TOKEN_URL,t)];case 2:return(n=i.sent()).ok?[4,n.json()]:[3,4];case 3:return r=i.sent(),s=r.token,a.setL("cb__token",s),[2,s];case 4:return[3,6];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))},t.encodeHTML=function(e){return e.replace(/([\u00A0-\u9999<>&])(.|$)/g,(function(e,t,n){return"&"!==t||"#"!==n?(/[\u00A0-\u9999<>&]/.test(n)&&(n="&#"+n.charCodeAt(0)+";"),"&#"+t.charCodeAt(0)+";"+n):e}))},t.decodeHTML=function(e){return e.replace(/&#([0-9]+);/g,(function(e,t){return String.fromCharCode(parseInt(t))}))},t.getUser=function(e,t){var n=e.getParticipantId(),r=t.participants,i=r[n];return i&&Object.keys(i).length?r[n]._identity.user:{}},t.skipToolbox=function(e){return e===document?e.documentElement.closest("#cb__toolbox_container"):e.closest("#cb__toolbox_container")},t.isMobile=function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Opera Mini/i)||navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/WPDesktop/i)},t.getMeetingId=function(){return function(e){for(var t=" ",n="abcdefghijklmnopqrstuvwxyz".length,r=0;r<e;r++)t+="abcdefghijklmnopqrstuvwxyz".charAt(Math.floor(Math.random()*n));return t}(9).trim().match(/.{3}/g).join("-")},t.videoShadow=function(e){var t={level:e>.15?10:0,color:"rgba(255,255,255,0.4)"},n={level:parseFloat((2*t.level*e+t.level).toFixed(0)),color:"rgba(255,255,255,0.2)"};return t.blur=t.level?1:0,n.blur=n.level?3:0,["0 0 "+t.blur+"px "+t.level+"px "+t.color,"0 0 "+n.blur+"px "+n.level+"px "+n.color].join(", ")}},function(e,t,n){"use strict";n.r(t),function(e){n(689);var r=n(4),i=n.n(r),o=n(30),a=n(1),s=n(376),c=n(90),u=n(45),l=n(186),d=n(120),f=n(37),h=n(26),p=n(24),m=n(176),v=n(23),g=n(5),y=n(131),_=n(129),b=n(145),E=n(362),S=n(40),C=n(179),w=n(12),T=n(363),D=n(365),A=n(51),R=n(173),k=n(366),O=n(8),j=n(367),P=n.n(j),I=n(22),N=n.n(I),M=n(128),x=n.n(M),L=n(43),F=n(368),B=n(3),U=n(57),V=n(181),H=n(11),G=n(149),J=n(135),z=n(373);function W(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var $=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},X=i.a.getLogger(e);function Y(e){var t={audio_requested:e.devices.includes("audio"),video_requested:e.devices.includes("video"),screen_sharing_requested:e.devices.includes("desktop")};return t.video_requested&&(t.resolution=e.resolution),t}t.default=function(e){return"object"===q(window.SariskaMediaTransport)?Object.assign({},window.SariskaMediaTransport,e):e}({version:"{#COMMIT_HASH#}",JitsiConnection:s.a,ProxyConnectionService:T.a,effects:{createPresenterEffect:G.a,createRnnoiseProcessor:G.b,createScreenshotCaptureEffect:G.c,createVirtualBackgroundEffect:G.d},constants:{participantConnectionStatus:_.a,recording:D.a,sipVideoGW:L,transcriptionStatus:m,trackStreamingStatus:b.a},events:{conference:a,connection:u,detection:S,track:p,mediaDevices:d,connectionQuality:U,e2eping:V},errors:{conference:o,connection:c,track:h},errorTypes:{JitsiTrackError:f.a},logLevels:i.a.levels,mediaDevices:l.a,analytics:O.a.analytics,initialize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.init(e)},init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e=Object.assign(Object.assign({},J.d),e),A.a.init(e.externalStorage),O.a.init(e),void 0!==e.enableUnifiedOnChrome&&e.flags&&(e.flags.enableUnifiedOnChrome=e.enableUnifiedOnChrome),w.a.init(e.flags||{}),window.connectionTimes||(window.connectionTimes={}),!0!==e.enableAnalyticsLogging&&(X.warn("Analytics disabled, disposing."),this.analytics.dispose()),e.enableWindowOnErrorHandler&&N.a.addHandler(this.getGlobalOnErrorHandler.bind(this)),this.version){var t={id:"component_version",component:"sariska-media-transport",version:this.version};O.a.sendLog(JSON.stringify(t))}return v.a.init(e)},isDesktopSharingEnabled:function(){return v.a.isDesktopSharingEnabled()},isWebRtcSupported:function(){return v.a.isWebRtcSupported()},setLogLevel:function(e){i.a.setLogLevel(e)},setLogLevelById:function(e,t){i.a.setLogLevelById(e,t)},addGlobalLogTransport:function(e){i.a.addGlobalTransport(e)},removeGlobalLogTransport:function(e){i.a.removeGlobalTransport(e)},setGlobalLogOptions:function(e){i.a.setGlobalOptions(e)},createLocalTracks:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(window.location.href.indexOf("iAmRecorder")>=0)return[];var r=!1,i=t.firePermissionPromptIsShownEvent,o=t.fireSlowPromiseEvent,a=$(t,["firePermissionPromptIsShownEvent","fireSlowPromiseEvent"]),s=i||n;return s&&!v.a.arePermissionsGrantedForAvailableDevices()?l.a.emitEvent(d.PERMISSION_PROMPT_IS_SHOWN,g.a.getName()):o&&window.setTimeout((function(){r||l.a.emitEvent(d.SLOW_GET_USER_MEDIA)}),1e3),window.connectionTimes||(window.connectionTimes={}),window.connectionTimes["obtainPermissions.start"]=window.performance.now(),v.a.obtainAudioAndVideoPermissions(a).then((function(t){if(r=!0,window.connectionTimes["obtainPermissions.end"]=window.performance.now(),O.a.sendAnalytics(Object(H.E)("success",Y(a))),!v.a.options.disableAudioLevels)for(var n=function(e){var n=t[e],r=n.getOriginalStream();n.getType()===B.a.AUDIO&&(O.a.startLocalStats(r,n.setAudioLevel.bind(n)),n.addEventListener(p.LOCAL_TRACK_STOPPED,(function(){O.a.stopLocalStats(r)})))},i=0;i<t.length;i++)n(i);var o=v.a.getCurrentlyAvailableMediaDevices();if(o)for(var s=0;s<t.length;s++){t[s]._setRealDeviceIdFromDeviceList(o)}var c,u=W(t);try{for(u.s();!(c=u.n()).done;){var l=c.value;l.type===B.a.VIDEO&&"desktop"===l.videoType&&e.setVideoTrackContentHints(l.track,"detail")}}catch(e){u.e(e)}finally{u.f()}return t})).catch((function(e){if(r=!0,e.name===h.SCREENSHARING_USER_CANCELED){var n={id:"screensharing_user_canceled",message:e.message};O.a.sendLog(JSON.stringify(n)),O.a.sendAnalytics(Object(H.E)("warning",{reason:"extension install user canceled"}))}else if(e.name===h.NOT_FOUND){var i={id:"usermedia_missing_device",status:e.gum.devices};O.a.sendLog(JSON.stringify(i));var o=Y(t);o.reason="device not found",o.devices=e.gum.devices.join("."),O.a.sendAnalytics(Object(H.E)("error",o))}else{O.a.sendGetUserMediaFailed(e);var a=Y(t);a.reason=e.name,O.a.sendAnalytics(Object(H.E)("error",a))}return window.connectionTimes["obtainPermissions.end"]=window.performance.now(),Promise.reject(e)}))},createTrackVADEmitter:function(e,t,n){return C.a.create(e,t,n)},createAudioMixer:function(){return new F.a},getActiveAudioDevice:function(){return Object(E.a)()},isDeviceListAvailable:function(){return X.warn("This method is deprecated, use JitsiMeetJS.mediaDevices.isDeviceListAvailable instead"),this.mediaDevices.isDeviceListAvailable()},isDeviceChangeAvailable:function(e){return X.warn("This method is deprecated, use JitsiMeetJS.mediaDevices.isDeviceChangeAvailable instead"),this.mediaDevices.isDeviceChangeAvailable(e)},isMultipleAudioInputSupported:function(){return this.mediaDevices.isMultipleAudioInputSupported()},isCollectingLocalStats:function(){return O.a.audioLevelsEnabled&&R.a.isLocalStatsSupported()},enumerateDevices:function(e){X.warn("This method is deprecated, use JitsiMeetJS.mediaDevices.enumerateDevices instead"),this.mediaDevices.enumerateDevices(e)},getGlobalOnErrorHandler:function(e,t,n,r,i){X.error("UnhandledError: ".concat(e),"Script: ".concat(t),"Line: ".concat(n),"Column: ".concat(r),"StackTrace: ",i),O.a.reportGlobalError(i)},setNetworkInfo:function(e){var t=e.isOnline;O.a.sendAnalytics(z.a({isOnline:t})),y.b.updateNetworkInfo({isOnline:t})},setVideoTrackContentHints:function(e,t){"contentHint"in e?(e.contentHint=t,e.contentHint!==t&&X.debug("Invalid video track contentHint")):X.debug("MediaStreamTrack contentHint attribute not supported")},precallTest:k.a,util:{AuthUtil:P.a,ScriptUtil:x.a,browser:g.a}})}.call(this,"/index.js")},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(35);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return d((function e(){f(this,e)}))}();return function(e){o(n,e);var t=s(n);function n(){var e;f(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).connection=null,e}return d(n,[{key:"init",value:function(e){this.connection=e}}]),n}(e)}t.b=h();var p=h(r.a)},function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return p}));var r=n(35),i=n(3);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){var r=t.substring(0,1);return"".concat(e,"-").concat(r).concat(n)}function h(e){var t=e.indexOf("-")+1;if(t<=0)throw new Error("Invalid source name: ".concat(e));for(var n=e.substr(t,1),r=0,o=Object.values(i.a);r<o.length;r++){var a=o[r];if(a.substr(0,1)===n)return a}throw new Error("Invalid source name: ".concat(e))}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(o,e);var t,n,r,i=u(o);function o(){return a(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"getSSRCOwner",value:function(e){throw new Error("not implemented")}},{key:"getPeerMediaInfo",value:function(e,t){throw new Error("not implemented")}},{key:"getPeerSourceInfo",value:function(e,t){throw new Error("not implemented")}},{key:"getTrackSourceName",value:function(e){throw new Error("not implemented")}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(r.a)},function(e,t,n){"use strict";var r;n.r(t),n.d(t,"JitsiConnectionErrors",(function(){return r})),n.d(t,"CONNECTION_DROPPED_ERROR",(function(){return i})),n.d(t,"OTHER_ERROR",(function(){return o})),n.d(t,"PASSWORD_REQUIRED",(function(){return a})),n.d(t,"SERVER_ERROR",(function(){return s})),function(e){e.CONNECTION_DROPPED_ERROR="connection.droppedError",e.OTHER_ERROR="connection.otherError",e.PASSWORD_REQUIRED="connection.passwordRequired",e.SERVER_ERROR="connection.serverError"}(r||(r={}));var i=r.CONNECTION_DROPPED_ERROR,o=r.OTHER_ERROR,a=r.PASSWORD_REQUIRED,s=r.SERVER_ERROR},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}if(n(39)){var i=n(95),o=n(27),a=n(29),s=n(6),c=n(161),u=n(213),l=n(74),d=n(110),f=n(103),h=n(58),p=n(112),m=n(76),v=n(38),g=n(258),y=n(106),_=n(81),b=n(65),E=n(123),S=n(31),C=n(44),w=n(202),T=n(107),D=n(68),A=n(108).f,R=n(204),k=n(104),O=n(36),j=n(84),P=n(151),I=n(140),N=n(207),M=n(125),x=n(156),L=n(109),F=n(206),B=n(247),U=n(42),V=n(67),H=U.f,G=V.f,J=o.RangeError,z=o.TypeError,W=o.Uint8Array,K=Array.prototype,q=u.ArrayBuffer,$=u.DataView,X=j(0),Y=j(2),Q=j(3),Z=j(4),ee=j(5),te=j(6),ne=P(!0),re=P(!1),ie=N.values,oe=N.keys,ae=N.entries,se=K.lastIndexOf,ce=K.reduce,ue=K.reduceRight,le=K.join,de=K.sort,fe=K.slice,he=K.toString,pe=K.toLocaleString,me=O("iterator"),ve=O("toStringTag"),ge=k("typed_constructor"),ye=k("def_constructor"),_e=c.CONSTR,be=c.TYPED,Ee=c.VIEW,Se=j(1,(function(e,t){return Ae(I(e,e[ye]),t)})),Ce=a((function(){return 1===new W(new Uint16Array([1]).buffer)[0]})),we=!!W&&!!W.prototype.set&&a((function(){new W(1).set({})})),Te=function(e,t){var n=m(e);if(n<0||n%t)throw J("Wrong offset!");return n},De=function(e){if(S(e)&&be in e)return e;throw z(e+" is not a typed array!")},Ae=function(e,t){if(!S(e)||!(ge in e))throw z("It is not a typed array constructor!");return new e(t)},Re=function(e,t){return ke(I(e,e[ye]),t)},ke=function(e,t){for(var n=0,r=t.length,i=Ae(e,r);r>n;)i[n]=t[n++];return i},Oe=function(e,t,n){H(e,t,{get:function(){return this._d[n]}})},je=function(e){var t,n,r,i,o,a,s=C(e),c=arguments.length,u=c>1?arguments[1]:void 0,d=void 0!==u,f=R(s);if(null!=f&&!w(f)){for(a=f.call(s),r=[],t=0;!(o=a.next()).done;t++)r.push(o.value);s=r}for(d&&c>2&&(u=l(u,arguments[2],2)),t=0,n=v(s.length),i=Ae(this,n);n>t;t++)i[t]=d?u(s[t],t):s[t];return i},Pe=function(){for(var e=0,t=arguments.length,n=Ae(this,t);t>e;)n[e]=arguments[e++];return n},Ie=!!W&&a((function(){pe.call(new W(1))})),Ne=function(){return pe.apply(Ie?fe.call(De(this)):De(this),arguments)},Me={copyWithin:function(e,t){return B.call(De(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return Z(De(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return F.apply(De(this),arguments)},filter:function(e){return Re(this,Y(De(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return ee(De(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return te(De(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){X(De(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return re(De(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return ne(De(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return le.apply(De(this),arguments)},lastIndexOf:function(e){return se.apply(De(this),arguments)},map:function(e){return Se(De(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return ce.apply(De(this),arguments)},reduceRight:function(e){return ue.apply(De(this),arguments)},reverse:function(){for(var e,t=De(this).length,n=Math.floor(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this},some:function(e){return Q(De(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return de.call(De(this),e)},subarray:function(e,t){var n=De(this),r=n.length,i=y(e,r);return new(I(n,n[ye]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,v((void 0===t?r:y(t,r))-i))}},xe=function(e,t){return Re(this,fe.call(De(this),e,t))},Le=function(e){De(this);var t=Te(arguments[1],1),n=this.length,r=C(e),i=v(r.length),o=0;if(i+t>n)throw J("Wrong length!");for(;o<i;)this[t+o]=r[o++]},Fe={entries:function(){return ae.call(De(this))},keys:function(){return oe.call(De(this))},values:function(){return ie.call(De(this))}},Be=function(e,t){return S(e)&&e[be]&&"symbol"!=r(t)&&t in e&&String(+t)==String(t)},Ue=function(e,t){return Be(e,t=_(t,!0))?f(2,e[t]):G(e,t)},Ve=function(e,t,n){return!(Be(e,t=_(t,!0))&&S(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?H(e,t,n):(e[t]=n.value,e)};_e||(V.f=Ue,U.f=Ve),s(s.S+s.F*!_e,"Object",{getOwnPropertyDescriptor:Ue,defineProperty:Ve}),a((function(){he.call({})}))&&(he=pe=function(){return le.call(this)});var He=p({},Me);p(He,Fe),h(He,me,Fe.values),p(He,{slice:xe,set:Le,constructor:function(){},toString:he,toLocaleString:Ne}),Oe(He,"buffer","b"),Oe(He,"byteOffset","o"),Oe(He,"byteLength","l"),Oe(He,"length","e"),H(He,ve,{get:function(){return this[be]}}),e.exports=function(e,t,n,r){var u=e+((r=!!r)?"Clamped":"")+"Array",l="get"+e,f="set"+e,p=o[u],m=p||{},y=p&&D(p),_=!p||!c.ABV,b={},C=p&&p.prototype,w=function(e,n){H(e,n,{get:function(){return function(e,n){var r=e._d;return r.v[l](n*t+r.o,Ce)}(this,n)},set:function(e){return function(e,n,i){var o=e._d;r&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),o.v[f](n*t+o.o,i,Ce)}(this,n,e)},enumerable:!0})};_?(p=n((function(e,n,r,i){d(e,p,u,"_d");var o,a,s,c,l=0,f=0;if(S(n)){if(!(n instanceof q||"ArrayBuffer"==(c=E(n))||"SharedArrayBuffer"==c))return be in n?ke(p,n):je.call(p,n);o=n,f=Te(r,t);var m=n.byteLength;if(void 0===i){if(m%t)throw J("Wrong length!");if((a=m-f)<0)throw J("Wrong length!")}else if((a=v(i)*t)+f>m)throw J("Wrong length!");s=a/t}else s=g(n),o=new q(a=s*t);for(h(e,"_d",{b:o,o:f,l:a,e:s,v:new $(o)});l<s;)w(e,l++)})),C=p.prototype=T(He),h(C,"constructor",p)):a((function(){p(1)}))&&a((function(){new p(-1)}))&&x((function(e){new p,new p(null),new p(1.5),new p(e)}),!0)||(p=n((function(e,n,r,i){var o;return d(e,p,u),S(n)?n instanceof q||"ArrayBuffer"==(o=E(n))||"SharedArrayBuffer"==o?void 0!==i?new m(n,Te(r,t),i):void 0!==r?new m(n,Te(r,t)):new m(n):be in n?ke(p,n):je.call(p,n):new m(g(n))})),X(y!==Function.prototype?A(m).concat(A(y)):A(m),(function(e){e in p||h(p,e,m[e])})),p.prototype=C,i||(C.constructor=p));var R=C[me],k=!!R&&("values"==R.name||null==R.name),O=Fe.values;h(p,ge,!0),h(C,be,u),h(C,Ee,!0),h(C,ye,p),(r?new p(1)[ve]==u:ve in C)||H(C,ve,{get:function(){return u}}),b[u]=p,s(s.G+s.W+s.F*(p!=m),b),s(s.S,u,{BYTES_PER_ELEMENT:t}),s(s.S+s.F*a((function(){m.of.call(p,1)})),u,{from:je,of:Pe}),"BYTES_PER_ELEMENT"in C||h(C,"BYTES_PER_ELEMENT",t),s(s.P,u,Me),L(u),s(s.P+s.F*we,u,{set:Le}),s(s.P+s.F*!k,u,Fe),i||C.toString==he||(C.toString=he),s(s.P+s.F*a((function(){new p(1).slice()})),u,{slice:xe}),s(s.P+s.F*(a((function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()}))||!a((function(){C.toLocaleString.call([1,2])}))),u,{toLocaleString:Ne}),M[u]=k?R:O,i||k||h(C,me,O)}}else e.exports=function(){}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(253),o=n(6),a=n(136)("metadata"),s=a.store||(a.store=new(n(256))),c=function(e,t,n){var r=s.get(e);if(!r){if(!n)return;s.set(e,r=new i)}var o=r.get(t);if(!o){if(!n)return;r.set(t,o=new i)}return o};e.exports={store:s,map:c,has:function(e,t,n){var r=c(t,n,!1);return void 0!==r&&r.has(e)},get:function(e,t,n){var r=c(t,n,!1);return void 0===r?void 0:r.get(e)},set:function(e,t,n,r){c(n,r,!0).set(e,t)},keys:function(e,t){var n=c(e,t,!1),r=[];return n&&n.forEach((function(e,t){r.push(t)})),r},key:function(e){return void 0===e||"symbol"==r(e)?e:String(e)},exp:function(e){o(o.S,"Reflect",e)}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return _}));var r=n(4),i=n(2),o=(n(615),n(35)),a=n(316),s=n(318),c=n(319);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var i=g(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=Object(r.getLogger)(e),_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(u,e);var t,n,r,o=p(u);function u(e){var t,n=e.enableWebsocketResume,r=e.websocketKeepAlive,l=e.websocketKeepAliveUrl,d=e.serviceUrl,f=e.shard,h=e.xmppPing;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=o.call(this))._options={enableWebsocketResume:void 0===n||n,pingOptions:h,shard:f,websocketKeepAlive:void 0===r?6e4:Number(r),websocketKeepAliveUrl:l},t._stropheConn=new i.Strophe.Connection(d),t._usesWebsocket=d.startsWith("ws:")||d.startsWith("wss:"),t._stropheConn.maxRetries=3,t._rawInputTracker=new s.a,t._rawInputTracker.startTracking(v(t),t._stropheConn),t._resumeTask=new a.a(t._stropheConn),t._deferredIQs=[],t.addConnectionPlugin("ping",new c.a({getTimeSinceLastServerResponse:function(){return t.getTimeSinceLastSuccess()},onPingThresholdExceeded:function(){return t._onPingErrorThresholdExceeded()},pingOptions:h})),t._oneSuccessfulConnect=!1,t}return t=u,r=[{key:"Events",get:function(){return{CONN_STATUS_CHANGED:"CONN_STATUS_CHANGED",CONN_SHARD_CHANGED:"CONN_SHARD_CHANGED"}}},{key:"Status",get:function(){return i.Strophe.Status}}],(n=[{key:"connected",get:function(){var e=this._stropheConn&&this._stropheConn._proto&&this._stropheConn._proto.socket;return(this._status===i.Strophe.Status.CONNECTED||this._status===i.Strophe.Status.ATTACHED)&&(!this.isUsingWebSocket||e&&e.readyState===WebSocket.OPEN)}},{key:"disco",get:function(){return this._stropheConn.disco}},{key:"disconnecting",get:function(){return!0===this._stropheConn.disconnecting}},{key:"domain",get:function(){return this._stropheConn.domain}},{key:"isUsingWebSocket",get:function(){return this._usesWebsocket}},{key:"jid",get:function(){return this._stropheConn.jid}},{key:"lastResponseHeaders",get:function(){return this._stropheConn._proto&&this._stropheConn._proto.lastResponseHeaders}},{key:"logger",get:function(){return this._stropheConn.logger}},{key:"options",get:function(){return this._stropheConn.options}},{key:"pingDomain",get:function(){var e;return(null===(e=this._options.pingOptions)||void 0===e?void 0:e.domain)||this.domain}},{key:"service",get:function(){return this._stropheConn.service}},{key:"shard",set:function(e){this._options.shard=e,this._oneSuccessfulConnect&&this._maybeStartWSKeepAlive()}},{key:"status",get:function(){return this._status}},{key:"addConnectionPlugin",value:function(e,t){this[e]=t,t.init(this)}},{key:"addHandler",value:function(){var e;(e=this._stropheConn).addHandler.apply(e,arguments)}},{key:"attach",value:function(e,t,n,r){for(var i,o=arguments.length,a=new Array(o>4?o-4:0),s=4;s<o;s++)a[s-4]=arguments[s];(i=this._stropheConn).attach.apply(i,[e,t,n,this._stropheConnectionCb.bind(this,r)].concat(a))}},{key:"connect",value:function(e,t,n){for(var r,i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];(r=this._stropheConn).connect.apply(r,[e,t,this._stropheConnectionCb.bind(this,n)].concat(o))}},{key:"_stropheConnectionCb",value:function(e,t){var n;this._status=t;var r=!1;if(t===i.Strophe.Status.CONNECTED||t===i.Strophe.Status.ATTACHED?(this._maybeEnableStreamResume(),this._usesWebsocket&&this._oneSuccessfulConnect&&this._keepAliveAndCheckShard(),this._oneSuccessfulConnect=!0,this._maybeStartWSKeepAlive(),this._processDeferredIQs(),this._resumeTask.cancel(),this.ping.startInterval((null===(n=this._options.pingOptions)||void 0===n?void 0:n.domain)||this.domain)):t===i.Strophe.Status.DISCONNECTED&&(this.ping.stopInterval(),(r=this._tryResumingConnection())||clearTimeout(this._wsKeepAlive)),!r){for(var o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];e.apply(void 0,[t].concat(a)),this.eventEmitter.emit(u.Events.CONN_STATUS_CHANGED,t)}}},{key:"_clearDeferredIQs",value:function(){var e,t=l(this._deferredIQs);try{for(t.s();!(e=t.n()).done;)e.value.reject(new Error("disconnect"))}catch(e){t.e(e)}finally{t.f()}this._deferredIQs=[]}},{key:"closeWebsocket",value:function(){this._stropheConn&&this._stropheConn._proto&&(this._stropheConn._proto._closeSocket(),this._stropheConn._proto._onClose(null))}},{key:"disconnect",value:function(){var e;this._resumeTask.cancel(),clearTimeout(this._wsKeepAlive),this._clearDeferredIQs(),(e=this._stropheConn).disconnect.apply(e,arguments)}},{key:"flush",value:function(){var e;(e=this._stropheConn).flush.apply(e,arguments)}},{key:"getTimeSinceLastSuccess",value:function(){return this._rawInputTracker.getTimeSinceLastSuccess()}},{key:"getLastFailedMessage",value:function(){return this._rawInputTracker.getLastFailedMessage()}},{key:"_maybeEnableStreamResume",value:function(){if(this._options.enableWebsocketResume){var e=this._stropheConn.streamManagement;this.isUsingWebSocket?e?e.isSupported()?e.getResumeToken()||(y.info("Enabling XEP-0198 stream management"),e.enable(!0)):y.warn("Stream resume enabled, but XEP-0198 is not supported by the server"):y.warn("Stream resume enabled, but Strophe streamManagement plugin is not installed"):y.warn("Stream resume enabled, but WebSockets are not enabled")}}},{key:"_maybeStartWSKeepAlive",value:function(){var e=this,t=this._options.websocketKeepAlive;if(this._usesWebsocket&&t>0){this._wsKeepAlive||y.info("WebSocket keep alive interval: ".concat(t,"ms")),clearTimeout(this._wsKeepAlive);var n=t+60*Math.random()*1e3;y.debug("Scheduling next WebSocket keep-alive in ".concat(n,"ms")),this._wsKeepAlive=setTimeout((function(){return e._keepAliveAndCheckShard().then((function(){return e._maybeStartWSKeepAlive()}))}),n)}}},{key:"_keepAliveAndCheckShard",value:function(){var e=this,t=this._options,n=t.shard,r=t.websocketKeepAliveUrl,i=r||this.service.replace("wss://","https://").replace("ws://","http://");return fetch(i).then((function(t){if(n){var r=t.headers.get("x-jitsi-shard");r!==n&&(y.error("Detected that shard changed from ".concat(n," to ").concat(r)),e.eventEmitter.emit(u.Events.CONN_SHARD_CHANGED))}})).catch((function(e){y.error("Websocket Keep alive failed for url: ".concat(i),{error:e})}))}},{key:"_processDeferredIQs",value:function(){var e,t=this,n=l(this._deferredIQs);try{var r=function(){var n=e.value;if(n.iq){clearTimeout(n.timeout);var r=Date.now()-n.start;t.sendIQ(n.iq,(function(e){return n.resolve(e)}),(function(e){return n.reject(e)}),r)}};for(n.s();!(e=n.n()).done;)r()}catch(e){n.e(e)}finally{n.f()}this._deferredIQs=[]}},{key:"send",value:function(e){if(!this.connected)throw new Error("Not connected");this._stropheConn.send(e)}},{key:"sendIQ",value:function(e,t,n,r){if(this.connected)return this._stropheConn.sendIQ(e,t,n,r);n("Not connected")}},{key:"sendIQ2",value:function(e,t){var n=this,r=t.timeout;return new Promise((function(t,i){if(n.connected)n.sendIQ(e,(function(e){return t(e)}),(function(e){return i(e)}),r);else{var o={iq:e,resolve:t,reject:i,start:Date.now(),timeout:setTimeout((function(){o.iq=void 0,i(void 0)}),r)};n._deferredIQs.push(o)}}))}},{key:"_onPingErrorThresholdExceeded",value:function(){this.isUsingWebSocket&&(y.warn("Ping error threshold exceeded - killing the WebSocket"),this.closeWebsocket())}},{key:"sendPresence",value:function(e,t,n,r){this.connected?this._stropheConn.sendPresence(e,t,n,r):n("Not connected")}},{key:"sendUnavailableBeacon",value:function(){if(!navigator.sendBeacon||this._stropheConn.disconnecting||!this._stropheConn.connected)return!1;this._stropheConn._changeConnectStatus(i.Strophe.Status.DISCONNECTING),this._stropheConn.disconnecting=!0;var e=this._stropheConn._proto._buildBody().attrs({type:"terminate"}),t=Object(i.$pres)({xmlns:i.Strophe.NS.CLIENT,type:"unavailable"});e.cnode(t.tree());var n=navigator.sendBeacon(-1===this.service.indexOf("https://")?"https:".concat(this.service):this.service,i.Strophe.serialize(e.tree()));return y.info("Successfully send unavailable beacon ".concat(n)),this._stropheConn._proto._abortAllRequests(),this._stropheConn._doDisconnect(),!0}},{key:"_tryResumingConnection",value:function(){var e=this._stropheConn.streamManagement;return!(!e||!e.getResumeToken()||(this._resumeTask.schedule(),0))}}])&&f(t.prototype,n),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(o.a)}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return v}));var r=n(4),i=n(32),o=n.n(i),a=n(15),s=n(3),c=n(18),u=n(5),l=n(12);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=Object(r.getLogger)(e),h=25e5,p=1,m=["1","2","3"],v=function(){function e(t){var n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pc=t;var o=null===(r=null===(n=this.pc.options)||void 0===n?void 0:n.videoQuality)||void 0===r?void 0:r.maxBitratesVideo,a={low:2e5,standard:7e5,high:h};this.videoBitrates=null!=o?o:a;var s=null!==(i=this.videoBitrates.VP8)&&void 0!==i?i:this.videoBitrates;this.localStreamEncodingsConfig=[{active:!0,maxBitrate:u.a.isFirefox()?s.high:s.low,rid:"1",scaleResolutionDownBy:u.a.isFirefox()?p:4},{active:!0,maxBitrate:s.standard,rid:"2",scaleResolutionDownBy:2},{active:!0,maxBitrate:u.a.isFirefox()?s.low:s.high,rid:"3",scaleResolutionDownBy:u.a.isFirefox()?4:p}]}var t,n,r;return t=e,(n=[{key:"_getStreamEncodings",value:function(e){return this.pc.isSimulcastOn()&&e.isVideoTrack()?this.localStreamEncodingsConfig:e.isVideoTrack()?[{active:!0,maxBitrate:this.videoBitrates.high}]:[{active:!0}]}},{key:"ensureCorrectOrderOfSsrcs",value:function(e){var t=o.a.parse(e.sdp);return t.media.forEach((function(e){if(e.type!==s.a.AUDIO&&e.ssrcGroups&&e.ssrcGroups.length){var t=[],n=new Set;e.ssrcGroups.map((function(e){return e.ssrcs.split(" ").filter(Boolean).forEach((function(e){return n.add(e)}))})),n.forEach((function(n){var r=e.ssrcs.filter((function(e){return e.id.toString()===n}));t=t.concat(r)})),e.ssrcs=t}})),new RTCSessionDescription({type:e.type,sdp:o.a.write(t)})}},{key:"findTransceiver",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=(null==t?void 0:t.track)&&t.getOriginalStream()?this.pc.peerconnection.getTransceivers().find((function(e){var n,r;return(null===(r=null===(n=e.sender)||void 0===n?void 0:n.track)||void 0===r?void 0:r.id)===t.getTrackId()})):this.pc.peerconnection.getTransceivers().find((function(t){var n,r;return(null===(r=null===(n=t.receiver)||void 0===n?void 0:n.track)||void 0===r?void 0:r.kind)===e}));return n}},{key:"insertUnifiedPlanSimulcastReceive",value:function(e){if(u.a.usesSdpMungingForSimulcast())return e;var t=o.a.parse(e.sdp),n=t.media.findIndex((function(e){return e.type===s.a.VIDEO}));if(t.media[n].rids&&(t.media[n].simulcast_03||t.media[n].simulcast))return t.media.forEach((function(e,r){e.type===s.a.VIDEO&&r!==n&&(t.media[r].rids=void 0,t.media[r].simulcast=void 0,t.media[r].simulcast_03=void 0)})),new RTCSessionDescription({type:e.type,sdp:o.a.write(t)});t.media[n].rids=[{id:"1",direction:"recv"},{id:"2",direction:"recv"},{id:"3",direction:"recv"}];var r=u.a.isFirefox()&&u.a.isVersionGreaterThan(71)?"recv ".concat(m.join(";")):"recv rid=".concat(m.join(";"));return t.media[n].simulcast_03={value:r},new RTCSessionDescription({type:e.type,sdp:o.a.write(t)})}},{key:"addTrack",value:function(e,t){var n=e.getTrack();if(t){var r=[];e.getOriginalStream()&&r.push(e.getOriginalStream());var i={direction:a.a.SENDRECV,streams:r,sendEncodings:[]};u.a.isFirefox()||(i.sendEncodings=this._getStreamEncodings(e)),this.pc.peerconnection.addTransceiver(n,i)}else this.pc.peerconnection.addTrack(n)}},{key:"calculateEncodingsActiveState",value:function(e,t){var n=this,r=e.getTrack().getSettings().height;return this.localStreamEncodingsConfig.map((function(e){return r/e.scaleResolutionDownBy})).map((function(r,i){var o,a=e.getVideoType()!==c.VideoType.CAMERA||t>0&&4===(null===(o=n.localStreamEncodingsConfig[i])||void 0===o?void 0:o.scaleResolutionDownBy)||r<=t;return n.pc.isSharingLowFpsScreen()&&e.getVideoType()===c.VideoType.DESKTOP&&n.pc.usesUnifiedPlan()&&!u.a.isWebKitBased()&&n.localStreamEncodingsConfig[i].scaleResolutionDownBy!==p&&(a=!1),a}))}},{key:"calculateEncodingsBitrates",value:function(e){var t,n,r=this,i=e.getVideoType(),o=(null===(n=null===(t=this.pc.options)||void 0===t?void 0:t.videoQuality)||void 0===n?void 0:n.desktopBitrate)||5e5,a=e._originalStream&&e._originalStream.id!==e.getStreamId();return this.localStreamEncodingsConfig.map((function(e){return r.pc.isSharingLowFpsScreen()&&!u.a.isWebKitBased()?a?h:o:i===c.VideoType.DESKTOP&&u.a.isChromiumBased()&&!r.pc.usesUnifiedPlan()?void 0:e.maxBitrate}))}},{key:"replaceTrack",value:function(e,t){var n,r,i,o,s=null!==(n=null==t?void 0:t.getType())&&void 0!==n?n:null==e?void 0:e.getType(),c=this.pc.getLocalTracks(s),u=null!==(r=null==t?void 0:t.getTrack())&&void 0!==r?r:null,d=l.a.isMultiStreamSupportEnabled()&&(null==c?void 0:c.length)&&!e&&t&&!c.find((function(e){return e===t}));if(e&&!e.isMuted())o=this.pc.peerconnection.getTransceivers().find((function(t){return t.sender.track===e.getTrack()}));else if(d)o=this.pc.peerconnection.getTransceivers().find((function(e){return e.receiver.track.kind===s&&e.direction===a.a.RECVONLY&&e.currentDirection===a.a.INACTIVE}));else{o=this.pc.peerconnection.getTransceivers().find((function(e){return e.receiver.track.kind===s}));var h=null!==(i=null==t?void 0:t.getSourceName())&&void 0!==i?i:null==e?void 0:e.getSourceName();if(h){var p=Number(h.split("-")[1].substring(1));p&&(o=this.pc.peerconnection.getTransceivers().filter((function(e){return e.receiver.track.kind===s&&e.direction!==a.a.RECVONLY}))[p])}}return o?(f.debug("".concat(this.pc," Replacing ").concat(e," with ").concat(t)),o.sender.replaceTrack(u).then((function(){return Promise.resolve(o)}))):Promise.reject(new Error("replace track failed"))}},{key:"setAudioTransferActive",value:function(e){this.setMediaTransferActive(s.a.AUDIO,e)}},{key:"setEncodings",value:function(e){var t,n,r=e.getType(),i=this.findTransceiver(r,e),o=null===(t=null==i?void 0:i.sender)||void 0===t?void 0:t.getParameters();return(null===(n=null==o?void 0:o.encodings)||void 0===n?void 0:n.length)?(o.encodings=this._getStreamEncodings(e),i.sender.setParameters(o)):Promise.resolve()}},{key:"setMediaTransferActive",value:function(e,t){var n=this.pc.peerconnection.getTransceivers().filter((function(t){return t.receiver&&t.receiver.track&&t.receiver.track.kind===e})),r=this.pc.getLocalTracks(e);f.info("".concat(this.pc," ").concat(t?"Enabling":"Suspending"," ").concat(e," media transfer.")),n.forEach((function(e,n){t?n<r.length?e.direction=a.a.SENDRECV:e.direction=a.a.RECVONLY:e.direction=a.a.INACTIVE}))}},{key:"setVideoTransferActive",value:function(e){this.setMediaTransferActive(s.a.VIDEO,e)}},{key:"updateEncodingsResolution",value:function(e){var t,n=this;u.a.isWebKitBased()&&e.encodings&&Array.isArray(e.encodings)&&((t=e.encodings).every((function(e){return void 0!==e.scaleResolutionDownBy&&e.scaleResolutionDownBy===t[0].scaleResolutionDownBy}))&&e.encodings.forEach((function(e,t){e.scaleResolutionDownBy=n.localStreamEncodingsConfig[t].scaleResolutionDownBy})))}}])&&d(t.prototype,n),r&&d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}).call(this,"/index.js")},function(e,t){e.exports=!1},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(104)("meta"),o=n(31),a=n(65),s=n(42).f,c=0,u=Object.isExtensible||function(){return!0},l=!n(29)((function(){return u(Object.preventExtensions({}))})),d=function(e){s(e,i,{value:{i:"O"+ ++c,w:{}}})},f=e.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==r(e)?e:("string"==typeof e?"S":"P")+e;if(!a(e,i)){if(!u(e))return"F";if(!t)return"E";d(e)}return e[i].i},getWeak:function(e,t){if(!a(e,i)){if(!u(e))return!0;if(!t)return!1;d(e)}return e[i].w},onFreeze:function(e){return l&&f.NEED&&u(e)&&!a(e,i)&&d(e),e}}},function(e,t,n){var r=n(36)("unscopables"),i=Array.prototype;null==i[r]&&n(58)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){var r=n(268);function i(e,t,n){var i=e.prototype,o=e.prototype=Object.create(t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});return i&&!1!==n&&r(i,o),e.$super=t,e.prototype=o,e}e.exports=i,i._inherit=i},function(e,t,n){"use strict";t.a={}},function(e,t,n){"use strict";var r=n(48);t.a=r.a.indexOf},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r="https://api.callstats.io/static/callstats-ws.min.js",i=5},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(232),i=n(190);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(76),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(25),i=n(233),o=n(190),a=n(189)("IE_PROTO"),s=function(){},c=function(){var e,t=n(187)("iframe"),r=o.length;for(t.style.display="none",n(191).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;r--;)delete c.prototype[o[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=c(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(232),i=n(190).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){"use strict";var r=n(27),i=n(42),o=n(39),a=n(36)("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(74),i=n(245),o=n(202),a=n(25),s=n(38),c=n(204),u={},l={};(t=e.exports=function(e,t,n,d,f){var h,p,m,v,g=f?function(){return e}:c(e),y=r(n,d,t?2:1),_=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(h=s(e.length);h>_;_++)if((v=t?y(a(p=e[_])[0],p[1]):y(e[_]))===u||v===l)return v}else for(m=g.call(e);!(p=m.next()).done;)if((v=i(m,y,p.value,t))===u||v===l)return v}).BREAK=u,t.RETURN=l},function(e,t,n){var r=n(59);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){var r=n(31);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t){function n(){}n.prototype={bP_:function(e,t){this.cf_=e,this.cg_=0,this.bW_=null,this.ch_=null,this.bT_=null,this.bU_=null,this.aU_=t},get a_(){var e=this.bW_;return e&&e.bV_?e.a_||e.b_:e},get b_(){var e=this.bU_;if(e){if(e.bV_)return e.a_||e.b_}else{var t=this.bT_;if(t&&t.bV_)return t.b_}return e},bI_:function(e){if(this.cg_++,"textarea"===this.bY_)if(e.ci_){var t=e.bQ_;this.bZ_=(this.bZ_||"")+t}else{if(!e.t_&&!e.s_)throw TypeError();this.cj_=!0}else{var n=this.ch_;e.bT_=this,n?n.bU_=e:this.bW_=e,this.ch_=e}return e},ca_:function(){return this.cg_===this.cf_&&this.bT_?this.bT_.ca_():this}},e.exports=n},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,d=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&h())}function h(){if(!l){var e=s(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||l||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){function n(e,t){return Math.floor(Math.random()*(t-e+1))+e}function r(e){return e[n(0,e.length-1)]}var i={randomHexDigit:function(){return r("0123456789abcdef")},randomHexString:function(e){for(var t="";e--;)t+=this.randomHexDigit();return t},randomElement:r,randomAlphanumStr:function(e){for(var t="",n=0;n<e;n+=1)t+=r("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");return t},randomInt:n};e.exports=i},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return i}));var i=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.promise=new Promise((function(e,n){t.resolve=function(){t.clearRejectTimeout(),e.apply(void 0,arguments)},t.reject=function(){t.clearRejectTimeout(),n.apply(void 0,arguments)}})),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}var t,n,i;return t=e,(n=[{key:"clearRejectTimeout",value:function(){clearTimeout(this._timeout)}},{key:"setRejectTimeout",value:function(e){var t=this;this._timeout=setTimeout((function(){t.reject(new Error("timeout"))}),e)}}])&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t){e.exports={ENVIRONMENT:"environment",USER:"user"}},function(e,t,n){"use strict";(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};n.localCName=n.generateIdentifier(),n.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},n.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},n.getDescription=function(e){var t=n.splitSections(e);return t&&t[0]},n.getMediaSections=function(e){var t=n.splitSections(e);return t.shift(),t},n.matchPrefix=function(e,t){return n.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},n.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:void 0===n[t[r]]&&(n[t[r]]=t[r+1])}return n},n.writeCandidate=function(e){var t=[];t.push(e.foundation);var n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},n.parseIceOptions=function(e){return e.substr(14).split(" ")},n.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},n.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},n.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},n.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},n.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(t=r[i].trim().split("="))[0].trim()]=t[1];return n},n.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},n.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},n.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},n.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},n.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},n.getMid=function(e){var t=n.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},n.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},n.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:n.matchPrefix(e+t,"a=fingerprint:").map(n.parseFingerprint)}},n.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},n.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},n.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===t(e.keyParams)?n.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},n.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},n.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},n.getCryptoParameters=function(e,t){return n.matchPrefix(e+t,"a=crypto:").map(n.parseCryptoLine)},n.getIceParameters=function(e,t){var r=n.matchPrefix(e+t,"a=ice-ufrag:")[0],i=n.matchPrefix(e+t,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substr(12),password:i.substr(10)}:null},n.writeIceParameters=function(e){var t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},n.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=n.splitLines(e)[0].split(" "),i=3;i<r.length;i++){var o=r[i],a=n.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){var s=n.parseRtpMap(a),c=n.matchPrefix(e,"a=fmtp:"+o+" ");switch(s.parameters=c.length?n.parseFmtp(c[0]):{},s.rtcpFeedback=n.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(n.parseRtcpFb),t.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(s.name.toUpperCase())}}}return n.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(n.parseExtmap(e))})),t},n.writeRtpDescription=function(e,t){var r="";r+="m="+e+" ",r+=t.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){r+=n.writeRtpMap(e),r+=n.writeFmtp(e),r+=n.writeRtcpFb(e)}));var i=0;return t.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),t.headerExtensions&&t.headerExtensions.forEach((function(e){r+=n.writeExtmap(e)})),r},n.parseRtpEncodingParameters=function(e){var t,r=[],i=n.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),a=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=s.length>0&&s[0].ssrc,u=n.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(n.rtx={ssrc:t}),r.push(n),o&&((n=JSON.parse(JSON.stringify(n))).fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},r.push(n))}})),0===r.length&&c&&r.push({ssrc:c});var l=n.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=l}))),r},n.parseRtcpParameters=function(e){var t={},r=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(t.cname=r.value,t.ssrc=r.ssrc);var i=n.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=n.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},n.writeRtcpParameters=function(e){var t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},n.parseMsid=function(e){var t,r=n.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(t=r[0].substr(7).split(" "))[0],track:t[1]};var i=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(t=i[0].value.split(" "))[0],track:t[1]}:void 0},n.parseSctpDescription=function(e){var t,r=n.parseMLine(e),i=n.matchPrefix(e,"a=max-message-size:");i.length>0&&(t=parseInt(i[0].substr(19),10)),isNaN(t)&&(t=65536);var o=n.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:r.fmt,maxMessageSize:t};var a=n.matchPrefix(e,"a=sctpmap:");if(a.length>0){var s=a[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:t}}},n.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},n.generateSessionId=function(){return Math.random().toString().substr(2,21)},n.writeSessionBoilerplate=function(e,t,r){var i=void 0!==t?t:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||n.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.getDirection=function(e,t){for(var r=n.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substr(2)}return t?n.getDirection(t):"sendrecv"},n.getKind=function(e){return n.splitLines(e)[0].split(" ")[0].substr(2)},n.isRejected=function(e){return"0"===e.split(" ",2)[1]},n.parseMLine=function(e){var t=n.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},n.parseOLine=function(e){var t=n.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},n.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=n.splitLines(e),r=0;r<t.length;r++)if(t[r].length<2||"="!==t[r].charAt(1))return!1;return!0},"object"===t(e)&&(e.exports=n)}).call(this,n(98)(e))},function(e,t,n){"use strict";var r;n.r(t),n.d(t,"JitsiMediaDevicesEvents",(function(){return r})),n.d(t,"DEVICE_LIST_CHANGED",(function(){return i})),n.d(t,"PERMISSIONS_CHANGED",(function(){return o})),n.d(t,"PERMISSION_PROMPT_IS_SHOWN",(function(){return a})),n.d(t,"SLOW_GET_USER_MEDIA",(function(){return s})),function(e){e.DEVICE_LIST_CHANGED="mediaDevices.devicechange",e.PERMISSIONS_CHANGED="rtc.permissions_changed",e.PERMISSION_PROMPT_IS_SHOWN="mediaDevices.permissionPromptIsShown",e.SLOW_GET_USER_MEDIA="mediaDevices.slowGetUserMedia"}(r||(r={}));var i=r.DEVICE_LIST_CHANGED,o=r.PERMISSIONS_CHANGED,a=r.PERMISSION_PROMPT_IS_SHOWN,s=r.SLOW_GET_USER_MEDIA},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return c}));var r="MAIN_THREAD_FINISH",i="MAIN_THREAD_INIT",o="MAIN_THREAD_NEW_DATA_ARRIVED",a="WORKER_LIBFLAC_READY",s="WORKER_BLOB_READY",c="DEBUG"},function(e,t,n){var r=n(42).f,i=n(65),o=n(36)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(75),i=n(36)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:o?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var r=n(6),i=n(82),o=n(29),a=n(193),s="["+a+"]",c=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),l=function(e,t,n){var i={},s=o((function(){return!!a[e]()||""!=""[e]()})),c=i[e]=s?t(d):a[e];n&&(i[n]=c),r(r.P+r.F*s,"String",i)},d=l.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(u,"")),e};e.exports=l},function(e,t){e.exports={}},function(e,t,n){var r=n(591);e.exports={ai_:new r,aj_:new r,K_:new r,ak_:new r,al_:new r,L_:{}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(87);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"start",value:function(e){throw new Error("Not implemented")}},{key:"stop",value:function(){throw new Error("Not implemented")}},{key:"exportRecordedData",value:function(){throw new Error("Not implemented")}},{key:"setMuted",value:function(e){throw new Error("Not implemented")}},{key:"setMicDevice",value:function(e){throw new Error("Not implemented")}},{key:"_getAudioStream",value:function(e){return r.default.createLocalTracks({devices:["audio"],micDeviceId:e}).then((function(e){if(1!==e.length)throw new Error("Unexpected number of streams from createLocalTracks.");var t=e[0].stream;if(void 0===t)throw new Error("Failed to create local track.");return t}))}}])&&i(t.prototype,n),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){var r=n(612),i={loadScript:function(e,t,n,i,o,a){var s=document,c=s.createElement("script"),u=s.getElementsByTagName("script")[0];if(c.async=t,i){var l=r();if(l){var d=l.src,f=d.substring(0,d.lastIndexOf("/")+1);d&&f&&(e=f+e)}}o&&(c.onload=o),a&&(c.onerror=a),c.src=e,n?u.parentNode.insertBefore(c,u):u.parentNode.appendChild(c)}};e.exports=i},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return v}));var r=n(4),i=n(1),o=n(24),a=n(3),s=n(9),c=n(11),u=n(5),l=n(8);function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=Object(r.getLogger)(e),m={ACTIVE:"active",INACTIVE:"inactive",INTERRUPTED:"interrupted",RESTORING:"restoring"},v=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rtc=t,this.conference=n,this.trackTimers={},this.connStatusFromJvb={},this.outOfLastNTimeout="number"==typeof r.outOfLastNTimeout?r.outOfLastNTimeout:500,this.p2pRtcMuteTimeout="number"==typeof r.p2pRtcMuteTimeout?r.p2pRtcMuteTimeout:2500,this.rtcMuteTimeout="number"==typeof r.rtcMuteTimeout?r.rtcMuteTimeout:1e4,this.rtcMutedTimestamp={},p.info("RtcMuteTimeout set to: ".concat(this.rtcMuteTimeout)),this.enteredLastNTimestamp=new Map,this.restoringTimers=new Map,this.connectionStatusMap=new Map}var t,n,r;return t=e,r=[{key:"_getNewStateForJvbMode",value:function(e,t,n,r,i){return e?r?m.ACTIVE:u.a.supportsVideoMuteOnConnInterrupted()?i?t?n?m.INTERRUPTED:m.RESTORING:m.INACTIVE:m.ACTIVE:t?m.ACTIVE:m.INACTIVE:m.INTERRUPTED}},{key:"_getNewStateForP2PMode",value:function(e,t){return u.a.supportsVideoMuteOnConnInterrupted()?e||!t?m.ACTIVE:m.INTERRUPTED:m.ACTIVE}}],(n=[{key:"_getVideoFrozenTimeout",value:function(e){return this.rtc.isInLastN(e)?this.rtcMuteTimeout:this.conference.isP2PActive()?this.p2pRtcMuteTimeout:this.outOfLastNTimeout}},{key:"init",value:function(){this._onEndpointConnStatusChanged=this.onEndpointConnStatusChanged.bind(this),this.rtc.addListener(s.default.ENDPOINT_CONN_STATUS_CHANGED,this._onEndpointConnStatusChanged),this._onP2PStatus=this.refreshConnectionStatusForAll.bind(this),this.conference.on(i.P2P_STATUS,this._onP2PStatus),this._onUserLeft=this.onUserLeft.bind(this),this.conference.on(i.USER_LEFT,this._onUserLeft),u.a.supportsVideoMuteOnConnInterrupted()&&(this._onTrackRtcMuted=this.onTrackRtcMuted.bind(this),this.rtc.addListener(s.default.REMOTE_TRACK_MUTE,this._onTrackRtcMuted),this._onTrackRtcUnmuted=this.onTrackRtcUnmuted.bind(this),this.rtc.addListener(s.default.REMOTE_TRACK_UNMUTE,this._onTrackRtcUnmuted),this._onRemoteTrackAdded=this.onRemoteTrackAdded.bind(this),this.conference.on(i.TRACK_ADDED,this._onRemoteTrackAdded),this._onRemoteTrackRemoved=this.onRemoteTrackRemoved.bind(this),this.conference.on(i.TRACK_REMOVED,this._onRemoteTrackRemoved),this._onSignallingMuteChanged=this.onSignallingMuteChanged.bind(this),this._onTrackVideoTypeChanged=this.onTrackVideoTypeChanged.bind(this)),this._onLastNChanged=this._onLastNChanged.bind(this),this.conference.on(i.LAST_N_ENDPOINTS_CHANGED,this._onLastNChanged),this._onLastNValueChanged=this.refreshConnectionStatusForAll.bind(this),this.rtc.on(s.default.LASTN_VALUE_CHANGED,this._onLastNValueChanged)}},{key:"dispose",value:function(){this.rtc.removeListener(s.default.ENDPOINT_CONN_STATUS_CHANGED,this._onEndpointConnStatusChanged),u.a.supportsVideoMuteOnConnInterrupted()&&(this.rtc.removeListener(s.default.REMOTE_TRACK_MUTE,this._onTrackRtcMuted),this.rtc.removeListener(s.default.REMOTE_TRACK_UNMUTE,this._onTrackRtcUnmuted),this.conference.off(i.TRACK_ADDED,this._onRemoteTrackAdded),this.conference.off(i.TRACK_REMOVED,this._onRemoteTrackRemoved)),this.conference.off(i.LAST_N_ENDPOINTS_CHANGED,this._onLastNChanged),this.rtc.removeListener(s.default.LASTN_VALUE_CHANGED,this._onLastNValueChanged),this.conference.off(i.P2P_STATUS,this._onP2PStatus),this.conference.off(i.USER_LEFT,this._onUserLeft);for(var e=0,t=Object.keys(this.trackTimers);e<t.length;e++){var n=t[e];this.clearTimeout(n),this.clearRtcMutedTimestamp(n)}for(var r in this.connectionStatusMap)this.connectionStatusMap.hasOwnProperty(r)&&this.onUserLeft(r);this.connStatusFromJvb={}}},{key:"onEndpointConnStatusChanged",value:function(e,t){p.debug("Detector RTCEvents.ENDPOINT_CONN_STATUS_CHANGED(".concat(Date.now(),"): ").concat(e,": ").concat(t)),e!==this.conference.myUserId()&&(this.connStatusFromJvb[e]=t,this.figureOutConnectionStatus(e))}},{key:"_changeConnectionStatus",value:function(e,t){if(e.getConnectionStatus()!==t){var n=e.getId();e._setConnectionStatus(t),p.debug("Emit endpoint conn status(".concat(Date.now(),") ").concat(n,": ").concat(t)),l.a.sendLog(JSON.stringify({id:"peer.conn.status",participant:n,status:t})),this.conference.eventEmitter.emit(i.PARTICIPANT_CONN_STATUS_CHANGED,n,t)}}},{key:"clearTimeout",value:function(e){this.trackTimers[e]&&(window.clearTimeout(this.trackTimers[e]),this.trackTimers[e]=null)}},{key:"clearRtcMutedTimestamp",value:function(e){this.rtcMutedTimestamp[e]=null}},{key:"onRemoteTrackAdded",value:function(e){var t=this;e.isLocal()||e.getType()!==a.a.VIDEO||(p.debug("Detector on remote track added for: ".concat(e.getParticipantId())),e.on(o.TRACK_MUTE_CHANGED,this._onSignallingMuteChanged),e.on(o.TRACK_VIDEOTYPE_CHANGED,(function(n){return t._onTrackVideoTypeChanged(e,n)})))}},{key:"onRemoteTrackRemoved",value:function(e){if(!e.isLocal()&&e.getType()===a.a.VIDEO){var t=e.getParticipantId();p.debug("Detector on remote track removed: ".concat(t)),e.off(o.TRACK_MUTE_CHANGED,this._onSignallingMuteChanged),this.clearTimeout(t),this.clearRtcMutedTimestamp(t),this.figureOutConnectionStatus(t)}}},{key:"isVideoTrackFrozen",value:function(e){if(!u.a.supportsVideoMuteOnConnInterrupted())return!1;var t=e.getId(),n=e.hasAnyVideoTrackWebRTCMuted(),r=this.rtcMutedTimestamp[t],i=this._getVideoFrozenTimeout(t);return n&&"number"==typeof r&&Date.now()-r>=i}},{key:"refreshConnectionStatusForAll",value:function(){var e,t=d(this.conference.getParticipants());try{for(t.s();!(e=t.n()).done;){var n=e.value;this.figureOutConnectionStatus(n.getId())}}catch(e){t.e(e)}finally{t.f()}}},{key:"figureOutConnectionStatus",value:function(t){var n=this.conference.getParticipantById(t);if(n){var r=this.conference.isP2PActive(),i=this._isRestoringTimedout(t),o=0===this.conference.getLastN(),s=n.isVideoMuted()||o,c=this.isVideoTrackFrozen(n),u=this.rtc.isInLastN(t),l=this.connStatusFromJvb[t];"boolean"!=typeof l&&(l=!0);var d=r?e._getNewStateForP2PMode(s,c):e._getNewStateForJvbMode(l,u,i,s,c);d!==m.RESTORING&&this._clearRestoringTimer(t),p.debug("Figure out conn status for ".concat(t,", is video muted: ").concat(s," is active(jvb): ").concat(l," video track frozen: ").concat(c," p2p mode: ").concat(r," is in last N: ").concat(u," currentStatus => newStatus: ").concat(n.getConnectionStatus()," => ").concat(d));var f=this.connectionStatusMap[t]||{};if(!("p2p"in f)||!("connectionStatus"in f)||f.p2p!==r||f.connectionStatus!==d){var h=Date.now();if(this.maybeSendParticipantConnectionStatusEvent(t,h),this.connectionStatusMap[t]=Object.assign(Object.assign({},f),{connectionStatus:d,p2p:r,startedMs:h}),!("videoType"in this.connectionStatusMap[t])){var v=n.getTracksByMediaType(a.a.VIDEO);Array.isArray(v)&&0!==v.length&&(this.connectionStatusMap[t].videoType=v[0].videoType)}}this._changeConnectionStatus(n,d)}else p.debug("figure out conn status - no participant for: ".concat(t))}},{key:"maybeSendParticipantConnectionStatusEvent",value:function(e,t){var n=this.connectionStatusMap[e];n&&"startedMs"in n&&"videoType"in n&&"connectionStatus"in n&&"p2p"in n&&(n.value=t-n.startedMs,l.a.sendAnalytics(Object(c.I)(n)))}},{key:"_onLastNChanged",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Date.now();p.debug("LastN endpoints changed leaving=".concat(e,", entering=").concat(t," at ").concat(n)),u.a.supportsVideoMuteOnConnInterrupted()||this.refreshConnectionStatusForAll();var r,i=d(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.enteredLastNTimestamp.delete(o),this._clearRestoringTimer(o),u.a.supportsVideoMuteOnConnInterrupted()&&this.figureOutConnectionStatus(o)}}catch(e){i.e(e)}finally{i.f()}var a,s=d(t);try{for(s.s();!(a=s.n()).done;){var c=a.value;this.enteredLastNTimestamp.set(c,n),u.a.supportsVideoMuteOnConnInterrupted()&&this.figureOutConnectionStatus(c)}}catch(e){s.e(e)}finally{s.f()}}},{key:"_clearRestoringTimer",value:function(e){var t=this.restoringTimers.get(e);t&&(clearTimeout(t),this.restoringTimers.delete(e))}},{key:"_isRestoringTimedout",value:function(e){var t=this,n=this.enteredLastNTimestamp.get(e);return!!(n&&Date.now()-n>=1e4)||(this.restoringTimers.get(e)||this.restoringTimers.set(e,setTimeout((function(){return t.figureOutConnectionStatus(e)}),1e4)),!1)}},{key:"onUserLeft",value:function(e){this.maybeSendParticipantConnectionStatusEvent(e,Date.now()),delete this.connectionStatusMap[e]}},{key:"onTrackRtcMuted",value:function(e){var t=this,n=e.getParticipantId(),r=this.conference.getParticipantById(n);if(p.debug("Detector track RTC muted: ".concat(n),Date.now()),r){if(this.rtcMutedTimestamp[n]=Date.now(),!r.isVideoMuted()){this.clearTimeout(n);var i=this._getVideoFrozenTimeout(n);this.trackTimers[n]=window.setTimeout((function(){p.debug("Set RTC mute timeout for: ".concat(n,"                     of ").concat(i," ms")),t.clearTimeout(n),t.figureOutConnectionStatus(n)}),i)}}else p.error("No participant for id: ".concat(n))}},{key:"onTrackRtcUnmuted",value:function(e){var t=e.getParticipantId();p.debug("Detector track RTC unmuted: ".concat(t),Date.now()),this.clearTimeout(t),this.clearRtcMutedTimestamp(t),this.figureOutConnectionStatus(t)}},{key:"onSignallingMuteChanged",value:function(e){var t=e.getParticipantId();p.debug("Detector on track signalling mute changed: ".concat(t),e.isMuted()),this.figureOutConnectionStatus(t)}},{key:"onTrackVideoTypeChanged",value:function(e,t){var n=e.getParticipantId(),r=Date.now();this.maybeSendParticipantConnectionStatusEvent(n,r),this.connectionStatusMap[n]=Object.assign(Object.assign({},this.connectionStatusMap[n]||{}),{videoType:t,startedMs:r})}}])&&h(t.prototype,n),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}).call(this,"/index.js")},function(e,t,n){"use strict";function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*\:/;t.parse=function(e){var n="object"===o(arguments.length<=1?void 0:arguments[1])&&(arguments.length<=1?void 0:arguments[1]),r=(arguments.length<=1?0:arguments.length-1)>1||!n?arguments.length<=1?void 0:arguments[1]:void 0,i=(arguments.length<=1?0:arguments.length-1)>1&&(arguments.length<=2?void 0:arguments[2])||n||{},s=JSON.parse(e,r);return"ignore"===i.protoAction?s:s&&"object"===o(s)&&e.match(a)?(t.scan(s,i),s):s},t.scan=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[e];n.length;){var i=n;n=[];var a,s=r(i);try{for(s.s();!(a=s.n()).done;){var c=a.value;if(Object.prototype.hasOwnProperty.call(c,"__proto__")){if("remove"!==t.protoAction)throw new SyntaxError("Object contains forbidden prototype property");delete c.__proto__}for(var u in c){var l=c[u];l&&"object"===o(l)&&n.push(c[u])}}}catch(e){s.e(e)}finally{s.f()}}},t.safeParse=function(e,n){try{return t.parse(e,n)}catch(e){return null}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d}));var r=n(4),i=n(35);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d="NETWORK_INFO_CHANGED",f=Object(r.getLogger)(e),h=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(o,e);var t,n,r,i=c(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this))._current={isOnline:!0},e}return t=o,(n=[{key:"updateNetworkInfo",value:function(e){var t=e.isOnline;f.debug("updateNetworkInfo",{isOnline:t}),this._current={isOnline:!0===t},this.eventEmitter.emit(d,this._current)}},{key:"isOnline",value:function(){return!0===this._current.isOnline}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(i.a));t.b=h}).call(this,"/index.js")},function(e,t,n){"use strict";var r;!function(e){e.REMOTE_SOURCE_CONSTRAINTS_CHANGED="media_session.REMOTE_SOURCE_CONSTRAINTS_CHANGED",e.REMOTE_VIDEO_CONSTRAINTS_CHANGED="media_session.REMOTE_VIDEO_CONSTRAINTS_CHANGED"}(r||(r={})),t.a=r},function(e,t){e.exports={CAMERA:"camera",DESKTOP:"desktop",DESKTOP_HIGH_FPS:"desktop_high_fps",NONE:"none"}},function(e,t,n){"use strict";t.a={getFocusRecordingUpdate:function(e){var t=e&&e.getElementsByTagName("jibri-recording-status")[0];if(t)return{error:t.getAttribute("failure_reason"),initiator:t.getAttribute("initiator"),recordingMode:t.getAttribute("recording_mode"),sessionID:t.getAttribute("session_id"),status:t.getAttribute("status")}},getHiddenDomainUpdate:function(e){var t=e.getElementsByTagName("live-stream-view-url")[0],n=t&&t.textContent,r=e.getElementsByTagName("mode")[0],i=r&&r.textContent&&r.textContent.toLowerCase(),o=e.getElementsByTagName("session_id")[0];return{liveStreamViewURL:n,mode:i,sessionID:o&&o.textContent}},getSessionIdFromIq:function(e){var t=e&&e.getElementsByTagName("jibri")[0];return t&&t.getAttribute("session_id")},getSessionId:function(e){var t=e.getElementsByTagName("session_id")[0];return t&&t.textContent},isFromFocus:function(e){return e.getAttribute("from").includes("focus")}}},function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}));var r={disableAudioLevels:!1},i={hosts:{domain:"sariska.io",muc:"muc.sariska.io"},serviceUrl:"wss://api.sariska.io/api/v1/media/websocket",clientNode:"https://www.sariska.io"},o={hosts:{domain:"dev.sariska.io",muc:"muc.dev.sariska.io"},serviceUrl:"wss://api.dev.sariska.io/api/v1/media/websocket",clientNode:"https://www.sariska.io"},a={enableLocalRecording:!0,enableVirtualBackground:!1,enableNoiseCancellation:!1,enableTalkWhileMuted:!0,enableNoAudioDetection:!0,enableNoisyMicDetection:!0,createVADProcessor:!0,openBridgeChannel:"websocket",hiddenDomain:"recorder.sariska.io",enableLayerSuspension:!0,e2eping:{pingInterval:-1},analytics:{disabled:!1},p2p:{enabled:!1}}},function(e,t,n){var r=n(73),i=n(27),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(95)?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(75);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";var r=n(25);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){var r=n(25),i=n(50),o=n(36)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[o])?t:i(n)}},function(e,t){e.exports=function(e,t){if(e||(e={}),t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}},function(e,t,n){"use strict";e.exports=function(e,t){var n;if(null==e);else if(Array.isArray(e))for(n=0;n<e.length;n++)t(e[n],n,e);else if("function"==typeof e.forEach)e.forEach(t);else if("function"==typeof e.next){n=0;do{var r=e.next();t(r.value,n++,e)}while(!r.done)}else"function"==typeof e&&e(t)}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return P}));var r=n(4),i=n(147),o=n.n(i),a=n(62),s=n.n(a),c=n(229),u=n(1),l=n(117),d=n(35),f=n(41);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var i=S(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},w=Object(r.getLogger)(e),T="error",D="key-info",A="key-info-ack",R="session-ack",k="session-init",O=Symbol("OlmData"),j={OLM_ID_KEY_READY:"olm.id_key_ready",PARTICIPANT_E2EE_CHANNEL_READY:"olm.participant_e2ee_channel_ready",PARTICIPANT_KEY_UPDATED:"olm.partitipant_key_updated"},P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(a,e);var t,n,r,i=_(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this))._conf=e,t._init=new l.a,t._key=void 0,t._keyIndex=-1,t._reqs=new Map,t._sessionInitialization=void 0,a.isSupported()?(t._bootstrapOlm(),t._conf.on(u.ENDPOINT_MESSAGE_RECEIVED,t._onEndpointMessageReceived.bind(E(t))),t._conf.on(u.CONFERENCE_LEFT,t._onConferenceLeft.bind(E(t))),t._conf.on(u.USER_LEFT,t._onParticipantLeft.bind(E(t))),t._conf.on(u.PARTICIPANT_PROPERTY_CHANGED,t._onParticipantPropertyChanged.bind(E(t)))):t._init.reject(new Error("Olm not supported")),t}return t=a,r=[{key:"isSupported",value:function(){return void 0!==window.Olm}}],(n=[{key:"initSessions",value:function(){return C(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._sessionInitialization){e.next=4;break}throw new Error("OlmAdapter initSessions called multiple times");case 4:return this._sessionInitialization=new l.a,e.next=7,this._init;case 7:t=[],n=this._conf.myUserId(),r=m(this._conf.getParticipants());try{for(r.s();!(i=r.n()).done;)(o=i.value).hasFeature(f.b)&&n<o.getId()&&t.push(this._sendSessionInit(o))}catch(e){r.e(e)}finally{r.f()}return e.next=13,Promise.allSettled(t);case 13:this._sessionInitialization.resolve(),this._sessionInitialization=void 0;case 15:case"end":return e.stop()}}),e,this)})))}},{key:"updateKey",value:function(e){return C(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,i,o,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._key=e,this._keyIndex++,n=[],r=m(this._conf.getParticipants()),t.prev=4,o=function(){var e,t=i.value,r=t.getId(),o=a._getParticipantOlmData(t);if(!o.session)return w.warn("Tried to send key to participant ".concat(r," but we have no session")),"continue";var s=Object(c.a)(),u=(p(e={},f.d,"olm"),p(e,"olm",{type:D,data:{ciphertext:a._encryptKeyInfo(o.session),uuid:s}}),e),d=new l.a;d.setRejectTimeout(5e3),d.catch((function(){a._reqs.delete(s)})),a._reqs.set(s,d),n.push(d),a._sendMessage(u,r)},r.s();case 7:if((i=r.n()).done){t.next=13;break}if("continue"!==o()){t.next=11;break}return t.abrupt("continue",11);case 11:t.next=7;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(4),r.e(t.t0);case 18:return t.prev=18,r.f(),t.finish(18);case 21:return t.next=23,Promise.allSettled(n);case 23:return t.abrupt("return",this._keyIndex);case 24:case"end":return t.stop()}}),t,this,[[4,15,18,21]])})))}},{key:"updateCurrentKey",value:function(e){return this._key=e,this._keyIndex}},{key:"clearParticipantSession",value:function(e){var t=this._getParticipantOlmData(e);t.session&&(t.session.free(),t.session=void 0)}},{key:"clearAllParticipantsSessions",value:function(){var e,t=m(this._conf.getParticipants());try{for(t.s();!(e=t.n()).done;){var n=e.value;this.clearParticipantSession(n)}}catch(e){t.e(e)}finally{t.f()}}},{key:"_bootstrapOlm",value:function(){return C(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.debug("Initializing Olm..."),e.prev=1,e.next=4,Olm.init();case 4:this._olmAccount=new Olm.Account,this._olmAccount.create(),t=JSON.parse(this._olmAccount.identity_keys()),this._idKey=t.curve25519,w.debug("Olm ".concat(Olm.get_library_version().join(".")," initialized")),this._init.resolve(),this._onIdKeyReady(this._idKey),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),w.error("Failed to initialize Olm",e.t0),this._init.reject(e.t0);case 17:case"end":return e.stop()}}),e,this,[[1,13]])})))}},{key:"_onIdKeyReady",value:function(e){w.debug("Olm id key ready: ".concat(e)),this._conf.setLocalParticipantProperty("e2ee.idKey",e)}},{key:"_onParticipantE2EEChannelReady",value:function(e){w.debug("E2EE channel with participant ".concat(e," is ready"))}},{key:"_encryptKeyInfo",value:function(e){var t={};return void 0!==this._key&&(t.key=!!this._key&&o.a.fromByteArray(this._key),t.keyIndex=this._keyIndex),e.encrypt(JSON.stringify(t))}},{key:"_getParticipantOlmData",value:function(e){return e[O]=e[O]||{},e[O]}},{key:"_onConferenceLeft",value:function(){return C(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.debug("Conference left"),e.next=3,this._init;case 3:t=m(this._conf.getParticipants());try{for(t.s();!(n=t.n()).done;)r=n.value,this._onParticipantLeft(r.getId(),r)}catch(e){t.e(e)}finally{t.f()}this._olmAccount&&(this._olmAccount.free(),this._olmAccount=void 0);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"_onEndpointMessageReceived",value:function(e,t){return C(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,i,a,c,u,l,d,h,m,v,g,y,_,b,E,S,C,O,P,N,M,x,L,F,B,U;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("olm"===t[f.d]){n.next=2;break}return n.abrupt("return");case 2:if(t.olm){n.next=5;break}return w.warn("Incorrectly formatted message"),n.abrupt("return");case 5:return n.next=7,this._init;case 7:r=t.olm,i=e.getId(),a=this._getParticipantOlmData(e),n.t0=r.type,n.next=n.t0===k?13:n.t0===R?15:n.t0===T?17:n.t0===D?19:n.t0===A?21:23;break;case 13:return a.session?(w.warn("Participant ".concat(i," already has a session")),this._sendError(e,"Session already established")):((u=new Olm.Session).create_outbound(this._olmAccount,r.data.idKey,r.data.otKey),a.session=u,p(c={},f.d,"olm"),p(c,"olm",{type:R,data:{ciphertext:this._encryptKeyInfo(u),uuid:r.data.uuid}}),l=c,this._sendMessage(l,i),this._onParticipantE2EEChannelReady(i)),n.abrupt("break",23);case 15:return a.session?(w.warn("Participant ".concat(i," already has a session")),this._sendError(e,"No session found")):r.data.uuid===a.pendingSessionUuid?(d=r.data.ciphertext,h=this._reqs.get(r.data.uuid),(m=new Olm.Session).create_inbound(this._olmAccount,d.body),this._olmAccount.remove_one_time_keys(m),v=m.decrypt(d.type,d.body),a.session=m,a.pendingSessionUuid=void 0,this._onParticipantE2EEChannelReady(i),this._reqs.delete(r.data.uuid),h.resolve(),(g=I(v)).key&&(y=o.a.toByteArray(g.key),_=g.keyIndex,a.lastKey=y,this.eventEmitter.emit(j.PARTICIPANT_KEY_UPDATED,i,y,_))):(w.warn("Received ACK with the wrong UUID"),this._sendError(e,"Invalid UUID")),n.abrupt("break",23);case 17:return w.error(r.data.error),n.abrupt("break",23);case 19:return a.session?(b=r.data.ciphertext,E=a.session.decrypt(b.type,b.body),void 0!==(S=I(E)).key&&void 0!==S.keyIndex&&(O=!!S.key&&o.a.toByteArray(S.key),P=S.keyIndex,s()(a.lastKey,O)||(a.lastKey=O,this.eventEmitter.emit(j.PARTICIPANT_KEY_UPDATED,i,O,P)),p(C={},f.d,"olm"),p(C,"olm",{type:A,data:{ciphertext:this._encryptKeyInfo(a.session),uuid:r.data.uuid}}),N=C,this._sendMessage(N,i))):(w.debug("Received key info message from ".concat(i," but we have no session for them!")),this._sendError(e,"No session found while processing key-info")),n.abrupt("break",23);case 21:return a.session?(M=r.data.ciphertext,x=a.session.decrypt(M.type,M.body),void 0!==(L=I(x)).key&&void 0!==L.keyIndex&&(F=!!L.key&&o.a.toByteArray(L.key),B=L.keyIndex,s()(a.lastKey,F)||(a.lastKey=F,this.eventEmitter.emit(j.PARTICIPANT_KEY_UPDATED,i,F,B))),U=this._reqs.get(r.data.uuid),this._reqs.delete(r.data.uuid),U.resolve()):(w.debug("Received key info ack message from ".concat(i," but we have no session for them!")),this._sendError(e,"No session found while processing key-info-ack")),n.abrupt("break",23);case 23:case"end":return n.stop()}}),n,this)})))}},{key:"_onParticipantLeft",value:function(e,t){w.debug("Participant ".concat(e," left")),this.clearParticipantSession(t)}},{key:"_onParticipantPropertyChanged",value:function(e,t,n,r){return C(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,o,a,s,u,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=t,n.next="e2ee.enabled"===n.t0?3:20;break;case 3:if(!r||!this._conf.isE2EEEnabled()){n.next=19;break}return i=this._conf.myUserId(),o=e.getId(),n.next=8,e.getFeatures();case 8:if(!(n.sent.has(f.b)&&i<o)){n.next=19;break}if(!this._sessionInitialization){n.next=13;break}return n.next=13,this._sessionInitialization;case 13:return n.next=15,this._sendSessionInit(e);case 15:s=this._getParticipantOlmData(e),u=Object(c.a)(),p(a={},f.d,"olm"),p(a,"olm",{type:D,data:{ciphertext:this._encryptKeyInfo(s.session),uuid:u}}),l=a,this._sendMessage(l,o);case 19:return n.abrupt("break",20);case 20:case"end":return n.stop()}}),n,this)})))}},{key:"_sendError",value:function(e,t){var n,r=e.getId(),i=(p(n={},f.d,"olm"),p(n,"olm",{type:T,data:{error:t}}),n);this._sendMessage(i,r)}},{key:"_sendMessage",value:function(e,t){this._conf.sendMessage(e,t)}},{key:"_sendSessionInit",value:function(e){var t,n=this,r=e.getId(),i=this._getParticipantOlmData(e);if(i.session)return w.warn("Tried to send session-init to ".concat(r," but we already have a session")),Promise.reject();if(void 0!==i.pendingSessionUuid)return w.warn("Tried to send session-init to ".concat(r," but we already have a pending session")),Promise.reject();this._olmAccount.generate_one_time_keys(1);var o=JSON.parse(this._olmAccount.one_time_keys()),a=Object.values(o.curve25519)[0];if(!a)return Promise.reject(new Error("No one-time-keys generated"));this._olmAccount.mark_keys_as_published();var s=Object(c.a)(),u=(p(t={},f.d,"olm"),p(t,"olm",{type:k,data:{idKey:this._idKey,otKey:a,uuid:s}}),t),d=new l.a;return d.setRejectTimeout(5e3),d.catch((function(){n._reqs.delete(s),i.pendingSessionUuid=void 0})),this._reqs.set(s,d),this._sendMessage(u,r),i.pendingSessionUuid=s,d}}])&&g(t.prototype,n),r&&g(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(d.a);function I(e){try{return JSON.parse(e)}catch(e){return{}}}P.events=j}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return L}));var r=n(4),i=n(2),o=n(33),a=n(15),s=n(3),c=n(11),u=n(0),l=n(70),d=n(12),f=n(28),h=n(148),p=n(10),m=n(8),v=n(328),g=n(22),y=n.n(g),_=n(330),b=n(5),E=n(331),S=n(63),C=n(132),w=n(93);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=R(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function R(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M(e);if(t){var i=M(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return I(this,n)}}function I(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return N(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=Object(r.getLogger)(e);var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(E,e);var t,n,r,g=P(E);function E(e,t,n,r,i,o,a,s){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,E),(c=g.call(this,e,t,n,r,i,o,s))._bridgeSessionId=null,c._cachedOldLocalSdp=void 0,c._cachedNewLocalSdp=void 0,c._iceCheckingStartedTimestamp=null,c._gatheringStartedTimestamp=null,c.localRecvMaxFrameHeight=void 0,c._sourceReceiverConstraints=void 0,c._localVideoActive=!0,c._remoteVideoActive=!0,c._gatheringReported=!1,c.lasticecandidate=!1,c.closed=!1,c.isP2P=a,c.remoteRecvMaxFrameHeight=void 0,c.remoteSourceMaxFrameHeights=void 0,c.modificationQueue=new v.a,c.wasConnected=!1,c.establishmentDuration=void 0,c._xmppListeners=[],c._xmppListeners.push(r.addEventListener(w.a.Events.CONN_STATUS_CHANGED,c.onXmppStatusChanged.bind(N(c)))),c._removeSenderVideoConstraintsChangeListener=void 0,c}return t=E,r=[{key:"parseVideoSenders",value:function(e){var t=e.find('>content[name="video"]');if(t.length){var n=t[0].getAttribute("senders");if("both"===n||"initiator"===n||"responder"===n||"none"===n)return n}return null}},{key:"parseMaxFrameHeight",value:function(e){var t=e.find('>content[name="video"]>max-frame-height');return t.length?Number(t.text()):null}},{key:"parseSourceMaxFrameHeight",value:function(e){var t,n,r=[],i=e.find('>content[name="video"]>source-frame-height');return i.length?(i.each((function(e,i){n=i.getAttribute("sourceName"),t=i.getAttribute("maxHeight"),r.push({maxHeight:t,sourceName:n})})),r):null}}],(n=[{key:"_assertNotEnded",value:function(){return this.state!==S.b}},{key:"doInitialize",value:function(e){var t,n,r,i,a,s=this;this.failICE=Boolean(e.failICE),this.lasticecandidate=!1,this.options=e,this.isReconnect=!1,this.wasstable=!1,this.webrtcIceUdpDisable=Boolean(e.webrtcIceUdpDisable),this.webrtcIceTcpDisable=Boolean(e.webrtcIceTcpDisable);var d={disableRtx:e.disableRtx};if(e.gatherStats&&(d.maxstats=300),d.capScreenshareBitrate=!1,d.enableInsertableStreams=e.enableInsertableStreams,d.videoQuality=e.videoQuality,d.forceTurnRelay=e.forceTurnRelay,d.audioQuality=e.audioQuality,d.usesUnifiedPlan=this.usesUnifiedPlan=b.a.supportsUnifiedPlan()&&(b.a.isFirefox()||b.a.isWebKitBased()||(b.a.isChromiumBased()&&this.isP2P?null===(n=null===(t=e.p2p)||void 0===t?void 0:t.enableUnifiedOnChrome)||void 0===n||n:null===(r=e.enableUnifiedOnChrome)||void 0===r||r)),this.isP2P){d.disableSimulcast=!0;var h=this._abtestSuspendVideoEnabled(e);void 0!==h&&(d.abtestSuspendVideo=h)}else d.disableSimulcast=e.disableSimulcast||e.preferH264&&!e.disableH264||e.videoQuality&&e.videoQuality.preferredCodec===o.H264,d.capScreenshareBitrate=d.disableSimulcast||!("number"==typeof(null===(i=e.desktopSharingFrameRate)||void 0===i?void 0:i.max)&&(null===(a=e.desktopSharingFrameRate)||void 0===a?void 0:a.max)>l.a),m.a.analytics.addPermanentProperties({capScreenshareBitrate:d.capScreenshareBitrate});e.startSilent&&(d.startSilent=!0),this.peerconnection=this.rtc.createPeerConnection(this._signalingLayer,this.pcConfig,this.isP2P,d),this.peerconnection.onicecandidate=function(e){if(e){var t=e.candidate,n=window.performance.now();if(t){null===s._gatheringStartedTimestamp&&(s._gatheringStartedTimestamp=n);var r=t.protocol;if("string"==typeof r)if("tcp"===(r=r.toLowerCase())||"ssltcp"===r){if(s.webrtcIceTcpDisable)return}else if("udp"===r&&s.webrtcIceUdpDisable)return}else s._gatheringReported||(m.a.sendAnalytics(c.o,{phase:"gathering",value:n-s._gatheringStartedTimestamp,p2p:s.isP2P,initiator:s.isInitiator}),s._gatheringReported=!0);s.sendIceCandidate(t)}},this.peerconnection.onsignalingstatechange=function(){"stable"===s.peerconnection.signalingState?s.wasstable=!0:"closed"!==s.peerconnection.signalingState&&"closed"!==s.peerconnection.connectionState||s.room.eventEmitter.emit(u.XMPPEvents.SUSPEND_DETECTED,s)},this.peerconnection.oniceconnectionstatechange=function(){var e=window.performance.now(),t=!1;switch(s.isP2P||(s.room.connectionTimes["ice.state.".concat(s.peerconnection.iceConnectionState)]=e),x.log("(TIME) ICE ".concat(s.peerconnection.iceConnectionState," ").concat(s.isP2P?"P2P":"JVB",":\t"),e),m.a.sendAnalytics(c.q,{p2p:s.isP2P,state:s.peerconnection.iceConnectionState,signaling_state:s.peerconnection.signalingState,reconnect:s.isReconnect,value:e}),s.room.eventEmitter.emit(u.XMPPEvents.ICE_CONNECTION_STATE_CHANGED,s,s.peerconnection.iceConnectionState),s.peerconnection.iceConnectionState){case"checking":s._iceCheckingStartedTimestamp=e;break;case"connected":if("stable"===s.peerconnection.signalingState){t=!0;var n=!s.options.enableIceRestart&&s.room.supportsRestartByTerminate();(s.isReconnect||n)&&s.room.eventEmitter.emit(u.XMPPEvents.CONNECTION_RESTORED,s)}if(!s.wasConnected&&(s.wasstable||t||s.usesUnifiedPlan&&s.isInitiator&&b.a.isChromiumBased())){m.a.sendAnalytics(c.o,{phase:"checking",value:e-s._iceCheckingStartedTimestamp,p2p:s.isP2P,initiator:s.isInitiator});var r=Math.min(s._iceCheckingStartedTimestamp,s._gatheringStartedTimestamp);s.establishmentDuration=e-r,m.a.sendAnalytics(c.o,{phase:"establishment",value:s.establishmentDuration,p2p:s.isP2P,initiator:s.isInitiator}),s.wasConnected=!0,s.room.eventEmitter.emit(u.XMPPEvents.CONNECTION_ESTABLISHED,s)}s.isReconnect=!1;break;case"disconnected":s.isReconnect=!0,s.wasstable&&s.room.eventEmitter.emit(u.XMPPEvents.CONNECTION_INTERRUPTED,s);break;case"failed":s.room.eventEmitter.emit(u.XMPPEvents.CONNECTION_ICE_FAILED,s)}},this.peerconnection.onconnectionstatechange=function(){var e=s.peerconnection.iceConnectionState;switch(s.peerconnection.connectionState){case"failed":"disconnected"===e&&s.room.eventEmitter.emit(u.XMPPEvents.CONNECTION_ICE_FAILED,s)}},this.peerconnection.onnegotiationneeded=function(){var e=s.peerconnection.signalingState,t=s.peerconnection.remoteDescription;s.usesUnifiedPlan&&!s.isP2P&&"stable"===e&&t&&"string"==typeof t.sdp&&(x.info("".concat(s," onnegotiationneeded fired on ").concat(s.peerconnection)),s.modificationQueue.push((function(e){var t=new f.a(s.peerconnection.localDescription.sdp);s._renegotiate().then((function(){return s.peerconnection.configureSenderVideoEncodings()})).then((function(){var e=new f.a(s.peerconnection.localDescription.sdp);s.notifyMySSRCUpdate(t,e)})).then((function(){return e()}),(function(t){return e(t)}))}),(function(e){e?x.error("".concat(s," onnegotiationneeded error"),e):x.debug("".concat(s," onnegotiationneeded executed - OK"))})))}}},{key:"getRemoteRecvMaxFrameHeight",value:function(){if(this.isP2P)return this.remoteRecvMaxFrameHeight}},{key:"getRemoteSourcesRecvMaxFrameHeight",value:function(){if(this.isP2P)return this.remoteSourceMaxFrameHeights}},{key:"sendIceCandidate",value:function(e){var t=this,n=new f.a(this.peerconnection.localDescription.sdp);if(e&&e.candidate.length&&!this.lasticecandidate){var r=p.a.iceparams(n.media[e.sdpMLineIndex],n.session),i=p.a.candidateToJingle(e.candidate);if(!r||!i)return y.a.callErrorHandler(new Error("failed to get ice && jcand")),void x.error("failed to get ice && jcand");r.xmlns="urn:xmpp:jingle:transports:ice-udp:1",this.usedrip?(0===this.dripContainer.length&&setTimeout((function(){0!==t.dripContainer.length&&(t.sendIceCandidates(t.dripContainer),t.dripContainer=[])}),150),this.dripContainer.push(e)):this.sendIceCandidates([e])}else x.log("".concat(this," sendIceCandidate: last candidate")),this.lasticecandidate=!0}},{key:"sendIceCandidates",value:function(e){var t=this;if(this._assertNotEnded("sendIceCandidates")){x.log("".concat(this," sendIceCandidates ").concat(JSON.stringify(e)));for(var n=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"transport-info",initiator:this.initiatorJid,sid:this.sid}),r=new f.a(this.peerconnection.localDescription.sdp),o=function(i){var o=e.filter((function(e){return e.sdpMLineIndex===i})),a=p.a.parseMLine(r.media[i].split("\r\n")[0]);if(o.length>0){var s=p.a.iceparams(r.media[i],r.session);s.xmlns="urn:xmpp:jingle:transports:ice-udp:1",n.c("content",{creator:t.initiatorJid===t.localJid?"initiator":"responder",name:o[0].sdpMid?o[0].sdpMid:a.media}).c("transport",s);for(var c=0;c<o.length;c++){var u=p.a.candidateToJingle(o[c].candidate);t.failICE&&(u.ip="1.1.1.1"),n.c("candidate",u).up()}var l=p.a.findLine(r.media[i],"a=fingerprint:",r.session);if(l){var d=p.a.parseFingerprint(l);d.required=!0,n.c("fingerprint",{xmlns:"urn:xmpp:jingle:apps:dtls:0"}).t(d.fingerprint),delete d.fingerprint,n.attrs(d),n.up()}n.up(),n.up()}},a=0;a<r.media.length;a++)o(a);this.connection.sendIQ(n,null,this.newJingleErrorHandler(n),1e4)}}},{key:"sendIceFailedNotification",value:function(){var e=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"session-info",initiator:this.initiatorJid,sid:this.sid}).c("ice-state",{xmlns:"http://jitsi.org/protocol/focus"}).t("failed").up();this._bridgeSessionId&&e.c("bridge-session",{xmlns:"http://jitsi.org/protocol/focus",id:this._bridgeSessionId}),this.connection.sendIQ2(e,{timeout:65}).catch(this.newJingleErrorHandler(e))}},{key:"addIceCandidates",value:function(e){var t=this;if("closed"!==this.peerconnection.signalingState){var n=[];e.find(">content>transport>candidate").each((function(e,t){var r=p.a.candidateFromJingle(t);r=r.replace("\r\n","").replace("a=","");var i=new RTCIceCandidate({sdpMLineIndex:0,sdpMid:"",candidate:r});n.push(i)})),n.length?(x.debug("".concat(this," Queued add (").concat(n.length,") ICE candidates task")),this.modificationQueue.push((function(e){var r,i=A(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.peerconnection.addIceCandidate(o).then((function(){return x.debug("".concat(t," addIceCandidate ok!"))}),(function(e){return x.error("".concat(t," addIceCandidate failed!"),e)}))}}catch(e){i.e(e)}finally{i.f()}e(),x.debug("".concat(t," ICE candidates task finished"))}))):x.error("".concat(this," No ICE candidates to add ?"),e[0]&&e[0].outerHTML)}else x.warn("".concat(this," Ignored add ICE candidate when in closed state"))}},{key:"readSsrcInfo",value:function(e){var t=this;$(e).find('>description>source[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each((function(e,n){var r=Number(n.getAttribute("ssrc"));if(d.a.isSourceNameSignalingEnabled()&&n.hasAttribute("name")){var o=n.getAttribute("name");t._signalingLayer.setTrackSourceName(r,o)}t.isP2P?t._signalingLayer.setSSRCOwner(r,i.Strophe.getResourceFromJid(t.remoteJid)):$(n).find('>ssrc-info[xmlns="http://jitsi.org/jitmeet"]').each((function(e,n){var o,a=n.getAttribute("owner");(null==a?void 0:a.length)&&(isNaN(r)||r<0?x.warn("".concat(t," Invalid SSRC ").concat(r," value received for ").concat(a)):t._signalingLayer.setSSRCOwner(r,(o=a,i.Strophe.getResourceFromJid(o)||o)))}))}))}},{key:"generateRecvonlySsrc",value:function(){this.peerconnection?this.peerconnection.generateRecvonlySsrc():x.error("".concat(this," Unable to generate recvonly SSRC - no peerconnection"))}},{key:"getConfiguredVideoCodec",value:function(){return this.peerconnection.getConfiguredVideoCodec()}},{key:"acceptOffer",value:function(e,t,n,r){var i=this;this.setOfferAnswerCycle(e,(function(){i.sendSessionAccept((function(){t(),i.room.eventEmitter.emit(u.XMPPEvents.SESSION_ACCEPT,i);var e=r.filter((function(e){return e.getType()===s.a.VIDEO}));e.length&&e.splice(0,1),d.a.isMultiStreamSupportEnabled()&&e.length&&i.addTracks(e)}),(function(e){n(e),i.room.eventEmitter.emit(u.XMPPEvents.SESSION_ACCEPT_ERROR,i,e)}))}),n,r)}},{key:"invite",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!this.isInitiator)throw new Error("Trying to invite from the responder session");var n=function(n){var r,i=[],o=A(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;i.push(e.peerconnection.addTrack(a,e.isInitiator))}}catch(e){o.e(e)}finally{o.f()}Promise.all(i).then((function(){return e.peerconnection.createOffer(e.mediaConstraints)})).then((function(t){return e.peerconnection.setLocalDescription(t)})).then((function(){e.sendSessionInitiate(e.peerconnection.localDescription.sdp)})).then((function(){return n()}),(function(e){return n(e)}))};x.debug("".concat(this," Queued invite task")),this.modificationQueue.push(n,(function(t){t?x.error("".concat(e," invite error"),t):x.debug("".concat(e," invite executed - OK"))}))}},{key:"sendSessionInitiate",value:function(e){var t=this,n=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"session-initiate",initiator:this.initiatorJid,sid:this.sid});new f.a(e).toJingle(n,this.isInitiator?"initiator":"responder"),n=n.tree(),x.debug("".concat(this," Session-initiate: "),n),this.connection.sendIQ(n,(function(){x.info("".concat(t,' Got RESULT for "session-initiate"'))}),(function(e){x.error("".concat(t,' "session-initiate" error'),e)}),1e4)}},{key:"setAnswer",value:function(e){var t=this;if(!this.isInitiator)throw new Error("Trying to set an answer on the responder session");this.setOfferAnswerCycle(e,(function(){x.info("".concat(t," setAnswer - succeeded")),t.usesUnifiedPlan&&b.a.isChromiumBased()&&(x.debug("".concat(t," Queued responderRenegotiate task")),t.modificationQueue.push((function(e){var n=t.peerconnection.remoteDescription.sdp,r=new RTCSessionDescription({type:"offer",sdp:n});return t._responderRenegotiate(r).then((function(){return e()}),(function(t){return e(t)}))}),(function(e){e?x.error("".concat(t," failed to renegotiate a decoder for muted endpoint ").concat(e)):x.debug("".concat(t," renegotiate a decoder for muted endpoint"))})))}),(function(e){x.error("".concat(t," setAnswer failed: "),e)}))}},{key:"setOfferAnswerCycle",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=function(t){var n=[],o=i.filter((function(e){return e.getType()===s.a.AUDIO})),a=i.filter((function(e){return e.getType()===s.a.VIDEO})),c=i;d.a.isMultiStreamSupportEnabled()&&a.length>1&&(c=[].concat(D(o),[a[0]]));var u,l=A(c);try{for(l.s();!(u=l.n()).done;){var h=u.value;n.push(r.peerconnection.addTrack(h,r.isInitiator))}}catch(e){l.e(e)}finally{l.f()}var p=r._processNewJingleOfferIq(e),m=r.peerconnection.localDescription.sdp,v=$(e).find('>bridge-session[xmlns="http://jitsi.org/protocol/focus"]').attr("id");v!==r._bridgeSessionId&&(r._bridgeSessionId=v),Promise.all(n).then((function(){return r._renegotiate(p.raw)})).then((function(){if(r.state===S.c&&(r.state=S.a,r.isP2P&&(!r._localVideoActive||r.localRecvMaxFrameHeight||r._sourceReceiverConstraints)&&r.sendContentModify()),m){var e=new f.a(r.peerconnection.localDescription.sdp);r.notifyMySSRCUpdate(new f.a(m),e)}})).then((function(){return t()}),(function(e){return t(e)}))};x.debug("".concat(this," Queued setOfferAnswerCycle task")),this.modificationQueue.push(o,(function(e){e?(x.error("".concat(r," setOfferAnswerCycle task failed: ").concat(e)),n(e)):(x.debug("".concat(r," setOfferAnswerCycle task done")),t())}))}},{key:"setVideoCodecs",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.peerconnection.getConfiguredVideoCodec();if(this._assertNotEnded()&&t!==r){x.info("".concat(this," Switching video codec from ").concat(r," to ").concat(t)),this.peerconnection.setVideoCodecs(t,n);var i=function(t){e._renegotiate().then((function(){return x.debug("".concat(e," setVideoCodecs task is done")),t()}),(function(n){return x.error("".concat(e," setVideoCodecs task failed: ").concat(n)),t(n)}))};x.debug("".concat(this," Queued setVideoCodecs task")),this.modificationQueue.push(i)}}},{key:"replaceTransport",value:function(e,t,n){var r=this;if(this.options.enableForcedReload){var i=new f.a(this.peerconnection.localDescription.sdp);return this.sendTransportAccept(i,t,n),void this.room.eventEmitter.emit(u.XMPPEvents.CONNECTION_RESTARTED,this)}this.room.eventEmitter.emit(u.XMPPEvents.ICE_RESTARTING,this);var o=e.clone();e.find(">content[name='data']").attr("senders","rejected"),e.find(">content>description>source").remove(),e.find(">content>description>ssrc-group").remove();var a=e.find(">content>transport>fingerprint");a.attr("hash","sha-1"),a.text("00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00"),this.setOfferAnswerCycle(e,(function(){r.setOfferAnswerCycle(o,(function(){var e=new f.a(r.peerconnection.localDescription.sdp);r.sendTransportAccept(e,t,n),r.room.eventEmitter.emit(u.XMPPEvents.ICE_RESTART_SUCCESS,r,o)}),n)}),n)}},{key:"sendSessionAccept",value:function(e,t){var n=this,r=new f.a(this.peerconnection.localDescription.sdp),o=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"session-accept",initiator:this.initiatorJid,responder:this.responderJid,sid:this.sid});this.webrtcIceTcpDisable&&(r.removeTcpCandidates=!0),this.webrtcIceUdpDisable&&(r.removeUdpCandidates=!0),this.failICE&&(r.failICE=!0),r.toJingle(o,this.initiatorJid===this.localJid?"initiator":"responder"),x.info("".concat(this," Sending session-accept")),x.debug(o.tree()),this.connection.sendIQ(o,e,this.newJingleErrorHandler(o,(function(e){t(e),n.room.eventEmitter.emit(u.XMPPEvents.SESSION_ACCEPT_TIMEOUT,n)})),1e4)}},{key:"sendContentModify",value:function(){var e=this,t=this.localRecvMaxFrameHeight,n=this._localVideoActive?"both":"none",r=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"content-modify",initiator:this.initiatorJid,sid:this.sid}).c("content",{name:s.a.VIDEO,senders:n});void 0!==t&&(r=r.c("max-frame-height",{xmlns:"http://jitsi.org/jitmeet/video"}).t(t),x.info("".concat(this," sending content-modify, video senders: ").concat(n,",")+" max frame height: ".concat(t))),void 0!==this._sourceReceiverConstraints&&this._sourceReceiverConstraints.forEach((function(t,n){r.c("source-frame-height",{xmlns:"http://jitsi.org/jitmeet/video"}).attrs({sourceName:n,maxHeight:t}),r.up(),x.info("".concat(e," sending content-modify for source-name: ").concat(n,", maxHeight: ").concat(t))})),x.debug(r.tree()),this.connection.sendIQ(r,null,this.newJingleErrorHandler(r),1e4)}},{key:"setReceiverVideoConstraint",value:function(e,t){x.info("".concat(this," setReceiverVideoConstraint - max frame height: ").concat(e)+" sourceReceiverConstraints: ".concat(t)),d.a.isSourceNameSignalingEnabled()?this._sourceReceiverConstraints=t:this.localRecvMaxFrameHeight=e,this.isP2P&&this.state===S.a&&this.sendContentModify()}},{key:"sendTransportAccept",value:function(e,t,n){var r=this,o=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"transport-accept",initiator:this.initiatorJid,sid:this.sid});e.media.forEach((function(t,n){var i=p.a.parseMLine(t.split("\r\n")[0]);o.c("content",{creator:r.initiatorJid===r.localJid?"initiator":"responder",name:i.media}),e.transportToJingle(n,o),o.up()})),x.info("".concat(this," Sending transport-accept")),x.debug(o.tree()),this.connection.sendIQ(o,t,this.newJingleErrorHandler(o,n),1e4)}},{key:"sendTransportReject",value:function(e,t){var n=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"transport-reject",initiator:this.initiatorJid,sid:this.sid});x.info("".concat(this," Sending 'transport-reject'")),x.debug(n.tree()),this.connection.sendIQ(n,e,this.newJingleErrorHandler(n,t),1e4)}},{key:"setSenderVideoConstraint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this._assertNotEnded()){x.info("".concat(this," setSenderVideoConstraint: ").concat(e,", sourceName: ").concat(t));var n=t?this.rtc.getLocalVideoTracks().find((function(e){return e.getSourceName()===t})):this.rtc.getLocalVideoTrack();return this.peerconnection.setSenderVideoConstraints(e,n)}return Promise.resolve()}},{key:"terminate",value:function(e,t,n){if(this.state!==S.b){if(!n||Boolean(n.sendSessionTerminate)){var r=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"session-terminate",initiator:this.initiatorJid,sid:this.sid}).c("reason").c(n&&n.reason||"success").up();n&&n.reasonDescription?r.c("text").t(n.reasonDescription).up().up():r.up(),this._bridgeSessionId&&r.c("bridge-session",{xmlns:"http://jitsi.org/protocol/focus",id:this._bridgeSessionId,restart:n&&!0===n.requestRestart}).up(),x.info("".concat(this," Sending session-terminate")),x.debug(r.tree()),this.connection.sendIQ(r,e,this.newJingleErrorHandler(r,t),1e4)}else x.info("".concat(this," Skipped sending session-terminate"));this.connection.jingle.terminate(this.sid)}}},{key:"onTerminated",value:function(e,t){x.info("".concat(this," Session terminated"),e,t),this._xmppListeners.forEach((function(e){return e()})),this._xmppListeners=[],this._removeSenderVideoConstraintsChangeListener&&this._removeSenderVideoConstraintsChangeListener(),this.close()}},{key:"onXmppStatusChanged",value:function(e){e===w.a.Status.CONNECTED&&this._cachedOldLocalSdp&&(x.info("".concat(this," Sending SSRC update on reconnect")),this.notifyMySSRCUpdate(this._cachedOldLocalSdp,this._cachedNewLocalSdp))}},{key:"_parseSsrcInfoFromSourceAdd",value:function(e,t){var n=this,r=[],i=this;return $(e).each((function(e,o){var a=$(o).attr("name"),s="";$(o).find('ssrc-group[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each((function(){var e=this.getAttribute("semantics"),t=$(this).find(">source").map((function(){return this.getAttribute("ssrc")})).get();t.length&&(s+="a=ssrc-group:".concat(e," ").concat(t.join(" "),"\r\n"))})),$(o).find('source[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each((function(){var e=$(this).attr("ssrc");t.containsSSRC(e)?(!i.usesUnifiedPlan||!i.isP2P)&&x.warn("".concat(i," Source-add request for existing SSRC: ").concat(e)):$(this).find(">parameter").each((function(){s+="a=ssrc:".concat(e," ").concat($(this).attr("name")),$(this).attr("value")&&$(this).attr("value").length&&(s+=":".concat($(this).attr("value"))),s+="\r\n"}))}));var c=!1;t.media.forEach((function(e,t){p.a.findLine(e,"a=mid:".concat(a))&&(r[t]||(r[t]=""),r[t]+=s,c=!0)})),!c&&n.isP2P&&d.a.isSourceNameSignalingEnabled()&&(r[a]=s)})),r}},{key:"addRemoteStream",value:function(e){this._addOrRemoveRemoteStream(!0,e)}},{key:"removeRemoteStream",value:function(e){this._addOrRemoveRemoteStream(!1,e)}},{key:"removeRemoteStreamsOnLeave",value:function(e){var t=this;x.debug("".concat(this," Queued removeRemoteStreamsOnLeave task for participant ").concat(e)),this.modificationQueue.push((function(n){var r=t.peerconnection.getRemoteSourceInfoByParticipant(e);if(r.length){var i=new f.a(t.peerconnection.localDescription.sdp),o=t._processRemoteRemoveSource(r);t._renegotiate(o.raw).then((function(){var e=new f.a(t.peerconnection.localDescription.sdp);t.notifyMySSRCUpdate(i,e),n()})).catch((function(e){return n(e)}))}else n()}),(function(e){e?x.error("".concat(t," removeRemoteStreamsOnLeave error:"),e):x.info("".concat(t," removeRemoteStreamsOnLeave done!"))}))}},{key:"_addOrRemoveRemoteStream",value:function(e,t){var n=this,r=e?"addRemoteStream":"removeRemoteStream";e&&this.readSsrcInfo(t),x.debug("".concat(this," Queued ").concat(r," task")),this.modificationQueue.push((function(i){if(!n.peerconnection.localDescription||!n.peerconnection.localDescription.sdp){var o="".concat(r," - localDescription not ready yet");return x.error(o),void i(o)}x.log("".concat(n," Processing ").concat(r));var a=new f.a(n.peerconnection.localDescription.sdp),s=new f.a(n.peerconnection.remoteDescription.sdp),c=e?n._parseSsrcInfoFromSourceAdd(t,s):n._parseSsrcInfoFromSourceRemove(t,s),u=e?n._processRemoteAddSource(c):n._processRemoteRemoveSource(c),l=new RTCSessionDescription({type:"offer",sdp:u.raw});(e&&n.usesUnifiedPlan&&n.isP2P&&b.a.isChromiumBased()?n._responderRenegotiate(l):n._renegotiate(u.raw)).then((function(){var e=new f.a(n.peerconnection.localDescription.sdp);x.log("".concat(n," ").concat(r," - OK")),n.notifyMySSRCUpdate(a,e),i()}),(function(e){x.error("".concat(n," ").concat(r," failed:"),e),i(e)}))}))}},{key:"_processNewJingleOfferIq",value:function(e){var t=new f.a("");return this.webrtcIceTcpDisable&&(t.removeTcpCandidates=!0),this.webrtcIceUdpDisable&&(t.removeUdpCandidates=!0),this.failICE&&(t.failICE=!0),t.fromJingle(e),this.readSsrcInfo($(e).find(">content")),t}},{key:"_processRemoteRemoveSource",value:function(e){var t=this,n=this.usesUnifiedPlan?new f.a(this.peerconnection.peerconnection.remoteDescription.sdp):new f.a(this.peerconnection.remoteDescription.sdp);return e.forEach((function(e,r){var i;if((e=e.split("\r\n")).pop(),t.usesUnifiedPlan){if(e.forEach((function(e){var r;if((i=n.media.findIndex((function(t){return t.includes(e)})))>-1)if(n.media[i]=n.media[i].replace("".concat(e,"\r\n"),""),t.isP2P){var o=null===(r=p.a.parseMLine(n.media[i].split("\r\n")[0]))||void 0===r?void 0:r.media,s=t.peerconnection.getDesiredMediaDirection(o,!1);[a.a.SENDRECV,a.a.SENDONLY].forEach((function(e){n.media[i]=n.media[i].replace("a=".concat(e),"a=".concat(s))}))}else n.media[i]=n.media[i].replace("a=".concat(a.a.SENDONLY),"a=".concat(a.a.INACTIVE))})),i>-1&&!t.isP2P&&d.a.isMultiStreamSupportEnabled()){var o=p.a.parseMLine(n.media[i].split("\r\n")[0]),s=o.media,c=o.port;n.media[i]=n.media[i].replace("m=".concat(s," ").concat(c),"m=".concat(s," 0"))}}else e.forEach((function(e){n.media[r]=n.media[r].replace("".concat(e,"\r\n"),"")}))})),n.raw=n.session+n.media.join(""),n}},{key:"_processRemoteAddSource",value:function(e){var t=this,n=new f.a(this.peerconnection.remoteDescription.sdp);return e.length>n.media.length&&d.a.isSourceNameSignalingEnabled()&&this.isP2P&&this.usesUnifiedPlan&&(n.addMlineForNewLocalSource(s.a.VIDEO),n=new f.a(n.raw)),e.forEach((function(e,r){var i;if(n.media[r]+=e,t.isP2P&&t.usesUnifiedPlan){var o=null===(i=p.a.parseMLine(n.media[r].split("\r\n")[0]))||void 0===i?void 0:i.media,s=t.peerconnection.getDesiredMediaDirection(o,!0);[a.a.RECVONLY,a.a.INACTIVE].forEach((function(e){n.media[r]=n.media[r].replace("a=".concat(e),"a=".concat(s))}))}})),n.raw=n.session+n.media.join(""),n}},{key:"_renegotiate",value:function(e){if("closed"===this.peerconnection.signalingState){var t=new Error("Attempted to renegotiate in state closed");return this.room.eventEmitter.emit(u.XMPPEvents.RENEGOTIATION_FAILED,t,this),Promise.reject(t)}var n=e||this.peerconnection.remoteDescription.sdp;if(!n){var r=new Error("Can not renegotiate without remote description, current state: ".concat(this.state));return this.room.eventEmitter.emit(u.XMPPEvents.RENEGOTIATION_FAILED,r,this),Promise.reject(r)}var i=new RTCSessionDescription({type:this.isInitiator?"answer":"offer",sdp:n});return this.isInitiator?this._initiatorRenegotiate(i):this._responderRenegotiate(i)}},{key:"_responderRenegotiate",value:function(e){var t=this;return x.debug("".concat(this," Renegotiate: setting remote description")),this.peerconnection.setRemoteDescription(e).then((function(){return x.debug("".concat(t," Renegotiate: creating answer")),t.peerconnection.createAnswer(t.mediaConstraints).then((function(e){return x.debug("".concat(t," Renegotiate: setting local description")),t.peerconnection.setLocalDescription(e)}))}))}},{key:"_initiatorRenegotiate",value:function(e){var t=this;return x.debug("".concat(this," Renegotiate: creating offer")),this.peerconnection.createOffer(this.mediaConstraints).then((function(n){return x.debug("".concat(t," Renegotiate: setting local description")),t.peerconnection.setLocalDescription(n).then((function(){return x.debug("".concat(t," Renegotiate: setting remote description")),t.peerconnection.setRemoteDescription(e)}))}))}},{key:"addTracks",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!d.a.isMultiStreamSupportEnabled()||!(null==t?void 0:t.length)||t.find((function(e){return e.getType()!==s.a.VIDEO})))return Promise.reject(new Error("Multiple tracks of the given media type are not supported"));var n=[],r=function(r){var i,o=new f.a(e.peerconnection.localDescription.sdp),a=new f.a(e.peerconnection.peerconnection.remoteDescription.sdp),s=A(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.addMlineForNewLocalSource(c.getType())}}catch(e){s.e(e)}finally{s.f()}var u=new RTCSessionDescription({type:"offer",sdp:a.raw});e._responderRenegotiate(u).then((function(){var r,i=A(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;n.push(e.peerconnection.replaceTrack(null,o))}}catch(e){i.e(e)}finally{i.f()}return Promise.all(n)})).then((function(){return e._renegotiate()})).then((function(){var t=new f.a(e.peerconnection.localDescription.sdp);e.notifyMySSRCUpdate(o,t),r()})).catch((function(e){return r(e)}))};return new Promise((function(t,n){x.debug("".concat(e," Queued renegotiation after addTrack")),e.modificationQueue.push(r,(function(r){r?(x.error("".concat(e," renegotiation after addTrack error"),r),n(r)):(x.debug("".concat(e," renegotiation after addTrack executed - OK")),t())}))}))}},{key:"replaceTrack",value:function(e,t){var n=this,r=function(r){x.debug("".concat(n," replaceTrack worker started. oldTrack = ").concat(e,", newTrack = ").concat(t));var i=n.peerconnection.localDescription.sdp;n.usesUnifiedPlan||(n.peerconnection.options.capScreenshareBitrate&&e&&t&&t.isVideoTrack()&&n.peerconnection.clearRecvonlySsrc(),!e&&t&&t.isVideoTrack()?n.peerconnection.clearRecvonlySsrc():e&&e.isVideoTrack()&&!t&&(n.peerconnection.clearRecvonlySsrc(),n.peerconnection.generateRecvonlySsrc())),n.peerconnection.replaceTrack(e,t).then((function(r){var o=Promise.resolve();return x.debug("".concat(n," TPC.replaceTrack finished. shouldRenegotiate = ").concat(r,", JingleSessionState = ").concat(n.state)),r&&(e||t)&&n.state===S.a&&(o=n._renegotiate().then((function(){var e=new f.a(n.peerconnection.localDescription.sdp);n.notifyMySSRCUpdate(new f.a(i),e)}))),o.then((function(){if(null==t?void 0:t.isVideoTrack())return x.debug("".concat(n," replaceTrack worker: configuring video stream")),n.peerconnection.configureSenderVideoEncodings(t)}))})).then((function(){return r()}),(function(e){return r(e)}))};return new Promise((function(i,o){x.debug("".concat(n," Queued replaceTrack task. Old track = ").concat(e,", new track = ").concat(t)),n.modificationQueue.push(r,(function(e){e?(x.error("".concat(n," Replace track error:"),e),o(e)):(x.info("".concat(n,"  Replace track done!")),i())}))}))}},{key:"_parseSsrcInfoFromSourceRemove",value:function(e,t){var n=[];return $(e).each((function(e,r){var i=$(r).attr("name"),o="";$(r).find('ssrc-group[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each((function(){var e=this.getAttribute("semantics"),t=$(this).find(">source").map((function(){return this.getAttribute("ssrc")})).get();t.length&&(o+="a=ssrc-group:".concat(e," ").concat(t.join(" "),"\r\n"))}));var a=[];$(r).find('source[xmlns="urn:xmpp:jingle:apps:rtp:ssma:0"]').each((function(){var e=$(this).attr("ssrc");a.push(e)})),t.media.forEach((function(e,t){p.a.findLine(e,"a=mid:".concat(i))&&(n[t]||(n[t]=""),a.forEach((function(r){var i=p.a.findLines(e,"a=ssrc:".concat(r));i.length&&(n[t]+="".concat(i.join("\r\n"),"\r\n"))})),n[t]+=o)}))})),n}},{key:"_verifyNoSSRCChanged",value:function(e,t){var n=new f.a(this.peerconnection.localDescription.sdp),r=new h.a(t,n),i=r.getNewMedia();if(Object.keys(i).length)return x.error("".concat(this," - some SSRC were added on ").concat(e),i),!1;var o=(r=new h.a(n,t)).getNewMedia();return!Object.keys(o).length||(x.error("".concat(this," - some SSRCs were removed on ").concat(e),o),!1)}},{key:"addTrackAsUnmute",value:function(e){var t=this;return this._addRemoveTrackAsMuteUnmute(!1,e).then((function(){if(e.isVideoTrack())return t.peerconnection.configureSenderVideoEncodings(e)}))}},{key:"removeTrackAsMute",value:function(e){return this._addRemoveTrackAsMuteUnmute(!0,e)}},{key:"_addRemoveTrackAsMuteUnmute",value:function(e,t){var n=this;if(!t)return Promise.reject('invalid "track" argument value');var r=e?"removeTrackMute":"addTrackUnmute",i=function(i){var o=n.peerconnection;if(o){var a=o.localDescription.sdp;(e?o.removeTrackMute(t):o.addTrackUnmute(t)).then((function(e){e&&a&&o.remoteDescription.sdp?n._renegotiate().then((function(){!n.usesUnifiedPlan&&n._verifyNoSSRCChanged(r,new f.a(a));var e=o.localDescription.sdp;n.notifyMySSRCUpdate(new f.a(a),new f.a(e)),i()})):i()}),i)}else i("Error:  tried ".concat(r," track with no active peer")+"connection")};return x.debug("".concat(this," Queued ").concat(r," task")),new Promise((function(e,t){n.modificationQueue.push(i,(function(i){i?(x.error("".concat(n," ").concat(r," failed")),t(i)):(x.debug("".concat(n," ").concat(r," done")),e())}))}))}},{key:"setMediaTransferActive",value:function(e,t){var n=this;if(!this.peerconnection)return Promise.reject('Can not modify transfer active state, before "initialize" is called');var r=e?"audio active":"audio inactive",i=t?"video active":"video inactive";x.info("".concat(this," Queued make ").concat(i,", ").concat(r," task"));var o=function(r){var i=n.state===S.a,o=n.peerconnection.setAudioTransferActive(e);n._localVideoActive!==t&&(n._localVideoActive=t,n.isP2P&&i&&n.sendContentModify());var a=n.peerconnection.setVideoTransferActive(n._localVideoActive&&n._remoteVideoActive);i&&(o||a)?n._renegotiate().then(r,r):r()};return new Promise((function(e,t){n.modificationQueue.push(o,(function(o){o?(x.error("".concat(n," Make ").concat(i,", ").concat(r," task failed!")),t(o)):(x.debug("".concat(n," Make ").concat(i,", ").concat(r," task done!")),e())}))}))}},{key:"modifyContents",value:function(e){var t=this,n=E.parseVideoSenders(e),r=E.parseMaxFrameHeight(e),i=E.parseSourceMaxFrameHeight(e);r&&(x.info("".concat(this," received remote max frame height: ").concat(r)),this.remoteRecvMaxFrameHeight=r,this.eventEmitter.emit(C.a.REMOTE_VIDEO_CONSTRAINTS_CHANGED,this)),i&&(this.remoteSourceMaxFrameHeights=i,this.eventEmitter.emit(C.a.REMOTE_SOURCE_CONSTRAINTS_CHANGED,this,i)),null!==n?(x.debug("".concat(this,' queued "content-modify" task(video senders="').concat(n,'")')),this.modificationQueue.push((function(e){t._assertNotEnded()&&t._modifyRemoteVideoActive(n)?t._renegotiate().then(e,e):e()}),(function(e){e?x.error("".concat(t,' "content-modify" failed'),e):x.debug("".concat(t,' "content-modify" task(video senders="').concat(n,'") done'))}))):x.error("".concat(this,' - failed to parse video "senders" attribute in "content-modify" action'))}},{key:"_modifyRemoteVideoActive",value:function(e){var t="both"===e||"initiator"===e&&this.isInitiator||"responder"===e&&!this.isInitiator;return t!==this._remoteVideoActive&&(x.debug("".concat(this," new remote video active: ").concat(t)),this._remoteVideoActive=t),this.peerconnection.setVideoTransferActive(this._localVideoActive&&this._remoteVideoActive)}},{key:"notifyMySSRCUpdate",value:function(e,t){var n=this;if(this.state===S.a){if(!this.connection.connected)return this._cachedOldLocalSdp||(this._cachedOldLocalSdp=e),this._cachedNewLocalSdp=t,void x.warn("".concat(this," Not sending SSRC update while the signaling is disconnected"));this._cachedOldLocalSdp=void 0,this._cachedNewLocalSdp=void 0;var r=function(e){var t=e.getNewMedia(),n=[],r=null;return Object.keys(t).forEach((function(e){var i=Object.keys(t[e].ssrcs);r=t[e].mid,(null==i?void 0:i.length)&&(n=n.concat(i))})),{mediaType:r,ssrcs:n}},o=new h.a(t,e),a=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"source-remove",initiator:this.initiatorJid,sid:this.sid});o.toJingle(a);var s={},c=r(o);c.ssrcs.length&&(x.info("".concat(this," Sending source-remove for ").concat(c.mediaType)+" ssrcs=".concat(c.ssrcs)),this.connection.sendIQ(a,(function(){n.room.eventEmitter.emit(u.XMPPEvents.SOURCE_REMOVE,n,s)}),this.newJingleErrorHandler(a,(function(e){n.room.eventEmitter.emit(u.XMPPEvents.SOURCE_REMOVE_ERROR,n,e,s)})),1e4)),o=new h.a(e,t);var l=Object(i.$iq)({to:this.remoteJid,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:"source-add",initiator:this.initiatorJid,sid:this.sid});o.toJingle(l);var d=r(o);d.ssrcs.length&&(x.info("".concat(this," Sending source-add for ").concat(d.mediaType," ssrcs=").concat(d.ssrcs)),this.connection.sendIQ(l,(function(){n.room.eventEmitter.emit(u.XMPPEvents.SOURCE_ADD,n,s)}),this.newJingleErrorHandler(l,(function(e){n.room.eventEmitter.emit(u.XMPPEvents.SOURCE_ADD_ERROR,n,e,d.mediaType,s)})),1e4))}else x.warn("".concat(this," Skipping SSRC update in '").concat(this.state," ' state."))}},{key:"newJingleErrorHandler",value:function(e,t){var n=this;return function(e){var r={},i=$(e).find("error");if(i.length){r.code=i.attr("code");var o=$(e).find("error :first");o.length&&(r.reason=o[0].tagName);var a=i.find(">text");a.length&&(r.msg=a.text())}e||(r.reason="timeout"),r.session=n.toString(),t?t(r):n.state===S.b&&"item-not-found"===r.reason?x.debug("".concat(n," Jingle error: ").concat(JSON.stringify(r))):y.a.callErrorHandler(new Error("Jingle error: ".concat(JSON.stringify(r))))}}},{key:"getIceConnectionState",value:function(){return this.peerconnection.getConnectionState()}},{key:"close",value:function(){var e=this;this.state=S.b,this.establishmentDuration=void 0,this.peerconnection&&(this.peerconnection.onicecandidate=null,this.peerconnection.oniceconnectionstatechange=null,this.peerconnection.onnegotiationneeded=null,this.peerconnection.onsignalingstatechange=null),x.debug("".concat(this," Clearing modificationQueue")),this.modificationQueue.clear(),x.debug("".concat(this," Queued PC close task")),this.modificationQueue.push((function(t){e.peerconnection&&e.peerconnection.close(),t(),x.debug("".concat(e," PC close task done!"))})),x.debug("".concat(this," Shutdown modificationQueue!")),this.modificationQueue.shutdown()}},{key:"toString",value:function(){return"JingleSessionPC[session=".concat(this.isP2P?"P2P":"JVB",",initiator=").concat(this.isInitiator,",sid=").concat(this.sid,"]")}},{key:"_abtestSuspendVideoEnabled",value:function(e){var t=e.abTesting;if(t&&t.enableSuspendVideoTest){var n=this._getInitiatorJid();return Object(_.integerHash)(n)%2==0}}}])&&O(t.prototype,n),r&&O(t,r),Object.defineProperty(t,"prototype",{writable:!1}),E}(E.a)}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r}));var r,i=n(4),o=n(1),a=n(24),s=n(9),c=n(11),u=n(5),l=n(8);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}!function(e){e.ACTIVE="active",e.INACTIVE="inactive",e.INTERRUPTED="interrupted",e.RESTORING="restoring"}(r||(r={}));var f=Object(i.getLogger)(e),h=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rtc=t,this.conference=n,this.track=r,this.restoringTimer=null,this.rtcMutedTimestamp=null,this.streamingStatusMap={},this.trackTimer=null,this.outOfForwardedSourcesTimeout="number"==typeof i.outOfForwardedSourcesTimeout?i.outOfForwardedSourcesTimeout:500,this.p2pRtcMuteTimeout="number"==typeof i.p2pRtcMuteTimeout?i.p2pRtcMuteTimeout:2500,this.rtcMuteTimeout="number"==typeof i.rtcMuteTimeout?i.rtcMuteTimeout:1e4,f.info("RtcMuteTimeout set to: ".concat(this.rtcMuteTimeout))}var t,n,i;return t=e,i=[{key:"_getNewStateForJvbMode",value:function(e,t,n,i){return n?r.ACTIVE:u.a.supportsVideoMuteOnConnInterrupted()?i?e?t?r.INTERRUPTED:r.RESTORING:r.INACTIVE:r.ACTIVE:e?r.ACTIVE:r.INACTIVE}},{key:"_getNewStateForP2PMode",value:function(e,t){return u.a.supportsVideoMuteOnConnInterrupted()?e||!t?r.ACTIVE:r.INTERRUPTED:r.ACTIVE}}],(n=[{key:"_getVideoFrozenTimeout",value:function(){var e=this.track.getSourceName();return this.rtc.isInForwardedSources(e)?this.rtcMuteTimeout:this.conference.isP2PActive()?this.p2pRtcMuteTimeout:this.outOfForwardedSourcesTimeout}},{key:"init",value:function(){this._onP2PStatus=this.figureOutStreamingStatus.bind(this),this.conference.on(o.JitsiConferenceEvents.P2P_STATUS,this._onP2PStatus),this._onUserLeft=this.onUserLeft.bind(this),this.conference.on(o.JitsiConferenceEvents.USER_LEFT,this._onUserLeft),u.a.supportsVideoMuteOnConnInterrupted()&&(this._onTrackRtcMuted=this.onTrackRtcMuted.bind(this),this.rtc.addListener(s.default.REMOTE_TRACK_MUTE,this._onTrackRtcMuted),this._onTrackRtcUnmuted=this.onTrackRtcUnmuted.bind(this),this.rtc.addListener(s.default.REMOTE_TRACK_UNMUTE,this._onTrackRtcUnmuted),this._onSignallingMuteChanged=this.onSignallingMuteChanged.bind(this),this.track.on(a.TRACK_MUTE_CHANGED,this._onSignallingMuteChanged),this._onTrackVideoTypeChanged=this.onTrackVideoTypeChanged.bind(this),this.track.on(a.TRACK_VIDEOTYPE_CHANGED,this._onTrackVideoTypeChanged)),this._onForwardedSourcesChanged=this.onForwardedSourcesChanged.bind(this),this.conference.on(o.JitsiConferenceEvents.FORWARDED_SOURCES_CHANGED,this._onForwardedSourcesChanged),this._onLastNValueChanged=this.figureOutStreamingStatus.bind(this),this.rtc.on(s.default.LASTN_VALUE_CHANGED,this._onLastNValueChanged)}},{key:"dispose",value:function(){u.a.supportsVideoMuteOnConnInterrupted()&&(this.rtc.removeListener(s.default.REMOTE_TRACK_MUTE,this._onTrackRtcMuted),this.rtc.removeListener(s.default.REMOTE_TRACK_UNMUTE,this._onTrackRtcUnmuted),this.track.off(a.TRACK_MUTE_CHANGED,this._onSignallingMuteChanged)),this.conference.off(o.JitsiConferenceEvents.FORWARDED_SOURCES_CHANGED,this._onForwardedSourcesChanged),this.conference.off(o.JitsiConferenceEvents.P2P_STATUS,this._onP2PStatus),this.conference.off(o.JitsiConferenceEvents.USER_LEFT,this._onUserLeft),this.rtc.removeListener(s.default.LASTN_VALUE_CHANGED,this._onLastNValueChanged),this.clearTimeout(),this.clearRtcMutedTimestamp(),this.maybeSendTrackStreamingStatusEvent(Date.now()),this.figureOutStreamingStatus()}},{key:"_changeStreamingStatus",value:function(e){if(this.track.getTrackStreamingStatus()!==e){var t=this.track.getSourceName();this.track._setTrackStreamingStatus(e),f.debug("Emit track streaming status(".concat(Date.now(),") ").concat(t,": ").concat(e)),l.a.sendLog(JSON.stringify({id:"track.streaming.status",track:t,status:e})),this.track.emit(a.TRACK_STREAMING_STATUS_CHANGED,e)}}},{key:"clearTimeout",value:function(){this.trackTimer&&(window.clearTimeout(this.trackTimer),this.trackTimer=null)}},{key:"clearRtcMutedTimestamp",value:function(){this.rtcMutedTimestamp=null}},{key:"isVideoTrackFrozen",value:function(){if(!u.a.supportsVideoMuteOnConnInterrupted())return!1;var e=this.track.isWebRTCTrackMuted(),t=this.rtcMutedTimestamp,n=this._getVideoFrozenTimeout();return e&&"number"==typeof t&&Date.now()-t>=n}},{key:"figureOutStreamingStatus",value:function(){var t=this.track.getSourceName(),n=this.conference.isP2PActive(),i=this._isRestoringTimedout(),o=0===this.conference.getLastN(),a=this.track.isMuted()||o,s=this.isVideoTrackFrozen(),c=this.rtc.isInForwardedSources(t),u=n?e._getNewStateForP2PMode(a,s):e._getNewStateForJvbMode(c,i,a,s);u!==r.RESTORING&&this._clearRestoringTimer(),f.debug("Figure out conn status for ".concat(t,", is video muted: ").concat(a," video track frozen: ").concat(s," p2p mode: ").concat(n," is in forwarded sources: ").concat(c," currentStatus => newStatus: ").concat(this.track.getTrackStreamingStatus()," => ").concat(u));var l=this.streamingStatusMap||{};if(!("p2p"in l)||!("streamingStatus"in l)||l.p2p!==n||l.streamingStatus!==u){var d=Date.now();this.maybeSendTrackStreamingStatusEvent(d),this.streamingStatusMap=Object.assign(Object.assign({},l),{streamingStatus:u,p2p:n,startedMs:d}),"videoType"in this.streamingStatusMap||(this.streamingStatusMap.videoType=this.track.getVideoType())}this._changeStreamingStatus(u)}},{key:"maybeSendTrackStreamingStatusEvent",value:function(e){var t=this.streamingStatusMap;t&&"startedMs"in t&&"videoType"in t&&"streamingStatus"in t&&"p2p"in t&&(t.value=e-t.startedMs,l.a.sendAnalytics(Object(c.L)(t)))}},{key:"onForwardedSourcesChanged",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=this.track.getSourceName();f.debug("Fowarded sources changed leaving=".concat(e,", entering=").concat(t," at ").concat(n)),u.a.supportsVideoMuteOnConnInterrupted()||this.figureOutStreamingStatus(),e.includes(r)&&(this.track._clearEnteredForwardedSourcesTimestamp(),this._clearRestoringTimer(),u.a.supportsVideoMuteOnConnInterrupted()&&this.figureOutStreamingStatus()),t.includes(r)&&(this.track._setEnteredForwardedSourcesTimestamp(n),u.a.supportsVideoMuteOnConnInterrupted()&&this.figureOutStreamingStatus())}},{key:"_clearRestoringTimer",value:function(){var e=this.restoringTimer;e&&(clearTimeout(e),this.restoringTimer=null)}},{key:"_isRestoringTimedout",value:function(){var e=this,t=this.track._getEnteredForwardedSourcesTimestamp();return!!(t&&Date.now()-t>=1e4)||(this.restoringTimer||(this.restoringTimer=setTimeout((function(){return e.figureOutStreamingStatus()}),1e4)),!1)}},{key:"_isCurrentTrack",value:function(e){return e.getSourceName()===this.track.getSourceName()}},{key:"onUserLeft",value:function(e){this.track.getParticipantId()===e&&(this.maybeSendTrackStreamingStatusEvent(Date.now()),this.streamingStatusMap={})}},{key:"onTrackRtcMuted",value:function(e){var t=this;if(this._isCurrentTrack(e)){var n=e.getSourceName();if(f.debug("Detector track RTC muted: ".concat(n),Date.now()),this.rtcMutedTimestamp=Date.now(),!e.isMuted()){this.clearTimeout();var r=this._getVideoFrozenTimeout();this.trackTimer=window.setTimeout((function(){f.debug("Set RTC mute timeout for: ".concat(n," of ").concat(r," ms")),t.clearTimeout(),t.figureOutStreamingStatus()}),r)}}}},{key:"onTrackRtcUnmuted",value:function(e){if(this._isCurrentTrack(e)){var t=this.track.getSourceName();f.debug("Detector track RTC unmuted: ".concat(t),Date.now()),this.clearTimeout(),this.clearRtcMutedTimestamp(),this.figureOutStreamingStatus()}}},{key:"onSignallingMuteChanged",value:function(e){if(this._isCurrentTrack(e)){var t=this.track.getSourceName();f.debug("Detector on track signalling mute changed: ".concat(t),e.isMuted()),this.figureOutStreamingStatus()}}},{key:"onTrackVideoTypeChanged",value:function(e){var t=Date.now();this.maybeSendTrackStreamingStatusEvent(t),this.streamingStatusMap=Object.assign(Object.assign({},this.streamingStatusMap||{}),{videoType:e,startedMs:t})}}])&&d(t.prototype,n),i&&d(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.b=h}).call(this,"/index.js")},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(5);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(c,e);var t,n,r,i=s(c);function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,e,{sharedKey:!0})}return t=c,(n=[{key:"setKey",value:function(e){this.e2eeCtx.setKey(void 0,{encryptionKey:e.encryptionKey},e.index)}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(n(174).a),d=n(315),f=n(143);function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.options.config.e2ee,r=void 0===n?{}:n;this._externallyManaged=r.externallyManagedKey,this._externallyManaged?this._keyHandler=new l(t):this._keyHandler=new d.a(t)}var t,n,i;return t=e,i=[{key:"isSupported",value:function(e){var t=e.e2ee;return!(!(void 0===t?{}:t).externallyManagedKey&&!f.a.isSupported())&&!(e.testing&&e.testing.disableE2EE)&&(r.a.supportsInsertableStreams()||e.enableEncodedTransformSupport&&r.a.supportsEncodedTransform())}}],(n=[{key:"isEnabled",value:function(){return this._keyHandler.isEnabled()}},{key:"setEnabled",value:function(e){return p(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._keyHandler.setEnabled(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"setEncryptionKey",value:function(e){this._keyHandler.setKey(e)}}])&&h(t.prototype,n),i&&h(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=u(e),a=r[0],s=r[1],c=new o(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),l=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[l++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(l(e,a,a+16383>s?s:a+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(12),i=n(10);function o(e,t){if(!t)return!1;if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]instanceof Array&&t[n]instanceof Array){if(!e[n].equals(t[n]))return!1}else if(e[n]!==t[n])return!1;return!0}function a(e,t){if(this.mySDP=e,this.otherSDP=t,!e)throw new Error('"mySDP" is undefined!');if(!t)throw new Error('"otherSDP" is undefined!')}a.prototype.getNewMedia=function(){var e=this.mySDP.getMediaSsrcMap(),t=this.otherSDP.getMediaSsrcMap(),n={};return Object.keys(t).forEach((function(r){var i=e[r],a=t[r];i||!a?(Object.keys(a.ssrcs).forEach((function(e){if(-1===Object.keys(i.ssrcs).indexOf(e))n[r]||(n[r]={mediaindex:a.mediaindex,mid:a.mid,ssrcs:{},ssrcGroups:[]}),n[r].ssrcs[e]=a.ssrcs[e];else if(a.ssrcs[e].lines&&i.ssrcs[e].lines){void 0!==i.ssrcs[e].lines.find((function(e){return-1!==e.indexOf("msid")}))!==(void 0!==a.ssrcs[e].lines.find((function(e){return-1!==e.indexOf("msid")})))&&(n[r]||(n[r]={mediaindex:a.mediaindex,mid:a.mid,ssrcs:{},ssrcGroups:[]}),n[r].ssrcs[e]=a.ssrcs[e])}})),a.ssrcGroups.forEach((function(e){for(var t=!1,s=0;s<i.ssrcGroups.length;s++){var c=i.ssrcGroups[s];if(e.semantics===c.semantics&&o(e.ssrcs,c.ssrcs)){t=!0;break}}t||(n[r]||(n[r]={mediaindex:a.mediaindex,mid:a.mid,ssrcs:{},ssrcGroups:[]}),n[r].ssrcGroups.push(e))}))):n[r]=a})),n},a.prototype.toJingle=function(e){var t=this.getNewMedia(),n=!1;return Object.keys(t).forEach((function(o){n=!0;var a=t[o];e.c("content",{name:a.mid}),e.c("description",{xmlns:"urn:xmpp:jingle:apps:rtp:1",media:a.mid}),Object.keys(a.ssrcs).forEach((function(t){var n=a.ssrcs[t],o=n.lines,s=i.a.parseSourceNameLine(o);e.c("source",{xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0"}),e.attrs({name:r.a.isSourceNameSignalingEnabled()?s:void 0,ssrc:n.ssrc});var c=i.a.parseMSIDAttribute(o);c&&(e.c("parameter"),e.attrs({name:"msid"}),e.attrs({value:c}),e.up()),e.up()})),a.ssrcGroups.forEach((function(t){t.ssrcs.length&&(e.c("ssrc-group",{semantics:t.semantics,xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0"}),t.ssrcs.forEach((function(t){e.c("source",{ssrc:t}).up()})),e.up())})),e.up(),e.up()})),n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return w})),n.d(t,"d",(function(){return B}));n(87);var r="\n    var timer;\n\n    onmessage = function(request) {\n        switch (request.data.id) {\n        case ".concat(1,": {\n            timer = setInterval(() => {\n                postMessage({ id: ").concat(3," });\n            }, request.data.timeMs);\n            break;\n        }\n        case ").concat(2,": {\n            if (timer) {\n                clearInterval(timer);\n            }\n            break;\n        }\n        }\n    };\n"),i=URL.createObjectURL(new Blob([r],{type:"application/javascript"}));function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=document.createElement("div"),i=t.getVideoTracks()[0],o=null!==(n=i.getSettings())&&void 0!==n?n:i.getConstraints(),a=o.height,s=o.width,c=o.frameRate;this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d"),this._desktopElement=document.createElement("video"),this._videoElement=document.createElement("video"),r.appendChild(this._videoElement),r.appendChild(this._desktopElement),null!==document.body&&document.body.appendChild(r),this._frameRate=parseInt(c,10),this._videoElement.width=parseInt(s,10),this._videoElement.height=parseInt(a,10),this._videoElement.autoplay=!0,this._videoElement.srcObject=t,this._videoElement.play(),r.style.display="none",this._onVideoFrameTimer=this._onVideoFrameTimer.bind(this)}var t,n,r;return t=e,(n=[{key:"_onVideoFrameTimer",value:function(e){3===e.data.id&&this._renderVideo()}},{key:"_renderVideo",value:function(){var e,t=o(this._desktopStream.getVideoTracks(),1)[0],n=null!==(e=t.getSettings())&&void 0!==e?e:t.getConstraints(),r=n.height,i=n.width;this._canvas.width=parseInt(i,10),this._canvas.height=parseInt(r,10),this._ctx.drawImage(this._desktopElement,0,0,this._canvas.width,this._canvas.height),this._ctx.drawImage(this._videoElement,this._canvas.width-this._videoElement.width,this._canvas.height-this._videoElement.height,this._videoElement.width,this._videoElement.height),this._ctx.beginPath(),this._ctx.lineWidth=2,this._ctx.strokeStyle="#A9A9A9",this._ctx.rect(this._canvas.width-this._videoElement.width,this._canvas.height-this._videoElement.height,this._videoElement.width,this._videoElement.height),this._ctx.stroke()}},{key:"isEnabled",value:function(e){return e.isVideoTrack()&&"desktop"===e.videoType}},{key:"startEffect",value:function(e){var t,n=e.getVideoTracks()[0],r=null!==(t=n.getSettings())&&void 0!==t?t:n.getConstraints(),o=r.height,a=r.width;return this._desktopStream=e,this._desktopElement.width=parseInt(a,10),this._desktopElement.height=parseInt(o,10),this._desktopElement.autoplay=!0,this._desktopElement.srcObject=e,this._desktopElement.play(),this._canvas.width=parseInt(a,10),this._canvas.height=parseInt(o,10),this._videoFrameTimerWorker=new Worker(i,{name:"Presenter effect worker"}),this._videoFrameTimerWorker.onmessage=this._onVideoFrameTimer,this._videoFrameTimerWorker.postMessage({id:1,timeMs:1e3/this._frameRate}),this._canvas.captureStream(this._frameRate)}},{key:"stopEffect",value:function(){this._videoFrameTimerWorker.postMessage({id:2}),this._videoFrameTimerWorker.terminate()}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e){return MediaStreamTrack.prototype.getSettings||MediaStreamTrack.prototype.getConstraints?Promise.resolve(new c(e)):Promise.reject(new Error("JitsiStreamPresenterEffect not supported!"))}var l=n(369);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m,v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);try{if(this._wasmInterface=t,this._wasmPcmInput=this._wasmInterface._malloc(1920),!this._wasmPcmInput)throw Error("Failed to create wasm input memory buffer!");if(this._wasmPcmOutput=this._wasmInterface._malloc(1920),!this._wasmPcmOutput)throw t._free(this._wasmPcmInput),Error("Failed to create wasm output memory buffer!");this._wasmPcmInputF32Index=this._wasmPcmInput/4,this._context=this._wasmInterface._rnnoise_create()}catch(e){throw this._releaseWasmResources(),e}}var t,n,r;return t=e,(n=[{key:"_copyPCMSampleToWasmBuffer",value:function(e){this._wasmInterface.HEAPF32.set(e,this._wasmPcmInputF32Index)}},{key:"_convertTo16BitPCM",value:function(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=f(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e.entries());try{for(n.s();!(t=n.n()).done;){var r=d(t.value,2),i=r[0],o=r[1];e[i]=32767*o}}catch(e){n.e(e)}finally{n.f()}}},{key:"_releaseWasmResources",value:function(){this._wasmPcmInput&&(this._wasmInterface._free(this._wasmPcmInput),this._wasmPcmInput=null),this._wasmPcmOutput&&(this._wasmInterface._free(this._wasmPcmOutput),this._wasmPcmOutput=null),this._context&&(this._wasmInterface._rnnoise_destroy(this._context),this._context=null)}},{key:"getSampleLength",value:function(){return 480}},{key:"getRequiredPCMFrequency",value:function(){return 44100}},{key:"destroy",value:function(){this._destroyed||(this._releaseWasmResources(),this._destroyed=!0)}},{key:"calculateAudioFrameVAD",value:function(e){if(this._destroyed)throw new Error("RnnoiseProcessor instance is destroyed, please create another one!");var t=e.length;if(480!==t)throw new Error("Rnnoise can only process PCM frames of 480 samples! Input sample was:".concat(t));return this._convertTo16BitPCM(e),this._copyPCMSampleToWasmBuffer(e),this._wasmInterface._rnnoise_process_frame(this._context,this._wasmPcmOutput,this._wasmPcmInput)}}])&&p(t.prototype,n),r&&p(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function g(){return m||(m=Object(l.a)()),m.then((function(e){return new v(e)}))}var y=n(370),_=n.n(y),b="\n    var timer;\n\n    onmessage = function(request) {\n        switch (request.data.id) {\n        case ".concat(1,": {\n            timer = setInterval(() => {\n                postMessage({ id: ").concat(3," });\n            }, request.data.timeMs);\n            break;\n        }\n        case ").concat(2,": {\n            if (timer) {\n                clearInterval(timer);\n            }\n            break;\n        }\n        }\n    };\n"),E=URL.createObjectURL(new Blob([b],{type:"application/javascript"}));function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.callback=t,this._currentCanvas=document.createElement("canvas"),this._currentCanvasContext=this._currentCanvas.getContext("2d"),this._videoElement=document.createElement("video"),this._handleWorkerAction=this._handleWorkerAction.bind(this),this._initScreenshotCapture=this._initScreenshotCapture.bind(this),this._streamWorker=new Worker(E,{name:"Screenshot capture worker"}),this._streamWorker.onmessage=this._handleWorkerAction}var t,n,r;return t=e,(n=[{key:"startEffect",value:function(e,t){var n=this;return new Promise((function(r,i){var o;"desktop"!==t&&i();var a=e.getVideoTracks()[0],s=null!==(o=a.getSettings())&&void 0!==o?o:a.getConstraints(),c=s.height,u=s.width;n._streamHeight=c,n._streamWidth=u,n._currentCanvas.height=parseInt(c,10),n._currentCanvas.width=parseInt(u,10),n._videoElement.height=parseInt(c,10),n._videoElement.width=parseInt(u,10),n._videoElement.srcObject=e,n._videoElement.play(),n._videoElement.addEventListener("loadeddata",n._initScreenshotCapture),r()}))}},{key:"stopEffect",value:function(){this._streamWorker.postMessage({id:2}),this._videoElement.removeEventListener("loadeddata",this._initScreenshotCapture)}},{key:"_initScreenshotCapture",value:function(){var e=document.createElement("canvas").getContext("2d");e.drawImage(this._videoElement,0,0,this._streamWidth,this._streamHeight);var t=e.getImageData(0,0,this._streamWidth,this._streamHeight).data;this._storedImageData=t,this._streamWorker.postMessage({id:1,timeMs:3e4})}},{key:"_handleWorkerAction",value:function(e){return 3===e.data.id&&this._handleScreenshot()}},{key:"_shouldProcessScreenshot",value:function(e){return e>=1e5}},{key:"_handleScreenshot",value:function(){this._currentCanvasContext.drawImage(this._videoElement,0,0,this._streamWidth,this._streamHeight);var e=this._currentCanvasContext.getImageData(0,0,this._streamWidth,this._streamHeight).data,t=_()(e,this._storedImageData,null,this._streamWidth,this._streamHeight);this._shouldProcessScreenshot(t)&&(this._storedImageData=e,this.callback(this._currentCanvas))}}])&&S(t.prototype,n),r&&S(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function w(e){return MediaStreamTrack.prototype.getSettings||MediaStreamTrack.prototype.getConstraints?Promise.resolve(new C(e)):Promise.reject(new Error("ScreenshotCaptureEffect not supported!"))}var T="image",D="desktop-share",A="\n    var timer;\n\n    onmessage = function(request) {\n        switch (request.data.id) {\n        case ".concat(1,": {\n            timer = setTimeout(() => {\n                postMessage({ id: ").concat(3," });\n            }, request.data.timeMs);\n            break;\n        }\n        case ").concat(2,": {\n            if (timer) {\n                clearTimeout(timer);\n            }\n            break;\n        }\n        }\n    };\n"),R=URL.createObjectURL(new Blob([A],{type:"application/javascript"}));function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(t,n){var r,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._options=n,this._options.virtualBackground.backgroundType===T&&(this._virtualImage=document.createElement("img"),this._virtualImage.crossOrigin="anonymous",this._virtualImage.src=this._options.virtualBackground.virtualSource),this._options.virtualBackground.backgroundType===D&&(this._virtualVideo=document.createElement("video"),this._virtualVideo.autoplay=!0,this._virtualVideo.srcObject=null===(o=null===(i=null===(r=this._options)||void 0===r?void 0:r.virtualBackground)||void 0===i?void 0:i.virtualSource)||void 0===o?void 0:o.stream),this._model=t,this._segmentationPixelCount=this._options.width*this._options.height,this._onMaskFrameTimer=this._onMaskFrameTimer.bind(this),this._outputCanvasElement=document.createElement("canvas"),this._outputCanvasElement.getContext("2d"),this._inputVideoElement=document.createElement("video")}var t,n,r;return t=e,(n=[{key:"_onMaskFrameTimer",value:function(e){3===e.data.id&&this._renderMask()}},{key:"runPostProcessing",value:function(){this._outputCanvasCtx.globalCompositeOperation="copy",this._options.virtualBackground.backgroundType===T?this._outputCanvasCtx.filter="blur(4px)":this._outputCanvasCtx.filter="blur(8px)",this._outputCanvasCtx.drawImage(this._segmentationMaskCanvas,0,0,this._options.width,this._options.height,0,0,this._inputVideoElement.width,this._inputVideoElement.height),this._outputCanvasCtx.globalCompositeOperation="source-in",this._outputCanvasCtx.filter="none",this._outputCanvasCtx.drawImage(this._inputVideoElement,0,0),this._outputCanvasCtx.globalCompositeOperation="destination-over",this._options.virtualBackground.backgroundType===T&&this._outputCanvasCtx.drawImage(this._virtualImage,0,0,this._inputVideoElement.width,this._inputVideoElement.height),this._options.virtualBackground.backgroundType===D?this._outputCanvasCtx.drawImage(this._virtualVideo,0,0,this._desktopShareDimensions.width,this._desktopShareDimensions.height):(this._outputCanvasCtx.filter="blur(".concat(this._options.virtualBackground.blurValue,"px)"),this._outputCanvasCtx.drawImage(this._inputVideoElement,0,0))}},{key:"runInference",value:function(){this._model._runInference();for(var e=this._model._getOutputMemoryOffset()/4,t=0;t<this._segmentationPixelCount;t++){var n=this._model.HEAPF32[e+2*t],r=this._model.HEAPF32[e+2*t+1],i=Math.max(n,r),o=Math.exp(n-i),a=Math.exp(r-i);this._segmentationMask.data[4*t+3]=255*a/(o+a)}this._segmentationMaskCtx.putImageData(this._segmentationMask,0,0)}},{key:"_renderMask",value:function(){var e,t,n,r=null===(n=null===(t=null===(e=this._options)||void 0===e?void 0:e.virtualBackground)||void 0===t?void 0:t.virtualSource)||void 0===n?void 0:n.track;r&&(this._desktopShareDimensions=r.getSettings?r.getSettings():r.getConstraints()),this.resizeSource(),this.runInference(),this.runPostProcessing(),this._maskFrameTimerWorker.postMessage({id:1,timeMs:1e3/30})}},{key:"resizeSource",value:function(){this._segmentationMaskCtx.drawImage(this._inputVideoElement,0,0,this._inputVideoElement.width,this._inputVideoElement.height,0,0,this._options.width,this._options.height);for(var e=this._segmentationMaskCtx.getImageData(0,0,this._options.width,this._options.height),t=this._model._getInputMemoryOffset()/4,n=0;n<this._segmentationPixelCount;n++)this._model.HEAPF32[t+3*n]=e.data[4*n]/255,this._model.HEAPF32[t+3*n+1]=e.data[4*n+1]/255,this._model.HEAPF32[t+3*n+2]=e.data[4*n+2]/255}},{key:"isEnabled",value:function(e){return e.isVideoTrack()&&"camera"===e.videoType}},{key:"startEffect",value:function(e){var t=this;this._maskFrameTimerWorker=new Worker(R,{name:"Blur effect worker"}),this._maskFrameTimerWorker.onmessage=this._onMaskFrameTimer;var n=e.getVideoTracks()[0],r=n.getSettings?n.getSettings():n.getConstraints(),i=r.height,o=r.frameRate,a=r.width;return this._segmentationMask=new ImageData(this._options.width,this._options.height),this._segmentationMaskCanvas=document.createElement("canvas"),this._segmentationMaskCanvas.width=this._options.width,this._segmentationMaskCanvas.height=this._options.height,this._segmentationMaskCtx=this._segmentationMaskCanvas.getContext("2d"),this._outputCanvasElement.width=parseInt(a,10),this._outputCanvasElement.height=parseInt(i,10),this._outputCanvasCtx=this._outputCanvasElement.getContext("2d"),this._inputVideoElement.width=parseInt(a,10),this._inputVideoElement.height=parseInt(i,10),this._inputVideoElement.autoplay=!0,this._inputVideoElement.srcObject=e,this._inputVideoElement.onloadeddata=function(){t._maskFrameTimerWorker.postMessage({id:1,timeMs:1e3/30})},this._outputCanvasElement.captureStream(parseInt(o,10))}},{key:"stopEffect",value:function(){this._maskFrameTimerWorker.postMessage({id:2}),this._maskFrameTimerWorker.terminate()}}])&&k(t.prototype,n),r&&k(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),j=n(371),P=n.n(j),I=n(372),N=n.n(I),M=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},x="https://sdk.sariska.io/segm_lite_v681.tflite",L="https://sdk.sariska.io/segm_full_v679.tflite",F={model96:{height:96,width:160},model144:{height:144,width:256}};function B(e,t){var r;return M(this,void 0,void 0,regeneratorRuntime.mark((function t(){var i,o,a,s,c,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(MediaStreamTrack.prototype.getSettings||MediaStreamTrack.prototype.getConstraints){t.next=2;break}throw new Error("JitsiStreamBackgroundEffect not supported!");case 2:if(t.prev=2,o=n(623),!(null===(r=null==o?void 0:o.feature)||void 0===r?void 0:r.simd)){t.next=10;break}return t.next=7,N()();case 7:i=t.sent,t.next=13;break;case 10:return t.next=12,P()();case 12:i=t.sent;case 13:t.next=18;break;case 15:return t.prev=15,t.t0=t.catch(2),t.abrupt("return");case 18:return a=i._getModelBufferMemoryOffset(),t.next=21,fetch(o.feature.simd?L:x);case 21:if((s=t.sent).ok){t.next=24;break}throw new Error("Failed to download tflite model!");case 24:return t.next=26,s.arrayBuffer();case 26:return c=t.sent,i.HEAPU8.set(new Uint8Array(c),a),i._loadModel(c.byteLength),u=Object.assign(Object.assign({},o.feature.simd?F.model144:F.model96),{virtualBackground:e}),t.abrupt("return",new O(i,u));case 31:case"end":return t.stop()}}),t,null,[[2,15]])})))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r.a})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return o.a})),n.d(t,"a",(function(){return a.a}));var r=n(283);n(127);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"recording.ogg",n=window.URL.createObjectURL(e),r=document.createElement("a");r.style="display: none",r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}var o=n(284),a=n(285)},function(e,t,n){var r=n(66),i=n(38),o=n(106);e.exports=function(e){return function(t,n,a){var s,c=r(t),u=i(c.length),l=o(a,u);if(e&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(75);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(76),i=n(82);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(o=s.charCodeAt(c))<55296||o>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):o:e?s.slice(c,c+2):a-56320+(o-55296<<10)+65536}}},function(e,t,n){var r=n(31),i=n(75),o=n(36)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){var r=n(36)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(123),o=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var a=n.call(e,t);if("object"!==r(a))throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==i(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},function(e,t,n){"use strict";n(249);var r=n(59),i=n(58),o=n(29),a=n(82),s=n(36),c=n(208),u=s("species"),l=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var f=s(e),h=!o((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),p=h?!o((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[u]=function(){return n}),n[f](""),!t})):void 0;if(!h||!p||"replace"===e&&!l||"split"===e&&!d){var m=/./[f],v=n(a,f,""[e],(function(e,t,n,r,i){return t.exec===c?h&&!i?{done:!0,value:m.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}})),g=v[0],y=v[1];r(String.prototype,e,g),i(RegExp.prototype,f,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}}},function(e,t,n){var r=n(27).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){"use strict";var r=n(27),i=n(6),o=n(59),a=n(112),s=n(96),c=n(111),u=n(110),l=n(31),d=n(29),f=n(156),h=n(122),p=n(194);e.exports=function(e,t,n,m,v,g){var y=r[e],_=y,b=v?"set":"add",E=_&&_.prototype,S={},C=function(e){var t=E[e];o(E,e,"delete"==e||"has"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof _&&(g||E.forEach&&!d((function(){(new _).entries().next()})))){var w=new _,T=w[b](g?{}:-0,1)!=w,D=d((function(){w.has(1)})),A=f((function(e){new _(e)})),R=!g&&d((function(){for(var e=new _,t=5;t--;)e[b](t,t);return!e.has(-0)}));A||((_=t((function(t,n){u(t,_,e);var r=p(new y,t,_);return null!=n&&c(n,v,r[b],r),r}))).prototype=E,E.constructor=_),(D||R)&&(C("delete"),C("has"),v&&C("get")),(R||T)&&C(b),g&&E.clear&&delete E.clear}else _=m.getConstructor(t,e,v,b),a(_.prototype,n),s.NEED=!0;return h(_,e),S[e]=_,i(i.G+i.W+i.F*(_!=y),S),g||m.setStrong(_,e,v),_}},function(e,t,n){for(var r,i=n(27),o=n(58),a=n(104),s=a("typed_array"),c=a("view"),u=!(!i.ArrayBuffer||!i.DataView),l=u,d=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");d<9;)(r=i[f[d++]])?(o(r.prototype,s,!0),o(r.prototype,c,!0)):l=!1;e.exports={ABV:u,CONSTR:l,TYPED:s,VIEW:c}},function(e,t,n){"use strict";e.exports=n(95)||!n(29)((function(){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete n(27)[e]}))},function(e,t,n){"use strict";var r=n(6);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){"use strict";var r=n(6),i=n(50),o=n(74),a=n(111);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,c=arguments[1];return i(this),(t=void 0!==c)&&i(c),null==e?new this:(n=[],t?(r=0,s=o(c,arguments[2],2),a(e,!1,(function(e){n.push(s(e,r++))}))):a(e,!1,n.push,n),new this(n))}})}},function(e,t){var n;function r(e){return n(e)}r.aY_=function(e){n=e},e.exports=r},function(e,t,n){var r=n(85),i=r.am_,o=r.I_,a=r.an_,s="$MDE"+i,c={};function u(e,t){var n=a(e)[t];return"string"==typeof n&&((n=n.split(" "))[2]&&(n[2]="true"===n[2]),4==n.length&&(n[3]=parseInt(n[3],10))),n}function l(e,t,n,r){var i=n[0],s=n[1],c=n[2],u=n[3];c&&delete a(e)[t];var l=o[s];if(l){var d="function"==typeof i?i:l[i];if(!d)throw Error("Method not found: "+i);null!=u&&"number"==typeof u&&(u=l.T_[u]),u?d.apply(l,u.concat(r,e)):d.call(l,r,e)}}function d(){}t.ag_=d,t._f_=d,t.ad_=l,t.ae_=u,t._I_=function(e){c[e]||(c[e]=!0)},t.ao_=function(e){Object.keys(c).forEach((function(t){!function(e,t){var n=t.body||t,r=t[s]=t[s]||{};r[e]||n.addEventListener(e,r[e]=function(t){var n=t.target;if(n){n=n.correspondingUseElement||(3===n.nodeType?n.parentNode:n);var r,i="on"+e;if(t.bubbles){var o=!1,a=t.stopPropagation;t.stopPropagation=function(){a.call(t),o=!0};do{if((r=u(n,i))&&(l(n,i,r,t),o))break}while((n=n.parentNode)&&n.getAttribute)}else(r=u(n,i))&&l(n,i,r,t)}},!0)}(t,e)}))}},function(e,t,n){"use strict";var r=n(600);function i(e,t){var n,i,o;t?(n=t.k_,i=t.p_,(o=t._V_)||(o=t._V_=[]),o.push(this)):void 0===(n=e.global.h_)&&(e.global.h_=n=new r(e));this.k_=n,this.h_=[],this.E_=e,this.p_=i,this._V_=void 0,this.v_=t&&t.v_}i.prototype={F_:function(e){var t=this.h_;return i._W_(t,e),this.E_.emit("_X_"),this.E_.global.h_=void 0,t}},e.exports=t=i,t.u_=function(e){return e.h_||(e.h_=new i(e))}},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/videocam.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("515ce2")()}).e("path",{d:"M0 0h24v24H0z",fill:"none"},null,null,0).e("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/videocam_off.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("ac5598")()}).e("path",{d:"M0 0h24v24H0zm0 0h24v24H0z",fill:"none"},null,null,0).e("path",{d:"M21 6.5l-4 4V7c0-.55-.45-1-1-1H9.82L21 17.18V6.5zM3.27 2L2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.54-.18L19.73 21 21 19.73 3.27 2z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/close.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("11bc44")()}).e("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},null,null,0).e("path",{d:"M0 0h24v24H0z",fill:"none"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=n(100);t.a=r.a.toString},function(e,t,n){"use strict";var r=n(100),i=n(171);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.a=function(e){return null==e?e+"":"object"===o(e)?r.a[i.a.call(e)]||"object":o(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));window.AudioContext=window.AudioContext||window.webkitAudioContext;var r=null;function i(e,t,n){this.stream=e,this.intervalId=null,this.intervalMilis=t,this.audioLevel=0,this.callback=n}window.AudioContext&&(r=new AudioContext).suspend&&r.suspend(),i.prototype.start=function(){var e=this;if(i.isLocalStatsSupported()){r.resume();var t=r.createAnalyser();t.smoothingTimeConstant=.8,t.fftSize=2048,r.createMediaStreamSource(this.stream).connect(t),this.intervalId=setInterval((function(){var n=new Uint8Array(t.frequencyBinCount);t.getByteTimeDomainData(n);var r,i,o,a,s=function(e){for(var t=0,n=e.length,r=0;r<n;r++)t<e[r]&&(t=e[r]);return parseFloat(((t-127)/128).toFixed(3))}(n);e.audioLevel=(r=s,i=e.audioLevel,o=0,o=(a=i-r)>.2?i-.2:a<-.4?i+.4:r,parseFloat(o.toFixed(3))),e.callback(e.audioLevel)}),this.intervalMilis)}},i.prototype.stop=function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)},i.isLocalStatsSupported=function(){return Boolean(r)}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return S}));var r=n(4),i=n(1),o=n(9),a=n(5),s=n(117),c=n(35),u=n(314);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},E=Object(r.getLogger)(e),S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(l,e);var t,n,r,c=v(l);function l(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return h(this,l),(t=c.call(this)).conference=e,t.e2eeCtx=new u.a(n),t.enabled=!1,t._enabling=void 0,t.conference.on(i._MEDIA_SESSION_STARTED,t._onMediaSessionStarted.bind(y(t))),t.conference.on(i.TRACK_ADDED,(function(e){return e.isLocal()&&t._onLocalTrackAdded(e)})),t.conference.rtc.on(o.default.REMOTE_TRACK_ADDED,(function(e,n){return t._setupReceiverE2EEForTrack(n,e)})),t.conference.on(i.TRACK_MUTE_CHANGED,t._trackMuteChanged.bind(y(t))),t}return t=l,(n=[{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(e){return b(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e!==this.enabled){t.next=2;break}return t.abrupt("return");case 2:if(t.t0=this._enabling,!t.t0){t.next=6;break}return t.next=6,this._enabling;case 6:if(this._enabling=new s.a,this.enabled=e,e||this.e2eeCtx.cleanupAll(),t.t1=this._setEnabled,!t.t1){t.next=13;break}return t.next=13,this._setEnabled(e);case 13:this.conference.setLocalParticipantProperty("e2ee.enabled",e),this.conference._restartMediaSessions(),this._enabling.resolve();case 16:case"end":return t.stop()}}),t,this)})))}},{key:"setEncryptionKey",value:function(){throw new Error("Not implemented by subclass")}},{key:"_onLocalTrackAdded",value:function(e){var t,n=d(this.conference.getMediaSessions());try{for(n.s();!(t=n.n()).done;){var r=t.value;this._setupSenderE2EEForTrack(r,e)}}catch(e){n.e(e)}finally{n.f()}}},{key:"_onMediaSessionStarted",value:function(e){var t,n=d(this.conference.getLocalTracks());try{for(n.s();!(t=n.n()).done;){var r=t.value;this._setupSenderE2EEForTrack(e,r)}}catch(e){n.e(e)}finally{n.f()}}},{key:"_setupReceiverE2EEForTrack",value:function(e,t){if(this.enabled){var n=e.findReceiverForTrack(t.track);n?this.e2eeCtx.handleReceiver(n,t.getType(),t.getParticipantId()):E.warn("Could not handle E2EE for ".concat(t,": receiver not found in: ").concat(e))}}},{key:"_setupSenderE2EEForTrack",value:function(e,t){if(this.enabled){var n=e.peerconnection,r=n&&n.findSenderForTrack(t.track);r?this.e2eeCtx.handleSender(r,t.getType(),t.getParticipantId()):E.warn("Could not handle E2EE for ".concat(t,": sender not found in ").concat(n))}}},{key:"_trackMuteChanged",value:function(e){if(a.a.doesVideoMuteByStreamRemove()&&e.isLocal()&&e.isVideoTrack()&&!e.isMuted()){var t,n=d(this.conference.getMediaSessions());try{for(n.s();!(t=n.n()).done;){var r=t.value;this._setupSenderE2EEForTrack(r,e)}}catch(e){n.e(e)}finally{n.f()}}}}])&&p(t.prototype,n),r&&p(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(c.a)}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return R})),n.d(t,"a",(function(){return O}));var r=n(4),i=n(62),o=n.n(i),a=n(2),s=n(176),c=n(3),u=n(18),l=n(0),d=n(22),f=n.n(d),h=n(35),p=n(321),m=n(322),v=n(323),g=n(93),y=n(324);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var i=T(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=Object(r.getLogger)(e),A={packet2JSON:function(e,t){for(var n=0,r=Array.from(e.children);n<r.length;n++){for(var i=r[n],o={attributes:{},children:[],tagName:i.tagName},s=0,c=Array.from(i.attributes);s<c.length;s++){var u=c[s];o.attributes[u.name]=u.value}var l=a.Strophe.getText(i);l&&(o.value=a.Strophe.xmlunescape(l)),t.push(o),this.packet2JSON(i,o.children)}},json2packet:function(e,t){for(var n=0;n<e.length;n++){var r=e[n];r&&(t.c(r.tagName,r.attributes),r.value&&t.t(r.value),r.children&&this.json2packet(r.children,t),t.up())}}};function R(e,t){for(var n=[],r=0;r<e.length;r++)e[r].tagName===t&&n.push(e[r]);return n}var k=["owner","admin","member"],O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(d,e);var t,n,r,i=S(d);function d(e,t,n,r,o){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(c=i.call(this)).xmpp=r,c.connection=e,c.roomjid=a.Strophe.getBareJidFromJid(t),c.myroomjid=t,c.password=n,c.replaceParticipant=!1,D.info("Joined MUC as ".concat(c.myroomjid)),c.members={},c.presMap={},c.presHandlers={},c._removeConnListeners=[],c.joined=!1,c.inProgressEmitted=!1,c.role=null,c.focusMucJid=null,c.noBridgeAvailable=!1,c.options=o||{},c.moderator=new y.a(c.roomjid,c.xmpp,c.eventEmitter,{connection:c.xmpp.options,conference:c.options}),(void 0===c.options.enableLobby||c.options.enableLobby)&&(c.lobby=new v.a(w(c))),c.avModeration=new p.a(w(c)),c.breakoutRooms=new m.a(w(c)),c.initPresenceMap(o),c.lastPresences={},c.phoneNumber=null,c.phonePin=null,c.connectionTimes={},c.participantPropertyListener=null,c.locked=!1,c.transcriptionStatus=s.OFF,c}return t=d,(n=[{key:"initPresenceMap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.presMap.to=this.myroomjid,this.presMap.xns="http://jabber.org/protocol/muc",this.presMap.nodes=[],e.statsId&&this.presMap.nodes.push({tagName:"stats-id",value:e.statsId}),this.presenceUpdateTime=Date.now()}},{key:"join",value:function(e,t){var n=this;return this.password=e,this.replaceParticipant=t,new Promise((function(e){n.options.disableFocus&&D.info("Conference focus disabled for ".concat(n.roomjid)),(n.options.disableFocus?Promise.resolve():n.moderator.allocateConferenceFocus()).then((function(){n.sendPresence(!0),n._removeConnListeners.push(n.connection.addEventListener(g.a.Events.CONN_STATUS_CHANGED,n.onConnStatusChanged.bind(n))),e()}))}))}},{key:"sendPresence",value:function(e){var t=this.presMap.to;if(this.connection&&this.connection.connected&&t&&(this.joined||e)){var n=Object(a.$pres)({to:t});e&&(this.replaceParticipant&&n.c("flip_device").up(),n.c("x",{xmlns:this.presMap.xns}),this.password&&n.c("password").t(this.password).up(),this.options.billingId&&n.c("billingid").t(this.options.billingId).up(),n.up()),A.json2packet(this.presMap.nodes,n),this.presenceSyncTime=Date.now(),this.connection.send(n),e&&this.connection.flush()}}},{key:"doLeave",value:function(){D.log("do leave",this.myroomjid);var e=Object(a.$pres)({to:this.myroomjid,type:"unavailable"});this.presMap.length=0,!this.connection.isUsingWebSocket&&this.connection.flush(),this.connection.send(e),this.connection.flush()}},{key:"discoRoomInfo",value:function(){var e=this,t=Object(a.$iq)({type:"get",to:this.roomjid}).c("query",{xmlns:a.Strophe.NS.DISCO_INFO});this.connection.sendIQ(t,(function(t){var n=1===$(t).find('>query>feature[var="muc_passwordprotected"]').length;n!==e.locked&&(e.eventEmitter.emit(l.XMPPEvents.MUC_LOCK_CHANGED,n),e.locked=n);var r=$(t).find('>query>x[type="result"]>field[var="muc#roominfo_meetingId"]>value');r.length?e.setMeetingId(r.text()):D.warn("No meeting ID from backend");var i=1===$(t).find('>query>feature[var="muc_membersonly"]').length,o=$(t).find('>query>x[type="result"]>field[var="muc#roominfo_lobbyroom"]>value');e.lobby&&e.lobby.setLobbyRoomJid(o&&o.length?o.text():void 0);var a=$(t).find('>query>x[type="result"]>field[var="muc#roominfo_isbreakout"]>value'),s=Boolean(null==a?void 0:a.text());e.breakoutRooms._setIsBreakoutRoom(s);var c=$(t).find('>query>x[type="result"]>field[var="muc#roominfo_breakout_main_room"]>value');(null==c?void 0:c.length)&&e.breakoutRooms._setMainRoomJid(c.text()),i!==e.membersOnlyEnabled&&(e.membersOnlyEnabled=i,e.eventEmitter.emit(l.XMPPEvents.MUC_MEMBERS_ONLY_CHANGED,i))}),(function(e){f.a.callErrorHandler(e),D.error("Error getting room info: ",e)}))}},{key:"setMeetingId",value:function(e){this.meetingId!==e&&(this.meetingId&&D.warn("Meeting Id changed from:".concat(this.meetingId," to:").concat(e)),this.meetingId=e,this.eventEmitter.emit(l.XMPPEvents.MEETING_ID_SET,e))}},{key:"createNonAnonymousRoom",value:function(){var e=this;if(!this.options.disableDiscoInfo){var t=Object(a.$iq)({type:"get",to:this.roomjid}).c("query",{xmlns:"http://jabber.org/protocol/muc#owner"}).c("x",{xmlns:"jabber:x:data",type:"submit"});this.connection.sendIQ(t,(function(t){if(!$(t).find('>query>x[xmlns="jabber:x:data"]>field[var="muc#roomconfig_whois"]').length){var n="non-anonymous rooms not supported";return f.a.callErrorHandler(new Error(n)),void D.error(n)}var r=Object(a.$iq)({to:e.roomjid,type:"set"}).c("query",{xmlns:"http://jabber.org/protocol/muc#owner"});r.c("x",{xmlns:"jabber:x:data",type:"submit"}),r.c("field",{var:"FORM_TYPE"}).c("value").t("http://jabber.org/protocol/muc#roomconfig").up().up(),r.c("field",{var:"muc#roomconfig_whois"}).c("value").t("anyone").up().up(),e.connection.sendIQ(r)}),(function(e){f.a.callErrorHandler(e),D.error("Error getting room configuration form: ",e)}))}}},{key:"onConnStatusChanged",value:function(e){e===g.a.Status.CONNECTED&&this.sendPresence()}},{key:"onPresence",value:function(e){var t=this,n=e.getAttribute("from"),r={},i=e.getElementsByTagName("status")[0];i&&(r.status=i.textContent||"");var s=!1,c=!1,u=e.getElementsByTagNameNS("http://jabber.org/protocol/muc#user","x")[0],d=u&&u.getElementsByTagName("item")[0];r.isReplaceParticipant=e.getElementsByTagName("flip_device").length,r.affiliation=d&&d.getAttribute("affiliation"),r.role=d&&d.getAttribute("role");var f=d&&d.getAttribute("jid");r.jid=f,r.isFocus=f&&0===f.indexOf("".concat(this.moderator.getFocusUserJid(),"/")),r.isHiddenDomain=f&&f.indexOf("@")>0&&this.options.hiddenDomain===f.substring(f.indexOf("@")+1,f.indexOf("/"));var h=e.getElementsByTagName("nick");h[0]&&"transcriber"===h[0].innerHTML.toLowerCase()&&(r.isHiddenDomain=!0),this.eventEmitter.emit(l.XMPPEvents.PRESENCE_RECEIVED,{fromHiddenDomain:r.isHiddenDomain,presence:e});var p=e.querySelector("x");p&&p.remove();var m=[];A.packet2JSON(e,m),this.lastPresences[n]=m;for(var v=function(e){var n={},r=e.children.find((function(e){return"user"===e.tagName}));if(r){n.user={};var i=["id","name","avatar"];t.options.hiddenFromRecorderFeatureEnabled&&i.push("hidden-from-recorder");for(var o=function(){var e=s[a],t=r.children.find((function(t){return t.tagName===e}));t&&(n.user[e]=t.value)},a=0,s=i;a<s.length;a++)o()}var c=e.children.find((function(e){return"group"===e.tagName}));return c&&(n.group=c.value),n},g=0;g<m.length;g++){var y=m[g];switch(y.tagName){case"bot":var _=y.attributes;if(!_)break;var b=_.type;r.botType=b;break;case"nick":r.nick=y.value;break;case"userId":r.id=y.value;break;case"stats-id":r.statsID=y.value;break;case"identity":r.identity=v(y);break;case"features":r.features=this._extractFeatures(y);break;case"stat":var E=y.attributes;if(!E)break;"version"===E.name&&(r.version=E.value)}}if(!this.joined&&!this.inProgressEmitted){var S=this.connectionTimes["muc.join.started"]=window.performance.now();D.log("(TIME) MUC join started:\t",S),this.eventEmitter.emit(l.XMPPEvents.MUC_JOIN_IN_PROGRESS),this.inProgressEmitted=!0}if(n===this.myroomjid){var C="owner"===r.affiliation?r.role:"none";if(this.role!==C&&(this.role=C,this.eventEmitter.emit(l.XMPPEvents.LOCAL_ROLE_CHANGED,this.role)),!this.joined){this.joined=!0;var w=this.connectionTimes["muc.joined"]=window.performance.now();D.log("(TIME) MUC joined:\t",w),this.password&&(this.locked=!0),this.presenceUpdateTime>=this.presenceSyncTime&&this.sendPresence(),this.eventEmitter.emit(l.XMPPEvents.MUC_JOINED),!this.options.disableDiscoInfo&&this.discoRoomInfo()}}else if(void 0===f)D.info("Ignoring member with undefined JID");else if(void 0===this.members[n])this.members[n]=r,D.log("entered",n,r),s=void 0!==r.status,c=void 0!==r.version,r.isFocus?this._initFocus(n,r.features):(this.eventEmitter.emit(l.XMPPEvents.MUC_MEMBER_JOINED,n,r.nick,r.role,r.isHiddenDomain,r.statsID,r.status,r.identity,r.botType,r.jid,r.features,r.isReplaceParticipant),s=!1);else{var T=this.members[n];T.role!==r.role&&(T.role=r.role,this.eventEmitter.emit(l.XMPPEvents.MUC_ROLE_CHANGED,n,r.role)),T.affiliation!==r.affiliation&&(T.affiliation=r.affiliation),T.botType!==r.botType&&(T.botType=r.botType,this.eventEmitter.emit(l.XMPPEvents.MUC_MEMBER_BOT_TYPE_CHANGED,n,r.botType)),r.isFocus&&(T.isFocus=!0,this._initFocus(n,r.features)),r.displayName&&(T.displayName=r.displayName),T.status!==r.status&&(s=!0,T.status=r.status),T.version!==r.version&&(c=!0,T.version=r.version),o()(T.features,r.features)||(T.features=r.features,this.eventEmitter.emit(l.XMPPEvents.PARTICIPANT_FEATURES_CHANGED,n,r.features))}for(var R=0;R<m.length;R++){var k=m[R];switch(k.tagName){case"nick":if(!r.isFocus){var O=this.xmpp.options.displayJids?a.Strophe.getResourceFromJid(n):r.nick;this.eventEmitter.emit(l.XMPPEvents.DISPLAY_NAME_CHANGED,n,O)}break;case"bridgeNotAvailable":r.isFocus&&!this.noBridgeAvailable&&(this.noBridgeAvailable=!0,this.eventEmitter.emit(l.XMPPEvents.BRIDGE_DOWN));break;case"conference-properties":if(r.isFocus){for(var j={},P=0;P<k.children.length;P++){var I=k.children[P].attributes;I&&I.key&&(j[I.key]=I.value)}this.eventEmitter.emit(l.XMPPEvents.CONFERENCE_PROPERTIES_CHANGED,j),void 0===this.restartByTerminateSupported&&(this.restartByTerminateSupported="true"===j["support-terminate-restart"],D.info("Jicofo supports restart by terminate: ".concat(this.supportsRestartByTerminate())))}break;case"transcription-status":var N=k.attributes;if(!N)break;var M=N.status;M&&M!==this.transcriptionStatus&&(this.transcriptionStatus=M,this.eventEmitter.emit(l.XMPPEvents.TRANSCRIPTION_STATUS_CHANGED,M));break;case"call-control":var x=k.attributes;if(!x)break;this.phoneNumber=x.phone||null,this.phonePin=x.pin||null,this.eventEmitter.emit(l.XMPPEvents.PHONE_NUMBER_CHANGED);break;default:this.processNode(k,n)}}s&&this.eventEmitter.emit(l.XMPPEvents.PRESENCE_STATUS,n,r.status),c&&D.info("Received version for ".concat(f,": ").concat(r.version))}},{key:"_extractFeatures",value:function(e){for(var t=new Set,n=0;n<e.children.length;n++){var r=e.children[n].attributes;r&&r.var&&t.add(r.var)}return t}},{key:"_initFocus",value:function(e,t){this.focusMucJid=e,this.focusFeatures=t}},{key:"setParticipantPropertyListener",value:function(e){this.participantPropertyListener=e}},{key:"supportsRestartByTerminate",value:function(){return this.restartByTerminateSupported}},{key:"processNode",value:function(e,t){try{var n=this.presHandlers[e.tagName];e.tagName.startsWith("jitsi_participant_")&&(n=[this.participantPropertyListener]),n&&n.forEach((function(n){n(e,a.Strophe.getResourceFromJid(t),t)}))}catch(t){f.a.callErrorHandler(t),D.error("Error processing:".concat(e.tagName," node."),t)}}},{key:"sendMessage",value:function(e,t){var n=Object(a.$msg)({to:this.roomjid,type:"groupchat"});"body"===t?n.c(t,{},e):n.c(t,{xmlns:"http://jitsi.org/jitmeet"},e),this.connection.send(n),this.eventEmitter.emit(l.XMPPEvents.SENDING_CHAT_MESSAGE,e)}},{key:"sendPrivateMessage",value:function(e,t,n){var r=Object(a.$msg)({to:"".concat(this.roomjid,"/").concat(e),type:"chat"});"body"===n?r.c(n,t).up():r.c(n,{xmlns:"http://jitsi.org/jitmeet"},t).up(),this.connection.send(r),this.eventEmitter.emit(l.XMPPEvents.SENDING_PRIVATE_CHAT_MESSAGE,t)}},{key:"setSubject",value:function(e){var t=Object(a.$msg)({to:this.roomjid,type:"groupchat"});t.c("subject",e),this.connection.send(t)}},{key:"onParticipantLeft",value:function(e,t){delete this.lastPresences[e],t||(this.eventEmitter.emit(l.XMPPEvents.MUC_MEMBER_LEFT,e),this.moderator.onMucMemberLeft(e))}},{key:"onPresenceUnavailable",value:function(e,t){var n=this;if($(e).find('>ignore[xmlns="http://jitsi.org/jitmeet/"]').length)return!0;var r=$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>destroy');if(r.length){var i,o=$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>destroy>reason');return o.length&&(i=o.text()),this.eventEmitter.emit(l.XMPPEvents.MUC_DESTROYED,i,r.attr("jid")),this.connection.emuc.doLeave(this.roomjid),!0}var s=$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>status[code="110"]').length,c=$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>status[code="307"]').length,u=Object.keys(this.members),d=$(e).find("flip_device").length;if(c){var f,h,p=$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>item>actor');p.length&&(f=p.attr("nick"));var m=$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>item>reason');m.length&&(h=m.text()),this.eventEmitter.emit(l.XMPPEvents.KICKED,s,f,a.Strophe.getResourceFromJid(t),h,d)}s?(u.forEach((function(e){var t=n.members[e];delete n.members[e],n.onParticipantLeft(e,t.isFocus)})),this.connection.emuc.doLeave(this.roomjid),c||this.eventEmitter.emit(l.XMPPEvents.MUC_LEFT)):(delete this.members[t],this.onParticipantLeft(t,!1))}},{key:"onMessage",value:function(e,t){var n=e.getAttribute("type");if("error"===n){var r=$(e).find(">settings-error>text").text();if(r.length)return this.eventEmitter.emit(l.XMPPEvents.SETTINGS_ERROR_RECEIVED,r),!0;var i=$(e).find(">error>text").text();return this.eventEmitter.emit(l.XMPPEvents.CHAT_ERROR_RECEIVED,i),!0}var o=$(e).find(">body").text(),a=$(e).find(">subject");if(a.length){var s=a.text();(s||""===s)&&(this.eventEmitter.emit(l.XMPPEvents.SUBJECT_CHANGED,s),D.log("Subject is changed to ".concat(s)))}var c,u=$(e).find(">delay").attr("stamp");if(!u&&(u=$(e).find('>[xmlns="jabber:x:delay"]').attr("stamp"))){var d=u.match(/(\d{4})(\d{2})(\d{2}T\d{2}:\d{2}:\d{2})/);u="".concat(d[1],"-").concat(d[2],"-").concat(d[3],"Z")}if(t===this.roomjid)if($(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>status[code="104"]').length)this.discoRoomInfo();else if((c=$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>invite'))&&c.length){var f,h=$(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>password');h&&h.length&&(f=h.text()),this.eventEmitter.emit(l.XMPPEvents.INVITE_MESSAGE_RECEIVED,t,c.attr("from"),o,f)}var p=$(e).find(">json-message").text();if(p){var m=this.xmpp.tryParseJSONAndVerify(p);if(m&&void 0===u)return void this.eventEmitter.emit(l.XMPPEvents.JSON_MESSAGE_RECEIVED,t,m)}o&&("chat"===n?this.eventEmitter.emit(l.XMPPEvents.PRIVATE_MESSAGE_RECEIVED,t,o,this.myroomjid,u):"groupchat"===n&&this.eventEmitter.emit(l.XMPPEvents.MESSAGE_RECEIVED,t,o,this.myroomjid,u))}},{key:"onPresenceError",value:function(e,t){if($(e).find('>error[type="auth"]>not-authorized[xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"]').length)D.log("on password required",t),this.eventEmitter.emit(l.XMPPEvents.PASSWORD_REQUIRED);else if($(e).find('>error[type="cancel"]>not-allowed[xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"]').length)a.Strophe.getDomainFromJid(e.getAttribute("to"))===this.xmpp.options.hosts.anonymousdomain?this.eventEmitter.emit(l.XMPPEvents.ROOM_JOIN_ERROR):(D.warn("onPresError ",e),this.eventEmitter.emit(l.XMPPEvents.ROOM_CONNECT_NOT_ALLOWED_ERROR));else if($(e).find(">error>service-unavailable").length)D.warn("Maximum users limit for the room has been reached",e),this.eventEmitter.emit(l.XMPPEvents.ROOM_MAX_USERS_ERROR);else if($(e).find('>error[type="auth"]>registration-required[xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"]').length){var n,r=$(e).find('>error[type="auth"]>lobbyroom');if(r.length)n=r.text();else{var i=$(e).find(">lobbyroom");i.length&&(n=i.text())}this.eventEmitter.emit(l.XMPPEvents.ROOM_CONNECT_MEMBERS_ONLY_ERROR,n)}else D.warn("onPresError ",e),this.eventEmitter.emit(l.XMPPEvents.ROOM_CONNECT_ERROR)}},{key:"setAffiliation",value:function(e,t){var n=Object(a.$iq)({to:this.roomjid,type:"set"}).c("query",{xmlns:"http://jabber.org/protocol/muc#admin"}).c("item",{affiliation:t,jid:a.Strophe.getBareJidFromJid(e)}).c("reason").t("Your affiliation has been changed to '".concat(t,"'.")).up().up().up();this.connection.sendIQ(n,(function(n){return D.log("Set affiliation of participant with jid: ",e,"to",t,n)}),(function(e){return D.log("Set affiliation of participant error: ",e)}))}},{key:"kick",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"You have been kicked.",n=Object(a.$iq)({to:this.roomjid,type:"set"}).c("query",{xmlns:"http://jabber.org/protocol/muc#admin"}).c("item",{nick:a.Strophe.getResourceFromJid(e),role:"none"}).c("reason").t(t).up().up().up();this.connection.sendIQ(n,(function(t){return D.log("Kick participant with jid: ",e,t)}),(function(e){return D.log("Kick participant error: ",e)}))}},{key:"lockRoom",value:function(e,t,n,r){var i=this;this.connection.sendIQ(Object(a.$iq)({to:this.roomjid,type:"get"}).c("query",{xmlns:"http://jabber.org/protocol/muc#owner"}),(function(o){if($(o).find('>query>x[xmlns="jabber:x:data"]>field[var="muc#roomconfig_roomsecret"]').length){var s=Object(a.$iq)({to:i.roomjid,type:"set"}).c("query",{xmlns:"http://jabber.org/protocol/muc#owner"});s.c("x",{xmlns:"jabber:x:data",type:"submit"}),s.c("field",{var:"FORM_TYPE"}).c("value").t("http://jabber.org/protocol/muc#roomconfig").up().up(),s.c("field",{var:"muc#roomconfig_roomsecret"}).c("value").t(e).up().up(),s.c("field",{var:"muc#roomconfig_passwordprotectedroom"}).c("value").t(null===e||0===e.length?"0":"1").up().up(),i.membersOnlyEnabled&&s.c("field",{var:"muc#roomconfig_membersonly"}).c("value").t("true").up().up(),s.c("field",{var:"muc#roomconfig_whois"}).c("value").t("anyone").up().up(),i.connection.sendIQ(s,(function(){i.password=e,t()}),n)}else r()}),n)}},{key:"setMembersOnly",value:function(e,t,n){var r=this;e&&Object.values(this.members).filter((function(e){return!e.isFocus})).length&&Object.values(this.members).forEach((function(e){e.jid&&!k.includes(e.affiliation)&&r.xmpp.connection.sendIQ(Object(a.$iq)({to:r.roomjid,type:"set"}).c("query",{xmlns:"http://jabber.org/protocol/muc#admin"}).c("item",{affiliation:"member",jid:a.Strophe.getBareJidFromJid(e.jid)}).up().up())}));var i=n||function(){};this.xmpp.connection.sendIQ(Object(a.$iq)({to:this.roomjid,type:"get"}).c("query",{xmlns:"http://jabber.org/protocol/muc#owner"}),(function(n){if($(n).find('>query>x[xmlns="jabber:x:data"]>field[var="muc#roomconfig_membersonly"]').length){var o=Object(a.$iq)({to:r.roomjid,type:"set"}).c("query",{xmlns:"http://jabber.org/protocol/muc#owner"});o.c("x",{xmlns:"jabber:x:data",type:"submit"}),o.c("field",{var:"FORM_TYPE"}).c("value").t("http://jabber.org/protocol/muc#roomconfig").up().up(),o.c("field",{var:"muc#roomconfig_membersonly"}).c("value").t(e?"true":"false").up().up(),r.locked&&o.c("field",{var:"muc#roomconfig_passwordprotectedroom"}).c("value").t("1").up().up(),r.xmpp.connection.sendIQ(o,t,i)}else i(new Error("Setting members only room not supported!"))}),i)}},{key:"addToPresence",value:function(e,t){return this.addOrReplaceInPresence(e,t)}},{key:"addOrReplaceInPresence",value:function(e,t){t.tagName=e;var n=this.presMap.nodes.filter((function(t){return e===t.tagName}));return!(1===n.length&&o()(n[0],t)||(this.removeFromPresence(e),this.presMap.nodes.push(t),this.presenceUpdateTime=Date.now(),0))}},{key:"getFromPresence",value:function(e){return this.presMap.nodes.find((function(t){return e===t.tagName}))}},{key:"removeFromPresence",value:function(e){var t=this.presMap.nodes.filter((function(t){return e!==t.tagName}));this.presMap.nodes=t,this.presenceUpdateTime=Date.now()}},{key:"addPresenceListener",value:function(e,t){if("function"!=typeof t)throw new Error('"handler" is not a function');var n=this.presHandlers[e];n||(this.presHandlers[e]=n=[]),-1===n.indexOf(t)?n.push(t):D.warn("Trying to add the same handler more than once for: ".concat(e))}},{key:"removePresenceListener",value:function(e,t){var n=this.presHandlers[e],r=n?n.indexOf(t):-1;-1!==r?n.splice(r,1):D.warn("Handler for: ".concat(e," was not registered"))}},{key:"isFocus",value:function(e){var t=this.members[e];return t?t.isFocus:null}},{key:"isModerator",value:function(){return"moderator"===this.role}},{key:"getMemberRole",value:function(e){return this.members[e]?this.members[e].role:null}},{key:"addAudioInfoToPresence",value:function(e){return!(e&&!this.getFromPresence("audiomuted"))&&this.addOrReplaceInPresence("audiomuted",{value:e.toString()})}},{key:"addVideoInfoToPresence",value:function(e){return!(e&&!this.getFromPresence("videomuted"))&&this.addOrReplaceInPresence("videomuted",{value:e.toString()})}},{key:"getMediaPresenceInfo",value:function(e,t){var n=this.lastPresences["".concat(this.roomjid,"/").concat(e)];if(!n)return null;var r={muted:!0,videoType:t===c.a.VIDEO?u.VideoType.CAMERA:void 0},i=null;if(t===c.a.AUDIO)i=R(n,"audiomuted");else{if(t!==c.a.VIDEO)return D.error("Unsupported media type: ".concat(t)),null;i=R(n,"videomuted");var o=R(n,"jitsi_participant_codecType"),a=R(n,"videoType");a.length>0&&(r.videoType=a[0].value),o.length>0&&(r.codecType=o[0].value)}return i.length>0&&(r.muted="true"===i[0].value),r}},{key:"getLastPresence",value:function(e){return this.lastPresences["".concat(this.roomjid,"/").concat(e)]}},{key:"isSIPCallingSupported",value:function(){return!!this.moderator&&this.moderator.isSipGatewayEnabled()}},{key:"dial",value:function(e){return this.connection.rayo.dial(e,"fromnumber",a.Strophe.getBareJidFromJid(this.myroomjid),this.password,this.focusMucJid)}},{key:"hangup",value:function(){return this.connection.rayo.hangup()}},{key:"getLobby",value:function(){return this.lobby}},{key:"getAVModeration",value:function(){return this.avModeration}},{key:"getBreakoutRooms",value:function(){return this.breakoutRooms}},{key:"getPhoneNumber",value:function(){return this.phoneNumber}},{key:"getPhonePin",value:function(){return this.phonePin}},{key:"getMeetingId",value:function(){return this.meetingId}},{key:"muteParticipant",value:function(e,t,n){D.info("set mute",t,e);var r=Object(a.$iq)({to:this.focusMucJid,type:"set"}).c("mute",{xmlns:"http://jitsi.org/jitmeet/".concat(n),jid:e}).t(t.toString()).up();this.connection.sendIQ(r,(function(e){return D.log("set mute",e)}),(function(e){return D.log("set mute error",e)}))}},{key:"onMute",value:function(e){if(e.getAttribute("from")===this.focusMucJid){var t=$(e).find("mute");t.length&&"true"===t.text()?this.eventEmitter.emit(l.XMPPEvents.AUDIO_MUTED_BY_FOCUS,t.attr("actor")):D.warn("Ignoring a mute request which does not explicitly specify a positive mute command.")}else D.warn("Ignored mute from non focus peer")}},{key:"onMuteVideo",value:function(e){if(e.getAttribute("from")===this.focusMucJid){var t=$(e).find("mute");t.length&&"true"===t.text()?this.eventEmitter.emit(l.XMPPEvents.VIDEO_MUTED_BY_FOCUS,t.attr("actor")):D.warn("Ignoring a mute request which does not explicitly specify a positive mute command.")}else D.warn("Ignored mute from non focus peer")}},{key:"clean",value:function(){this._removeConnListeners.forEach((function(e){return e()})),this._removeConnListeners=[],this.joined=!1,this.inProgressEmitted=!1}},{key:"leave",value:function(){var e,t=this;this.avModeration.dispose(),this.breakoutRooms.dispose();var n=[];return(null===(e=this.lobby)||void 0===e?void 0:e.lobbyRoom)&&n.push(this.lobby.leave()),n.push(new Promise((function(e,n){var r=-1,i=function i(){var o=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.eventEmitter.removeListener(l.XMPPEvents.MUC_LEFT,i),clearTimeout(r),o?(t.connection.emuc.doLeave(t.roomjid),n(new Error("The timeout for the confirmation about leaving the room expired."))):e()};r=setTimeout((function(){return i(!0)}),5e3),t.clean(),t.eventEmitter.on(l.XMPPEvents.MUC_LEFT,i),t.doLeave()}))),Promise.allSettled(n)}}])&&b(t.prototype,n),r&&b(t,r),Object.defineProperty(t,"prototype",{writable:!1}),d}(h.a)}).call(this,"/index.js")},function(e,t,n){"use strict";var r;n.r(t),n.d(t,"JitsiTranscriptionStatus",(function(){return r})),n.d(t,"ON",(function(){return i})),n.d(t,"OFF",(function(){return o})),function(e){e.ON="on",e.OFF="off"}(r||(r={}));var i=r.ON,o=r.OFF},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(4),i=n(34),o=n.n(i),a=n(24),s=n(3),c=n(5),u=n(21);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var i=g(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=Object(r.getLogger)(e),_={track_mute:"onmute",track_unmute:"onunmute",track_ended:"onended"},b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(o,e);var t,n,r,i=m(o);function o(e,t,n,r,a,s){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(c=i.call(this)).addEventListener=c.addListener,c.removeEventListener=c.off=c.removeListener,c.containers=[],c.conference=e,c.audioLevel=-1,c.type=a,c.track=n,c.videoType=s,c.handlers=new Map,c.disposed=!1,c._streamInactiveHandler=r,c._setStream(t),c}return t=o,(n=[{key:"_addMediaStreamInactiveHandler",value:function(e){c.a.isFirefox()?this.track.onended=e:this.stream.oninactive=e}},{key:"_setHandler",value:function(e,t){if(_.hasOwnProperty(e)){if(t?this.handlers.set(e,t):this.handlers.delete(e),this.stream){var n,r=d(this.stream.getTracks());try{for(r.s();!(n=r.n()).done;)n.value[_[e]]=t}catch(e){r.e(e)}finally{r.f()}}}else y.error("Invalid handler type ".concat(e))}},{key:"_unregisterHandlers",value:function(){if(this.stream){var e,t=d(this.handlers.keys());try{for(t.s();!(e=t.n()).done;){var n,r=e.value,i=d(this.stream.getVideoTracks());try{for(i.s();!(n=i.n()).done;)n.value[_[r]]=void 0}catch(e){i.e(e)}finally{i.f()}}}catch(e){t.e(e)}finally{t.f()}this._streamInactiveHandler&&this._addMediaStreamInactiveHandler(void 0)}else y.warn("".concat(this,": unable to unregister handlers - no stream object"))}},{key:"_setStream",value:function(e){if(this.stream!==e&&(this.stream=e,this.stream)){var t,n=d(this.handlers.keys());try{for(n.s();!(t=n.n()).done;){var r=t.value;this._setHandler(r,this.handlers.get(r))}}catch(e){n.e(e)}finally{n.f()}this._streamInactiveHandler&&this._addMediaStreamInactiveHandler(this._streamInactiveHandler)}}},{key:"getVideoType",value:function(){return this.videoType}},{key:"getType",value:function(){return this.type}},{key:"isAudioTrack",value:function(){return this.getType()===s.a.AUDIO}},{key:"isWebRTCTrackMuted",value:function(){return this.track&&this.track.muted}},{key:"isVideoTrack",value:function(){return this.getType()===s.a.VIDEO}},{key:"isLocal",value:function(){throw new Error("Not implemented by subclass")}},{key:"isLocalAudioTrack",value:function(){return this.isAudioTrack()&&this.isLocal()}},{key:"getOriginalStream",value:function(){return this.stream}},{key:"getStreamId",value:function(){return this.stream?this.stream.id:null}},{key:"getTrack",value:function(){return this.track}},{key:"getTrackLabel",value:function(){return this.track.label}},{key:"getTrackId",value:function(){return this.track?this.track.id:null}},{key:"getUsageLabel",value:function(){return this.isAudioTrack()?"mic":this.videoType?this.videoType:"default"}},{key:"_maybeFireTrackAttached",value:function(e){this.conference&&e&&this.conference._onTrackAttach(this,e)}},{key:"attach",value:function(e){this.stream&&(this._onTrackAttach(e),u.a.attachMediaStream(e,this.stream)),this.containers.push(e),this._maybeFireTrackAttached(e),this._attachTTFMTracker(e)}},{key:"detach",value:function(e){if(e){for(var t=this.containers,n=t.length-1;n>=0;--n){var r=t[n];e||(this._onTrackDetach(r),u.a.attachMediaStream(r,null)),e&&r!==e||t.splice(n,1)}e&&(this._onTrackDetach(e),u.a.attachMediaStream(e,null))}}},{key:"_onTrackAttach",value:function(e){}},{key:"_onTrackDetach",value:function(e){}},{key:"_attachTTFMTracker",value:function(e){}},{key:"dispose",value:function(){return this.removeAllListeners(),this.disposed=!0,Promise.resolve()}},{key:"isScreenSharing",value:function(){}},{key:"getId",value:function(){return this.stream?u.a.getStreamID(this.stream):null}},{key:"isActive",value:function(){return void 0===this.stream.active||this.stream.active}},{key:"setAudioLevel",value:function(e,t){var n=e;c.a.supportsReceiverStats()&&void 0!==t&&this.isMuted()&&(n=0),this.audioLevel!==n?(this.audioLevel=n,this.emit(a.TRACK_AUDIO_LEVEL_CHANGED,n,t)):0===this.audioLevel&&0===n&&this.isLocal()&&!this.isWebRTCTrackMuted()&&this.emit(a.NO_AUDIO_INPUT,n)}},{key:"getMSID",value:function(){var e=this.getStreamId(),t=this.getTrackId();return e&&t?"".concat(e," ").concat(t):null}},{key:"setAudioOutput",value:function(e){var t=this;return u.a.isDeviceChangeAvailable("output")?this.isVideoTrack()?Promise.resolve():Promise.all(this.containers.map((function(t){return t.setSinkId(e).catch((function(e){throw y.warn("Failed to change audio output device on element. Default or previously set audio output device will be used.",t,e),e}))}))).then((function(){t.emit(a.TRACK_AUDIO_OUTPUT_CHANGED,e)})):Promise.reject(new Error("Audio output device change is not supported"))}}])&&h(t.prototype,n),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(o.a)}).call(this,"/index.js")},function(e,t){e.exports={2160:{width:3840,height:2160},"4k":{width:3840,height:2160},1080:{width:1920,height:1080},fullhd:{width:1920,height:1080},720:{width:1280,height:720},hd:{width:1280,height:720},540:{width:960,height:540},qhd:{width:960,height:540},480:{width:640,height:480},vga:{width:640,height:480},360:{width:640,height:360},240:{width:320,height:240},180:{width:320,height:180}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(34),i=n.n(r),o=n(23),a=n(180),s=n(40);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(c,e);var t,n,r,i=h(c);function c(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(r=i.call(this))._procNodeSampleRate=e,r._vadProcessor=t,r._localTrack=n,r._bufferResidue=new Float32Array([]),r._audioContext=Object(a.a)({sampleRate:t.getRequiredPCMFrequency()}),r._vadSampleSize=t.getSampleLength(),r._onAudioProcess=r._onAudioProcess.bind(m(r)),r._initializeAudioContext(),r}return t=c,r=[{key:"create",value:function(e,t,n){return o.a.obtainAudioAndVideoPermissions({devices:["audio"],micDeviceId:e}).then((function(r){if(!r[0])throw new Error("Failed to create jitsi local track for device id: ".concat(e));return new c(t,n,r[0])}))}}],(n=[{key:"_initializeAudioContext",value:function(){this._audioSource=this._audioContext.createMediaStreamSource(this._localTrack.stream),this._audioProcessingNode=this._audioContext.createScriptProcessor(this._procNodeSampleRate,1,1)}},{key:"_onAudioProcess",value:function(e){for(var t=e.inputBuffer.getChannelData(0),n=[].concat(u(this._bufferResidue),u(t)),r=Date.now(),i=0;i+this._vadSampleSize<n.length;i+=this._vadSampleSize){var o=n.slice(i,i+this._vadSampleSize),a=this._vadProcessor.calculateAudioFrameVAD(o.slice());this.emit(s.VAD_SCORE_PUBLISHED,{timestamp:r,score:a,pcmData:o,deviceId:this._localTrack.getDeviceId()})}this._bufferResidue=n.slice(i,n.length)}},{key:"_connectAudioGraph",value:function(){this._audioProcessingNode.onaudioprocess=this._onAudioProcess,this._audioSource.connect(this._audioProcessingNode),this._audioProcessingNode.connect(this._audioContext.destination)}},{key:"_disconnectAudioGraph",value:function(){this._audioProcessingNode.onaudioprocess=function(){},this._audioProcessingNode.disconnect(),this._audioSource.disconnect()}},{key:"_cleanupResources",value:function(){this._disconnectAudioGraph(),this._localTrack.stopStream()}},{key:"getDeviceId",value:function(){return this._localTrack.getDeviceId()}},{key:"getTrackLabel",value:function(){return this._localTrack.getDeviceLabel()}},{key:"start",value:function(){this._connectAudioGraph()}},{key:"stop",value:function(){this._disconnectAudioGraph(),this._bufferResidue=[]}},{key:"destroy",value:function(){this._destroyed||(this._cleanupResources(),this._destroyed=!0)}}])&&d(t.prototype,n),r&&d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(i.a)},function(e,t,n){"use strict";function r(e){var t=window.AudioContext||window.webkitAudioContext;if(t)return new t(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r;n.r(t),n.d(t,"E2ePingEvents",(function(){return r})),n.d(t,"E2E_RTT_CHANGED",(function(){return i})),function(e){e.E2E_RTT_CHANGED="e2eping.e2e_rtt_changed"}(r||(r={}));var i=r.E2E_RTT_CHANGED},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var r=n(4),i=n(127);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=Object(r.getLogger)(e),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(o,e);var t,n,r,i=c(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this))._audioContext=null,e._audioProcessingNode=null,e._audioSource=null,e._stream=null,e._sampleRate=44100,e._audioContext=new AudioContext,e._sampleRate=e._audioContext.sampleRate,d.log("Current sampleRate ".concat(e._sampleRate,".")),e}return t=o,(n=[{key:"_initializeAudioContext",value:function(e,t){var n=this;return"function"!=typeof t?Promise.reject("a callback function is required."):this._getAudioStream(e).then((function(e){n._stream=e,n._audioSource=n._audioContext.createMediaStreamSource(e),n._audioProcessingNode=n._audioContext.createScriptProcessor(4096,1,1),n._audioProcessingNode.onaudioprocess=t,d.debug("AudioContext is set up.")})).catch((function(e){return d.error("Error calling getUserMedia(): ".concat(e)),Promise.reject(e)}))}},{key:"_connectAudioGraph",value:function(){this._audioSource.connect(this._audioProcessingNode),this._audioProcessingNode.connect(this._audioContext.destination)}},{key:"_disconnectAudioGraph",value:function(){this._audioProcessingNode.onaudioprocess=void 0,this._audioProcessingNode.disconnect(),this._audioSource.disconnect()}},{key:"_replaceMic",value:function(e){var t=this;return this._audioContext&&this._audioProcessingNode?this._getAudioStream(e).then((function(e){var n=t._audioContext.createMediaStreamSource(e);t._audioSource.disconnect(),n.connect(t._audioProcessingNode),t._stream=e,t._audioSource=n})):Promise.resolve()}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(i.a)}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return S}));var r=n(4),i=n(2),o=n(3),a=n(49),s=n(89),c=n(18),u=n(0),l=n(12),d=n(175);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=Object(r.getLogger)(e),S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(m,e);var t,n,r,f=y(m);function m(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(e=f.call(this)).ssrcOwners=new Map,e.chatRoom=null,e._localSourceState={},e._remoteSourceState={},e._sourceNames=new Map,e}return t=m,(n=[{key:"_addLocalSourceInfoToPresence",value:function(){return!!this.chatRoom&&this.chatRoom.addOrReplaceInPresence("SourceInfo",{value:JSON.stringify(this._localSourceState)})}},{key:"_doesEndpointSendNewSourceInfo",value:function(e){var t,n=null===(t=this.chatRoom)||void 0===t?void 0:t.getLastPresence(e);return Boolean(n&&n.find((function(e){return"SourceInfo"===e.tagName})))}},{key:"setChatRoom",value:function(e){var t=this,n=this.chatRoom;this.chatRoom=e,n&&(n.removePresenceListener("audiomuted",this._audioMuteHandler),n.removePresenceListener("videomuted",this._videoMuteHandler),n.removePresenceListener("videoType",this._videoTypeHandler),l.a.isSourceNameSignalingEnabled()&&(this._sourceInfoHandler&&n.removePresenceListener("SourceInfo",this._sourceInfoHandler),this._memberLeftHandler&&n.removeEventListener(u.XMPPEvents.MUC_MEMBER_LEFT,this._memberLeftHandler))),e&&(l.a.isSourceNameSignalingEnabled()?(this._bindChatRoomEventHandlers(e),this._addLocalSourceInfoToPresence()):(this._audioMuteHandler=function(e,n){t.eventEmitter.emit(a.a,n,o.a.AUDIO,"true"===e.value)},e.addPresenceListener("audiomuted",this._audioMuteHandler),this._videoMuteHandler=function(e,n){t.eventEmitter.emit(a.a,n,o.a.VIDEO,"true"===e.value)},e.addPresenceListener("videomuted",this._videoMuteHandler),this._videoTypeHandler=function(e,n){t.eventEmitter.emit(a.b,n,e.value)},e.addPresenceListener("videoType",this._videoTypeHandler)))}},{key:"_bindChatRoomEventHandlers",value:function(e){var t=this;this._audioMuteHandler=function(e,n){var r,i;t._doesEndpointSendNewSourceInfo(n)||(r=n,i="true"===e.value,t.eventEmitter.emit(a.a,r,o.a.AUDIO,i))},e.addPresenceListener("audiomuted",this._audioMuteHandler),this._videoMuteHandler=function(e,n){var r,i;t._doesEndpointSendNewSourceInfo(n)||(r=n,i="true"===e.value,t.eventEmitter.emit(a.a,r,o.a.VIDEO,i))},e.addPresenceListener("videomuted",this._videoMuteHandler),this._videoTypeHandler=function(e,n){var r,i;t._doesEndpointSendNewSourceInfo(n)||(r=n,i=e.value,t.eventEmitter.emit(a.b,r,i))},l.a.isMultiStreamSupportEnabled()||e.addPresenceListener("videoType",this._videoTypeHandler),this._sourceInfoHandler=function(e,n){for(var r,i=n,u=e.value,l=JSON.parse(u),d=t._doesEndpointSendNewSourceInfo(i),f=t._remoteSourceState[i]||(t._remoteSourceState[i]={}),h=0,p=Object.keys(l);h<p.length;h++){var m=p[h],v=Object(s.b)(m),g=Boolean(l[m].muted),y=f[m]||(f[m]={sourceName:m});y.muted!==g&&(y.muted=g,d&&!t._localSourceState[m]&&t.eventEmitter.emit(a.c,m,g));var _=v===o.a.VIDEO?null!==(r=l[m].videoType)&&void 0!==r?r:c.VideoType.CAMERA:void 0;y.videoType!==_&&(y.videoType=_,d&&!t._localSourceState[m]&&t.eventEmitter.emit(a.d,m,_))}for(var b=Object.keys(l),E=0,S=Object.keys(f);E<S.length;E++){var C=S[E];-1===b.indexOf(C)&&delete f[C]}},e.addPresenceListener("SourceInfo",this._sourceInfoHandler),this._memberLeftHandler=function(e){var n=i.Strophe.getResourceFromJid(e);if(delete t._remoteSourceState[n],l.a.isSourceNameSignalingEnabled()){var r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=p(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(t.ssrcOwners.entries());try{for(o.s();!(r=o.n()).done;){var a=h(r.value,2),s=a[0];a[1]===n&&delete t._sourceNames[s]}}catch(e){o.e(e)}finally{o.f()}}},e.addEventListener(u.XMPPEvents.MUC_MEMBER_LEFT,this._memberLeftHandler)}},{key:"_findEndpointSourceInfoForMediaType",value:function(e,t){var n=this._remoteSourceState[e];if(!n)return null;for(var r=0,i=Object.values(n);r<i.length;r++){var o=i[r];if(Object(s.b)(o.sourceName)===t)return o}return null}},{key:"getPeerMediaInfo",value:function(e,t,n){var r=this,i=function(){if(r.chatRoom)return r.chatRoom.getMediaPresenceInfo(e,t);E.error("Requested peer media info, before room was set")},a=this.chatRoom.getLastPresence(e);if(!a)throw new Error("getPeerMediaInfo - no presence stored for: ".concat(e));if(l.a.isSourceNameSignalingEnabled()){if(!this._doesEndpointSendNewSourceInfo(e))return i();if(n)return this.getPeerSourceInfo(e,n);var s={},c=this._findEndpointSourceInfoForMediaType(e,t);if(t===o.a.AUDIO)s.muted=!c||c.muted;else{if(t!==o.a.VIDEO)throw new Error("Unsupported media type: ".concat(t));s.muted=!c||c.muted,s.videoType=c?c.videoType:void 0;var u=Object(d.b)(a,"jitsi_participant_codecType");u.length>0&&(s.codecType=u[0].value)}return s}return i()}},{key:"getPeerSourceInfo",value:function(e,t){var n,r={muted:!0,videoType:c.VideoType.CAMERA};return this._remoteSourceState[e]?null!==(n=this._remoteSourceState[e][t])&&void 0!==n?n:r:void 0}},{key:"getSSRCOwner",value:function(e){return this.ssrcOwners.get(e)}},{key:"setSSRCOwner",value:function(e,t){if("number"!=typeof e)throw new TypeError("SSRC(".concat(e,") must be a number"));var n=this.ssrcOwners.get(e);n&&n!==t&&E.error("SSRC owner re-assigned from ".concat(n," to ").concat(t)),this.ssrcOwners.set(e,t)}},{key:"setTrackMuteStatus",value:function(e,t){return this._localSourceState[e]||(this._localSourceState[e]={}),this._localSourceState[e].muted=t,!!this.chatRoom&&this._addLocalSourceInfoToPresence()}},{key:"setTrackVideoType",value:function(e,t){return this._localSourceState[e]||(this._localSourceState[e]={}),this._localSourceState[e].videoType!==t&&(this._localSourceState[e].videoType=t===c.VideoType.CAMERA?void 0:t,this._addLocalSourceInfoToPresence())}},{key:"getTrackSourceName",value:function(e){return this._sourceNames.get(e)}},{key:"setTrackSourceName",value:function(e,t){if("number"!=typeof e)throw new TypeError("SSRC(".concat(e,") must be a number"));var n=this._sourceNames.get(e);n&&n!==t&&E.error("SSRC(".concat(e,") sourceName re-assigned from ").concat(n," to ").concat(t)),this._sourceNames.set(e,t)}}])&&v(t.prototype,n),r&&v(t,r),Object.defineProperty(t,"prototype",{writable:!1}),m}(s.a)}).call(this,"/index.js")},function(e,t,n){"use strict";var r=n(286);n.d(t,"a",(function(){return r.a}))},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userId=t,this.setDisplayName(n),this._isLocalStats=r||!1,this.setDominantSpeaker(!1),this.totalDominantSpeakerTime=0,this._dominantSpeakerStart=0,this._hasLeft=!1,this._faceExpressions={happy:0,neutral:0,surprised:0,angry:0,fearful:0,disgusted:0,sad:0}}var t,r,i;return t=e,(r=[{key:"getUserId",value:function(){return this._userId}},{key:"getDisplayName",value:function(){return this.displayName}},{key:"setDisplayName",value:function(e){this.displayName=e}},{key:"isLocalStats",value:function(){return this._isLocalStats}},{key:"isDominantSpeaker",value:function(){return this._dominantSpeakerStart>0}},{key:"setDominantSpeaker",value:function(e){if(!this.isDominantSpeaker()&&e)this._dominantSpeakerStart=Date.now();else if(this.isDominantSpeaker()&&!e){var t=Date.now()-this._dominantSpeakerStart;this.totalDominantSpeakerTime+=t,this._dominantSpeakerStart=0}}},{key:"getTotalDominantSpeakerTime",value:function(){var e=this.totalDominantSpeakerTime;return this.isDominantSpeaker()&&(e+=Date.now()-this._dominantSpeakerStart),e}},{key:"hasLeft",value:function(){return this._hasLeft}},{key:"markAsHasLeft",value:function(){this._hasLeft=!0,this.setDominantSpeaker(!1)}},{key:"getFaceExpressions",value:function(){return this._faceExpressions}},{key:"setFaceExpressions",value:function(e){this._faceExpressions=e}},{key:"addFaceExpression",value:function(e,t){this._faceExpressions[e]+=t}}])&&n(t.prototype,r),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=r},function(e,t,n){"use strict";var r=n(34),i=n.n(r),o=n(120),a=n(23),s=n(5),c=n(8),u=n(3),l=n(9);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventEmitter=new i.a,this._permissions={},a.a.addListener(l.default.DEVICE_LIST_CHANGED,(function(e){return t._eventEmitter.emit(o.DEVICE_LIST_CHANGED,e)})),a.a.addListener(l.default.DEVICE_LIST_AVAILABLE,(function(e){return t._logOutputDevice(t.getAudioOutputDevice(),e)})),a.a.addListener(l.default.PERMISSIONS_CHANGED,(function(e){return t._handlePermissionsChange(e)})),this._permissionsApiSupported=new Promise((function(e){if(navigator.permissions){var n=t,r=[];r.push(navigator.permissions.query({name:"camera"}).then((function(e){return t._handlePermissionsChange(d({},u.a.VIDEO,t._parsePermissionState(e))),e.onchange=function(){try{n._handlePermissionsChange(d({},u.a.VIDEO,n._parsePermissionState(this)))}catch(e){}},!0})).catch((function(){return!1}))),r.push(navigator.permissions.query({name:"microphone"}).then((function(e){return t._handlePermissionsChange(d({},u.a.AUDIO,t._parsePermissionState(e))),e.onchange=function(){try{n._handlePermissionsChange(d({},u.a.AUDIO,n._parsePermissionState(this)))}catch(e){}},!0})).catch((function(){return!1}))),Promise.all(r).then((function(t){return e(t.every((function(e){return e})))}))}else e(!1)}))}var t,n,r;return t=e,(n=[{key:"_parsePermissionState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state||e.status;if("string"!=typeof t)throw new TypeError;return"granted"===t}},{key:"_handlePermissionsChange",value:function(e){var t=this;[u.a.AUDIO,u.a.VIDEO].some((function(n){return n in e&&e[n]!==t._permissions[n]}))&&(this._permissions=Object.assign(Object.assign({},this._permissions),e),this._eventEmitter.emit(o.PERMISSIONS_CHANGED,this._permissions),(this._permissions[u.a.AUDIO]||this._permissions[u.a.VIDEO])&&this.enumerateDevices((function(){})))}},{key:"_logOutputDevice",value:function(e,t){var n=t.find((function(t){return"audiooutput"===t.kind&&t.deviceId===e}));n&&c.a.sendActiveDeviceListEvent(a.a.getEventDataForActiveDevice(n))}},{key:"enumerateDevices",value:function(e){a.a.enumerateDevices(e)}},{key:"isDeviceListAvailable",value:function(){return a.a.isDeviceListAvailable()}},{key:"isDeviceChangeAvailable",value:function(e){return a.a.isDeviceChangeAvailable(e)}},{key:"isDevicePermissionGranted",value:function(e){var t=this;return new Promise((function(n){e in t._permissions?n(t._permissions[e]):t._permissionsApiSupported.then((function(r){if(r){var i=[];switch(e){case u.a.VIDEO:i.push(navigator.permissions.query({name:"camera"}));break;case u.a.AUDIO:i.push(navigator.permissions.query({name:"microphone"}));break;default:i.push(navigator.permissions.query({name:"camera"})),i.push(navigator.permissions.query({name:"microphone"}))}Promise.all(i).then((function(e){return n(e.every((function(e){try{return t._parsePermissionState(e)}catch(e){return!1}})))}),(function(){return n(!1)}))}else n(!1)}))}))}},{key:"isMultipleAudioInputSupported",value:function(){return!(s.a.isFirefox()||s.a.isIosBrowser())}},{key:"getAudioOutputDevice",value:function(){return a.a.getAudioOutputDevice()}},{key:"setAudioOutputDevice",value:function(e){return a.a.getCurrentlyAvailableMediaDevices().length>0&&this._logOutputDevice(e,a.a.getCurrentlyAvailableMediaDevices()),a.a.setAudioOutputDevice(e)}},{key:"addEventListener",value:function(e,t){this._eventEmitter.addListener(e,t)}},{key:"removeEventListener",value:function(e,t){this._eventEmitter.removeListener(e,t)}},{key:"emitEvent",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this._eventEmitter).emit.apply(t,[e].concat(r))}}])&&f(t.prototype,n),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=new h},function(e,t,n){var r=n(31),i=n(27).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(27),i=n(73),o=n(95),a=n(231),s=n(42).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){var r=n(136)("keys"),i=n(104);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(27).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(31),i=n(25),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(74)(Function.call,n(67).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t){e.exports="\t\n\v\f\r \u2028\u2029\ufeff"},function(e,t,n){var r=n(31),i=n(192).set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},function(e,t,n){"use strict";var r=n(76),i=n(82);e.exports=function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){"use strict";var r=n(95),i=n(6),o=n(59),a=n(58),s=n(125),c=n(199),u=n(122),l=n(68),d=n(36)("iterator"),f=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,p,m,v,g){c(n,t,p);var y,_,b,E=function(e){if(!f&&e in T)return T[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},S=t+" Iterator",C="values"==m,w=!1,T=e.prototype,D=T[d]||T["@@iterator"]||m&&T[m],A=D||E(m),R=m?C?E("entries"):A:void 0,k="Array"==t&&T.entries||D;if(k&&(b=l(k.call(new e)))!==Object.prototype&&b.next&&(u(b,S,!0),r||"function"==typeof b[d]||a(b,d,h)),C&&D&&"values"!==D.name&&(w=!0,A=function(){return D.call(this)}),r&&!g||!f&&!w&&T[d]||a(T,d,A),s[t]=A,s[S]=h,m)if(y={values:C?A:E("values"),keys:v?A:E("keys"),entries:R},g)for(_ in y)_ in T||o(T,_,y[_]);else i(i.P+i.F*(f||w),t,y);return y}},function(e,t,n){"use strict";var r=n(107),i=n(103),o=n(122),a={};n(58)(a,n(36)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(155),i=n(82);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){var r=n(36)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){var r=n(125),i=n(36)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){"use strict";var r=n(42),i=n(103);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(123),i=n(36)("iterator"),o=n(125);e.exports=n(73).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(472);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){"use strict";var r=n(44),i=n(106),o=n(38);e.exports=function(e){for(var t=r(this),n=o(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,u=void 0===c?n:i(c,n);u>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var r=n(97),i=n(248),o=n(125),a=n(66);e.exports=n(198)(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t,n){"use strict";var r,i,o=n(139),a=RegExp.prototype.exec,s=String.prototype.replace,c=a,u=(r=/a/,i=/b*/g,a.call(r,"a"),a.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),l=void 0!==/()??/.exec("")[1];(u||l)&&(c=function(e){var t,n,r,i,c=this;return l&&(n=new RegExp("^"+c.source+"$(?!\\s)",o.call(c))),u&&(t=c.lastIndex),r=a.call(c,e),u&&r&&(c.lastIndex=c.global?r.index+r[0].length:t),l&&r&&r.length>1&&s.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),e.exports=c},function(e,t,n){"use strict";var r=n(154)(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r,i,o,a=n(74),s=n(238),c=n(191),u=n(187),l=n(27),d=l.process,f=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,m=l.Dispatch,v=0,g={},y=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},_=function(e){y.call(e.data)};f&&h||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++v]=function(){s("function"==typeof e?e:Function(e),t)},r(v),v},h=function(e){delete g[e]},"process"==n(75)(d)?r=function(e){d.nextTick(a(y,e,1))}:m&&m.now?r=function(e){m.now(a(y,e,1))}:p?(o=(i=new p).port2,i.port1.onmessage=_,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",_,!1)):r="onreadystatechange"in u("script")?function(e){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),y.call(e)}}:function(e){setTimeout(a(y,e,1),0)}),e.exports={set:f,clear:h}},function(e,t,n){var r=n(27),i=n(210).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,c="process"==n(75)(a);e.exports=function(){var e,t,n,u=function(){var r,i;for(c&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(c)n=function(){a.nextTick(u)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);n=function(){l.then(u)}}else n=function(){i.call(r,u)};else{var d=!0,f=document.createTextNode("");new o(u).observe(f,{characterData:!0}),n=function(){f.data=d=!d}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){"use strict";var r=n(50);function i(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},function(e,t,n){"use strict";var r=n(27),i=n(39),o=n(95),a=n(161),s=n(58),c=n(112),u=n(29),l=n(110),d=n(76),f=n(38),h=n(258),p=n(108).f,m=n(42).f,v=n(206),g=n(122),y=r.ArrayBuffer,_=r.DataView,b=r.Math,E=r.RangeError,S=r.Infinity,C=y,w=b.abs,T=b.pow,D=b.floor,A=b.log,R=b.LN2,k=i?"_b":"buffer",O=i?"_l":"byteLength",j=i?"_o":"byteOffset";function P(e,t,n){var r,i,o,a=new Array(n),s=8*n-t-1,c=(1<<s)-1,u=c>>1,l=23===t?T(2,-24)-T(2,-77):0,d=0,f=e<0||0===e&&1/e<0?1:0;for((e=w(e))!=e||e===S?(i=e!=e?1:0,r=c):(r=D(A(e)/R),e*(o=T(2,-r))<1&&(r--,o*=2),(e+=r+u>=1?l/o:l*T(2,1-u))*o>=2&&(r++,o/=2),r+u>=c?(i=0,r=c):r+u>=1?(i=(e*o-1)*T(2,t),r+=u):(i=e*T(2,u-1)*T(2,t),r=0));t>=8;a[d++]=255&i,i/=256,t-=8);for(r=r<<t|i,s+=t;s>0;a[d++]=255&r,r/=256,s-=8);return a[--d]|=128*f,a}function I(e,t,n){var r,i=8*n-t-1,o=(1<<i)-1,a=o>>1,s=i-7,c=n-1,u=e[c--],l=127&u;for(u>>=7;s>0;l=256*l+e[c],c--,s-=8);for(r=l&(1<<-s)-1,l>>=-s,s+=t;s>0;r=256*r+e[c],c--,s-=8);if(0===l)l=1-a;else{if(l===o)return r?NaN:u?-S:S;r+=T(2,t),l-=a}return(u?-1:1)*r*T(2,l-t)}function N(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function M(e){return[255&e]}function x(e){return[255&e,e>>8&255]}function L(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function F(e){return P(e,52,8)}function B(e){return P(e,23,4)}function U(e,t,n){m(e.prototype,t,{get:function(){return this[n]}})}function V(e,t,n,r){var i=h(+n);if(i+t>e[O])throw E("Wrong index!");var o=e[k]._b,a=i+e[j],s=o.slice(a,a+t);return r?s:s.reverse()}function H(e,t,n,r,i,o){var a=h(+n);if(a+t>e[O])throw E("Wrong index!");for(var s=e[k]._b,c=a+e[j],u=r(+i),l=0;l<t;l++)s[c+l]=u[o?l:t-l-1]}if(a.ABV){if(!u((function(){y(1)}))||!u((function(){new y(-1)}))||u((function(){return new y,new y(1.5),new y(NaN),"ArrayBuffer"!=y.name}))){for(var G,J=(y=function(e){return l(this,y),new C(h(e))}).prototype=C.prototype,z=p(C),W=0;z.length>W;)(G=z[W++])in y||s(y,G,C[G]);o||(J.constructor=y)}var K=new _(new y(2)),q=_.prototype.setInt8;K.setInt8(0,2147483648),K.setInt8(1,2147483649),!K.getInt8(0)&&K.getInt8(1)||c(_.prototype,{setInt8:function(e,t){q.call(this,e,t<<24>>24)},setUint8:function(e,t){q.call(this,e,t<<24>>24)}},!0)}else y=function(e){l(this,y,"ArrayBuffer");var t=h(e);this._b=v.call(new Array(t),0),this[O]=t},_=function(e,t,n){l(this,_,"DataView"),l(e,y,"DataView");var r=e[O],i=d(t);if(i<0||i>r)throw E("Wrong offset!");if(i+(n=void 0===n?r-i:f(n))>r)throw E("Wrong length!");this[k]=e,this[j]=i,this[O]=n},i&&(U(y,"byteLength","_l"),U(_,"buffer","_b"),U(_,"byteLength","_l"),U(_,"byteOffset","_o")),c(_.prototype,{getInt8:function(e){return V(this,1,e)[0]<<24>>24},getUint8:function(e){return V(this,1,e)[0]},getInt16:function(e){var t=V(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=V(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return N(V(this,4,e,arguments[1]))},getUint32:function(e){return N(V(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return I(V(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return I(V(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){H(this,1,e,M,t)},setUint8:function(e,t){H(this,1,e,M,t)},setInt16:function(e,t){H(this,2,e,x,t,arguments[2])},setUint16:function(e,t){H(this,2,e,x,t,arguments[2])},setInt32:function(e,t){H(this,4,e,L,t,arguments[2])},setUint32:function(e,t){H(this,4,e,L,t,arguments[2])},setFloat32:function(e,t){H(this,4,e,B,t,arguments[2])},setFloat64:function(e,t){H(this,8,e,F,t,arguments[2])}});g(y,"ArrayBuffer"),g(_,"DataView"),s(_.prototype,a.VIEW,!0),t.ArrayBuffer=y,t.DataView=_},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(114),o=n(588),a=n(589),s=n(590),c=n(592),u=n(593),l=n(594),d=n(269),f="undefined"!=typeof document&&document,h=/[&<]/;function p(e,t,n){for(var r=e.firstChild;r;)t.bI_(m(r,n)),r=r.nextSibling}function m(e,t){switch(e.nodeType){case 1:return s.cd_(e,p,t);case 3:return new c(e.nodeValue,t);case 8:return new o(e.nodeValue,t);case 11:var n=new a;return p(e,n,t),n}}function v(e,t,n){if(!h.test(e))return new c(e,n);for(var r=new a,i=d(e);i;)r.bI_(m(i,n)),i=i.nextSibling;return r}var g=i.prototype;g.t=function(e){var t,n=r(e);return"string"!==n&&(null==e?e="":"object"===n&&e.toHTML&&(t=v(e.toHTML(),document))),this.bI_(t||new c(e.toString())),this.ca_()},g.c=function(e){return this.bI_(new o(e)),this.ca_()},g.bM_=function(){return this.bI_(new a)},t.br_=o,t.bq_=a,t.bp_=s,t.bs_=c,t.bt_=u,t.bu_=l,t.cd_=m,t.bv_=v,t.bw_=f},function(e,t,n){var r=n(216).aZ_,i={nodeType:12,get firstChild(){var e=this.startNode.nextSibling;return e===this.endNode?void 0:e},get lastChild(){var e=this.endNode.previousSibling;return e===this.startNode?void 0:e},get parentNode(){var e=this.startNode.parentNode;return e===this.detachedContainer?void 0:e},get namespaceURI(){return this.startNode.parentNode.namespaceURI},get nextSibling(){return this.endNode.nextSibling},get nodes(){for(var e=[],t=this.startNode;t!==this.endNode;)e.push(t),t=t.nextSibling;return e.push(t),e},insertBefore:function(e,t){var n=null==t?this.endNode:t;return r(e,n,this.startNode.parentNode)},insertInto:function(e,t){return this.nodes.forEach((function(n){r(n,t,e)}),this),this},remove:function(){this.nodes.forEach((function(e){this.detachedContainer.appendChild(e)}),this)}};function o(e,t,n){var o=Object.create(i),a=e&&e.ownerDocument===e.parentNode;o.startNode=a?document.createComment(""):document.createTextNode(""),o.endNode=a?document.createComment(""):document.createTextNode(""),o.startNode.fragment=o,o.endNode.fragment=o;var s=o.detachedContainer=document.createDocumentFragment();return n=n||e&&e.parentNode||s,r(o.startNode,e,n),r(o.endNode,t,n),o}t.au_=o,t.cl_=function(e,t){var n=o(e,null,t);return n.ck_=function(i){n.ck_=null,r(n.endNode,i,t||e.parentNode)},n}},function(e,t){function n(e,t,n){return e.insertInto?e.insertInto(n,t):n.insertBefore(e,t&&t.startNode||t)}t.aZ_=n,t.b__=function(e,t,r){return n(e,t&&t.nextSibling,r)},t.b_=function(e){var t=e.nextSibling,n=t&&t.fragment;return n?t===n.startNode?n:null:t},t.a_=function(e){var t=e.firstChild;return t&&t.fragment||t},t.ba_=function(e){e.remove?e.remove():e.parentNode.removeChild(e)}},function(e,t,n){"use strict";var r=n(277).NOOP,i=n(85)._H_,o=n(166)._I_,a=n(141),s=n(273),c={};function u(e,t,n){this._J_=n,this.n_=e,this.id=t,this._K_=void 0,this._L_=!1,this._M_=!1,this._N_=0,this._O_=0,this._P_=null}u.prototype={_Q_:function(e){return(this._P_||(this._P_=new s))._Q_(e)},elId:function(e){var t=this.id;return null==e?t:("string"!=typeof e&&(e=String(e)),0===e.indexOf("#")&&(t="#"+t,e=e.substring(1)),t+"-"+e)},_R_:function(){return this.id+"-c"+this._O_++},d:function(e,t,n,r){return o(e),i(this,t,n,r)},get e_(){return this.n_.e_}},u.prototype.nk=u.prototype._Q_,u._S_=function(e,t,n,i){var o=e[0],s=t[e[1]],u=e[2]||null,l=e[3]||c,d=l.s,f=l.w||c,h=l.f,p=4&h,m=2&h?r:l.r,v=s&&i._T_(s,o,p);if(v.___=!0,p?(v.widgetConfig=f,v._U_=m):m&&((u||(u={})).renderBody=m),p||!(1&h)||8&h){if(d){var g=l.u;g&&g.forEach((function(e){d[e]=void 0})),v.state=d}!p&&f&&a(v,f)}else v.onCreate&&v.onCreate(u,{global:n}),v.onInput&&(u=v.onInput(u,{global:n})||u);v.W_=u,l.b&&(v.T_=l.b);var y=l.p,_=l.e;return _&&v._A_(_,y),v.Y_=n,{id:o,n_:v,_K_:l.d,_N_:l.f||0}},e.exports=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=!0;try{void 0===window.localStorage&&(console.log("local storage is not supported"),r=!1)}catch(e){console.log(e)}t.getL=function(e){if(r){var t=window.localStorage.getItem(e);try{t=JSON.parse(t)}catch(e){}return t}},t.setL=function(e,t){if(r)try{var n=JSON.stringify(t);window.localStorage.setItem(e,n)}catch(e){console.log("failed to set",e)}},t.removeL=function(e){if(r)try{window.localStorage.removeItem(e)}catch(e){}}},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/mic.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("1b82a0")()}).e("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"},null,null,0).e("path",{d:"M0 0h24v24H0z",fill:"none"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/mic_off.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("042109")()}).e("path",{d:"M0 0h24v24H0zm0 0h24v24H0z",fill:"none"},null,null,0).e("path",{d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3L3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){n(645);var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Tooltip/index.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(142),c=n(54),u=n(78),l={class:"cb__tooltipContainer__item"};r._=o((function(e,t,n,r,i){if(t.be("div",{style:c(r.input.style),class:u(["cb__tooltipContainer",Array.isArray(r.input.text)&&"cb__tooltipContainer--list"])},"0",r,null,1),Array.isArray(r.input.text)){var o=0;s(r.input.text,(function(e,n){var i="["+o+++"]";t.e("label",l,"1"+i,r,1).t(e.name,r)}))}else t.e("label",null,"2",r,1).t(r.input.text,r);t.ee()}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t){e.exports={IDENTITY_UPDATED:"authentication.identity_updated"}},function(e,t,n){(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,c="object"==(void 0===t?"undefined":n(t))&&t&&t.Object===Object&&t,u="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,l=c||u||Function("return this")(),d=Object.prototype.toString,f=Math.max,h=Math.min,p=function(){return l.Date.now()};function m(e){var t=n(e);return!!e&&("object"==t||"function"==t)}function v(e){return"symbol"==n(e)||function(e){return!!e&&"object"==n(e)}(e)&&"[object Symbol]"==d.call(e)}function g(e){if("number"==typeof e)return e;if(v(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=o.test(e);return n||a.test(e)?s(e.slice(2),n?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,o,a,s,c,u=0,l=!1,d=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,o=i;return r=i=void 0,u=t,a=e.apply(o,n)}function _(e){return u=e,s=setTimeout(E,t),l?y(e):a}function b(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-u>=o}function E(){var e=p();if(b(e))return S(e);s=setTimeout(E,function(e){var n=t-(e-c);return d?h(n,o-(e-u)):n}(e))}function S(e){return s=void 0,v&&r?y(e):(r=i=void 0,a)}function C(){var e=p(),n=b(e);if(r=arguments,i=this,c=e,n){if(void 0===s)return _(c);if(d)return s=setTimeout(E,t),y(c)}return void 0===s&&(s=setTimeout(E,t)),a}return t=g(t)||0,m(n)&&(l=!!n.leading,o=(d="maxWait"in n)?f(g(n.maxWait)||0,t):o,v="trailing"in n?!!n.trailing:v),C.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=c=i=s=void 0},C.flush=function(){return void 0===s?a:S(p())},C}}).call(this,n(53))},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};function i(e){return r(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new TextEncoder,t.abrupt("return",crypto.subtle.deriveBits({name:"HKDF",salt:n.encode("JFrameRatchetKey"),hash:"SHA-256",info:new ArrayBuffer},e,256));case 2:case"end":return t.stop()}}),t)})))}function o(e){return r(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",crypto.subtle.importKey("raw",e,"HKDF",!1,["deriveBits","deriveKey"]));case 1:case"end":return t.stop()}}),t)})))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return g}));var r=n(2),i=n(0),o=n(35);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=["category","type","lang","name"],p=["category","type","lang"];function m(e,t){var n=0;return p.some((function(r){return 0!==(n=e[r]>t[r]?1:e[r]<t[r]&&-1)})),n}function v(e){var t=new Set,n=new Set;return $(e).find(">query>feature").each((function(e,n){return t.add(n.getAttribute("var"))})),$(e).find(">query>identity").each((function(e,t){return n.add({type:t.getAttribute("type"),name:t.getAttribute("name"),category:t.getAttribute("category")})})),{features:t,identities:n}}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(d,e);var t,n,o,a=l(d);function d(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"http://jitsi.org/jitsimeet";if(s(this,d),(e=a.call(this)).node=n,e.disco=t.disco,!e.disco)throw new Error("Missing strophe-plugins (disco plugin is required)!");e.version="",e.rooms=new Set,e.externalFeatures=new Set;var o=t.emuc;return o.addListener(i.XMPPEvents.EMUC_ROOM_ADDED,(function(t){return e._addChatRoom(t)})),o.addListener(i.XMPPEvents.EMUC_ROOM_REMOVED,(function(t){return e._removeChatRoom(t)})),Object.keys(o.rooms).forEach((function(t){e._addChatRoom(o.rooms[t])})),r.Strophe.addNamespace("CAPS","http://jabber.org/protocol/caps"),e.disco.addFeature(r.Strophe.NS.CAPS),e}return t=d,(n=[{key:"addFeature",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.disco.addFeature(e),this._generateVersion(),r&&!this.externalFeatures.has(e)&&(this.externalFeatures.add(e),this.rooms.forEach((function(e){return t._updateRoomWithExternalFeatures(e)}))),n&&this.submit()}},{key:"removeFeature",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.disco.removeFeature(e),this._generateVersion(),r&&this.externalFeatures.has(e)&&(this.externalFeatures.delete(e),this.rooms.forEach((function(e){return t._updateRoomWithExternalFeatures(e)}))),n&&this.submit()}},{key:"submit",value:function(){this.rooms.forEach((function(e){return e.sendPresence()}))}},{key:"_updateRoomWithExternalFeatures",value:function(e){if(0===this.externalFeatures.size)e.removeFromPresence("features");else{var t=[];this.externalFeatures.forEach((function(e){t.push({tagName:"feature",attributes:{var:e}})})),e.addOrReplaceInPresence("features",{children:t})}}},{key:"getFeaturesAndIdentities",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return this._getDiscoInfo(e,t,n)}},{key:"_getDiscoInfo",value:function(e,t,n){var r=this;return new Promise((function(i,o){return r.disco.info(e,t,(function(e){i(v(e))}),o,n)}))}},{key:"_addChatRoom",value:function(e){this.rooms.add(e),this._fixChatRoomPresenceMap(e),this._updateRoomWithExternalFeatures(e)}},{key:"_removeChatRoom",value:function(e){this.rooms.delete(e)}},{key:"_fixChatRoomPresenceMap",value:function(e){e.addOrReplaceInPresence("c",{attributes:{xmlns:r.Strophe.NS.CAPS,hash:"sha-1",node:this.node,ver:this.version}})}},{key:"_notifyVersionChanged",value:function(){var e=this;this.rooms.forEach((function(t){return e._fixChatRoomPresenceMap(t)}))}},{key:"_generateVersion",value:function(){var e,t,n,i;this.version=(e=this.disco._identities,t=this.disco._features,n=e.sort(m).reduce((function(e,t){return"".concat(h.reduce((function(e,n,r){return e+(0===r?"":"/")+(t[n]?t[n]:"")}),""),"<")}),""),i=t.sort().reduce((function(e,t){return"".concat(e+t,"<")}),""),Object(r.b64_sha1)(n+i)),this._notifyVersionChanged()}}])&&c(t.prototype,n),o&&c(t,o),Object.defineProperty(t,"prototype",{writable:!1}),d}(o.a)},function(e,t,n){var r=n(619),i=n(620);t.write=i,t.parse=r.parse,t.parseParams=r.parseParams,t.parseFmtpConfig=r.parseFmtpConfig,t.parsePayloads=r.parsePayloads,t.parseRemoteCandidates=r.parseRemoteCandidates,t.parseImageAttributes=r.parseImageAttributes,t.parseSimulcastStreamList=r.parseSimulcastStreamList},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return y}));var r=n(4),i=n(34),o=n(1),a=n(40),s=n(179);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=Object(r.getLogger)(e),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(c,e);var t,n,r,i=h(c);function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this))._createVADProcessor=t,n._vadEmitter=null,n._isVADEmitterRunning=!1,n._detectionServices=[],n._vadInitTracker=Promise.resolve(),n._processVADScore=n._processVADScore.bind(m(n)),e.on(o.TRACK_ADDED,n._trackAdded.bind(m(n))),e.on(o.TRACK_REMOVED,n._trackRemoved.bind(m(n))),e.on(o.TRACK_MUTE_CHANGED,n._trackMuteChanged.bind(m(n))),n}return t=c,(n=[{key:"addVADDetectionService",value:function(e){var t=this;this._detectionServices.push(e),e.on(a.DETECTOR_STATE_CHANGE,(function(){!t._detectionServices.filter((function(e){return!0===e.isActive()})).length&&t._isVADEmitterRunning?t._stopVADEmitter():t._isVADEmitterRunning||t._startVADEmitter()}))}},{key:"_startVADEmitter",value:function(){this._vadEmitter&&(this._vadEmitter.on(a.VAD_SCORE_PUBLISHED,this._processVADScore),this._vadEmitter.start(),this._isVADEmitterRunning=!0)}},{key:"_stopVADEmitter",value:function(){this._vadEmitter&&(this._vadEmitter.removeListener(a.VAD_SCORE_PUBLISHED,this._processVADScore),this._vadEmitter.stop()),this._isVADEmitterRunning=!1}},{key:"_processVADScore",value:function(e){var t,n=u(this._detectionServices);try{for(n.s();!(t=n.n()).done;)t.value.processVADScore(e)}catch(e){n.e(e)}finally{n.f()}}},{key:"_changeDetectorsMuteState",value:function(e){var t,n=u(this._detectionServices);try{for(n.s();!(t=n.n()).done;)t.value.changeMuteState(e)}catch(e){n.e(e)}finally{n.f()}}},{key:"_trackAdded",value:function(e){var t=this;e.isLocalAudioTrack()&&(this._vadInitTracker=this._vadInitTracker.then((function(){return t._createVADProcessor()})).then((function(t){return s.a.create(e.getDeviceId(),4096,t)})).then((function(n){g.debug("Created VAD emitter for track: ",e.getTrackLabel()),t._vadEmitter=n,t._changeDetectorsMuteState(e.isMuted())})).catch((function(e){g.warn("Failed to start VADAudioAnalyser",e)})))}},{key:"_trackMuteChanged",value:function(e){var t=this;e.isLocalAudioTrack()&&(this._vadInitTracker=this._vadInitTracker.then((function(){t._changeDetectorsMuteState(e.isMuted())})))}},{key:"_trackRemoved",value:function(e){var t=this;e.isLocalAudioTrack()&&(this._vadInitTracker=this._vadInitTracker.then((function(){g.debug("Removing track from VAD detection - ",e.getTrackLabel()),t._vadEmitter&&(t._stopVADEmitter(),t._vadEmitter.destroy(),t._vadEmitter=null);var n,r=u(t._detectionServices);try{for(r.s();!(n=r.n()).done;)n.value.reset()}catch(e){r.e(e)}finally{r.f()}})))}}])&&d(t.prototype,n),r&&d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(i.EventEmitter)}).call(this,"/index.js")},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2),i=n(134);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this._connection=t.connection,this._mode=t.mode,this._setSessionID(t.sessionID),this.setStatus(t.status)}var t,n,s;return t=e,(n=[{key:"getError",value:function(){return this._error}},{key:"getID",value:function(){return this._sessionID}},{key:"getInitiator",value:function(){return this._initiator}},{key:"getLiveStreamViewURL",value:function(){return this._liveStreamViewURL}},{key:"getStatus",value:function(){return this._status}},{key:"getTerminator",value:function(){return this._terminator}},{key:"getMode",value:function(){return this._mode}},{key:"setError",value:function(e){this._error=e}},{key:"setLiveStreamViewURL",value:function(e){this._liveStreamViewURL=e}},{key:"setStatus",value:function(e){this._status=e}},{key:"setInitiator",value:function(e){this._initiator=e}},{key:"setTerminator",value:function(e){this._terminator=e}},{key:"start",value:function(e){var t=this,n=e.appData,r=e.broadcastId,o=e.focusMucJid,a=e.streamId;return new Promise((function(e,s){t._connection.sendIQ(t._createIQ({action:"start",appData:n,focusMucJid:o,broadcastId:r,streamId:a}),(function(n){t.setStatus("pending"),t._setSessionID(i.a.getSessionIdFromIq(n)),e()}),(function(e){t._setErrorFromIq(e),s(e)}))}))}},{key:"stop",value:function(e){var t=this,n=e.focusMucJid;return new Promise((function(e,r){t._connection.sendIQ(t._createIQ({action:"stop",focusMucJid:n}),e,r)}))}},{key:"_createIQ",value:function(e){var t=e.action,n=e.appData,i=e.broadcastId,o=e.focusMucJid,a=e.streamId;try{n=JSON.parse(n)||{}}catch(e){n={}}return n.base_url=n.base_url?n.base_url:"".concat(window.location.origin).concat(window.location.pathname),n.token=this._connection.emuc.xmpp.token,Object(r.$iq)({to:o,type:"set"}).c("jibri",{xmlns:"http://jitsi.org/protocol/jibri",action:t,app_data:JSON.stringify(n),recording_mode:this._mode,streamid:a,you_tube_broadcast_id:i}).up()}},{key:"_setErrorFromIq",value:function(e){var t=e.getElementsByTagName("error")[0];this.setError(t.children[0].tagName)}},{key:"_setSessionID",value:function(e){this._sessionID=e}}])&&a(t.prototype,n),s&&a(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),i=new Uint8Array(16);function o(){if(!r)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}for(var a=[],s=0;s<256;++s)a.push((s+256).toString(16).substr(1));var c=function(e,t){var n=t||0,r=a;return(r[e[n+0]]+r[e[n+1]]+r[e[n+2]]+r[e[n+3]]+"-"+r[e[n+4]]+r[e[n+5]]+"-"+r[e[n+6]]+r[e[n+7]]+"-"+r[e[n+8]]+r[e[n+9]]+"-"+r[e[n+10]]+r[e[n+11]]+r[e[n+12]]+r[e[n+13]]+r[e[n+14]]+r[e[n+15]]).toLowerCase()};t.a=function(e,t,n){"string"==typeof e&&(t="binary"===e?new Uint8Array(16):null,e=null);var r=(e=e||{}).random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){for(var i=n||0,a=0;a<16;++a)t[i+a]=r[a];return t}return c(r)}},function(e,t,n){e.exports=!n(39)&&!n(29)((function(){return 7!=Object.defineProperty(n(187)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){t.f=n(36)},function(e,t,n){var r=n(65),i=n(66),o=n(151)(!1),a=n(189)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),c=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~o(u,n)||u.push(n));return u}},function(e,t,n){var r=n(42),i=n(25),o=n(105);e.exports=n(39)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,c=0;s>c;)r.f(e,n=a[c++],t[n]);return e}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(66),o=n(108).f,a={}.toString,s="object"==("undefined"==typeof window?"undefined":r(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==a.call(e)?function(e){try{return o(e)}catch(e){return s.slice()}}(e):o(i(e))}},function(e,t,n){"use strict";var r=n(39),i=n(105),o=n(152),a=n(138),s=n(44),c=n(137),u=Object.assign;e.exports=!u||n(29)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r}))?function(e,t){for(var n=s(e),u=arguments.length,l=1,d=o.f,f=a.f;u>l;)for(var h,p=c(arguments[l++]),m=d?i(p).concat(d(p)):i(p),v=m.length,g=0;v>g;)h=m[g++],r&&!f.call(p,h)||(n[h]=p[h]);return n}:u},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(50),i=n(31),o=n(238),a=[].slice,s={},c=function(e,t,n){if(!(t in s)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),s=function r(){var i=n.concat(a.call(arguments));return this instanceof r?c(t,i.length,i):o(t,i,e)};return i(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(27).parseInt,i=n(124).trim,o=n(193),a=/^[-+]?0[xX]/;e.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(e,t){var n=i(String(e),3);return r(n,t>>>0||(a.test(n)?16:10))}:r},function(e,t,n){var r=n(27).parseFloat,i=n(124).trim;e.exports=1/r(n(193)+"-0")!=-1/0?function(e){var t=i(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},function(e,t,n){var r=n(75);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,n){var r=n(31),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){var r=n(196),i=Math.pow,o=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),c=i(2,-126);e.exports=Math.fround||function(e){var t,n,i=Math.abs(e),u=r(e);return i<c?u*(i/c/a+1/o-1/o)*c*a:(n=(t=(1+a/o)*i)-(t-i))>s||n!=n?u*(1/0):u*n}},function(e,t,n){var r=n(25);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(50),i=n(44),o=n(137),a=n(38);e.exports=function(e,t,n,s,c){r(t);var u=i(e),l=o(u),d=a(u.length),f=c?d-1:0,h=c?-1:1;if(n<2)for(;;){if(f in l){s=l[f],f+=h;break}if(f+=h,c?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;c?f>=0:d>f;f+=h)f in l&&(s=t(s,l[f],f,u));return s}},function(e,t,n){"use strict";var r=n(44),i=n(106),o=n(38);e.exports=[].copyWithin||function(e,t){var n=r(this),a=o(n.length),s=i(e,a),c=i(t,a),u=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===u?a:i(u,a))-c,a-s),d=1;for(c<s&&s<c+l&&(d=-1,c+=l-1,s+=l-1);l-- >0;)c in n?n[s]=n[c]:delete n[s],s+=d,c+=d;return n}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(208);n(6)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(e,t,n){n(39)&&"g"!=/./g.flags&&n(42).f(RegExp.prototype,"flags",{configurable:!0,get:n(139)})},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(25),i=n(31),o=n(212);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(254),i=n(113);e.exports=n(160)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=r.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(42).f,i=n(107),o=n(112),a=n(74),s=n(110),c=n(111),u=n(198),l=n(248),d=n(109),f=n(39),h=n(96).fastKey,p=n(113),m=f?"_s":"size",v=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,u){var l=e((function(e,r){s(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,null!=r&&c(r,n,e[u],e)}));return o(l.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=p(this,t),r=v(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[m]--}return!!r},forEach:function(e){p(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!v(p(this,t),e)}}),f&&r(l.prototype,"size",{get:function(){return p(this,t)[m]}}),l},def:function(e,t,n){var r,i,o=v(e,t);return o?o.v=n:(e._l=o={i:i=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[m]++,"F"!==i&&(e._i[i]=o)),e},getEntry:v,setStrong:function(e,t,n){u(e,t,(function(e,n){this._t=p(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?l(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,l(1))}),n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){"use strict";var r=n(254),i=n(113);e.exports=n(160)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r,i=n(27),o=n(84)(0),a=n(59),s=n(96),c=n(235),u=n(257),l=n(31),d=n(113),f=n(113),h=!i.ActiveXObject&&"ActiveXObject"in i,p=s.getWeak,m=Object.isExtensible,v=u.ufstore,g=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(e){if(l(e)){var t=p(e);return!0===t?v(d(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return u.def(d(this,"WeakMap"),e,t)}},_=e.exports=n(160)("WeakMap",g,y,u,!0,!0);f&&h&&(c((r=u.getConstructor(g,"WeakMap")).prototype,y),s.NEED=!0,o(["delete","has","get","set"],(function(e){var t=_.prototype,n=t[e];a(t,e,(function(t,i){if(l(t)&&!m(t)){this._f||(this._f=new r);var o=this._f[e](t,i);return"set"==e?this:o}return n.call(this,t,i)}))})))},function(e,t,n){"use strict";var r=n(112),i=n(96).getWeak,o=n(25),a=n(31),s=n(110),c=n(111),u=n(84),l=n(65),d=n(113),f=u(5),h=u(6),p=0,m=function(e){return e._l||(e._l=new v)},v=function(){this.a=[]},g=function(e,t){return f(e.a,(function(e){return e[0]===t}))};v.prototype={get:function(e){var t=g(this,e);if(t)return t[1]},has:function(e){return!!g(this,e)},set:function(e,t){var n=g(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=h(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var u=e((function(e,r){s(e,u,t,"_i"),e._t=t,e._i=p++,e._l=void 0,null!=r&&c(r,n,e[o],e)}));return r(u.prototype,{delete:function(e){if(!a(e))return!1;var n=i(e);return!0===n?m(d(this,t)).delete(e):n&&l(n,this._i)&&delete n[this._i]},has:function(e){if(!a(e))return!1;var n=i(e);return!0===n?m(d(this,t)).has(e):n&&l(n,this._i)}}),u},def:function(e,t,n){var r=i(o(t),!0);return!0===r?m(e).set(t,n):r[e._i]=n,e},ufstore:m}},function(e,t,n){var r=n(76),i=n(38);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length!");return n}},function(e,t,n){var r=n(108),i=n(152),o=n(25),a=n(27).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){"use strict";var r=n(153),i=n(31),o=n(38),a=n(74),s=n(36)("isConcatSpreadable");e.exports=function e(t,n,c,u,l,d,f,h){for(var p,m,v=l,g=0,y=!!f&&a(f,h,3);g<u;){if(g in c){if(p=y?y(c[g],g,n):c[g],m=!1,i(p)&&(m=void 0!==(m=p[s])?!!m:r(p)),m&&d>0)v=e(t,n,p,o(p.length),v,d-1)-1;else{if(v>=9007199254740991)throw TypeError();t[v]=p}v++}g++}return v}},function(e,t,n){var r=n(38),i=n(195),o=n(82);e.exports=function(e,t,n,a){var s=String(o(e)),c=s.length,u=void 0===n?" ":String(n),l=r(t);if(l<=c||""==u)return s;var d=l-c,f=i.call(u,Math.ceil(d/u.length));return f.length>d&&(f=f.slice(0,d)),a?f+s:s+f}},function(e,t,n){var r=n(39),i=n(105),o=n(66),a=n(138).f;e.exports=function(e){return function(t){for(var n,s=o(t),c=i(s),u=c.length,l=0,d=[];u>l;)n=c[l++],r&&!a.call(s,n)||d.push(e?[n,s[n]]:s[n]);return d}}},function(e,t,n){var r=n(123),i=n(264);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){var r=n(111);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t){e.exports=Math.scale||function(e,t,n,r,i){return 0===arguments.length||e!=e||t!=t||n!=n||r!=r||i!=i?NaN:e===1/0||e===-1/0?e:(e-t)*(i-r)/(n-t)+r}},function(e,t,n){"use strict";e.exports=n},function(e,t){var n=Array.prototype.slice;function r(e){return"function"==typeof e}function i(e){if(!r(e))throw TypeError("Invalid listener")}function o(e,t,r){switch(r.length){case 1:t.call(e);break;case 2:t.call(e,r[1]);break;case 3:t.call(e,r[1],r[2]);break;default:t.apply(e,n.call(r,1))}}function a(e,t,n,o){i(n);var a=e.$e||(e.$e={}),s=a[t];return s?r(s)?a[t]=o?[n,s]:[s,n]:o?s.unshift(n):s.push(n):a[t]=n,e}function s(){this.$e=this.$e||{}}s.EventEmitter=s,s.prototype={$e:null,emit:function(e){var t=arguments,i=this.$e;if(i){var a=i&&i[e];if(!a){if("error"===e){var s=t[1];if(!(s instanceof Error)){var c=s;(s=new Error("Error: "+c)).context=c}throw s}return!1}if(r(a))o(this,a,t);else for(var u=0,l=(a=n.call(a)).length;u<l;u++){var d=a[u];o(this,d,t)}return!0}},on:function(e,t){return a(this,e,t,!1)},prependListener:function(e,t){return a(this,e,t,!0)},once:function(e,t){return i(t),this.on(e,(function n(){this.removeListener(e,n),t&&(t.apply(this,arguments),t=null)})),this},removeListener:function(e,t){i(t);var n,o=this.$e;if(o&&(n=o[e]))if(r(n))n===t&&delete o[e];else for(var a=n.length-1;a>=0;a--)n[a]===t&&n.splice(a,1);return this},removeAllListeners:function(e){var t=this.$e;t&&delete t[e]},listenerCount:function(e){var t=this.$e,n=t&&t[e];return n?r(n)?1:n.length:0}},e.exports=s},function(e,t){e.exports=function(e,t){Object.getOwnPropertyNames(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r)}))}},function(e,t){var n=function(e){var t=document.createElement("template");return(n=t.content?function(e){return t.innerHTML=e,t.content}:function(e){return t.innerHTML=e,t})(e)};e.exports=function(e){return n(e).firstChild}},function(e,t,n){var r=n(271);function i(e){this.out=this.E_=e,this.h_=void 0}e.exports=i;var o=i.prototype={getComponent:function(){return this.getComponents()[0]},getComponents:function(e){if(void 0===this.h_)throw Error("Not added to DOM");var t=function(e){var t=e.h_;if(!t)throw Error("No component");return t}(this),n=[];return t.forEach((function(t){var r=t.n_;e&&!e(r)||n.push(r)})),n},afterInsert:function(e){var t=this.E_.h_;return this.h_=t?t.F_(e):null,this},getNode:function(e){return this.E_.G_(e)},getOutput:function(){return this.E_.H_()},toString:function(){return this.E_.toString()},document:"undefined"!=typeof document&&document};Object.defineProperty(o,"html",{get:function(){return this.toString()}}),Object.defineProperty(o,"context",{get:function(){return this.E_}}),r(o,(function(e,t){return e.getNode(t.ownerDocument)}),(function(e,t){var n="function"==typeof ShadowRoot&&t instanceof ShadowRoot;return e.afterInsert(n?t:t.ownerDocument)}))},function(e,t,n){var r=n(141),i=n(85),o=i.aW_,a=i.J_,s=n(216),c=s.aZ_,u=s.b__,l=s.ba_;function d(e){if("string"==typeof e){var t=e;if(!(e=document.getElementById(t)))throw Error("Not found: "+t)}return e}function f(e){a(e),o(e)}e.exports=function(e,t,n){r(e,{appendTo:function(e){e=d(e);var r=t(this,e);return c(r,null,e),n(this,e)},prependTo:function(e){e=d(e);var r=t(this,e);return c(r,e.firstChild||null,e),n(this,e)},replace:function(e){e=d(e);var r=t(this,e);return f(e),c(r,e,e.parentNode),l(e),n(this,e)},replaceChildrenOf:function(e){e=d(e);for(var r=t(this,e),i=e.firstChild;i;){var o=i.nextSibling;f(i),i=o}return e.innerHTML="",c(r,null,e),n(this,e)},insertBefore:function(e){e=d(e);var r=t(this,e);return c(r,e,e.parentNode),n(this,e)},insertAfter:function(e){e=d(e);var r=t(this,e);return u(r,e,e.parentNode),n(this,e)}})}},function(e,t,n){"use strict";var r=n(595),i=n(273),o=n(85),a=o.I_,s=o.J_,c=o.av_,u=o.aX_,l=n(214).bp_,d=l.cd_,f=l.ce_,h=n(166),p=n(215),m=n(216),v=n(126),g=v.al_,y=v.K_,_=v.aj_,b=v.ak_,E=m.aZ_,S=m.b__,C=m.b_,w=m.a_,T=m.ba_,D=p.au_,A=p.cl_;function R(e){return"@"!==e[0]}function k(e,t){return e.bY_===t.bY_}function O(e,t){return e.toLowerCase()===t.toLowerCase()}e.exports=function(e,t,n,o){var l,p=!1,m=Object.create(null);function v(e,t,r,i,a,s){var c=e.bO_(n,i.namespaceURI);E(c,r,i),1!==e.bR_&&12!==e.bR_||(t&&(g.set(c,t),(R(t)?s:a).q_[t]=c),"textarea"!==e.bY_&&x(c,e,s),function(e,t){1===e.nodeType&&h.ag_(e,t)}(c,o))}function j(e,t,n,r,i,o,a){var s=r.Q_=E(D(),t,n);y.set(s,r),i&&o&&(i=u(i,a.id),c(o.q_,i,s,r.id),g.set(s,i)),P(r,e)}function P(e,t){x(e.Q_,t,e)}o&&(l=o.k_,p=l.l_);var I=[];function N(e,t,n){1===e.nodeType||12===e.nodeType?(I.push(e),b.set(e,n||!0)):(s(e),T(e))}function M(e){e.destroy()}function x(e,t,n){var r,o,s,f,h,I,F,B,U,V=w(e),H=t.a_;e:for(;H;){h=H.b_,s=H.bR_,r=H.bS_,V&&10===V.nodeType&&(V=C(V));var G,J=H.aU_||n;if(2!==s)if(r){B=void 0,o=void 0;var z=r;if(R(r)?(J!==n&&(r+=":"+J.id),G=n):G=J,r=(m[G.id]||(m[G.id]=new i))._Q_(r),V&&(o=g.get(V),B=_.get(V),f=C(V)),o===r)H.t_||(k(H,B)?L(V,B,H,n):(N(V,0,J),v(H,r,V,e,J,n)));else if(void 0===(I=G.q_[r])||I===V){if(!0===p&&V){if(1===V.nodeType&&(H.t_||O(V.nodeName,H.bY_||""))){(B=d(V)).bY_=H.bY_,g.set(V,r),G.q_[r]=V,H.t_?_.set(V,B):L(V,B,H,n),H=h,V=f;continue}if(12===H.bR_&&8===V.nodeType&&V.nodeValue=="F#"+z){for(var W,K=V.nextSibling,q=0;;){if(8===K.nodeType)if("F/"===(W=K.nodeValue)){if(0===q)break;q--}else 0===W.indexOf("F#")&&q++;K=K.nextSibling}var $=D(V,K.nextSibling,e);g.set($,r),_.set($,H),G.q_[r]=$,T(V),T(K),H.t_||x($,H,n),H=h,V=$.nextSibling;continue}}v(H,r,V,e,J,n),f=V}else void 0!==b.get(I)&&b.set(I,void 0),H.t_?(E(I,V,e),f=V):k(B=_.get(I),H)?(f===I?h&&h.bS_===o?(f=V,E(I,V,e)):(f=C(f),V&&N(V,0,J)):(S(I,V,e),V&&N(V,0,J)),L(I,B,H,n)):(v(H,r,V,e,J,n),N(I,0,J));H=h,V=f}else{for(;V;)if(f=C(V),U=y.get(V))V=f,l._Z_[U.id]||M(U);else{var X=V.nodeType,Y=void 0;if(X===s)if(1===X){if(void 0===(B=_.get(V))){if(!0!==p){V=f;continue}O((B=d(V)).bY_,H.bY_)&&(B.bY_=H.bY_)}else(o=B.bS_)&&(Y=!1);!0===(Y=!1!==Y&&!0===k(B,H))&&L(V,B,H,n)}else 3!==X&&8!==X||(Y=!0,V.nodeValue!==H.bQ_&&(V.nodeValue=H.bQ_));if(!0===Y){H=h,V=f;continue e}N(V,0,J),V=f}v(H,r,V,e,J,n),H=h,V=f}else{var Q=H.n_;if(void 0===(F=a[Q.id]))if(!0===p){var Z=A(V,e);Q.Q_=Z,y.set(Z,Q),J&&r&&(r=u(r,n.id),c(J.q_,r,Z,Q.id),g.set(Z,r)),P(Q,H),V=C(Z)}else j(H,V,e,Q,r,J,n);else{if(F.Q_!==V){if(V&&(U=y.get(V))&&void 0===l._Z_[U.id]){V=C(U.Q_),M(U);continue}E(F.Q_,V,e)}else V=V&&C(V);H.t_||P(Q,H)}H=h}}if(e.ck_)e.ck_(V);else for(var ee=12===e.nodeType?e.endNode:null;V&&V!==ee;)f=C(V),(U=y.get(V))?(V=f,l._Z_[U.id]||M(U)):(B=_.get(V),N(V,0,G=!(o=g.get(e))||R(o)?n:B&&B.aU_),V=f)}function L(e,t,n,i){var o=n.bY_,a=n.c__;if((void 0===a||t.c__!==a)&&(f(e,t,n),!n.s_)){"textarea"!==o&&x(e,n,i);var s=r[o];void 0!==s&&s(e,n)}}x(e,t,t.n_),I.forEach((function(e){var t=b.get(e);if(void 0!==t){b.set(e,void 0);var n=y.get(e);n?n.destroy():e.parentNode&&(s(e,!0!==t&&t),0!=h._f_(e)&&T(e))}}))}},function(e,t){function n(){this.a__=Object.create(null)}n.prototype._Q_=function(e){var t=this.a__;return t[e]?e+"_"+t[e]++:(t[e]=1,e)},e.exports=n},function(e,t,n){"use strict";var r=Object.create(null),i=Object.create(null);function o(e,t){return t.toUpperCase()}t.bb_=function(e){var t=r[e];return t||(t=r[e]=e.replace(/([A-Z])/g,"-$1").toLowerCase())!==e&&(i[t]=e),t},t.bc_=function(e){var t=i[e];return t||(t=i[e]=e.replace(/-([a-z])/g,o))!==e&&(r[t]=e),t}},function(e,t,n){(function(t){var n,r,i;e.exports=t.setImmediate||(n=[],r=window,i=""+Math.random(),r.addEventListener("message",(function(e){if(e.data===i){var t=n;n=[];for(var r=0;r<t.length;r++)t[r]()}})),function(e){1===n.push(e)&&r.postMessage(i,"*")})}).call(this,n(53))},function(e,t,n){(function(e){var n="undefined"!=typeof window?window:e;t.NOOP=n.$W10NOOP=n.$W10NOOP||function(){}}).call(this,n(53))},function(e,t,n){e.exports=n(276)},function(e,t){var n={trace:0,debug:1,info:2,log:3,warn:4,error:5};s.consoleTransport=console;var r=[s.consoleTransport];s.addGlobalTransport=function(e){-1===r.indexOf(e)&&r.push(e)},s.removeGlobalTransport=function(e){var t=r.indexOf(e);-1!==t&&r.splice(t,1)};var i={};function o(){var e={methodName:"",fileLocation:"",line:null,column:null},t=new Error,n=t.stack?t.stack.split("\n"):[];if(!n||n.length<3)return e;var r=null;return n[3]&&(r=n[3].match(/\s*at\s*(.+?)\s*\((\S*)\s*:(\d*)\s*:(\d*)\)/)),!r||r.length<=4?(0===n[2].indexOf("log@")?e.methodName=n[3].substr(0,n[3].indexOf("@")):e.methodName=n[2].substr(0,n[2].indexOf("@")),e):(e.methodName=r[1],e.fileLocation=r[2],e.line=r[3],e.column=r[4],e)}function a(){var e=arguments[0],t=arguments[1],a=Array.prototype.slice.call(arguments,2);if(!(n[t]<e.level))for(var s=!(e.options.disableCallerInfo||i.disableCallerInfo)&&o(),c=r.concat(e.transports),u=0;u<c.length;u++){var l=c[u],d=l[t];if(d&&"function"==typeof d){var f=[];f.push((new Date).toISOString()),e.id&&f.push("["+e.id+"]"),s&&s.methodName.length>1&&f.push("<"+s.methodName+">: ");var h=f.concat(a);d.bind(l).apply(l,h)}}}function s(e,t,r,i){this.id=t,this.options=i||{},this.transports=r,this.transports||(this.transports=[]),this.level=n[e];for(var o=Object.keys(n),s=0;s<o.length;s++)this[o[s]]=a.bind(null,this,o[s])}s.setGlobalOptions=function(e){i=e||{}},s.prototype.setLevel=function(e){this.level=n[e]},e.exports=s,s.levels={TRACE:"trace",DEBUG:"debug",INFO:"info",LOG:"log",WARN:"warn",ERROR:"error"}},function(e,t){var n=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-\.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))? (\S*)(?: (\S*))?/,names:["value","direction","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+" %s"+(e.config?" %s":"")}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{push:"invalid",names:["value"]}]};Object.keys(n).forEach((function(e){n[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(618),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(53))},function(e,t){var n=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",t+=null!=e.rateNumerator?" rate=%s":"",t+=null!=e.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(n).forEach((function(e){n[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var r=n(130),i=n.n(r),o=n(4),a=n(150),s=n(184);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=Object(o.getLogger)(e),l=new Set(["flac","wav","ogg"]),d=Object.freeze({IDLE:Symbol("IDLE"),STARTING:Symbol("STARTING"),RECORDING:Symbol("RECORDING"),STOPPING:Symbol("STOPPING"),FAILED:Symbol("FAILED")}),f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._adapters={},this._conference=null,this._currentSessionToken=-1,this._state=d.IDLE,this._isMuted=!1,this._micDeviceId="default",this._format="flac",this._registered=!1,this.registerEvents=this.registerEvents.bind(this),this.getParticipantsStats=this.getParticipantsStats.bind(this),this._onStartCommand=this._onStartCommand.bind(this),this._onStopCommand=this._onStopCommand.bind(this),this._onPingCommand=this._onPingCommand.bind(this),this._doStartRecording=this._doStartRecording.bind(this),this._doStopRecording=this._doStopRecording.bind(this),this._updateStats=this._updateStats.bind(this),this._switchToNewSession=this._switchToNewSession.bind(this)}var t,n,r;return t=e,(n=[{key:"registerEvents",value:function(e){this._registered||(this._conference=e,this._conference&&(this._conference.addCommandListener("localRecStop",this._onStopCommand),this._conference.addCommandListener("localRecStart",this._onStartCommand),this._conference.addCommandListener("localRecPing",this._onPingCommand),this._registered=!0),this._conference.isModerator()||this._conference.sendCommandOnce("localRecPing",{}))}},{key:"onStateChanged",set:function(e){this._onStateChanged=e}},{key:"onNotify",set:function(e){this._onNotify=e}},{key:"onWarning",set:function(e){this._onWarning=e}},{key:"startRecording",value:function(e){this.registerEvents(),this.switchFormat(e),this._conference&&this._conference.isModerator()?(this._conference.removeCommand("localRecStop"),this._conference.sendCommand("localRecStart",{attributes:{sessionToken:this._getRandomToken(),format:this._format}})):this._onWarning&&this._onWarning("localRecording.messages.notModerator")}},{key:"stopRecording",value:function(){this._conference&&(this._conference.isModerator()?(this._conference.removeCommand("localRecStart"),this._conference.sendCommand("localRecStop",{attributes:{sessionToken:this._currentSessionToken}})):this._onWarning&&this._onWarning("localRecording.messages.notModerator"))}},{key:"downloadRecordedData",value:function(e){var t=this;this._adapters[e]?this._adapters[e].exportRecordedData().then((function(n){var r=n.data,i=n.format,o="session_".concat(e)+"_".concat(t._conference.myUserId(),".").concat(i);Object(a.d)(r,o)})).catch((function(t){u.error("Failed to download audio for"+" session ".concat(e,". Error: ").concat(t))})):u.error("Invalid session token for download ".concat(e))}},{key:"setMicDevice",value:function(e){e!==this._micDeviceId&&(this._micDeviceId=String(e),this._state===d.RECORDING&&(u.log("Before switching microphone..."),this._adapters[this._currentSessionToken].setMicDevice(this._micDeviceId).then((function(){u.log("Finished switching microphone.")})).catch((function(){u.error("Failed to switch microphone")}))),u.log("Switch microphone to ".concat(this._micDeviceId)))}},{key:"setMuted",value:function(e){this._isMuted=Boolean(e),this._state===d.RECORDING&&this._adapters[this._currentSessionToken].setMuted(this._isMuted)}},{key:"switchFormat",value:function(e){l.has(e)?(this._format=e,u.log("Recording format switched to ".concat(e))):u.log("Unknown format ".concat(e,". Ignoring..."))}},{key:"getLocalStats",value:function(){return{currentSessionToken:this._currentSessionToken,isRecording:this._state===d.RECORDING,recordedBytes:0,recordedLength:0}}},{key:"getParticipantsStats",value:function(){for(var e=this._conference.getParticipants().map((function(e){return{id:e.getId(),displayName:e.getDisplayName(),recordingStats:i.a.parse(e.getProperty("localRecStats")||"{}"),isSelf:!1}})),t={},n=0;n<e.length;++n)t[e[n].id]=e[n];var r=this._conference.myUserId();return t[r]={id:r,displayName:"localRecording.me",recordingStats:this.getLocalStats(),isSelf:!0},t}},{key:"_changeState",value:function(e){this._state!==e&&(u.log("state change: ".concat(this._state.toString()," -> ")+"".concat(e.toString())),this._state=e)}},{key:"_updateStats",value:function(){this._conference&&this._conference.setLocalParticipantProperty("localRecStats",JSON.stringify(this.getLocalStats()))}},{key:"_onStartCommand",value:function(e){var t=this,n=e.attributes,r=n.sessionToken,i=n.format;this._state===d.IDLE?(this._changeState(d.STARTING),this._switchToNewSession(r,i),this._doStartRecording()):this._state===d.RECORDING&&this._currentSessionToken!==r&&(this._changeState(d.STOPPING),this._doStopRecording().then((function(){t._changeState(d.STARTING),t._switchToNewSession(r,i),t._doStartRecording()})))}},{key:"_onStopCommand",value:function(e){this._state===d.RECORDING&&this._currentSessionToken===e.attributes.sessionToken&&(this._changeState(d.STOPPING),this._doStopRecording())}},{key:"_onPingCommand",value:function(){this._conference.isModerator()&&(u.log("Received ping, sending pong."),this._conference.sendCommandOnce("localRecPong",{}))}},{key:"_getRandomToken",value:function(){return Math.floor(1e8*Math.random())+1}},{key:"_doStartRecording",value:function(){var e=this;if(this._state===d.STARTING){var t=this._adapters[this._currentSessionToken];t.start(this._micDeviceId).then((function(){e._changeState(d.RECORDING),s.a.beginSegment(e._currentSessionToken),u.log("Local recording engaged."),e._onNotify&&e._onNotify("localRecording.messages.engaged"),e._onStateChanged&&e._onStateChanged(!0),t.setMuted(e._isMuted),e._updateStats()})).catch((function(e){u.error("Failed to start local recording.",e)}))}}},{key:"_doStopRecording",value:function(){var e=this;if(this._state===d.STOPPING){var t=this._currentSessionToken;return this._adapters[this._currentSessionToken].stop().then((function(){e._changeState(d.IDLE),s.a.endSegment(e._currentSessionToken),u.log("Local recording unengaged."),e.downloadRecordedData(t);var n=e._conference.isModerator()?"localRecording.messages.finishedModerator":"localRecording.messages.finished",r={token:t};e._onNotify&&e._onNotify(n,r),e._onStateChanged&&e._onStateChanged(!1),e._updateStats()})).catch((function(e){u.error("Failed to stop local recording.",e)}))}return Promise.resolve()}},{key:"_switchToNewSession",value:function(e,t){this._format=t,this._currentSessionToken=e,u.log("New session: ".concat(this._currentSessionToken,", ")+"format: ".concat(this._format)),this._adapters[e]=this._createRecordingAdapter(),s.a.createSession(e,this._format)}},{key:"_createRecordingAdapter",value:function(){switch(u.debug("[RecordingController] creating recording"+" adapter for ".concat(this._format," format.")),this._format){case"ogg":return new a.b;case"flac":return new a.a;case"wav":return new a.c;default:throw new Error("Unknown format: ".concat(this._format))}}}])&&c(t.prototype,n),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var r=n(4),i=n(127);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=Object(r.getLogger)(e),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(o,e);var t,n,r,i=u(o);function o(){var e;return a(this,o),(e=i.apply(this,arguments))._mediaRecorder=null,e._initPromise=null,e._recordedData=null,e}return t=o,(n=[{key:"start",value:function(e){var t=this;return this._initPromise||(this._initPromise=this._initialize(e)),this._initPromise.then((function(){return new Promise((function(e){t._mediaRecorder.start(),e()}))}))}},{key:"stop",value:function(){var e=this;return new Promise((function(t){e._mediaRecorder.onstop=function(){return t()},e._mediaRecorder.stop()}))}},{key:"exportRecordedData",value:function(){return null!==this._recordedData?Promise.resolve({data:this._recordedData,format:"ogg"}):Promise.reject("No audio data recorded.")}},{key:"setMuted",value:function(e){var t=!e;if(!this._stream)return Promise.resolve();var n=this._stream.getAudioTracks()[0];return n?(n.enabled!==t&&(n.enabled=t,f.log(e?"Mute":"Unmute")),Promise.resolve()):(f.error("Cannot mute/unmute. Track not found!"),Promise.resolve())}},{key:"_initialize",value:function(e){var t=this;return this._mediaRecorder?Promise.resolve():new Promise((function(n,r){t._getAudioStream(e).then((function(e){t._stream=e,t._mediaRecorder=new MediaRecorder(e),t._mediaRecorder.ondataavailable=function(e){return t._saveMediaData(e.data)},n()})).catch((function(e){f.error("Error calling getUserMedia(): ".concat(e)),r()}))}))}},{key:"_saveMediaData",value:function(e){this._recordedData=e}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(i.a)}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var r=n(4),i=n(182);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=Object(r.getLogger)(e),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(o,e);var t,n,r,i=c(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this))._wavLength=0,e._wavBuffers=[],e._isInitialized=!1,e._initPromise=null,e._onAudioProcess=e._onAudioProcess.bind(l(e)),e}return t=o,(n=[{key:"start",value:function(e){var t=this;return this._initPromise||(this._initPromise=this._initialize(e)),this._initPromise.then((function(){t._wavBuffers=[],t._wavLength=0,t._connectAudioGraph()}))}},{key:"stop",value:function(){return this._disconnectAudioGraph(),this._data=this._exportMonoWAV(this._wavBuffers,this._wavLength),this._audioProcessingNode=null,this._audioSource=null,this._isInitialized=!1,Promise.resolve()}},{key:"exportRecordedData",value:function(){return null!==this._data?Promise.resolve({data:this._data,format:"wav"}):Promise.reject("No audio data recorded.")}},{key:"setMuted",value:function(e){var t=!e;if(!this._stream)return Promise.resolve();var n=this._stream.getAudioTracks()[0];return n?(n.enabled!==t&&(n.enabled=t,f.log(e?"Mute":"Unmute")),Promise.resolve()):(f.error("Cannot mute/unmute. Track not found!"),Promise.resolve())}},{key:"setMicDevice",value:function(e){return this._replaceMic(e)}},{key:"_createWavHeader",value:function(e){var t=new ArrayBuffer(44),n=new DataView(t);return p(n,0,"RIFF"),p(n,8,"WAVE"),p(n,12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,1,!0),n.setUint16(22,1,!0),n.setUint32(24,this._sampleRate,!0),n.setUint32(28,1*Number(this._sampleRate)*16/8,!0),n.setUint16(32,1*Number(16)/8,!0),n.setUint16(34,16,!0),p(n,36,"data"),n.setUint32(4,32+e,!0),n.setUint32(40,e,!0),new Uint8Array(t)}},{key:"_initialize",value:function(e){var t=this;return this._isInitialized?Promise.resolve():this._initializeAudioContext(e,this._onAudioProcess).then((function(){t._isInitialized=!0}))}},{key:"_onAudioProcess",value:function(e){var t=e.inputBuffer.getChannelData(0);this._wavBuffers.push(new Float32Array(t)),this._wavLength+=t.length}},{key:"_exportMonoWAV",value:function(e,t){for(var n=2*t,r=new ArrayBuffer(44+n),i=new DataView(r),o=this._createWavHeader(n),a=o.length,s=0;s<a;++s)i.setUint8(s,o[s]);return function(e,t,n){var r,i,o,a,s,c=n.length,u=t;for(r=0;r<c;++r)for(o=n[r],s=o.length,i=0;i<s;++i,u+=2)a=Math.max(-1,Math.min(1,o[i])),e.setInt16(u,a<0?32768*a:32767*a,!0)}(i,44,e),new Blob([i],{type:"audio/wav"})}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(i.a);function p(e,t,n){for(var r=n.length,i=0;i<r;++i)e.setUint8(t+i,n.charCodeAt(i))}}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var r=n(4),i=n(182),o=n(121);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=Object(r.getLogger)(e),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(a,e);var t,n,r,i=u(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this))._encoder=null,e._stopPromiseResolver=null,e._initWorkerPromiseResolver=null,e._initPromise=null,e._onAudioProcess=e._onAudioProcess.bind(d(e)),e._onWorkerMessage=e._onWorkerMessage.bind(d(e)),e}return t=a,(n=[{key:"start",value:function(e){var t=this;return this._initPromise||(this._initPromise=this._initialize(e)),this._initPromise.then((function(){t._connectAudioGraph()}))}},{key:"stop",value:function(){var e=this;return this._encoder?new Promise((function(t){e._initPromise=null,e._disconnectAudioGraph(),e._stopPromiseResolver=t,e._encoder.postMessage({command:o.b})})):(h.error("Attempting to stop but has nothing to stop."),Promise.reject())}},{key:"exportRecordedData",value:function(){return null!==this._data?Promise.resolve({data:this._data,format:"flac"}):Promise.reject("No audio data recorded.")}},{key:"setMuted",value:function(e){var t=!e;if(!this._stream)return Promise.resolve();var n=this._stream.getAudioTracks()[0];return n?(n.enabled!==t&&(n.enabled=t,h.log(e?"Mute":"Unmute")),Promise.resolve()):(h.error("Cannot mute/unmute. Track not found!"),Promise.resolve())}},{key:"setMicDevice",value:function(e){return this._replaceMic(e)}},{key:"_initialize",value:function(e){var t=this;return null!==this._encoder?Promise.resolve():new Promise((function(e,n){try{t._loadWebWorker()}catch(e){n()}t._initWorkerPromiseResolver=e,t._encoder.onmessage=t._onWorkerMessage,t._encoder.postMessage({command:o.c,config:{sampleRate:t._sampleRate,bps:16}})})).then((function(){return t._initializeAudioContext(e,t._onAudioProcess)}))}},{key:"_onAudioProcess",value:function(e){var t=e.inputBuffer.getChannelData(0);this._encoder.postMessage({command:o.d,buf:t})}},{key:"_onWorkerMessage",value:function(e){switch(e.data.command){case o.e:this._data=e.data.buf,null!==this._stopPromiseResolver&&(this._stopPromiseResolver(),this._stopPromiseResolver=null,this._encoder.terminate(),this._encoder=null);break;case o.a:h.log(e.data);break;case o.f:h.log("libflac is ready."),this._initWorkerPromiseResolver();break;default:h.error('Unknown event\n                from encoder (WebWorker): "'.concat(e.data.command,'"!'))}}},{key:"_loadWebWorker",value:function(){var e=new Blob(["importScripts('https://sdk.sariska.io/flacEncodeWorker.min.js');"],{type:"application/javascript"}),t=(window.URL||window.webkitURL).createObjectURL(e);this._encoder=new Worker(t),URL.revokeObjectURL(t)}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(i.a)}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d}));var r=n(130),i=n.n(r),o=n(79),a=n(4);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=Object(a.getLogger)(e);function u(){return window.performance&&window.performance.now&&window.performance.timing&&window.performance.timing.navigationStart?window.performance.now()+window.performance.timing.navigationStart:Date.now()}var l=Object.freeze({SESSION_STARTED:"SESSION_STARTED",SEGMENT_STARTED:"SEGMENT_STARTED",SEGMENT_ENDED:"SEGMENT_ENDED"}),d=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._sessionsMetadata={},this._loadMetadata()}var t,n,r;return t=e,(n=[{key:"_loadMetadata",value:function(){var e=o.b.getItem("localRecordingMetadataVersion1");if(null!==e)try{var t=i.a.parse(e);this._sessionsMetadata=t}catch(e){return void c.warn("Failed to parse localStorage item.")}}},{key:"_saveMetadata",value:function(){o.b.setItem("localRecordingMetadataVersion1",JSON.stringify(this._sessionsMetadata))}},{key:"createSession",value:function(e,t){void 0===this._sessionsMetadata[e]?(this._sessionsMetadata[e]={format:t,events:[]},this._sessionsMetadata[e].events.push({type:l.SESSION_STARTED,timestamp:u()}),this._saveMetadata()):c.warn("Session ".concat(e," already exists"))}},{key:"getSessions",value:function(){for(var e=Object.keys(this._sessionsMetadata),t=[],n=0;n<e.length;++n){var r=this._sessionsMetadata[e[n]],i={start:r.events[0].timestamp,format:r.format,sessionToken:e[n],segments:this.getSegments(e[n])};t.push(i)}return t.sort((function(e,t){return(e.start||0)-(t.start||0)})),t}},{key:"removeSession",value:function(e){delete this._sessionsMetadata[e],this._saveMetadata()}},{key:"getSegments",value:function(e){var t=this._sessionsMetadata[e];return t?this._constructSegments(t.events):[]}},{key:"beginSegment",value:function(e){return void 0===this._sessionsMetadata[e]?(c.warn("Attempting to add segments to nonexistent"+" session ".concat(e)),-1):(this._sessionsMetadata[e].events.push({type:l.SEGMENT_STARTED,timestamp:u()}),this._saveMetadata(),this.getSegments(e).length-1)}},{key:"getCurrentSegmentIndex",value:function(e){if(void 0===this._sessionsMetadata[e])return-1;var t=this.getSegments(e);return 0===t.length||t[t.length-1].end?-1:t.length-1}},{key:"endSegment",value:function(e){void 0===this._sessionsMetadata[e]?c.warn("Attempting to end a segment in nonexistent"+" session ".concat(e)):(this._sessionsMetadata[e].events.push({type:l.SEGMENT_ENDED,timestamp:u()}),this._saveMetadata())}},{key:"_constructSegments",value:function(e){if(0===e.length)return[];var t=[],n=null,r={};function i(){if(void 0===r.gapBefore||null===r.gapBefore)if(t.length>0&&t[t.length-1].end){var e=t[t.length-1];r.start&&e.end?r.gapBefore=r.start-e.end:r.gapBefore=null}else null!==n&&0===t.length?r.gapBefore=r.start?r.start-n:null:r.gapBefore=null;r.duration=r.end&&r.start?r.end-r.start:null,t.push(r),r={}}for(var o=0;o<e.length;++o){var a=e[o];switch(a.type){case l.SESSION_STARTED:null===n?n=a.timestamp:c.warn("Unexpected SESSION_STARTED event.",a);break;case l.SEGMENT_STARTED:void 0===r.start||null===r.start||i(),r.start=a.timestamp;break;case l.SEGMENT_ENDED:void 0===r.start||null===r.start?c.warn("Unexpected SEGMENT_ENDED event",a):(r.end=a.timestamp,i());break;default:c.warn("Unexpected error during _constructSegments")}}return r.start&&i(),t}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());window.sessionManager=d}).call(this,"/index.js")},function(e,t,n){"use strict";n.r(t),n.d(t,"Channel",(function(){return D})),n.d(t,"LongPoll",(function(){return R})),n.d(t,"Presence",(function(){return k})),n.d(t,"Serializer",(function(){return O})),n.d(t,"Socket",(function(){return j}));var r=e=>{if("function"==typeof e)return e;return function(){return e}},i="undefined"!=typeof self?self:null,o="undefined"!=typeof window?window:null,a=i||o||a,s=0,c=1,u=2,l=3,d="closed",f="errored",h="joined",p="joining",m="leaving",v="phx_close",g="phx_error",y="phx_join",_="phx_reply",b="phx_leave",E="longpoll",S="websocket",C=4,w=class{constructor(e,t,n,r){this.channel=e,this.event=t,this.payload=n||function(){return{}},this.receivedResp=null,this.timeout=r,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}resend(e){this.timeout=e,this.reset(),this.send()}send(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}receive(e,t){return this.hasReceived(e)&&t(this.receivedResp.response),this.recHooks.push({status:e,callback:t}),this}reset(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}matchReceive({status:e,response:t,_ref:n}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}cancelRefEvent(){this.refEvent&&this.channel.off(this.refEvent)}cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}startTimeout(){this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,e=>{this.cancelRefEvent(),this.cancelTimeout(),this.receivedResp=e,this.matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}trigger(e,t){this.channel.trigger(this.refEvent,{status:e,response:t})}},T=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=null,this.tries=0}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}},D=class{constructor(e,t,n){this.state=d,this.topic=e,this.params=r(t||{}),this.socket=n,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new w(this,y,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new T(()=>{this.socket.isConnected()&&this.rejoin()},this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError(()=>this.rejoinTimer.reset())),this.stateChangeRefs.push(this.socket.onOpen(()=>{this.rejoinTimer.reset(),this.isErrored()&&this.rejoin()})),this.joinPush.receive("ok",()=>{this.state=h,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this.joinPush.receive("error",()=>{this.state=f,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.hasLogger()&&this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=d,this.socket.remove(this)}),this.onError(e=>{this.socket.hasLogger()&&this.socket.log("channel","error "+this.topic,e),this.isJoining()&&this.joinPush.reset(),this.state=f,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",()=>{this.socket.hasLogger()&&this.socket.log("channel",`timeout ${this.topic} (${this.joinRef()})`,this.joinPush.timeout),new w(this,b,r({}),this.timeout).send(),this.state=f,this.joinPush.reset(),this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.on(_,(e,t)=>{this.trigger(this.replyEventName(t),e)})}join(e=this.timeout){if(this.joinedOnce)throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=e,this.joinedOnce=!0,this.rejoin(),this.joinPush}onClose(e){this.on(v,e)}onError(e){return this.on(g,t=>e(t))}on(e,t){let n=this.bindingRef++;return this.bindings.push({event:e,ref:n,callback:t}),n}off(e,t){this.bindings=this.bindings.filter(n=>!(n.event===e&&(void 0===t||t===n.ref)))}canPush(){return this.socket.isConnected()&&this.isJoined()}push(e,t,n=this.timeout){if(t=t||{},!this.joinedOnce)throw new Error(`tried to push '${e}' to '${this.topic}' before joining. Use channel.join() before pushing events`);let r=new w(this,e,(function(){return t}),n);return this.canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}leave(e=this.timeout){this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=m;let t=()=>{this.socket.hasLogger()&&this.socket.log("channel","leave "+this.topic),this.trigger(v,"leave")},n=new w(this,b,r({}),e);return n.receive("ok",()=>t()).receive("timeout",()=>t()),n.send(),this.canPush()||n.trigger("ok",{}),n}onMessage(e,t,n){return t}isMember(e,t,n,r){return this.topic===e&&(!r||r===this.joinRef()||(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:e,event:t,payload:n,joinRef:r}),!1))}joinRef(){return this.joinPush.ref}rejoin(e=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=p,this.joinPush.resend(e))}trigger(e,t,n,r){let i=this.onMessage(e,t,n,r);if(t&&!i)throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");let o=this.bindings.filter(t=>t.event===e);for(let e=0;e<o.length;e++){o[e].callback(i,n,r||this.joinRef())}}replyEventName(e){return"chan_reply_"+e}isClosed(){return this.state===d}isErrored(){return this.state===f}isJoined(){return this.state===h}isJoining(){return this.state===p}isLeaving(){return this.state===m}},A=class{static request(e,t,n,r,i,o,s){if(a.XDomainRequest){let n=new a.XDomainRequest;this.xdomainRequest(n,e,t,r,i,o,s)}else{let c=new a.XMLHttpRequest;this.xhrRequest(c,e,t,n,r,i,o,s)}}static xdomainRequest(e,t,n,r,i,o,a){e.timeout=i,e.open(t,n),e.onload=()=>{let t=this.parseJSON(e.responseText);a&&a(t)},o&&(e.ontimeout=o),e.onprogress=()=>{},e.send(r)}static xhrRequest(e,t,n,r,i,o,a,s){e.open(t,n,!0),e.timeout=o,e.setRequestHeader("Content-Type",r),e.onerror=()=>{s&&s(null)},e.onreadystatechange=()=>{if(e.readyState===C&&s){let t=this.parseJSON(e.responseText);s(t)}},a&&(e.ontimeout=a),e.send(i)}static parseJSON(e){if(!e||""===e)return null;try{return JSON.parse(e)}catch(t){return console&&console.log("failed to parse JSON response",e),null}}static serialize(e,t){let n=[];for(var r in e){if(!Object.prototype.hasOwnProperty.call(e,r))continue;let i=t?`${t}[${r}]`:r,o=e[r];"object"==typeof o?n.push(this.serialize(o,i)):n.push(encodeURIComponent(i)+"="+encodeURIComponent(o))}return n.join("&")}static appendParams(e,t){if(0===Object.keys(t).length)return e;let n=e.match(/\?/)?"&":"?";return`${e}${n}${this.serialize(t)}`}},R=class{constructor(e){this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(e),this.readyState=s,this.poll()}normalizeEndpoint(e){return e.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+S),"$1/"+E)}endpointURL(){return A.appendParams(this.pollEndpoint,{token:this.token})}closeAndRetry(e,t,n){this.close(e,t,n),this.readyState=s}ontimeout(){this.onerror("timeout"),this.closeAndRetry(1005,"timeout",!1)}poll(){this.readyState!==c&&this.readyState!==s||A.request("GET",this.endpointURL(),"application/json",null,this.timeout,this.ontimeout.bind(this),e=>{if(e){var{status:t,token:n,messages:r}=e;this.token=n}else t=0;switch(t){case 200:r.forEach(e=>{setTimeout(()=>{this.onmessage({data:e})},0)}),this.poll();break;case 204:this.poll();break;case 410:this.readyState=c,this.onopen({}),this.poll();break;case 403:this.onerror(403),this.close(1008,"forbidden",!1);break;case 0:case 500:this.onerror(500),this.closeAndRetry(1011,"internal server error",500);break;default:throw new Error("unhandled poll status "+t)}})}send(e){A.request("POST",this.endpointURL(),"application/json",e,this.timeout,this.onerror.bind(this,"timeout"),e=>{e&&200===e.status||(this.onerror(e&&e.status),this.closeAndRetry(1011,"internal server error",!1))})}close(e,t,n){this.readyState=l;let r=Object.assign({code:1e3,reason:void 0,wasClean:!0},{code:e,reason:t,wasClean:n});"undefined"!=typeof CloseEvent?this.onclose(new CloseEvent("close",r)):this.onclose(r)}},k=class{constructor(e,t={}){let n=t.events||{state:"presence_state",diff:"presence_diff"};this.state={},this.pendingDiffs=[],this.channel=e,this.joinRef=null,this.caller={onJoin:function(){},onLeave:function(){},onSync:function(){}},this.channel.on(n.state,e=>{let{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel.joinRef(),this.state=k.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=k.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel.on(n.diff,e=>{let{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=k.syncDiff(this.state,e,t,n),r())})}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}list(e){return k.list(this.state,e)}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel.joinRef()}static syncState(e,t,n,r){let i=this.clone(e),o={},a={};return this.map(i,(e,n)=>{t[e]||(a[e]=n)}),this.map(t,(e,t)=>{let n=i[e];if(n){let r=t.metas.map(e=>e.phx_ref),i=n.metas.map(e=>e.phx_ref),s=t.metas.filter(e=>i.indexOf(e.phx_ref)<0),c=n.metas.filter(e=>r.indexOf(e.phx_ref)<0);s.length>0&&(o[e]=t,o[e].metas=s),c.length>0&&(a[e]=this.clone(n),a[e].metas=c)}else o[e]=t}),this.syncDiff(i,{joins:o,leaves:a},n,r)}static syncDiff(e,t,n,r){let{joins:i,leaves:o}=this.clone(t);return n||(n=function(){}),r||(r=function(){}),this.map(i,(t,r)=>{let i=e[t];if(e[t]=this.clone(r),i){let n=e[t].metas.map(e=>e.phx_ref),r=i.metas.filter(e=>n.indexOf(e.phx_ref)<0);e[t].metas.unshift(...r)}n(t,i,r)}),this.map(o,(t,n)=>{let i=e[t];if(!i)return;let o=n.metas.map(e=>e.phx_ref);i.metas=i.metas.filter(e=>o.indexOf(e.phx_ref)<0),r(t,i,n),0===i.metas.length&&delete e[t]}),e}static list(e,t){return t||(t=function(e,t){return t}),this.map(e,(e,n)=>t(e,n))}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static clone(e){return JSON.parse(JSON.stringify(e))}},O={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode(e,t){if(e.payload.constructor===ArrayBuffer)return t(this.binaryEncode(e));{let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))}},decode(e,t){if(e.constructor===ArrayBuffer)return t(this.binaryDecode(e));{let[n,r,i,o,a]=JSON.parse(e);return t({join_ref:n,ref:r,topic:i,event:o,payload:a})}},binaryEncode(e){let{join_ref:t,ref:n,event:r,topic:i,payload:o}=e,a=this.META_LENGTH+t.length+n.length+i.length+r.length,s=new ArrayBuffer(this.HEADER_LENGTH+a),c=new DataView(s),u=0;c.setUint8(u++,this.KINDS.push),c.setUint8(u++,t.length),c.setUint8(u++,n.length),c.setUint8(u++,i.length),c.setUint8(u++,r.length),Array.from(t,e=>c.setUint8(u++,e.charCodeAt(0))),Array.from(n,e=>c.setUint8(u++,e.charCodeAt(0))),Array.from(i,e=>c.setUint8(u++,e.charCodeAt(0))),Array.from(r,e=>c.setUint8(u++,e.charCodeAt(0)));var l=new Uint8Array(s.byteLength+o.byteLength);return l.set(new Uint8Array(s),0),l.set(new Uint8Array(o),s.byteLength),l.buffer},binaryDecode(e){let t=new DataView(e),n=t.getUint8(0),r=new TextDecoder;switch(n){case this.KINDS.push:return this.decodePush(e,t,r);case this.KINDS.reply:return this.decodeReply(e,t,r);case this.KINDS.broadcast:return this.decodeBroadcast(e,t,r)}},decodePush(e,t,n){let r=t.getUint8(1),i=t.getUint8(2),o=t.getUint8(3),a=this.HEADER_LENGTH+this.META_LENGTH-1,s=n.decode(e.slice(a,a+r));a+=r;let c=n.decode(e.slice(a,a+i));a+=i;let u=n.decode(e.slice(a,a+o));return a+=o,{join_ref:s,ref:null,topic:c,event:u,payload:e.slice(a,e.byteLength)}},decodeReply(e,t,n){let r=t.getUint8(1),i=t.getUint8(2),o=t.getUint8(3),a=t.getUint8(4),s=this.HEADER_LENGTH+this.META_LENGTH,c=n.decode(e.slice(s,s+r));s+=r;let u=n.decode(e.slice(s,s+i));s+=i;let l=n.decode(e.slice(s,s+o));s+=o;let d=n.decode(e.slice(s,s+a));s+=a;let f=e.slice(s,e.byteLength);return{join_ref:c,ref:u,topic:l,event:_,payload:{status:d,response:f}}},decodeBroadcast(e,t,n){let r=t.getUint8(1),i=t.getUint8(2),o=this.HEADER_LENGTH+2,a=n.decode(e.slice(o,o+r));o+=r;let s=n.decode(e.slice(o,o+i));return o+=i,{join_ref:null,ref:null,topic:a,event:s,payload:e.slice(o,e.byteLength)}}},j=class{constructor(e,t={}){this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=t.timeout||1e4,this.transport=t.transport||a.WebSocket||R,this.establishedConnections=0,this.defaultEncoder=O.encode.bind(O),this.defaultDecoder=O.decode.bind(O),this.closeWasClean=!1,this.binaryType=t.binaryType||"arraybuffer",this.connectClock=1,this.transport!==R?(this.encode=t.encode||this.defaultEncoder,this.decode=t.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder);let n=null;o&&o.addEventListener&&(o.addEventListener("pagehide",e=>{this.conn&&(this.disconnect(),n=this.connectClock)}),o.addEventListener("pageshow",e=>{n===this.connectClock&&(n=null,this.connect())})),this.heartbeatIntervalMs=t.heartbeatIntervalMs||3e4,this.rejoinAfterMs=e=>t.rejoinAfterMs?t.rejoinAfterMs(e):[1e3,2e3,5e3][e-1]||1e4,this.reconnectAfterMs=e=>t.reconnectAfterMs?t.reconnectAfterMs(e):[10,50,100,150,200,250,500,1e3,2e3][e-1]||5e3,this.logger=t.logger||null,this.longpollerTimeout=t.longpollerTimeout||2e4,this.params=r(t.params||{}),this.endPoint=`${e}/${S}`,this.vsn=t.vsn||"2.0.0",this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new T(()=>{this.teardown(()=>this.connect())},this.reconnectAfterMs)}replaceTransport(e){this.disconnect(),this.transport=e}protocol(){return location.protocol.match(/^https/)?"wss":"ws"}endPointURL(){let e=A.appendParams(A.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return"/"!==e.charAt(0)?e:"/"===e.charAt(1)?`${this.protocol()}:${e}`:`${this.protocol()}://${location.host}${e}`}disconnect(e,t,n){this.connectClock++,this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(e,t,n)}connect(e){this.connectClock++,e&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=r(e)),this.conn||(this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=()=>this.onConnOpen(),this.conn.onerror=e=>this.onConnError(e),this.conn.onmessage=e=>this.onConnMessage(e),this.conn.onclose=e=>this.onConnClose(e))}log(e,t,n){this.logger(e,t,n)}hasLogger(){return null!==this.logger}onOpen(e){let t=this.makeRef();return this.stateChangeCallbacks.open.push([t,e]),t}onClose(e){let t=this.makeRef();return this.stateChangeCallbacks.close.push([t,e]),t}onError(e){let t=this.makeRef();return this.stateChangeCallbacks.error.push([t,e]),t}onMessage(e){let t=this.makeRef();return this.stateChangeCallbacks.message.push([t,e]),t}onConnOpen(){this.hasLogger()&&this.log("transport","connected to "+this.endPointURL()),this.closeWasClean=!1,this.establishedConnections++,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(([,e])=>e())}heartbeatTimeout(){this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.abnormalClose("heartbeat timeout"))}resetHeartbeat(){this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,clearTimeout(this.heartbeatTimer),setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs))}teardown(e,t,n){if(!this.conn)return e&&e();this.waitForBufferDone(()=>{this.conn&&(t?this.conn.close(t,n||""):this.conn.close()),this.waitForSocketClosed(()=>{this.conn&&(this.conn.onclose=function(){},this.conn=null),e&&e()})})}waitForBufferDone(e,t=1){5!==t&&this.conn&&this.conn.bufferedAmount?setTimeout(()=>{this.waitForBufferDone(e,t+1)},150*t):e()}waitForSocketClosed(e,t=1){5!==t&&this.conn&&this.conn.readyState!==l?setTimeout(()=>{this.waitForSocketClosed(e,t+1)},150*t):e()}onConnClose(e){let t=e&&e.code;this.hasLogger()&&this.log("transport","close",e),this.triggerChanError(),clearTimeout(this.heartbeatTimer),this.closeWasClean||1e3===t||this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(([,t])=>t(e))}onConnError(e){this.hasLogger()&&this.log("transport",e);let t=this.transport,n=this.establishedConnections;this.stateChangeCallbacks.error.forEach(([,r])=>{r(e,t,n)}),(t===this.transport||n>0)&&this.triggerChanError()}triggerChanError(){this.channels.forEach(e=>{e.isErrored()||e.isLeaving()||e.isClosed()||e.trigger(g)})}connectionState(){switch(this.conn&&this.conn.readyState){case s:return"connecting";case c:return"open";case u:return"closing";default:return"closed"}}isConnected(){return"open"===this.connectionState()}remove(e){this.off(e.stateChangeRefs),this.channels=this.channels.filter(t=>t.joinRef()!==e.joinRef())}off(e){for(let t in this.stateChangeCallbacks)this.stateChangeCallbacks[t]=this.stateChangeCallbacks[t].filter(([t])=>-1===e.indexOf(t))}channel(e,t={}){let n=new D(e,t,this);return this.channels.push(n),n}push(e){if(this.hasLogger()){let{topic:t,event:n,payload:r,ref:i,join_ref:o}=e;this.log("push",`${t} ${n} (${o}, ${i})`,r)}this.isConnected()?this.encode(e,e=>this.conn.send(e)):this.sendBuffer.push(()=>this.encode(e,e=>this.conn.send(e)))}makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}sendHeartbeat(){this.pendingHeartbeatRef&&!this.isConnected()||(this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatTimer=setTimeout(()=>this.heartbeatTimeout(),this.heartbeatIntervalMs))}abnormalClose(e){this.closeWasClean=!1,this.isConnected()&&this.conn.close(1e3,e)}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}onConnMessage(e){this.decode(e.data,e=>{let{topic:t,event:n,payload:r,ref:i,join_ref:o}=e;i&&i===this.pendingHeartbeatRef&&(clearTimeout(this.heartbeatTimer),this.pendingHeartbeatRef=null,setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)),this.hasLogger()&&this.log("receive",`${r.status||""} ${t} ${n} ${i&&"("+i+")"||""}`,r);for(let e=0;e<this.channels.length;e++){const a=this.channels[e];a.isMember(t,n,r,o)&&a.trigger(n,r,i,o)}for(let t=0;t<this.stateChangeCallbacks.message.length;t++){let[,n]=this.stateChangeCallbacks.message[t];n(e)}})}leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t.isJoined()||t.isJoining()));t&&(this.hasLogger()&&this.log("transport",`leaving duplicate topic "${e}"`),t.leave())}}},function(e,t,n){n(626);var r=e.exports=n(16).t(),i={onCreate:function(e){this.state={name:"",placeholder:!0}},keyDown:function(e){13!=e.which&&13!=e.keyCode||this.input.inputBoxAction(this.input.widgetState)},onMount:function(){const e=this.getEl("inputField");e&&e.focus()},onInputValue:function(e){e.stopPropagation();const t=e.target.value;this.state.name=t,this.input.inputBoxValue(this.state.name),this.state.name?this.state.placeholder=!1:this.state.placeholder=!0}},o=(0,n(13).r)("/client$2.26.6/src/components/Input/index.marko",(function(){return e.exports})),a=n(17),s=n(14),c=n(55),u=(c.default,c.PRIMARY_BUTTON,c.PRIMARY_BUTTON_WITH_WIDGET,n(78)),l=n(19)("label",{class:"mdc-floating-label cb__inputContainer__placeholder",for:"my-text-field"},"1",null,1,0,{i:n(20)("b603db")()}).t("Enter your name");r._=a((function(e,t,n,r,i){t.be("div",{class:u(["cb__inputContainer","mdc-text-field",!r.input.dialog&&"mdc-elevation--z6",r.input.dialog&&"cb__inputContainer--overlay"])},"0",r,null,1),t.e("input",{class:"mdc-text-field__input cb__inputContainer__input",value:i.name,type:"text",id:"my-text-field","aria-label":"Full-Width Text Field"},"@inputField",r,0,0,{oninput:n.d("input","onInputValue",!1),onkeydown:n.d("keydown","keyDown",!1)}),i.placeholder&&t.n(l,r),t.ee()}),{e_:o},i),r.Component=s(i,r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/call_end.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("4cec99")()}).e("path",{d:"M0 0h24v24H0z",fill:"none"},null,null,0).e("path",{d:"M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08c-.18-.17-.29-.42-.29-.7 0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28-.79-.74-1.69-1.36-2.67-1.85-.33-.16-.56-.5-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/report_problem.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("2705f7")()}).e("path",{d:"M0 0h24v24H0z",fill:"none"},null,null,0).e("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/screen_sharing.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,1,0,{i:n(20)("e4ca92")()}).e("path",{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.11-.9-2-2-2H4c-1.11 0-2 .89-2 2v10c0 1.1.89 2 2 2H0v2h24v-2h-4zm-7-3.53v-2.19c-2.78 0-4.61.85-6 2.72.56-2.67 2.11-5.33 6-5.87V7l4 3.73-4 3.74z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/recording_on.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,1,0,{i:n(20)("f50732")()}).e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 14.5c-2.49 0-4.5-2.01-4.5-4.5S9.51 7.5 12 7.5s4.5 2.01 4.5 4.5-2.01 4.5-4.5 4.5zm0-5.5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/recording_off.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"red",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,1,0,{i:n(20)("91c486")()}).e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 14.5c-2.49 0-4.5-2.01-4.5-4.5S9.51 7.5 12 7.5s4.5 2.01 4.5 4.5-2.01 4.5-4.5 4.5zm0-5.5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){n(637);var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Loader/index.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(54),c=n(19)("svg",{class:"MuiCircularProgress-svg",viewBox:"22 22 44 44"},"1",null,1,0,{i:n(20)("b13e85")()}).e("circle",{class:"MuiCircularProgress-circle MuiCircularProgress-circleIndeterminate",cx:"44",cy:"44",r:"19.5",fill:"none","stroke-width":"5"},null,null,0);r._=o((function(e,t,n,r,i){t.e("div",{style:s({color:r.input.primaryColor}),class:"MuiCircularProgress-root jss570 MuiCircularProgress-indeterminate",role:"progressbar"},"0",r,1).n(c,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/autorenew.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("a1fe03")()}).e("path",{d:"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"},null,null,0).e("path",{d:"M0 0h24v24H0z",fill:"none"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/add.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("4987a1")()}).e("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},null,null,0).e("path",{d:"M0 0h24v24H0z",fill:"none"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/minimize.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("f55184")()}).e("path",{d:"M6 19h12v2H6z"},null,null,0).e("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/maximize.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("172ceb")()}).e("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,null,0).e("path",{d:"M3 3h18v2H3z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/fullscreen.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("04f877")()}).e("path",{d:"M0 0h24v24H0z",fill:"none"},null,null,0).e("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/fullscreen_exit.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("db728a")()}).e("path",{d:"M0 0h24v24H0z",fill:"none"},null,null,0).e("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i={onCreate:function(e){this.state={showTT:!1},console.log("input",e)},onMount:function(){this.getEl("video")&&this.input.tracks[1].attach(this.getEl("video"))},mouseOut:function(){this.state.showTT=!1},mouseEnter:function(){this.state.showTT=!0},onClick:function(e,t,n){n&&this.input.videoControlAction(e,!t)}},o=(0,n(13).r)("/client$2.26.6/src/components/Video/index.marko",(function(){return e.exports})),a=n(17),s=n(14),c=n(87),u=(c.default,n(219)),l=n(220),d=n(291),f=(n(299),n(300),n(55)),h=(f.default,f.MIC_TOGGLE),p=(f.FULL_SCREEN_TOGGLE,f.VIDEO_TOGGLE),m=n(86),v=(m.default,m.getDimensions,m.videoShadow),g=n(168),y=n(169),_=n(54),b=n(61),E={class:"cb__video__videoMicContainer"},S=n(19)("div",{class:"cb__video__name"},"2",null,1,0,{i:n(20)("1d8326")()}).t("You"),C={class:"cb__video__name"},w={class:"cb__video__screenSharing"};n(658),r._=a((function(e,t,n,r,i){t.be("div",{style:_({background:r.input.tracks[1]&&r.input.tracks[1].isMuted()?"#202124":""}),class:"cb__video"},"0",r,null,1),r.input.tracks[1].isMuted()&&t.e("div",{style:_({boxShadow:v(r.input.audioLevel),background:r.input.color,color:"white"}),class:"cb__video__thumbnail"},"1",r,1,1).t(r.input.user.name&&r.input.user.name[0],r),t.e("video",{style:_({display:r.input.tracks[1]&&r.input.tracks[1].isMuted()?"none":"block"}),playsInline:"1",autoPlay:"1"},"@video",r,0),r.input.tracks[1].isLocal()?t.n(S,r):(t.e("div",C,"3",r,1).t(r.input.user.name,r),t.t(" ")),t.be("div",E,"4",r),r.input.tracks[0].isMuted()?(t.be("span",{style:_({color:r.input.primaryColor})},"5",r,null,1,{onmouseout:n.d("mouseout","mouseOut",!1),onmouseenter:n.d("mouseenter","mouseEnter",!1),onclick:n.d("click","onClick",!1,[h,!1,r.input.tracks[0].isLocal()])}),b(t,l,null,null,null,null,n,"6"),t.ee()):(t.be("span",{style:_({color:r.input.primaryColor})},"7",r,null,1,{onmouseout:n.d("mouseout","mouseOut",!1),onmouseenter:n.d("mouseenter","mouseEnter",!1),onclick:n.d("click","onClick",!1,[h,!0,r.input.tracks[0].isLocal()])}),b(t,u,null,null,null,null,n,"8"),t.ee()),r.input.tracks[1].isMuted()?(t.be("span",{style:_({color:r.input.primaryColor})},"9",r,null,1,{onmouseout:n.d("mouseout","mouseOut",!1),onmouseenter:n.d("mouseenter","mouseEnter",!1),onclick:n.d("click","onClick",!1,[p,!1,r.input.tracks[1].isLocal()])}),b(t,y,null,null,null,null,n,"10"),t.ee()):(t.be("span",{style:_({color:r.input.primaryColor})},"11",r,null,1,{onmouseout:n.d("mouseout","mouseOut",!1),onmouseenter:n.d("mouseenter","mouseEnter",!1),onclick:n.d("click","onClick",!1,[p,!0,r.input.tracks[1].isLocal()])}),b(t,g,null,null,null,null,n,"12"),t.ee()),t.ee(),r.input.isPresenting&&(t.be("span",w,"13",r),b(t,d,null,null,null,null,n,"14"),t.ee()),t.ee()}),{e_:o},i),r.Component=s(i,r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/document.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 48 48"},"0",null,1,0,{i:n(20)("114249")()}).e("path",{d:"M12 4C9.79 4 8.02 5.79 8.02 8L8 40c0 2.21 1.77 4 3.98 4H36c2.21 0 4-1.79 4-4V16L28 4H12zm14 14V7l11 11H26z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return ge}));var r=n(4),i=n(34),o=n.n(i),a=n(62),s=n.n(a),c=n(2),u=n(30),l=n(304),d=n(1),f=n(312),h=n(37),p=n(26),m=n(24),v=n(313),g=n(335),y=n(23),_=n(70),b=n(5),E=n(344),S=n(345),C=n(129),w=n(40),T=n(346),D=n(347),A=n(227),R=n(348),k=n(349),O=n(146),j=n(350),P=n(351),I=n(12),N=n(377),M=n(352),x=n(353),L=n(354),F=n(51),B=n(355),U=n(356),V=n(357),H=n(8),G=n(374),J=n(22),z=n.n(J),W=n(358),K=n(359),q=n(43),X=n(183),Y=n(361),Q=n(41),Z=n(133),ee=n.n(Z),te=n(33),ne=n.n(te),re=n(3),ie=n(9),oe=n(89),ae=n(18),se=n(11),ce=n(0);function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e){return function(e){if(Array.isArray(e))return pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||he(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=he(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function he(e,t){if(e){if("string"==typeof e)return pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pe(e,t):void 0}}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var me=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};window.APP={conference:{}};var ve=Object(r.getLogger)(e);function ge(e){var t;if(!e.name||e.name.toLowerCase()!==e.name.toString()){var n="Invalid conference name (no conference name passed or it contains invalid characters like capital letters)!";throw ve.error(n),new Error(n)}if(this.connection=e.connection,this.xmpp=null===(t=this.connection)||void 0===t?void 0:t.xmpp,this.xmpp.isRoomCreated(e.name,e.customDomain)){var r="A conference with the same name has already been created!";throw delete this.connection,delete this.xmpp,ve.error(r),new Error(r)}this.eventEmitter=new o.a,this.options=e,this.eventManager=new l.a(this),this.participants={},this._signalingLayer=new X.a,this._init(e),this.componentsVersions=new W.a(this),this.jvbJingleSession=null,this.lastDominantSpeaker=null,this.dtmfManager=null,this.somebodySupportsDTMF=!1,this.authEnabled=!1,this.startAudioMuted=!1,this.startVideoMuted=!1,this.startMutedPolicy={audio:!1,video:!1},this.isMutedByFocus=!1,this.mutedByFocusActor=null,this.isVideoMutedByFocus=!1,this.mutedVideoByFocusActor=null,this.wasStopped=!1,this.properties={},this.connectionQuality=new E.a(this,this.eventEmitter,e),this.avgRtpStatsReporter=new U.a(this,e.config.avgRtpStatsN||15),e.config.disableAudioLevels||(this._audioOutputProblemDetector=new B.a(this)),this.isJvbConnectionInterrupted=!1,this.speakerStatsCollector=new V.a(this),this.deferredStartP2PTask=null;var i=parseInt(e.config.p2p&&e.config.p2p.backToP2PDelay,10);this.backToP2PDelay=isNaN(i)?5:i,ve.info("backToP2PDelay: ".concat(this.backToP2PDelay)),this.isP2PConnectionInterrupted=!1,this.p2p=!1,this.p2pJingleSession=null,this.videoSIPGWHandler=new K.a(this.room),this.recordingManager=new L.a(this.room),this._conferenceJoinAnalyticsEventSent=void 0,this.isE2EESupported()&&(ve.info("End-to-End Encryption is supported"),this._e2eEncryption=new O.a(this)),this._audioSenderLimitReached=void 0,this._videoSenderLimitReached=void 0,this.handleSubtitles(),e.config.enableLocalRecording&&(this.recordingController=new N.a,this.recordingController.registerEvents(this)),e.config.enableAnalytics&&this.enableAnalytics(),e.config.iAmRecorder&&(this.removeCommand("userinfo"),this.sendCommand("userinfo",{attributes:{xmlns:"http://jitsi.org/jitmeet/userinfo",robot:!0}}));var a=this;window.APP={conference:{_room:this,get membersCount(){return a.getParticipantsWithoutHidden().length+1},getStats:function(){return a.connectionQuality.getStats()},getConnectionState:function(){return a.getConnectionState()}}},this.localTracksDuration=new Y.a(this),this.sessions={},this.user=e.user}ge.prototype.constructor=ge,ge.resourceCreator=function(e){return c.Strophe.getNodeFromJid(e)},ge.prototype._init=function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.eventManager.setupXMPPListeners();var r=this.options.config,i={disabledCodec:r.videoQuality?r.videoQuality.disabledCodec:r.p2p&&r.p2p.disableH264&&ne.a.H264,enforcePreferredCodec:r.videoQuality&&r.videoQuality.enforcePreferredCodec,jvbCodec:r.videoQuality&&r.videoQuality.preferredCodec||r.preferH264&&ne.a.H264,p2pCodec:r.p2p?r.p2p.preferredCodec||r.p2p.preferH264&&ne.a.H264:ne.a.VP8};this.codecSelection=new g.a(this,i),this._statsCurrentId=r.statisticsId?r.statisticsId:F.a.callStatsUserName,this.room=this.xmpp.createRoom(this.options.name,Object.assign(Object.assign({},r),{statsId:this._statsCurrentId}),ge.resourceCreator),this._signalingLayer.setChatRoom(this.room),this._onIceConnectionInterrupted=this._onIceConnectionInterrupted.bind(this),this.room.addListener(ce.XMPPEvents.CONNECTION_INTERRUPTED,this._onIceConnectionInterrupted),this._onIceConnectionRestored=this._onIceConnectionRestored.bind(this),this.room.addListener(ce.XMPPEvents.CONNECTION_RESTORED,this._onIceConnectionRestored),this._onIceConnectionEstablished=this._onIceConnectionEstablished.bind(this),this.room.addListener(ce.XMPPEvents.CONNECTION_ESTABLISHED,this._onIceConnectionEstablished),this._updateProperties=this._updateProperties.bind(this),this.room.addListener(ce.XMPPEvents.CONFERENCE_PROPERTIES_CHANGED,this._updateProperties),this._sendConferenceJoinAnalyticsEvent=this._sendConferenceJoinAnalyticsEvent.bind(this),this.room.addListener(ce.XMPPEvents.MEETING_ID_SET,this._sendConferenceJoinAnalyticsEvent),this._removeLocalSourceOnReject=this._removeLocalSourceOnReject.bind(this),this._updateRoomPresence=this._updateRoomPresence.bind(this),this.room.addListener(ce.XMPPEvents.SESSION_ACCEPT,this._updateRoomPresence),this.room.addListener(ce.XMPPEvents.SOURCE_ADD,this._updateRoomPresence),this.room.addListener(ce.XMPPEvents.SOURCE_ADD_ERROR,this._removeLocalSourceOnReject),this.room.addListener(ce.XMPPEvents.SOURCE_REMOVE,this._updateRoomPresence),(null===(e=r.e2eping)||void 0===e?void 0:e.enabled)&&(this.e2eping=new j.a(this,r,(function(e,n){try{t.sendMessage(e,n,!0)}catch(e){ve.warn("Failed to send E2E ping request or response.",e&&e.msg)}}))),this.rtc||(this.rtc=new y.a(this,n),this.eventManager.setupRTCListeners(),I.a.isSourceNameSignalingEnabled()&&this._registerRtcListeners(this.rtc)),this.receiveVideoController=new M.a(this,this.rtc),this.sendVideoController=new x.a(this,this.rtc),I.a.isSourceNameSignalingEnabled()||(this.participantConnectionStatus=new C.b(this.rtc,this,{p2pRtcMuteTimeout:r._p2pConnStatusRtcMuteTimeout,rtcMuteTimeout:r._peerConnStatusRtcMuteTimeout,outOfLastNTimeout:r._peerConnStatusOutOfLastNTimeout}),this.participantConnectionStatus.init());var o=!0;if(r.testing&&r.testing.callStatsThreshold&&(o=100*Math.random()<=r.testing.callStatsThreshold),this.statistics||(this.statistics=new H.a(this.xmpp,{aliasName:this._statsCurrentId,userName:r.statisticsDisplayName?r.statisticsDisplayName:this.myUserId(),confID:r.confID||"".concat(this.connection.options.hosts.domain,"/").concat(this.options.name),siteID:r.siteID,customScriptUrl:r.callStatsCustomScriptUrl,callStatsID:r.callStatsID,callStatsSecret:r.callStatsSecret,callStatsApplicationLogsDisabled:r.callStatsApplicationLogsDisabled,enableCallStats:o,roomName:this.options.name,applicationName:r.applicationName,getWiFiStatsMethod:r.getWiFiStatsMethod,configParams:r.callStatsConfigParams}),H.a.analytics.addPermanentProperties({callstats_name:this._statsCurrentId}),r.longTasksStatsInterval&&this.statistics.attachLongTasksStats(this)),this.eventManager.setupChatRoomListeners(),this.eventManager.setupStatisticsListeners(),r.enableTalkWhileMuted&&b.a.supportsVADDetection())if(r.createVADProcessor){ve.info("Using VAD detection for generating talk while muted events"),this._audioAnalyser||(this._audioAnalyser=new A.a(this,r.createVADProcessor));var a=new k.a;a.on(w.VAD_TALK_WHILE_MUTED,(function(){return t.eventEmitter.emit(d.TALK_WHILE_MUTED)})),this._audioAnalyser.addVADDetectionService(a)}else ve.warn("No VAD Processor was provided. Talk while muted detection service was not initialized!");if(r.enableNoisyMicDetection&&b.a.supportsVADDetection())if(r.createVADProcessor){this._audioAnalyser||(this._audioAnalyser=new A.a(this,r.createVADProcessor));var s=new R.a;s.on(w.VAD_NOISY_DEVICE,(function(){return t.eventEmitter.emit(d.NOISY_MIC)})),this._audioAnalyser.addVADDetectionService(s)}else ve.warn("No VAD Processor was provided. Noisy microphone detection service was not initialized!");r.enableNoAudioDetection&&(this._noAudioSignalDetection=new T.a(this),this._noAudioSignalDetection.on(w.NO_AUDIO_INPUT,(function(){t.eventEmitter.emit(d.NO_AUDIO_INPUT)})),this._noAudioSignalDetection.on(w.AUDIO_INPUT_STATE_CHANGE,(function(e){t.eventEmitter.emit(d.AUDIO_INPUT_STATE_CHANGE,e)}))),"channelLastN"in r&&this.setLastN(r.channelLastN),this.jvb121Status=new P.a(this),this.p2pDominantSpeakerDetection=new D.a(this),r&&r.deploymentInfo&&r.deploymentInfo.userRegion&&this.setLocalParticipantProperty("region",r.deploymentInfo.userRegion),this.setLocalParticipantProperty("codecType",this.codecSelection.getPreferredCodec()),r&&r.transcriptionLanguage&&"en-US"!==r.transcriptionLanguage&&this.setLocalParticipantProperty("transcription_language",r.transcriptionLanguage)},ge.prototype.join=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.room&&this.room.join(e,n).then((function(){return t._maybeSetSITimeout()}))},ge.prototype.authenticateAndUpgradeRole=function(e){return v.a.call(this,Object.assign(Object.assign({},e),{onCreateResource:ge.resourceCreator}))},ge.prototype.isJoined=function(){return this.room&&this.room.joined},ge.prototype.isP2PEnabled=function(){return Boolean(this.options.config.p2p&&this.options.config.p2p.enabled)||void 0===this.options.config.p2p},ge.prototype.isP2PTestModeEnabled=function(){return Boolean(this.options.config.testing&&this.options.config.testing.p2pTestMode)},ge.prototype.leave=function(){return me(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.participantConnectionStatus&&(this.participantConnectionStatus.dispose(),this.participantConnectionStatus=null),this.avgRtpStatsReporter&&(this.avgRtpStatsReporter.dispose(),this.avgRtpStatsReporter=null),this._audioOutputProblemDetector&&(this._audioOutputProblemDetector.dispose(),this._audioOutputProblemDetector=null),this.e2eping&&(this.e2eping.stop(),this.e2eping=null),this.getLocalTracks().forEach((function(e){return r.onLocalTrackRemoved(e)})),this.rtc.closeBridgeChannel(),this._sendConferenceLeftAnalyticsEvent(),this.statistics&&this.statistics.dispose(),this._delayedIceFailed&&this._delayedIceFailed.cancel(),this._maybeClearSITimeout(),this.jvbJingleSession&&(this.jvbJingleSession.close(),this.jvbJingleSession=null),this.p2pJingleSession&&(this.p2pJingleSession.close(),this.p2pJingleSession=null),this.room){e.next=14;break}throw new Error("The conference is has been already left");case 14:return(t=this.room).removeListener(ce.XMPPEvents.CONNECTION_INTERRUPTED,this._onIceConnectionInterrupted),t.removeListener(ce.XMPPEvents.CONNECTION_RESTORED,this._onIceConnectionRestored),t.removeListener(ce.XMPPEvents.CONNECTION_ESTABLISHED,this._onIceConnectionEstablished),t.removeListener(ce.XMPPEvents.CONFERENCE_PROPERTIES_CHANGED,this._updateProperties),t.removeListener(ce.XMPPEvents.MEETING_ID_SET,this._sendConferenceJoinAnalyticsEvent),t.removeListener(ce.XMPPEvents.SESSION_ACCEPT,this._updateRoomPresence),t.removeListener(ce.XMPPEvents.SOURCE_ADD,this._updateRoomPresence),t.removeListener(ce.XMPPEvents.SOURCE_ADD_ERROR,this._removeLocalSourceOnReject),t.removeListener(ce.XMPPEvents.SOURCE_REMOVE,this._updateRoomPresence),this.eventManager.removeXMPPListeners(),this._signalingLayer.setChatRoom(null),this.room=null,e.prev=27,e.next=30,t.leave();case 30:e.next=36;break;case 32:e.prev=32,e.t0=e.catch(27),n=e.t0,this.getParticipants().forEach((function(e){return r.onMemberLeft(e.getJid())}));case 36:if(this.rtc&&this.rtc.destroy(),!n){e.next=39;break}throw n;case 39:case"end":return e.stop()}}),e,this,[[27,32]])})))},ge.prototype.getActiveMediaSession=function(){return this.isP2PActive()?this.p2pJingleSession:this.jvbJingleSession},ge.prototype.getMediaSessions=function(){var e=[];return this.jvbJingleSession&&e.push(this.jvbJingleSession),this.p2pJingleSession&&e.push(this.p2pJingleSession),e},ge.prototype._registerRtcListeners=function(e){var t=this;e.addListener(ie.default.DATA_CHANNEL_OPEN,(function(){var e,n=fe(t.rtc.localTracks);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.isVideoTrack()&&t._sendBridgeVideoTypeMessage(r)}}catch(e){n.e(e)}finally{n.f()}}))},ge.prototype._sendBridgeVideoTypeMessage=function(e){var t=!e||e.isMuted()?ee.a.NONE:e.getVideoType();t===ee.a.DESKTOP&&this._desktopSharingFrameRate>_.a&&(t=ee.a.DESKTOP_HIGH_FPS),I.a.isSourceNameSignalingEnabled()&&e?this.rtc.sendSourceVideoType(e.getSourceName(),t):I.a.isSourceNameSignalingEnabled()||this.rtc.setVideoType(t)},ge.prototype.getName=function(){return this.options.name.toString()},ge.prototype.getConnection=function(){return this.connection},ge.prototype.isAuthEnabled=function(){return this.authEnabled},ge.prototype.isLoggedIn=function(){return Boolean(this.authIdentity)},ge.prototype.getAuthLogin=function(){return this.authIdentity},ge.prototype.isExternalAuthEnabled=function(){return this.room&&this.room.moderator.isExternalAuthEnabled()},ge.prototype.getExternalAuthUrl=function(e){var t=this;return new Promise((function(n,r){t.isExternalAuthEnabled()?e?t.room.moderator.getPopupLoginUrl(n,r):t.room.moderator.getLoginUrl(n,r):r()}))},ge.prototype.getLocalTracks=function(e){var t=[];return this.rtc&&(t=this.rtc.getLocalTracks(e)),t},ge.prototype.getLocalAudioTrack=function(){return this.rtc?this.rtc.getLocalAudioTrack():null},ge.prototype.getLocalVideoTrack=function(){return this.rtc?this.rtc.getLocalVideoTrack():null},ge.prototype.getLocalVideoTracks=function(){return this.rtc?this.rtc.getLocalVideoTracks():null},ge.prototype.getPerformanceStats=function(){return{longTasksStats:this.statistics.getLongTasksStats()}},ge.prototype.on=function(e,t){this.eventEmitter&&this.eventEmitter.on(e,t)},ge.prototype.off=function(e,t){this.eventEmitter&&this.eventEmitter.removeListener(e,t)},ge.prototype.addEventListener=ge.prototype.on,ge.prototype.removeEventListener=ge.prototype.off,ge.prototype.addCommandListener=function(e,t){this.room&&this.room.addPresenceListener(e,t)},ge.prototype.removeCommandListener=function(e,t){this.room&&this.room.removePresenceListener(e,t)},ge.prototype.sendTextMessage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body";this.room&&this.room.sendMessage(e,t)},ge.prototype.sendPrivateTextMessage=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"body";this.room&&this.room.sendPrivateMessage(e,t,n)},ge.prototype.sendCommand=function(e,t){this.room?this.room.addOrReplaceInPresence(e,t)&&this.room.sendPresence():ve.warn("Not sending a command, room not initialized.")},ge.prototype.sendCommandOnce=function(e,t){this.sendCommand(e,t),this.removeCommand(e)},ge.prototype.removeCommand=function(e){this.room&&this.room.removeFromPresence(e)},ge.prototype.setDisplayName=function(e){if(this.room){if(!e&&!this.room.getFromPresence("nick"))return;this.room.addOrReplaceInPresence("nick",{attributes:{xmlns:"http://jabber.org/protocol/nick"},value:e})&&this.room.sendPresence()}},ge.prototype.setSubject=function(e){this.room&&this.isModerator()?this.room.setSubject(e):ve.warn("Failed to set subject, ".concat(this.room?"":"not in a room, ").concat(this.isModerator()?"":"participant is not a moderator"))},ge.prototype.getTranscriber=function(){if(void 0===this.transcriber){this.transcriber=new G.a;var e,t=fe(this.getLocalTracks(re.a.AUDIO));try{for(t.s();!(e=t.n()).done;){var n=e.value;this.transcriber.addTrack(n)}}catch(e){t.e(e)}finally{t.f()}var r,i=fe(this.rtc.getRemoteTracks(re.a.AUDIO));try{for(i.s();!(r=i.n()).done;){var o=r.value;this.transcriber.addTrack(o)}}catch(e){i.e(e)}finally{i.f()}}return this.transcriber},ge.prototype.getTranscriptionStatus=function(){return this.room.transcriptionStatus},ge.prototype.addTrack=function(e){var t=this;if(e){e.isAudioTrack()&&this.options.config.startAudioMuted&&e.mute(),e.isVideoTrack()&&this.options.config.startVideoMuted&&e.mute();var n=e.getType(),r=this.rtc.getLocalTracks(n);if(r.length>0){if(e===r[0])return Promise.resolve(e);if(I.a.isMultiStreamSupportEnabled()&&n===re.a.VIDEO){var i=[];return this.p2pJingleSession&&i.push(this.p2pJingleSession.addTracks([e])),this.jvbJingleSession&&i.push(this.jvbJingleSession.addTracks([e])),Promise.all(i).then((function(){t._setupNewTrack(e),t._sendBridgeVideoTypeMessage(e),t._updateRoomPresence(t.getActiveMediaSession()),(t.isMutedByFocus||t.isVideoMutedByFocus)&&t._fireMuteChangeEvent(e)}))}return Promise.reject(new Error("Cannot add second ".concat(n," track to the conference")))}return this.replaceTrack(null,e).then((function(){e.getVideoType()===ae.VideoType.DESKTOP&&I.a.isMultiStreamSupportEnabled()&&t._updateRoomPresence(t.getActiveMediaSession())}))}},ge.prototype._fireAudioLevelChangeEvent=function(e,t){var n=this.getActivePeerConnection();t&&n!==t||this.eventEmitter.emit(d.TRACK_AUDIO_LEVEL_CHANGED,this.myUserId(),e)},ge.prototype._fireMuteChangeEvent=function(e){var t;if(this.isMutedByFocus&&e.isAudioTrack()&&!e.isMuted()?(this.isMutedByFocus=!1,this.room.muteParticipant(this.room.myroomjid,!1,re.a.AUDIO)):this.isVideoMutedByFocus&&e.isVideoTrack()&&!e.isMuted()&&(this.isVideoMutedByFocus=!1,this.room.muteParticipant(this.room.myroomjid,!1,re.a.VIDEO)),this.mutedByFocusActor&&e.isAudioTrack()){var n=c.Strophe.getResourceFromJid(this.mutedByFocusActor);t=this.participants[n]}else if(this.mutedVideoByFocusActor&&e.isVideoTrack()){var r=c.Strophe.getResourceFromJid(this.mutedVideoByFocusActor);t=this.participants[r]}e.isVideoTrack()&&!b.a.doesVideoMuteByStreamRemove()&&this._sendBridgeVideoTypeMessage(e),this.eventEmitter.emit(d.TRACK_MUTE_CHANGED,e,t)},ge.prototype._getInitialLocalTracks=function(){var e=this;return this.getLocalTracks().filter((function(t){var n=t.getType();return!(n!==re.a.AUDIO||e.isStartAudioMuted()&&!b.a.isWebKitBased()&&!b.a.isReactNative())||n===re.a.VIDEO&&!e.isStartVideoMuted()}))},ge.prototype.onLocalTrackRemoved=function(e){e.setConference(null),this.rtc.removeLocalTrack(e),e.removeEventListener(m.TRACK_MUTE_CHANGED,e.muteHandler),e.isAudioTrack()&&e.removeEventListener(m.TRACK_AUDIO_LEVEL_CHANGED,e.audioLevelHandler),e.isVideoTrack()&&e.videoType===ae.VideoType.DESKTOP&&this.statistics.sendScreenSharingEvent(!1),this.eventEmitter.emit(d.TRACK_REMOVED,e)},ge.prototype.removeTrack=function(e){return this.replaceTrack(e,null)},ge.prototype.replaceTrack=function(e,t){var n=this,r=null==e?void 0:e.getVideoType(),i=null==t?void 0:t.getVideoType();if(I.a.isMultiStreamSupportEnabled()&&e&&t&&r!==i)throw new Error("Replacing a track of videoType=".concat(r," with a track of videoType=").concat(i," is")+" not supported in this mode.");var o=this===(null==e?void 0:e.conference);return o&&e.disposed||(null==t?void 0:t.disposed)?Promise.reject(new h.a(p.TRACK_IS_DISPOSED)):(e&&!o&&ve.warn("JitsiConference.replaceTrack oldTrack (".concat(e," does not belong to this conference")),I.a.isMultiStreamSupportEnabled()&&e&&t&&e.isVideoTrack()&&t.setSourceName(e.getSourceName()),this._doReplaceTrack(o?e:null,t).then((function(){return o&&n.onLocalTrackRemoved(e),t&&n._setupNewTrack(t),(o&&(null==e?void 0:e.isVideoTrack())||(null==t?void 0:t.isVideoTrack()))&&n._sendBridgeVideoTypeMessage(t),o&&(null==e?void 0:e.isVideoTrack())&&!(null==e?void 0:e._setEffectInProgress)&&!(null==t?void 0:t._setEffectInProgress)&&n._updateRoomPresence(n.getActiveMediaSession()),null!==t&&(n.isMutedByFocus||n.isVideoMutedByFocus)&&n._fireMuteChangeEvent(t),Promise.resolve()})).catch((function(e){return ve.error("replaceTrack failed: ".concat(null==e?void 0:e.stack)),Promise.reject(e)})))},ge.prototype._doReplaceTrack=function(e,t){var n=[];return this.jvbJingleSession?n.push(this.jvbJingleSession.replaceTrack(e,t)):ve.info("_doReplaceTrack - no JVB JingleSession"),this.p2pJingleSession?n.push(this.p2pJingleSession.replaceTrack(e,t)):ve.info("_doReplaceTrack - no P2P JingleSession"),Promise.all(n)},ge.prototype._removeLocalSourceOnReject=function(e,t,n){if(e){ve.warn("Source-add rejected on ".concat(e,', reason="').concat(null==t?void 0:t.reason,'", message="').concat(null==t?void 0:t.msg,'"'));var r=this.getLocalTracks(n)[0];this.eventEmitter.emit(d.TRACK_UNMUTE_REJECTED,r)}},ge.prototype._setupNewTrack=function(e){var t,n=e.getType();if(e.isAudioTrack()||e.isVideoTrack()&&e.videoType!==ae.VideoType.DESKTOP){var r=y.a.getCurrentlyAvailableMediaDevices().find((function(t){return t.kind==="".concat(e.getTrack().kind,"input")&&t.label===e.getTrack().label}));r&&H.a.sendActiveDeviceListEvent(y.a.getEventDataForActiveDevice(r))}if(I.a.isSourceNameSignalingEnabled()&&!e.getSourceName()){var i=Object(oe.c)(this.myUserId(),n,null===(t=this.getLocalTracks(n))||void 0===t?void 0:t.length);e.setSourceName(i)}this.rtc.addLocalTrack(e),e.setConference(this),e.muteHandler=this._fireMuteChangeEvent.bind(this,e),e.addEventListener(m.TRACK_MUTE_CHANGED,e.muteHandler),e.isAudioTrack()&&(e.audioLevelHandler=this._fireAudioLevelChangeEvent.bind(this),e.addEventListener(m.TRACK_AUDIO_LEVEL_CHANGED,e.audioLevelHandler)),this.eventEmitter.emit(d.TRACK_ADDED,e)},ge.prototype._setNewVideoType=function(e){var t=!1;if(I.a.isSourceNameSignalingEnabled()&&e&&(t=this._signalingLayer.setTrackVideoType(e.getSourceName(),e.videoType)),!I.a.isMultiStreamSupportEnabled()){var n=e?e.videoType:ae.VideoType.CAMERA;if(n!==ae.VideoType.CAMERA||this.room.getFromPresence("videoType")){var r=this.room.addOrReplaceInPresence("videoType",{value:n});t=t||r}}return t},ge.prototype._setTrackMuteStatus=function(e,t,n){var r=!1;if(I.a.isSourceNameSignalingEnabled()&&t&&(r=this._signalingLayer.setTrackMuteStatus(t.getSourceName(),n)),!I.a.isMultiStreamSupportEnabled()){var i,o;if(!this.room)return!1;e===re.a.AUDIO?i=this.room.addAudioInfoToPresence(n):o=this.room.addVideoInfoToPresence(n),r=r||i||o}return r},ge.prototype._addLocalTrackAsUnmute=function(e){var t=[];return this.jvbJingleSession?t.push(this.jvbJingleSession.addTrackAsUnmute(e)):ve.debug("Add local MediaStream as unmute - no JVB Jingle session started yet"),this.p2pJingleSession?t.push(this.p2pJingleSession.addTrackAsUnmute(e)):ve.debug("Add local MediaStream as unmute - no P2P Jingle session started yet"),Promise.allSettled(t)},ge.prototype._removeLocalTrackAsMute=function(e){var t=[];return this.jvbJingleSession?t.push(this.jvbJingleSession.removeTrackAsMute(e)):ve.debug("Remove local MediaStream - no JVB JingleSession started yet"),this.p2pJingleSession?t.push(this.p2pJingleSession.removeTrackAsMute(e)):ve.debug("Remove local MediaStream - no P2P JingleSession started yet"),Promise.allSettled(t)},ge.prototype.getRole=function(){return this.room.role},ge.prototype.isHidden=function(){return this.connection?c.Strophe.getDomainFromJid(this.connection.getJid())===this.options.config.hiddenDomain:null},ge.prototype.isModerator=function(){return this.room?this.room.isModerator():null},ge.prototype.lock=function(e){var t=this;return this.isModerator()?new Promise((function(n,r){t.room.lockRoom(e||"",(function(){return n()}),(function(e){return r(e)}),(function(){return r(u.PASSWORD_NOT_SUPPORTED)}))})):Promise.reject(new Error("You are not moderator."))},ge.prototype.unlock=function(){return this.lock()},ge.prototype.selectParticipant=function(e){this.selectParticipants([e])},ge.prototype.selectParticipants=function(e){if(!Array.isArray(e))throw new Error("Invalid argument; participantIds must be an array.");this.receiveVideoController.selectEndpoints(e)},ge.prototype.getLastN=function(){return this.receiveVideoController.getLastN()},ge.prototype.getForwardedSources=function(){return this.rtc.getForwardedSources()},ge.prototype.setLastN=function(e){if(!Number.isInteger(e)&&!Number.parseInt(e,10))throw new Error("Invalid value for lastN: ".concat(e));var t=Number(e);if(t<-1)throw new RangeError("lastN cannot be smaller than -1");if(this.receiveVideoController.setLastN(t),this.p2pJingleSession){var n=0!==t;this.p2pJingleSession.setMediaTransferActive(!0,n).catch((function(e){ve.error("Failed to adjust video transfer status (".concat(n,")"),e)}))}},ge.prototype.isInLastN=function(e){return this.rtc.isInLastN(e)},ge.prototype.getParticipants=function(){return Object.values(this.participants)},ge.prototype.getParticipantsWithoutHidden=function(){var e=this.getParticipants().filter((function(e){return!e._hidden}));return e=e.filter((function(e){var t;return!(null===(t=null==e?void 0:e._properties)||void 0===t?void 0:t.features_jigasi)}))},ge.prototype.getParticipantCount=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getParticipants();return e||(t=t.filter((function(e){return!e.isHidden()}))),t.length+1},ge.prototype.getParticipantById=function(e){return this.participants[e]},ge.prototype.grantOwner=function(e){var t=this.getParticipantById(e);t&&this.room.setAffiliation(t.getConnectionJid(),"owner")},ge.prototype.revokeOwner=function(e){var t=this.getParticipantById(e),n=this.myUserId()===e,r=this.isMembersOnly()?"member":"none";n?this.room.setAffiliation(this.connection.getJid(),r):t&&this.room.setAffiliation(t.getConnectionJid(),r)},ge.prototype.kickParticipant=function(e,t){var n=this.getParticipantById(e);n&&this.room.kick(n.getJid(),t)},ge.prototype._maybeClearSITimeout=function(){this._sessionInitiateTimeout&&(this.jvbJingleSession||this.getParticipantCount()<2)&&(window.clearTimeout(this._sessionInitiateTimeout),this._sessionInitiateTimeout=null)},ge.prototype._maybeSetSITimeout=function(){var e=this;!this.jvbJingleSession&&this.getParticipantCount()>=2&&!this._sessionInitiateTimeout&&(this._sessionInitiateTimeout=window.setTimeout((function(){e._sessionInitiateTimeout=null,H.a.sendAnalytics(Object(se.F)(se.d,{p2p:!1,value:5e3}))}),5e3))},ge.prototype.muteParticipant=function(e,t){var n=t||re.a.AUDIO;if(n===re.a.AUDIO||n===re.a.VIDEO){var r=this.getParticipantById(e);r&&this.room.muteParticipant(r.getJid(),!0,n)}else ve.error("Unsupported media type: ".concat(n))},ge.prototype.onMemberJoined=function(e,t,n,r,i,o,a,s,u,l,h){var p=c.Strophe.getResourceFromJid(e);if("focus"!==p&&this.myUserId()!==p){var m=new f.a(e,this,t,r,i,o,a);m.setConnectionJid(u),m.setRole(n),m.setBotType(s),m.setFeatures(l),m.setIsReplacing(h),this.participants[p]=m,this.eventEmitter.emit(d.USER_JOINED,p,m),this._updateFeatures(m),this.isJoined()&&this._maybeStartOrStopP2P(),this._maybeSetSITimeout()}},ge.prototype._onMucJoined=function(){this._maybeStartOrStopP2P()},ge.prototype._updateFeatures=function(e){var t=this;e.getFeatures().then((function(n){e._supportsDTMF=n.has("urn:xmpp:jingle:dtmf:0"),t.updateDTMFSupport(),n.has(Q.c)&&e.setProperty("features_jigasi",!0),n.has(Q.b)&&e.setProperty("features_e2ee",!0)})).catch((function(){return!1}))},ge.prototype._onMemberBotTypeChanged=function(e,t){var n=this.getParticipants().find((function(t){return t.getJid()===e}));if(n){n.setBotType(t);var r=c.Strophe.getResourceFromJid(e);this.eventEmitter.emit(d.BOT_TYPE_CHANGED,r,t)}n.getBotType()||this._maybeStartOrStopP2P()},ge.prototype.onMemberLeft=function(e){var t=this,n=c.Strophe.getResourceFromJid(e);if("focus"!==n&&this.myUserId()!==n){var r,i=this.participants[n],o=[],a=fe(this.getMediaSessions());try{for(a.s();!(r=a.n()).done;){var s=r.value,u=s.peerconnection.getRemoteTracks(n);u&&(o=[].concat(de(o),de(u))),s.removeRemoteStreamsOnLeave(n)}}catch(e){a.e(e)}finally{a.f()}o.forEach((function(e){t.eventEmitter.emit(d.TRACK_REMOVED,e)})),i&&(delete this.participants[n],this.eventEmitter.emit(d.USER_LEFT,n,i)),null!==this.room&&(this._maybeStartOrStopP2P(!0),this._maybeClearSITimeout())}},ge.prototype.onMemberKicked=function(e,t,n,r,i){if(t!==this.myUserId()){var o=this.participants[t];if(e)return this.eventEmitter.emit(d.KICKED,o,r,i),void this.leave();var a=this.participants[n];a.setIsReplaced(i),this.eventEmitter.emit(d.PARTICIPANT_KICKED,o,a,r)}},ge.prototype.onLocalRoleChanged=function(e){this.eventEmitter.emit(d.USER_ROLE_CHANGED,this.myUserId(),e)},ge.prototype.onUserRoleChanged=function(e,t){var n=c.Strophe.getResourceFromJid(e),r=this.getParticipantById(n);r&&(r.setRole(t),this.eventEmitter.emit(d.USER_ROLE_CHANGED,n,t))},ge.prototype.onDisplayNameChanged=function(e,t){var n=c.Strophe.getResourceFromJid(e),r=this.getParticipantById(n);r&&r._displayName!==t&&(r._displayName=t,this.eventEmitter.emit(d.DISPLAY_NAME_CHANGED,n,t))},ge.prototype.onRemoteTrackAdded=function(e){var t=this;if(!e.isP2P||this.isP2PActive())if(e.isP2P||!this.isP2PActive()){var n=e.getParticipantId(),r=this.getParticipantById(n);if(r){r._tracks.push(e),this.transcriber&&this.transcriber.addTrack(e);var i=this.eventEmitter;e.addEventListener(m.TRACK_MUTE_CHANGED,(function(){return i.emit(d.TRACK_MUTE_CHANGED,e)})),e.isAudioTrack()&&e.addEventListener(m.TRACK_AUDIO_LEVEL_CHANGED,(function(e,r){t.getActivePeerConnection()===r&&i.emit(d.TRACK_AUDIO_LEVEL_CHANGED,n,e)})),i.emit(d.TRACK_ADDED,e)}else ve.error("No participant found for id: ".concat(n))}else ve.info("Trying to add remote JVB track, when in P2P - IGNORED");else ve.info("Trying to add remote P2P track, when not in P2P - IGNORED")},ge.prototype.onCallAccepted=function(e,t){this.p2pJingleSession===e&&(ve.info("P2P setAnswer"),this.p2pJingleSession.setAnswer(t),this.eventEmitter.emit(d._MEDIA_SESSION_STARTED,this.p2pJingleSession))},ge.prototype.onTransportInfo=function(e,t){this.p2pJingleSession===e&&(ve.info("P2P addIceCandidates"),this.p2pJingleSession.addIceCandidates(t))},ge.prototype.onRemoteTrackRemoved=function(e){var t=this;this.getParticipants().forEach((function(n){for(var r=n.getTracks(),i=0;i<r.length;i++)if(r[i]===e){n._tracks.splice(i,1),t.eventEmitter.emit(d.TRACK_REMOVED,e),t.transcriber&&t.transcriber.removeTrack(e);break}}),this)},ge.prototype._onIncomingCallP2P=function(e,t){var n,r,i=b.a.supportsUnifiedPlan()&&(!b.a.isChromiumBased()||null===(n=this.options.config.enableUnifiedOnChrome)||void 0===n||n),o=t.find(">content").attr("name");i!==("0"===o||"1"===o)?r={reason:"decline",reasonDescription:"P2P disabled",errorMsg:"P2P across two endpoints in different SDP modes is disabled"}:!this.isP2PEnabled()&&!this.isP2PTestModeEnabled()||b.a.isFirefox()||b.a.isWebKitBased()?r={reason:"decline",reasonDescription:"P2P disabled",errorMsg:"P2P mode disabled in the configuration or browser unsupported"}:this.p2pJingleSession?r={reason:"busy",reasonDescription:"P2P already in progress",errorMsg:'Duplicated P2P "session-initiate"'}:this._shouldBeInP2PMode()||(r={reason:"decline",reasonDescription:"P2P requirements not met",errorMsg:'Received P2P "session-initiate" when should not be in P2P mode'},H.a.sendAnalytics(Object(se.F)(se.h))),r?this._rejectIncomingCall(e,r):this._acceptP2PIncomingCall(e,t)},ge.prototype.onIncomingCall=function(e,t,n){if(e.isP2P)this._onIncomingCallP2P(e,t);else{if(!this.isFocus(e.remoteJid)){var r="Rejecting session-initiate from non-focus.";return void this._rejectIncomingCall(e,{reason:"security-error",reasonDescription:r,errorMsg:r})}this._acceptJvbIncomingCall(e,t,n)}},ge.prototype._acceptJvbIncomingCall=function(e,t,n){var r=this;this.jvbJingleSession=e,this.room.connectionTimes["session.initiate"]=n,this._sendConferenceJoinAnalyticsEvent(),this.wasStopped&&H.a.sendAnalyticsAndLog(Object(se.F)(se.a,{p2p:!1}));var i=$(t).find('>bridge-session[xmlns="http://jitsi.org/protocol/focus"]').attr("region");this.eventEmitter.emit(d.SERVER_REGION_CHANGED,i),this._maybeClearSITimeout(),H.a.sendAnalytics(Object(se.F)(se.c,{p2p:!1,value:n}));try{e.initialize(this.room,this.rtc,this._signalingLayer,Object.assign(Object.assign({},this.options.config),{enableInsertableStreams:this.isE2EEEnabled()}))}catch(e){return z.a.callErrorHandler(e),void ve.error(e)}this._setBridgeChannel(t,e.peerconnection);var o=this._getInitialLocalTracks();try{e.acceptOffer(t,(function(){r.isP2PActive()&&r.jvbJingleSession&&r._suspendMediaTransferForJvbConnection(),r.eventEmitter.emit(d._MEDIA_SESSION_STARTED,e),r.isP2PActive()||r.eventEmitter.emit(d._MEDIA_SESSION_ACTIVE_CHANGED,e)}),(function(e){z.a.callErrorHandler(e),ve.error("Failed to accept incoming Jingle session",e)}),o),this._desktopSharingFrameRate&&e.peerconnection.setDesktopSharingFrameRate(this._desktopSharingFrameRate),ve.info("Starting CallStats for JVB connection..."),this.statistics.startCallStats(this.jvbJingleSession.peerconnection,"jitsi"),this.statistics.startRemoteStats(this.jvbJingleSession.peerconnection)}catch(e){z.a.callErrorHandler(e),ve.error(e)}},ge.prototype._setBridgeChannel=function(e,t){var n=null,r=$(e).find(">content>transport>web-socket").first();1===r.length&&(n=r[0].getAttribute("url")),n?this.rtc.initializeBridgeChannel(null,n):this.rtc.initializeBridgeChannel(t,null)},ge.prototype._rejectIncomingCall=function(e,t){t&&t.errorMsg&&z.a.callErrorHandler(new Error(t.errorMsg)),e.terminate(null,(function(e){ve.warn("An error occurred while trying to terminate invalid Jingle session",e)}),{reason:t&&t.reason,reasonDescription:t&&t.reasonDescription,sendSessionTerminate:!0})},ge.prototype.onCallEnded=function(e,t,n){if(ve.info("Call ended: ".concat(t," - ").concat(n," P2P ?").concat(e.isP2P)),e===this.jvbJingleSession)this.wasStopped=!0,H.a.sendAnalytics(Object(se.F)(se.e,{p2p:!1})),this.statistics&&(this.statistics.stopRemoteStats(this.jvbJingleSession.peerconnection),ve.info("Stopping JVB CallStats"),this.statistics.stopCallStats(this.jvbJingleSession.peerconnection)),this.jvbJingleSession=null,this.rtc.onCallEnded();else if(e===this.p2pJingleSession){var r={};"decline"===t&&"force JVB121"===n?(ve.info("In forced JVB 121 mode..."),H.a.analytics.addPermanentProperties({forceJvb121:!0})):"connectivity-error"===t&&"ICE FAILED"===n?H.a.analytics.addPermanentProperties({p2pFailed:!0}):"success"===t&&"restart"===n&&(r.requestRestart=!0),this._stopP2PSession(r)}else ve.error("Received onCallEnded for invalid session",e.sid,e.remoteJid,t,n)},ge.prototype.onSuspendDetected=function(e){e.isP2P||(this.leave(),this.eventEmitter.emit(d.SUSPEND_DETECTED))},ge.prototype.updateDTMFSupport=function(){for(var e=!1,t=this.getParticipants(),n=0;n<t.length;n+=1)if(t[n].supportsDTMF()){e=!0;break}e!==this.somebodySupportsDTMF&&(this.somebodySupportsDTMF=e,this.eventEmitter.emit(d.DTMF_SUPPORT_CHANGED,e))},ge.prototype.isDTMFSupported=function(){return this.somebodySupportsDTMF},ge.prototype.myUserId=function(){return this.room&&this.room.myroomjid?c.Strophe.getResourceFromJid(this.room.myroomjid):null},ge.prototype.sendTones=function(e,t,n){var r=this.getActivePeerConnection();r?r.sendTones(e,t,n):ve.warn("cannot sendTones: no peer connection")},ge.prototype.startRecording=function(e){return this.room?this.recordingManager.startRecording(e):Promise.reject(new Error("The conference is not created yet!"))},ge.prototype.stopRecording=function(e){return this.room?this.recordingManager.stopRecording(e):Promise.reject(new Error("The conference is not created yet!"))},ge.prototype.isSIPCallingSupported=function(){return!!this.room&&this.room.isSIPCallingSupported()},ge.prototype.dial=function(e){return this.room?this.room.dial(e):new Promise((function(e,t){t(new Error("The conference is not created yet!"))}))},ge.prototype.hangup=function(){return this.room?this.room.hangup():new Promise((function(e,t){t(new Error("The conference is not created yet!"))}))},ge.prototype.startTranscriber=function(){return this.dial("jitsi_meet_transcribe")},ge.prototype.stopTranscriber=ge.prototype.hangup,ge.prototype.getPhoneNumber=function(){return this.room?this.room.getPhoneNumber():null},ge.prototype.getPhonePin=function(){return this.room?this.room.getPhonePin():null},ge.prototype.getMeetingUniqueId=function(){if(this.room)return this.room.getMeetingId()},ge.prototype.getActivePeerConnection=function(){var e=this.isP2PActive()?this.p2pJingleSession:this.jvbJingleSession;return e?e.peerconnection:null},ge.prototype.getConnectionState=function(){var e=this.getActivePeerConnection();return e?e.getConnectionState():null},ge.prototype.setStartMutedPolicy=function(e){this.isModerator()?(this.startMutedPolicy=e,this.room.addOrReplaceInPresence("startmuted",{attributes:{audio:e.audio,video:e.video,xmlns:"http://jitsi.org/jitmeet/start-muted"}})&&this.room.sendPresence()):ve.warn("Failed to set start muted policy, ".concat(this.room?"":"not in a room, ").concat(this.isModerator()?"":"participant is not a moderator"))},ge.prototype.getStartMutedPolicy=function(){return this.startMutedPolicy},ge.prototype.isStartAudioMuted=function(){return this.startAudioMuted},ge.prototype.isStartVideoMuted=function(){return this.startVideoMuted},ge.prototype.getConnectionTimes=function(){return this.room.connectionTimes},ge.prototype.setLocalParticipantProperty=function(e,t){this.sendCommand("jitsi_participant_".concat(e),{value:t})},ge.prototype.removeLocalParticipantProperty=function(e){this.removeCommand("jitsi_participant_".concat(e)),this.room.sendPresence()},ge.prototype.getLocalParticipantProperty=function(e){var t=this.room.presMap.nodes.find((function(t){return t.tagName==="jitsi_participant_".concat(e)}));return t?t.value:void 0},ge.prototype.sendFeedback=function(e,t){return this.statistics.sendFeedback(e,t)},ge.prototype.isCallstatsEnabled=function(){return this.statistics.isCallstatsEnabled()},ge.prototype.getSsrcByTrack=function(e){var t;return e.isLocal()?null===(t=this.getActivePeerConnection())||void 0===t?void 0:t.getLocalSSRC(e):e.getSSRC()},ge.prototype._onTrackAttach=function(e,t){var n=e.isLocal(),r=null,i=e.isP2P,o=i?e.getParticipantId():"jitsi",a=i?this.p2pJingleSession&&this.p2pJingleSession.peerconnection:this.jvbJingleSession&&this.jvbJingleSession.peerconnection;n?a&&(r=a.getLocalSSRC(e)):r=e.getSSRC(),t.id&&r&&a&&this.statistics.associateStreamWithVideoTag(a,r,n,o,e.getUsageLabel(),t.id)},ge.prototype.sendApplicationLog=function(e){H.a.sendLog(e)},ge.prototype.isFocus=function(e){return this.room?this.room.isFocus(e):null},ge.prototype._fireIncompatibleVersionsEvent=function(){this.eventEmitter.emit(d.CONFERENCE_FAILED,u.INCOMPATIBLE_SERVER_VERSIONS)},ge.prototype.sendEndpointMessage=function(e,t){this.rtc.sendChannelMessage(e,t)},ge.prototype.sendEndpointStatsMessage=function(e){this.rtc.sendEndpointStatsMessage(e)},ge.prototype.broadcastEndpointMessage=function(e){this.sendEndpointMessage("",e)},ge.prototype.sendMessage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=le(e);if("object"===r||!n&&"string"===r)if(n)this.sendEndpointMessage(t,e);else{var i=e,o="body";if("object"===r){o="json-message",i.hasOwnProperty(Q.d)||(i[Q.d]="");try{i=JSON.stringify(i)}catch(e){return void ve.error("Can not send a message, stringify failed: ",e)}}t?this.sendPrivateTextMessage(t,i,o):this.sendTextMessage(i,o)}else ve.error("Can not send a message of type ".concat(r))},ge.prototype.isConnectionInterrupted=function(){return this.isP2PActive()?this.isP2PConnectionInterrupted:this.isJvbConnectionInterrupted},ge.prototype._onConferenceRestarted=function(e){!e.isP2P&&this.options.config.enableForcedReload&&this.eventEmitter.emit(d.CONFERENCE_FAILED,u.CONFERENCE_RESTARTED)},ge.prototype._onIceConnectionInterrupted=function(e){e.isP2P?this.isP2PConnectionInterrupted=!0:this.isJvbConnectionInterrupted=!0,e.isP2P===this.isP2PActive()&&this.eventEmitter.emit(d.CONNECTION_INTERRUPTED)},ge.prototype._onIceConnectionFailed=function(e){e.isP2P?(H.a.analytics.addPermanentProperties({p2pFailed:!0}),this.p2pJingleSession&&H.a.sendAnalyticsAndLog(Object(se.H)(se.j,{initiator:this.p2pJingleSession.isInitiator})),this._stopP2PSession({reason:"connectivity-error",reasonDescription:"ICE FAILED"})):e&&this.jvbJingleSession===e&&(this._delayedIceFailed=new S.a(this),this._delayedIceFailed.start(e))},ge.prototype._onIceConnectionRestored=function(e){e.isP2P?this.isP2PConnectionInterrupted=!1:(this.isJvbConnectionInterrupted=!1,this._delayedIceFailed&&this._delayedIceFailed.cancel()),e.isP2P===this.isP2PActive()&&this.eventEmitter.emit(d.CONNECTION_RESTORED)},ge.prototype._acceptP2PIncomingCall=function(e,t){var n=this;this.isP2PConnectionInterrupted=!1,this.p2pJingleSession=e,this._sendConferenceJoinAnalyticsEvent(),this.p2pJingleSession.initialize(this.room,this.rtc,this._signalingLayer,Object.assign(Object.assign({},this.options.config),{enableInsertableStreams:this.isE2EEEnabled()})),ve.info("Starting CallStats for P2P connection...");var r=c.Strophe.getResourceFromJid(this.p2pJingleSession.remoteJid),i=this.participants[r];i&&(r=i.getStatsID()||r),this.statistics.startCallStats(this.p2pJingleSession.peerconnection,r);var o=this.getLocalTracks();this.p2pJingleSession.acceptOffer(t,(function(){ve.debug('Got RESULT for P2P "session-accept"'),n.eventEmitter.emit(d._MEDIA_SESSION_STARTED,e)}),(function(e){ve.error("Failed to accept incoming P2P Jingle session",e)}),o)},ge.prototype._addRemoteJVBTracks=function(){this._addRemoteTracks("JVB",this.jvbJingleSession.peerconnection.getRemoteTracks())},ge.prototype._addRemoteP2PTracks=function(){this._addRemoteTracks("P2P",this.p2pJingleSession.peerconnection.getRemoteTracks())},ge.prototype._addRemoteTracks=function(e,t){var n,r=fe(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;ve.info("Adding remote ".concat(e," track: ").concat(i)),this.onRemoteTrackAdded(i)}}catch(e){r.e(e)}finally{r.f()}},ge.prototype._onIceConnectionEstablished=function(e){null!==this.p2pJingleSession&&(this.p2pEstablishmentDuration=this.p2pJingleSession.establishmentDuration),null!==this.jvbJingleSession&&(this.jvbEstablishmentDuration=this.jvbJingleSession.establishmentDuration);var t=!1,n=this.options.config.forceJVB121Ratio;if(e.isP2P?this.p2pJingleSession!==e?(ve.error("CONNECTION_ESTABLISHED - wrong P2P session instance ?!"),t=!0):!e.isInitiator&&"number"==typeof n&&Math.random()<n&&(ve.info("Forcing JVB 121 mode (ratio=".concat(n,")...")),H.a.analytics.addPermanentProperties({forceJvb121:!0}),this._stopP2PSession({reason:"decline",reasonDescription:"force JVB121"}),t=!0):t=!0,!isNaN(this.p2pEstablishmentDuration)&&!isNaN(this.jvbEstablishmentDuration)){var r=this.p2pEstablishmentDuration-this.jvbEstablishmentDuration;H.a.sendAnalytics(se.p,{value:r})}e.isP2P===this.isP2PActive()&&this.eventEmitter.emit(d.CONNECTION_ESTABLISHED),t||(this._setP2PStatus(!0),this.jvbJingleSession?this._removeRemoteJVBTracks():ve.info("Not removing remote JVB tracks - no session yet"),this._addRemoteP2PTracks(),this.jvbJingleSession&&this._suspendMediaTransferForJvbConnection(),ve.info("Starting remote stats with p2p connection"),this.statistics.startRemoteStats(this.p2pJingleSession.peerconnection),H.a.sendAnalyticsAndLog(Object(se.H)(se.i,{initiator:this.p2pJingleSession.isInitiator})))},ge.prototype._updateProperties=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!s()(e,this.properties);if(this.properties=e,t){this.eventEmitter.emit(d.PROPERTIES_CHANGED,this.properties);var n="true"===this.properties["audio-limit-reached"],r="true"===this.properties["video-limit-reached"];this._audioSenderLimitReached!==n&&(this._audioSenderLimitReached=n,this.eventEmitter.emit(d.AUDIO_UNMUTE_PERMISSIONS_CHANGED,n),ve.info("Audio unmute permissions set by Jicofo to ".concat(n))),this._videoSenderLimitReached!==r&&(this._videoSenderLimitReached=r,this.eventEmitter.emit(d.VIDEO_UNMUTE_PERMISSIONS_CHANGED,r),ve.info("Video unmute permissions set by Jicofo to ".concat(r)));var i=["bridge-count","created-ms"];i.forEach((function(t){void 0!==e[t]&&H.a.analytics.addPermanentProperties(ue({},t.replace("-","_"),e[t]))}))}},ge.prototype.getProperty=function(e){return this.properties[e]},ge.prototype._maybeClearDeferredStartP2P=function(){this.deferredStartP2PTask&&(ve.info("Cleared deferred start P2P task"),clearTimeout(this.deferredStartP2PTask),this.deferredStartP2PTask=null)},ge.prototype._removeRemoteJVBTracks=function(){this._removeRemoteTracks("JVB",this.jvbJingleSession.peerconnection.getRemoteTracks())},ge.prototype._removeRemoteP2PTracks=function(){this._removeRemoteTracks("P2P",this.p2pJingleSession.peerconnection.getRemoteTracks())},ge.prototype._removeRemoteTracks=function(e,t){var n,r=fe(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;ve.info("Removing remote ".concat(e," track: ").concat(i)),this.onRemoteTrackRemoved(i)}}catch(e){r.e(e)}finally{r.f()}},ge.prototype._resumeMediaTransferForJvbConnection=function(){ve.info("Resuming media transfer over the JVB connection..."),this.jvbJingleSession.setMediaTransferActive(!0,!0).then((function(){ve.info("Resumed media transfer over the JVB connection!")}),(function(e){ve.error("Failed to resume media transfer over the JVB connection:",e)}))},ge.prototype._setP2PStatus=function(e){if(this.p2p!==e){if(this.p2p=e,e){ve.info("Peer to peer connection established!"),H.a.analytics.addPermanentProperties({p2pFailed:!1,forceJvb121:!1});var t=0!==this.getLastN();this.p2pJingleSession.setMediaTransferActive(!0,t).catch((function(e){ve.error("Failed to sync up P2P video transfer status"+"(".concat(t,")"),e)}))}else ve.info("Peer to peer connection closed!");this.jvbJingleSession&&this.statistics.sendConnectionResumeOrHoldEvent(this.jvbJingleSession.peerconnection,!e),this.dtmfManager=null,this.eventEmitter.emit(d.P2P_STATUS,this,this.p2p),this.eventEmitter.emit(d._MEDIA_SESSION_ACTIVE_CHANGED,this.getActiveMediaSession()),this.eventEmitter.emit(this.isConnectionInterrupted()?d.CONNECTION_INTERRUPTED:d.CONNECTION_RESTORED)}else ve.debug("Called _setP2PStatus with the same status: ".concat(e))},ge.prototype._startP2PSession=function(e){if(this._maybeClearDeferredStartP2P(),this.p2pJingleSession)ve.error("P2P session already started!");else{this.isP2PConnectionInterrupted=!1,this.p2pJingleSession=this.xmpp.connection.jingle.newP2PJingleSession(this.room.myroomjid,e),ve.info("Created new P2P JingleSession",this.room.myroomjid,e),this._sendConferenceJoinAnalyticsEvent(),this.p2pJingleSession.initialize(this.room,this.rtc,this._signalingLayer,Object.assign(Object.assign({},this.options.config),{enableInsertableStreams:this.isE2EEEnabled()})),ve.info("Starting CallStats for P2P connection...");var t=c.Strophe.getResourceFromJid(this.p2pJingleSession.remoteJid),n=this.participants[t];n&&(t=n.getStatsID()||t),this.statistics.startCallStats(this.p2pJingleSession.peerconnection,t);var r=this.getLocalTracks();this.p2pJingleSession.invite(r)}},ge.prototype._suspendMediaTransferForJvbConnection=function(){ve.info("Suspending media transfer over the JVB connection..."),this.jvbJingleSession.setMediaTransferActive(!1,!1).then((function(){ve.info("Suspended media transfer over the JVB connection !")}),(function(e){ve.error("Failed to suspend media transfer over the JVB connection:",e)}))},ge.prototype._maybeStartOrStopP2P=function(e){if(!this.isP2PEnabled()||this.isP2PTestModeEnabled()||b.a.isFirefox()||b.a.isWebKitBased()||this.isE2EEEnabled())ve.info("Auto P2P disabled");else{var t=this.getParticipants(),n=t.length,r=this._shouldBeInP2PMode();if(!r&&this.deferredStartP2PTask&&this._maybeClearDeferredStartP2P(),!this.p2pJingleSession&&r){var i=n&&t[0],o=this.myUserId(),a=i.getId();if(o>a)return void ve.debug("I'm the bigger peersId - the other peer should start P2P",o,a);if(o===a)return void ve.error("The same IDs ? ",o,a);var s=i.getJid();if(e){if(this.deferredStartP2PTask)return void ve.error("Deferred start P2P task's been set already!");ve.info("Will start P2P with: ".concat(s," after ").concat(this.backToP2PDelay," seconds...")),this.deferredStartP2PTask=setTimeout(this._startP2PSession.bind(this,s),1e3*this.backToP2PDelay)}else ve.info("Will start P2P with: ".concat(s)),this._startP2PSession(s)}else this.p2pJingleSession&&!r&&(ve.info("Will stop P2P with: ".concat(this.p2pJingleSession.remoteJid)),this.p2pJingleSession.isInitiator&&n>1&&H.a.sendAnalyticsAndLog(Object(se.H)(se.k)),this._stopP2PSession())}},ge.prototype._shouldBeInP2PMode=function(){var e=this.getParticipants(),t=e.length,n=void 0!==e.find((function(e){return"poltergeist"===e.getBotType()||e.hasFeature(Q.c)})),r=1===t&&!n;return ve.debug("P2P? peerCount: ".concat(t,", hasBotPeer: ").concat(n," => ").concat(r)),r},ge.prototype._stopP2PSession=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.reason,n=void 0===t?"success":t,r=e.reasonDescription,i=void 0===r?"Turning off P2P session":r,o=e.requestRestart,a=void 0!==o&&o;if(this.p2pJingleSession){var s=this.isP2PActive();s&&(this.jvbJingleSession&&!a&&this._resumeMediaTransferForJvbConnection(),this._removeRemoteP2PTracks()),ve.info("Stopping remote stats for P2P connection"),this.statistics.stopRemoteStats(this.p2pJingleSession.peerconnection),ve.info("Stopping CallStats for P2P connection"),this.statistics.stopCallStats(this.p2pJingleSession.peerconnection),this.p2pJingleSession.terminate((function(){ve.info("P2P session terminate RESULT")}),(function(e){"success"!==n&&ve.error("An error occurred while trying to terminate P2P Jingle session",e)}),{reason:n,reasonDescription:i,sendSessionTerminate:this.room&&this.getParticipantById(c.Strophe.getResourceFromJid(this.p2pJingleSession.remoteJid))}),this.p2pJingleSession=null,this._setP2PStatus(!1),s&&(this.jvbJingleSession&&!a?this._addRemoteJVBTracks():ve.info("Not adding remote JVB tracks - no session yet"))}else ve.error("No P2P session to be stopped!")},ge.prototype._updateRoomPresence=function(e,t){if(e){if(t){if(t.skip)return;t.skip=!0}var n,r,i,o,a,s=!1,c=this.getLocalTracks(),u=e.peerconnection.getLocalTracks(re.a.AUDIO),l=e.peerconnection.getLocalTracks(re.a.VIDEO),d=fe(c);try{for(d.s();!(i=d.n()).done;){var f=i.value;n=this._setTrackMuteStatus(f.getType(),f,f.isMuted()),f.getType()===re.a.VIDEO&&(r=this._setNewVideoType(f)),s=n||r}}catch(e){d.e(e)}finally{d.f()}if(!I.a.isMultiStreamSupportEnabled())(null==u?void 0:u.length)||(o=this._setTrackMuteStatus(re.a.AUDIO,void 0,!0)),(null==l?void 0:l.length)||(a=this._setTrackMuteStatus(re.a.VIDEO,void 0,!0),r=this._setNewVideoType()),s=s||o||a||r;s&&this.room.sendPresence()}},ge.prototype.isP2PActive=function(){return this.p2p},ge.prototype.getP2PConnectionState=function(){return this.isP2PActive()?this.p2pJingleSession.peerconnection.getConnectionState():null},ge.prototype.setDesktopSharingFrameRate=function(e){return"number"!=typeof e||isNaN(e)?(ve.error("Invalid value ".concat(e," specified for desktop capture frame rate")),!1):(this._desktopSharingFrameRate=e,this.jvbJingleSession&&this.jvbJingleSession.peerconnection.setDesktopSharingFrameRate(e),this.rtc.setDesktopSharingFrameRate(e),!0)},ge.prototype.startP2PSession=function(){var e=this.getParticipants();if(1!==e.length)throw new Error("There must be exactly 1 participant to start the P2P session !");var t=e[0].getJid();this._startP2PSession(t)},ge.prototype.stopP2PSession=function(e){this._stopP2PSession(e)},ge.prototype.getSpeakerStats=function(){return this.speakerStatsCollector.getStats()},ge.prototype.sendFaceLandmarks=function(e){e.faceExpression&&this.xmpp.sendFaceExpressionEvent(this.room.roomjid,e)},ge.prototype.setReceiverConstraints=function(e){this.receiveVideoController.setReceiverConstraints(e)},ge.prototype.setReceiverVideoConstraint=function(e){this.receiveVideoController.setPreferredReceiveMaxFrameHeight(e)},ge.prototype.setSenderVideoConstraint=function(e){return this.sendVideoController.setPreferredSendMaxFrameHeight(e)},ge.prototype.createVideoSIPGWSession=function(e,t){return this.room?this.videoSIPGWHandler.createVideoSIPGWSession(e,t):new Error(q.ERROR_NO_CONNECTION)},ge.prototype._sendConferenceJoinAnalyticsEvent=function(){var e=this.getMeetingUniqueId();!this._conferenceJoinAnalyticsEventSent&&e&&null!==this.getActivePeerConnection()&&(H.a.sendAnalytics(Object(se.A)("joined",{meetingId:e,participantId:"".concat(e,".").concat(this._statsCurrentId)})),this._conferenceJoinAnalyticsEventSent=Date.now())},ge.prototype._sendConferenceLeftAnalyticsEvent=function(){var e=this.getMeetingUniqueId();e&&this._conferenceJoinAnalyticsEventSent&&H.a.sendAnalytics(Object(se.A)("left",{meetingId:e,participantId:"".concat(e,".").concat(this._statsCurrentId),stats:{duration:Math.floor((Date.now()-this._conferenceJoinAnalyticsEventSent)/1e3),perf:this.getPerformanceStats()}}))},ge.prototype._restartMediaSessions=function(){this.p2pJingleSession&&this._stopP2PSession({reasonDescription:"restart",requestRestart:!0}),this.jvbJingleSession&&this.jvbJingleSession.terminate(null,(function(e){ve.warn("An error occurred while trying to terminate the JVB session",e)}),{reason:"success",reasonDescription:"restart required",requestRestart:!0,sendSessionTerminate:!0}),this._maybeStartOrStopP2P(!1)},ge.prototype.isE2EEEnabled=function(){return Boolean(this._e2eEncryption&&this._e2eEncryption.isEnabled())},ge.prototype.isE2EESupported=function(){return O.a.isSupported(this.options.config)},ge.prototype.toggleE2EE=function(e){this.isE2EESupported()?this._e2eEncryption.setEnabled(e):ve.warn("Cannot enable / disable E2EE: platform is not supported.")},ge.prototype.setMediaEncryptionKey=function(e){this._e2eEncryption.setEncryptionKey(e)},ge.prototype.isLobbySupported=function(){return Boolean(this.room&&this.room.getLobby().isSupported())},ge.prototype.isMembersOnly=function(){return Boolean(this.room&&this.room.membersOnlyEnabled)},ge.prototype.enableLobby=function(){return this.room&&this.isModerator()?this.room.getLobby().enable():Promise.reject(new Error("The conference not started or user is not moderator"))},ge.prototype.disableLobby=function(){this.room&&this.isModerator()?this.room.getLobby().disable():ve.warn("Failed to disable lobby, ".concat(this.room?"":"not in a room, ").concat(this.isModerator()?"":"participant is not a moderator"))},ge.prototype.joinLobby=function(e,t){return this.room?this.room.getLobby().join(e,t):Promise.reject(new Error("The conference not started"))},ge.prototype.myLobbyUserId=function(){if(this.room)return this.room.getLobby().getLocalId()},ge.prototype.sendLobbyMessage=function(e,t){if(this.room)return t?this.room.getLobby().sendPrivateMessage(t,e):this.room.getLobby().sendMessage(e)},ge.prototype.addLobbyMessageListener=function(e){if(this.room)return this.room.getLobby().addMessageListener(e)},ge.prototype.removeLobbyMessageHandler=function(e){if(this.room)return this.room.getLobby().removeMessageHandler(e)},ge.prototype.lobbyDenyAccess=function(e){this.room&&this.room.getLobby().denyAccess(e)},ge.prototype.lobbyApproveAccess=function(e){this.room&&this.room.getLobby().approveAccess(e)},ge.prototype.isAVModerationSupported=function(){return Boolean(this.room&&this.room.getAVModeration().isSupported())},ge.prototype.enableAVModeration=function(e){this.room&&this.isModerator()&&(e===re.a.AUDIO||e===re.a.VIDEO)?this.room.getAVModeration().enable(!0,e):ve.warn("Failed to enable AV moderation, ".concat(this.room?"":"not in a room, ").concat(this.isModerator()?"":"participant is not a moderator, ").concat(this.room&&this.isModerator()?"wrong media type passed":""))},ge.prototype.disableAVModeration=function(e){this.room&&this.isModerator()&&(e===re.a.AUDIO||e===re.a.VIDEO)?this.room.getAVModeration().enable(!1,e):ve.warn("Failed to disable AV moderation, ".concat(this.room?"":"not in a room, ").concat(this.isModerator()?"":"participant is not a moderator, ").concat(this.room&&this.isModerator()?"wrong media type passed":""))},ge.prototype.avModerationApprove=function(e,t){if(this.room&&this.isModerator()&&(e===re.a.AUDIO||e===re.a.VIDEO)){var n=this.getParticipantById(t);if(!n)return;this.room.getAVModeration().approve(e,n.getJid())}else ve.warn("AV moderation approve skipped , ".concat(this.room?"":"not in a room, ").concat(this.isModerator()?"":"participant is not a moderator, ").concat(this.room&&this.isModerator()?"wrong media type passed":""))},ge.prototype.avModerationReject=function(e,t){if(this.room&&this.isModerator()&&(e===re.a.AUDIO||e===re.a.VIDEO)){var n=this.getParticipantById(t);if(!n)return;this.room.getAVModeration().reject(e,n.getJid())}else ve.warn("AV moderation reject skipped , ".concat(this.room?"":"not in a room, ").concat(this.isModerator()?"":"participant is not a moderator, ").concat(this.room&&this.isModerator()?"wrong media type passed":""))},ge.prototype.getBreakoutRooms=function(){var e;return null===(e=this.room)||void 0===e?void 0:e.getBreakoutRooms()},ge.prototype.getLocalUser=function(){if(this.user)return this.user},ge.prototype.terminate=function(){this.sendCommand("terminate",{})},ge.prototype.handleSubtitles=function(){var e=this,t={};this.on(d.ENDPOINT_MESSAGE_RECEIVED,(function(n,r){var i,o,a,s,c,u;if(r&&("transcription-result"===r.type||"translation-result"===r.type)){var l=e.getLocalParticipantProperty("translation_language");try{var f=r.message_id,h=r.participant.name,p={transcriptMessageID:f};if("translation-result"===r.type&&r.language===l)p.final=r.text,p.participantName=h;else if("transcription-result"===r.type&&!l){var m=r.transcript[0].text;t.transcriptMessageID===f?p=t:p.participantName=h,r.is_interim?r.stability>.85?(p.stable=m,p.unstable=void 0):p.unstable=m:p.final=m}var v="";if(p.final)v=p.final;else v=(p.stable||"")+(p.unstable||"");var g=(null===(s=null===(a=null===(o=e.participants[null===(i=null==r?void 0:r.participant)||void 0===i?void 0:i.id])||void 0===o?void 0:o._identity)||void 0===a?void 0:a.user)||void 0===s?void 0:s.name)||(null===(c=null==e?void 0:e.getLocalUser())||void 0===c?void 0:c.name);e.eventEmitter.emit(d.SUBTITLES_RECEIVED,null===(u=null==r?void 0:r.participant)||void 0===u?void 0:u.id,g,v)}catch(e){ve.error("Error occurred while updating transcriptions\n",e)}}}))},ge.prototype.enableAnalytics=function(){var e=this;this.statistics.addAnalyticsEventListener((function(t,n){var r="",i={};"string"==typeof t?(r=t,i=n):"object"===le(t)&&(r=t.name,i=t);var o={name:r,action:i.action?i.action:"",actionSubject:i.actionSubject?i.actionSubject:"",source:i.source?i.source:"",attributes:JSON.stringify(n)};e.eventEmitter.emit(d.ANALYTICS_EVENT_RECEIVED,o)}))},ge.prototype.startLocalRecording=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ogg";this.recordingController.startRecording(e)},ge.prototype.stopLocalRecording=function(){this.recordingController.stopRecording()},ge.prototype.switchFormat=function(){this.recordingController.switchFormat(format)},ge.prototype.setMuted=function(e){this.recordingController.setMuted(e)},ge.prototype.setMicDevice=function(e){this.recordingController.setMicDevice(e)},ge.prototype.startSIPVideoCall=function(e,t){if(!this.sessions[e]){var n=this.createVideoSIPGWSession(e,t);this.sessions[e]=n,n.start()}},ge.prototype.stopSIPVideoCall=function(e){this.sessions[e]&&(this.sessions[e].stop(),delete this.sessions[e])}}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return _}));var r=n(4),i=n(2),o=n(30),a=n(1),s=n(102),c=n(8),u=n(311),l=n.n(u),d=n(3),f=n(9),h=n(18),p=n(222),m=n.n(p),v=n(11),g=n(0),y=Object(r.getLogger)(e);function _(e){this.conference=e,this.xmppListeners={},e.on(a.TRACK_MUTE_CHANGED,(function(t){if(t.isLocal()&&e.statistics){var n=t.isP2P?e.p2pJingleSession:e.jvbJingleSession,r=n&&n.peerconnection||null;e.statistics.sendMuteEvent(r,t.isMuted(),t.getType())}}))}_.prototype.setupChatRoomListeners=function(){var e=this,t=this.conference,n=t.room;this.chatRoomForwarder=new l.a(n,this.conference.eventEmitter),n.addListener(g.XMPPEvents.ICE_RESTARTING,(function(e){e.isP2P||t.rtc.closeBridgeChannel()})),n.addListener(g.XMPPEvents.PARTICIPANT_FEATURES_CHANGED,(function(e,n){var r=t.getParticipantById(i.Strophe.getResourceFromJid(e));r&&(r.setFeatures(n),t.eventEmitter.emit(a.PARTCIPANT_FEATURES_CHANGED,r))})),n.addListener(g.XMPPEvents.ICE_RESTART_SUCCESS,(function(e,n){!e.isP2P&&t._setBridgeChannel(n,e.peerconnection)})),n.addListener(g.XMPPEvents.AUDIO_MUTED_BY_FOCUS,(function(e){c.a.sendAnalytics(Object(v.J)(d.a.AUDIO)),t.mutedByFocusActor=e,t.rtc.setAudioMute(!0).then((function(){t.isMutedByFocus=!0,t.mutedByFocusActor=null})).catch((function(e){t.mutedByFocusActor=null,y.warn("Error while audio muting due to focus request",e)}))})),n.addListener(g.XMPPEvents.VIDEO_MUTED_BY_FOCUS,(function(e){c.a.sendAnalytics(Object(v.J)(d.a.VIDEO)),t.mutedVideoByFocusActor=e,t.rtc.setVideoMute(!0).then((function(){t.isVideoMutedByFocus=!0,t.mutedVideoByFocusActor=null})).catch((function(e){t.mutedVideoByFocusActor=null,y.warn("Error while video muting due to focus request",e)}))})),this.chatRoomForwarder.forward(g.XMPPEvents.SUBJECT_CHANGED,a.SUBJECT_CHANGED),this.chatRoomForwarder.forward(g.XMPPEvents.MUC_JOINED,a.CONFERENCE_JOINED),this.chatRoomForwarder.forward(g.XMPPEvents.MUC_JOIN_IN_PROGRESS,a.CONFERENCE_JOIN_IN_PROGRESS),this.chatRoomForwarder.forward(g.XMPPEvents.MEETING_ID_SET,a.CONFERENCE_UNIQUE_ID_SET),n.addListener(g.XMPPEvents.MUC_JOINED,(function(){e.conference._onMucJoined(),e.conference.isJvbConnectionInterrupted=!1,Object.keys(n.connectionTimes).forEach((function(e){var t=Object(v.C)("conference_".concat(e),{value:n.connectionTimes[e]});c.a.sendAnalytics(t)})),Object.keys(n.xmpp.connectionTimes).forEach((function(e){var t=Object(v.C)("xmpp_".concat(e),{value:n.xmpp.connectionTimes[e]});c.a.sendAnalytics(t)}))})),n.addListener(g.XMPPEvents.RENEGOTIATION_FAILED,(function(e,n){n.isP2P||t.eventEmitter.emit(a.CONFERENCE_FAILED,o.OFFER_ANSWER_FAILED,e)})),this.chatRoomForwarder.forward(g.XMPPEvents.ROOM_JOIN_ERROR,a.CONFERENCE_FAILED,o.CONNECTION_ERROR),this.chatRoomForwarder.forward(g.XMPPEvents.ROOM_CONNECT_ERROR,a.CONFERENCE_FAILED,o.CONNECTION_ERROR),this.chatRoomForwarder.forward(g.XMPPEvents.ROOM_CONNECT_NOT_ALLOWED_ERROR,a.CONFERENCE_FAILED,o.NOT_ALLOWED_ERROR),this.chatRoomForwarder.forward(g.XMPPEvents.ROOM_CONNECT_MEMBERS_ONLY_ERROR,a.CONFERENCE_FAILED,o.MEMBERS_ONLY_ERROR),this.chatRoomForwarder.forward(g.XMPPEvents.ROOM_MAX_USERS_ERROR,a.CONFERENCE_FAILED,o.CONFERENCE_MAX_USERS),n.addListener(g.XMPPEvents.ROOM_MAX_USERS_ERROR,(function(){return t.leave()})),this.chatRoomForwarder.forward(g.XMPPEvents.PASSWORD_REQUIRED,a.CONFERENCE_FAILED,o.PASSWORD_REQUIRED),this.chatRoomForwarder.forward(g.XMPPEvents.AUTHENTICATION_REQUIRED,a.CONFERENCE_FAILED,o.AUTHENTICATION_REQUIRED),this.chatRoomForwarder.forward(g.XMPPEvents.BRIDGE_DOWN,a.CONFERENCE_FAILED,o.VIDEOBRIDGE_NOT_AVAILABLE),n.addListener(g.XMPPEvents.BRIDGE_DOWN,(function(){return c.a.sendAnalytics(Object(v.z)())})),n.addListener(g.XMPPEvents.CONNECTION_RESTARTED,(function(e){t._onConferenceRestarted(e)})),this.chatRoomForwarder.forward(g.XMPPEvents.RESERVATION_ERROR,a.CONFERENCE_FAILED,o.RESERVATION_ERROR),n.addListener(g.XMPPEvents.RESERVATION_ERROR,(function(){return t.leave()})),this.chatRoomForwarder.forward(g.XMPPEvents.GRACEFUL_SHUTDOWN,a.CONFERENCE_FAILED,o.GRACEFUL_SHUTDOWN),n.addListener(g.XMPPEvents.CONNECTION_ICE_FAILED,(function(e){t._onIceConnectionFailed(e)})),this.chatRoomForwarder.forward(g.XMPPEvents.MUC_DESTROYED,a.CONFERENCE_FAILED,o.CONFERENCE_DESTROYED),this.chatRoomForwarder.forward(g.XMPPEvents.CHAT_ERROR_RECEIVED,a.CONFERENCE_ERROR,o.CHAT_ERROR),this.chatRoomForwarder.forward(g.XMPPEvents.SETTINGS_ERROR_RECEIVED,a.CONFERENCE_ERROR,o.SETTINGS_ERROR),this.chatRoomForwarder.forward(g.XMPPEvents.FOCUS_DISCONNECTED,a.CONFERENCE_FAILED,o.FOCUS_DISCONNECTED),n.addListener(g.XMPPEvents.FOCUS_LEFT,(function(){c.a.sendAnalytics(Object(v.D)()),t.eventEmitter.emit(a.CONFERENCE_FAILED,o.FOCUS_LEFT)})),n.addListener(g.XMPPEvents.SESSION_ACCEPT_TIMEOUT,(function(e){c.a.sendAnalyticsAndLog(Object(v.F)(v.b,{p2p:e.isP2P}))})),n.addListener(g.XMPPEvents.RECORDER_STATE_CHANGED,(function(e,n){if(n){var r=i.Strophe.getResourceFromJid(n),o=t.getParticipantById(r)||r;"off"===e.getStatus()?e.setTerminator(o):"on"===e.getStatus()&&e.setInitiator(o)}t.eventEmitter.emit(a.RECORDER_STATE_CHANGED,e)})),this.chatRoomForwarder.forward(g.XMPPEvents.TRANSCRIPTION_STATUS_CHANGED,a.TRANSCRIPTION_STATUS_CHANGED),this.chatRoomForwarder.forward(g.XMPPEvents.VIDEO_SIP_GW_AVAILABILITY_CHANGED,a.VIDEO_SIP_GW_AVAILABILITY_CHANGED),this.chatRoomForwarder.forward(g.XMPPEvents.VIDEO_SIP_GW_SESSION_STATE_CHANGED,a.VIDEO_SIP_GW_SESSION_STATE_CHANGED),this.chatRoomForwarder.forward(g.XMPPEvents.PHONE_NUMBER_CHANGED,a.PHONE_NUMBER_CHANGED),n.setParticipantPropertyListener((function(e,n){var r=t.getParticipantById(n);r&&r.setProperty(e.tagName.substring("jitsi_participant_".length),e.value)})),n.addListener(g.XMPPEvents.KICKED,t.onMemberKicked.bind(t)),n.addListener(g.XMPPEvents.SUSPEND_DETECTED,t.onSuspendDetected.bind(t)),this.chatRoomForwarder.forward(g.XMPPEvents.MUC_LOCK_CHANGED,a.LOCK_STATE_CHANGED),this.chatRoomForwarder.forward(g.XMPPEvents.MUC_MEMBERS_ONLY_CHANGED,a.MEMBERS_ONLY_CHANGED),n.addListener(g.XMPPEvents.MUC_MEMBER_JOINED,t.onMemberJoined.bind(t)),this.chatRoomForwarder.forward(g.XMPPEvents.MUC_LOBBY_MEMBER_JOINED,a.LOBBY_USER_JOINED),this.chatRoomForwarder.forward(g.XMPPEvents.MUC_LOBBY_MEMBER_UPDATED,a.LOBBY_USER_UPDATED),this.chatRoomForwarder.forward(g.XMPPEvents.MUC_LOBBY_MEMBER_LEFT,a.LOBBY_USER_LEFT),n.addListener(g.XMPPEvents.MUC_MEMBER_BOT_TYPE_CHANGED,t._onMemberBotTypeChanged.bind(t)),n.addListener(g.XMPPEvents.MUC_MEMBER_LEFT,t.onMemberLeft.bind(t)),this.chatRoomForwarder.forward(g.XMPPEvents.MUC_LEFT,a.CONFERENCE_LEFT),this.chatRoomForwarder.forward(g.XMPPEvents.MUC_DENIED_ACCESS,a.CONFERENCE_FAILED,o.CONFERENCE_ACCESS_DENIED),n.addListener(g.XMPPEvents.DISPLAY_NAME_CHANGED,t.onDisplayNameChanged.bind(t)),n.addListener(g.XMPPEvents.LOCAL_ROLE_CHANGED,(function(e){t.onLocalRoleChanged(e),t.statistics&&t.isModerator()&&t.on(a.RECORDER_STATE_CHANGED,(function(e){var t={error:e.getError(),id:"recorder_status",status:e.getStatus()};c.a.sendLog(JSON.stringify(t))}))})),n.addListener(g.XMPPEvents.MUC_ROLE_CHANGED,t.onUserRoleChanged.bind(t)),n.addListener(m.a.IDENTITY_UPDATED,(function(e,n){t.authEnabled=e,t.authIdentity=n,t.eventEmitter.emit(a.AUTH_STATUS_CHANGED,e,n)})),n.addListener(g.XMPPEvents.MESSAGE_RECEIVED,(function(e,n,r,o){var s=i.Strophe.getResourceFromJid(e);-1===n.indexOf("Transcript")&&-1===n.indexOf("Fellow Jitser")&&t.eventEmitter.emit(a.MESSAGE_RECEIVED,s,n,o)})),n.addListener(g.XMPPEvents.PRIVATE_MESSAGE_RECEIVED,(function(e,n,r,o){var s=i.Strophe.getResourceFromJid(e);t.eventEmitter.emit(a.PRIVATE_MESSAGE_RECEIVED,s,n,o)})),n.addListener(g.XMPPEvents.PRESENCE_STATUS,(function(e,n){var r=i.Strophe.getResourceFromJid(e),o=t.getParticipantById(r);o&&o._status!==n&&(o._status=n,t.eventEmitter.emit(a.USER_STATUS_CHANGED,r,n))})),n.addListener(g.XMPPEvents.JSON_MESSAGE_RECEIVED,(function(e,n){var r=i.Strophe.getResourceFromJid(e),o=t.getParticipantById(r);o?t.eventEmitter.emit(a.ENDPOINT_MESSAGE_RECEIVED,o,n):t.eventEmitter.emit(a.NON_PARTICIPANT_MESSAGE_RECEIVED,r,n)})),n.addPresenceListener("startmuted",(function(e,n){var r=!1;if(t.myUserId()===n&&t.isModerator())r=!0;else{var i=t.getParticipantById(n);i&&i.isModerator()&&(r=!0)}if(r){var o="true"===e.attributes.audio,s="true"===e.attributes.video,c=!1;o!==t.startMutedPolicy.audio&&(t.startMutedPolicy.audio=o,c=!0),s!==t.startMutedPolicy.video&&(t.startMutedPolicy.video=s,c=!0),c&&t.eventEmitter.emit(a.START_MUTED_POLICY_CHANGED,t.startMutedPolicy)}})),t.statistics&&(n.addListener(g.XMPPEvents.CONNECTION_ICE_FAILED,(function(e){t.statistics.sendIceConnectionFailedEvent(e.peerconnection)})),n.addListener(g.XMPPEvents.ADD_ICE_CANDIDATE_FAILED,(function(e,n){t.statistics.sendAddIceCandidateFailed(e,n)}))),this.chatRoomForwarder.forward(g.XMPPEvents.BREAKOUT_ROOMS_MOVE_TO_ROOM,a.BREAKOUT_ROOMS_MOVE_TO_ROOM),this.chatRoomForwarder.forward(g.XMPPEvents.BREAKOUT_ROOMS_UPDATED,a.BREAKOUT_ROOMS_UPDATED)},_.prototype.setupRTCListeners=function(){var e=this.conference,t=e.rtc;t.addListener(f.default.REMOTE_TRACK_ADDED,e.onRemoteTrackAdded.bind(e)),t.addListener(f.default.REMOTE_TRACK_REMOVED,e.onRemoteTrackRemoved.bind(e)),t.addListener(f.default.DOMINANT_SPEAKER_CHANGED,(function(t,n){var r;if(!(null===(r=e.participants[t])||void 0===r?void 0:r._hidden)&&e.lastDominantSpeaker!==t&&e.room){if(e.lastDominantSpeaker=t,e.eventEmitter.emit(a.DOMINANT_SPEAKER_CHANGED,t,n),n&&n.length){var i=n.slice(0);e.myUserId!==t&&i.splice(0,0,t),i.length>s.b&&i.splice(s.b,i.length-s.b),e.statistics&&e.statistics.setSpeakerList(i)}e.statistics&&e.myUserId()===t&&e.statistics.sendDominantSpeakerEvent(e.room.roomjid)}})),t.addListener(f.default.DATA_CHANNEL_OPEN,(function(){var t=window.performance.now(),n="data.channel.opened";y.log("(TIME) ".concat(n,":\t"),t),e.room.connectionTimes[n]=t,c.a.sendAnalytics(Object(v.C)(n,{value:t})),e.eventEmitter.emit(a.DATA_CHANNEL_OPENED)})),t.addListener(f.default.ENDPOINT_MESSAGE_RECEIVED,(function(t,n){var r=e.getParticipantById(t);r?e.eventEmitter.emit(a.ENDPOINT_MESSAGE_RECEIVED,r,n):y.warn("Ignored ENDPOINT_MESSAGE_RECEIVED for not existing "+"participant: ".concat(t),n)})),t.addListener(f.default.ENDPOINT_STATS_RECEIVED,(function(t,n){var r=e.getParticipantById(t);r?e.eventEmitter.emit(a.ENDPOINT_STATS_RECEIVED,r,n):y.warn("Ignoring ENDPOINT_STATS_RECEIVED for a non-existant participant: ".concat(t))})),t.addListener(f.default.LOCAL_UFRAG_CHANGED,(function(e,t){e.isP2P||c.a.sendLog(JSON.stringify({id:"local_ufrag",value:t}))})),t.addListener(f.default.REMOTE_UFRAG_CHANGED,(function(e,t){e.isP2P||c.a.sendLog(JSON.stringify({id:"remote_ufrag",value:t}))})),t.addListener(f.default.CREATE_ANSWER_FAILED,(function(t,n){e.statistics.sendCreateAnswerFailed(t,n),n.isP2P||e.eventEmitter.emit(a.CONFERENCE_FAILED,o.OFFER_ANSWER_FAILED,t)})),t.addListener(f.default.CREATE_OFFER_FAILED,(function(t,n){e.statistics.sendCreateOfferFailed(t,n),n.isP2P||e.eventEmitter.emit(a.CONFERENCE_FAILED,o.OFFER_ANSWER_FAILED,t)})),t.addListener(f.default.SET_LOCAL_DESCRIPTION_FAILED,(function(t,n){e.statistics.sendSetLocalDescFailed(t,n),n.isP2P||e.eventEmitter.emit(a.CONFERENCE_FAILED,o.OFFER_ANSWER_FAILED,t)})),t.addListener(f.default.SET_REMOTE_DESCRIPTION_FAILED,(function(t,n){e.statistics.sendSetRemoteDescFailed(t,n),n.isP2P||e.eventEmitter.emit(a.CONFERENCE_FAILED,o.OFFER_ANSWER_FAILED,t)})),t.addListener(f.default.LOCAL_TRACK_SSRC_UPDATED,(function(t,n){t.isVideoTrack()&&t.videoType===h.VideoType.DESKTOP&&e.statistics.sendScreenSharingEvent(!0,n)}))},_.prototype.removeXMPPListeners=function(){var e=this,t=this.conference;Object.keys(this.xmppListeners).forEach((function(n){t.xmpp.removeListener(n,e.xmppListeners[n])})),this.xmppListeners={}},_.prototype.setupXMPPListeners=function(){var e=this.conference;this._addConferenceXMPPListener(g.XMPPEvents.CALL_INCOMING,e.onIncomingCall.bind(e)),this._addConferenceXMPPListener(g.XMPPEvents.CALL_ACCEPTED,e.onCallAccepted.bind(e)),this._addConferenceXMPPListener(g.XMPPEvents.TRANSPORT_INFO,e.onTransportInfo.bind(e)),this._addConferenceXMPPListener(g.XMPPEvents.CALL_ENDED,e.onCallEnded.bind(e)),this._addConferenceXMPPListener(g.XMPPEvents.START_MUTED_FROM_FOCUS,(function(t,n){e.options.config.ignoreStartMuted||(e.startAudioMuted=t,e.startVideoMuted=n,e.getLocalTracks().forEach((function(t){switch(t.getType()){case d.a.AUDIO:e.startAudioMuted&&t.mute();break;case d.a.VIDEO:e.startVideoMuted&&t.mute()}})),e.eventEmitter.emit(a.STARTED_MUTED))})),this._addConferenceXMPPListener(g.XMPPEvents.CONFERENCE_TIMESTAMP_RECEIVED,(function(t){e.eventEmitter.emit(a.CONFERENCE_CREATED_TIMESTAMP,t)})),this._addConferenceXMPPListener(g.XMPPEvents.AV_MODERATION_CHANGED,(function(t,n,r){var i=e.getParticipants().find((function(e){return e.getJid()===r}));e.eventEmitter.emit(a.AV_MODERATION_CHANGED,{enabled:t,mediaType:n,actor:i})})),this._addConferenceXMPPListener(g.XMPPEvents.AV_MODERATION_PARTICIPANT_APPROVED,(function(t,n){var r=e.getParticipantById(i.Strophe.getResourceFromJid(n));r&&e.eventEmitter.emit(a.AV_MODERATION_PARTICIPANT_APPROVED,{participant:r,mediaType:t})})),this._addConferenceXMPPListener(g.XMPPEvents.AV_MODERATION_PARTICIPANT_REJECTED,(function(t,n){var r=e.getParticipantById(i.Strophe.getResourceFromJid(n));r&&e.eventEmitter.emit(a.AV_MODERATION_PARTICIPANT_REJECTED,{participant:r,mediaType:t})})),this._addConferenceXMPPListener(g.XMPPEvents.AV_MODERATION_APPROVED,(function(t){return e.eventEmitter.emit(a.AV_MODERATION_APPROVED,{mediaType:t})})),this._addConferenceXMPPListener(g.XMPPEvents.AV_MODERATION_REJECTED,(function(t){e.eventEmitter.emit(a.AV_MODERATION_REJECTED,{mediaType:t})}))},_.prototype._addConferenceXMPPListener=function(e,t){this.xmppListeners[e]=t,this.conference.xmpp.addListener(e,t)},_.prototype.setupStatisticsListeners=function(){var e=this.conference;e.statistics&&(e.statistics.addAudioLevelListener((function(t,n,r,i){e.rtc.setAudioLevel(t,n,r,i)})),e.statistics.addBeforeDisposedListener((function(){e.eventEmitter.emit(a.BEFORE_STATISTICS_DISPOSED)})),e.options.config.startSilent||e.statistics.addByteSentStatsListener((function(t,n){e.getLocalTracks(d.a.AUDIO).forEach((function(e){var r=t.getLocalSSRC(e);r&&n.hasOwnProperty(r)&&e.onByteSentStatsReceived(t,n[r])}))})))}}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return h}));var i=n(79),o=n(4);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=Object(o.getLogger)(e),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(a,e);var t,n,i,o=u(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),e=o.call(this),f.info("This appears to be ".concat(e.getName(),", ver: ").concat(e.getVersion())),e}return t=a,(n=[{key:"doesVideoMuteByStreamRemove",value:function(){return this.isChromiumBased()||this.isWebKitBased()||this.isFirefox()}},{key:"isChromiumBased",value:function(){return(this.isChrome()||this.isElectron()||this.isNWJS()||this.isOpera())&&!this.isWebKitBased()}},{key:"isIosBrowser",value:function(){var e=navigator,t=e.userAgent,n=e.maxTouchPoints,r=e.platform;return Boolean(t.match(/iP(ad|hone|od)/i))||n&&n>2&&/MacIntel/.test(r)}},{key:"isWebKitBased",value:function(){return this._bowser.isEngine("webkit")&&void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia&&void 0!==window.RTCRtpTransceiver&&Object.keys(RTCRtpTransceiver.prototype).indexOf("currentDirection")>-1}},{key:"isTwa",value:function(){return"matchMedia"in window&&window.matchMedia("(display-mode:standalone)").matches}},{key:"isSupported",value:function(){return!(this.isSafari()&&this._getSafariVersion()<14)&&(this.isChromiumBased()&&this._getChromiumBasedVersion()>=72||this.isFirefox()||this.isReactNative()||this.isWebKitBased())}},{key:"isSupportedAndroidBrowser",value:function(){return this.isChromiumBased()||this.isFirefox()}},{key:"isSupportedIOSBrowser",value:function(){return this._getIOSVersion()>=14}},{key:"isUserInteractionRequiredForUnmute",value:function(){return this.isFirefox()&&this.isVersionLessThan("68")}},{key:"supportsVideoMuteOnConnInterrupted",value:function(){return this.isChromiumBased()||this.isReactNative()}},{key:"supportsBandwidthStatistics",value:function(){return!this.isFirefox()&&!this.isWebKitBased()}},{key:"supportsCodecPreferences",value:function(){return Boolean(window.RTCRtpTransceiver&&"setCodecPreferences"in window.RTCRtpTransceiver.prototype&&window.RTCRtpReceiver&&void 0!==window.RTCRtpReceiver.getCapabilities)&&!this.isWebKitBased()}},{key:"supportsDeviceChangeEvent",value:function(){return navigator.mediaDevices&&void 0!==navigator.mediaDevices.ondevicechange&&void 0!==navigator.mediaDevices.addEventListener}},{key:"supportsLocalCandidateRttStatistics",value:function(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}},{key:"supportsPerformanceObserver",value:function(){return void 0!==window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes.indexOf("longtask")>-1}},{key:"supportsReceiverStats",value:function(){return void 0!==window.RTCRtpReceiver&&Object.keys(RTCRtpReceiver.prototype).indexOf("getSynchronizationSources")>-1&&!this.isWebKitBased()}},{key:"supportsRTTStatistics",value:function(){return!this.isFirefox()}},{key:"supportsVP9",value:function(){return this.isChromiumBased()||this.isReactNative()}},{key:"usesSdpMungingForSimulcast",value:function(){return this.isChromiumBased()||this.isReactNative()||this.isWebKitBased()}},{key:"usesAdapter",value:function(){return!this.isReactNative()}},{key:"usesRidsForSimulcast",value:function(){return!1}},{key:"supportsGetDisplayMedia",value:function(){return void 0!==navigator.getDisplayMedia||void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getDisplayMedia}},{key:"supportsEncodedTransform",value:function(){return Boolean(window.RTCRtpScriptTransform)}},{key:"supportsInsertableStreams",value:function(){if(void 0===window.RTCRtpSender||!window.RTCRtpSender.prototype.createEncodedStreams)return!1;var e=new ReadableStream;try{return window.postMessage(e,"*",[e]),!0}catch(e){return!1}}},{key:"supportsAudioRed",value:function(){return Boolean(window.RTCRtpSender&&window.RTCRtpSender.getCapabilities&&window.RTCRtpSender.getCapabilities("audio").codecs.some((function(e){return"audio/red"===e.mimeType}))&&window.RTCRtpReceiver&&window.RTCRtpReceiver.getCapabilities&&window.RTCRtpReceiver.getCapabilities("audio").codecs.some((function(e){return"audio/red"===e.mimeType})))}},{key:"supportsUnifiedPlan",value:function(){return!this.isReactNative()}},{key:"supportsVADDetection",value:function(){return this.isChromiumBased()}},{key:"supportsRTX",value:function(){return!(this.isFirefox()&&this.isVersionLessThan("96"))}},{key:"_getChromiumBasedVersion",value:function(){if(this.isChromiumBased()){if(this.isNWJS())return Number.parseInt(r.versions.chromium,10);var e=navigator.userAgent;if(e.match(/Chrome/))return Number.parseInt(e.match(/Chrome\/([\d.]+)/)[1],10)}return-1}},{key:"_getSafariVersion",value:function(){return this.isSafari()?Number.parseInt(this.getVersion(),10):-1}},{key:"_getIOSVersion",value:function(){return this.isWebKitBased()?Number.parseInt(this.getVersion(),10):-1}}])&&s(t.prototype,n),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),a}(i.a)}).call(this,"/index.js",n(115))},function(module,exports,__webpack_require__){(function(process,global,module){var __WEBPACK_AMD_DEFINE_RESULT__;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/**
 * [js-md5]{@link https://github.com/emn178/js-md5}
 *
 * @namespace md5
 * @version 0.7.3
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */!function(){"use strict";var ERROR="input is invalid type",WINDOW="object"===("undefined"==typeof window?"undefined":_typeof(window)),root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"===("undefined"==typeof self?"undefined":_typeof(self)),NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"===(void 0===process?"undefined":_typeof(process))&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&"object"===_typeof(module)&&module.exports,AMD=__webpack_require__(611),ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}!root.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"===_typeof(e)&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e){return function(t){return new Md5(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Md5},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createOutputMethod(n)}return e},nodeWrap=function nodeWrap(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("md5").update(e,"utf8").digest("hex");if(null==e)throw ERROR;return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash("md5").update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod};function Md5(e){if(e)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(e){if(!this.finalized){var t,n=_typeof(e);if("string"!==n){if("object"!==n)throw ERROR;if(null===e)throw ERROR;if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw ERROR;t=!0}for(var r,i,o=0,a=e.length,s=this.blocks,c=this.buffer8;o<a;){if(this.hashed&&(this.hashed=!1,s[0]=s[16],s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t)if(ARRAY_BUFFER)for(i=this.start;o<a&&i<64;++o)c[i++]=e[o];else for(i=this.start;o<a&&i<64;++o)s[i>>2]|=e[o]<<SHIFT[3&i++];else if(ARRAY_BUFFER)for(i=this.start;o<a&&i<64;++o)(r=e.charCodeAt(o))<128?c[i++]=r:r<2048?(c[i++]=192|r>>6,c[i++]=128|63&r):r<55296||r>=57344?(c[i++]=224|r>>12,c[i++]=128|r>>6&63,c[i++]=128|63&r):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++o)),c[i++]=240|r>>18,c[i++]=128|r>>12&63,c[i++]=128|r>>6&63,c[i++]=128|63&r);else for(i=this.start;o<a&&i<64;++o)(r=e.charCodeAt(o))<128?s[i>>2]|=r<<SHIFT[3&i++]:r<2048?(s[i>>2]|=(192|r>>6)<<SHIFT[3&i++],s[i>>2]|=(128|63&r)<<SHIFT[3&i++]):r<55296||r>=57344?(s[i>>2]|=(224|r>>12)<<SHIFT[3&i++],s[i>>2]|=(128|r>>6&63)<<SHIFT[3&i++],s[i>>2]|=(128|63&r)<<SHIFT[3&i++]):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++o)),s[i>>2]|=(240|r>>18)<<SHIFT[3&i++],s[i>>2]|=(128|r>>12&63)<<SHIFT[3&i++],s[i>>2]|=(128|r>>6&63)<<SHIFT[3&i++],s[i>>2]|=(128|63&r)<<SHIFT[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=EXTRA[3&t],t>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var e,t,n,r,i,o,a=this.blocks;this.first?t=((t=((e=((e=a[0]-680876937)<<7|e>>>25)-271733879<<0)^(n=((n=(-271733879^(r=((r=(-1732584194^2004318071&e)+a[1]-117830708)<<12|r>>>20)+e<<0)&(-271733879^e))+a[2]-1126478375)<<17|n>>>15)+r<<0)&(r^e))+a[3]-1316259209)<<22|t>>>10)+n<<0:(e=this.h0,t=this.h1,n=this.h2,t=((t+=((e=((e+=((r=this.h3)^t&(n^r))+a[0]-680876936)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+a[1]-389564586)<<12|r>>>20)+e<<0)&(e^t))+a[2]+606105819)<<17|n>>>15)+r<<0)&(r^e))+a[3]-1044525330)<<22|t>>>10)+n<<0),t=((t+=((e=((e+=(r^t&(n^r))+a[4]-176418897)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+a[5]+1200080426)<<12|r>>>20)+e<<0)&(e^t))+a[6]-1473231341)<<17|n>>>15)+r<<0)&(r^e))+a[7]-45705983)<<22|t>>>10)+n<<0,t=((t+=((e=((e+=(r^t&(n^r))+a[8]+1770035416)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+a[9]-1958414417)<<12|r>>>20)+e<<0)&(e^t))+a[10]-42063)<<17|n>>>15)+r<<0)&(r^e))+a[11]-1990404162)<<22|t>>>10)+n<<0,t=((t+=((e=((e+=(r^t&(n^r))+a[12]+1804603682)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+a[13]-40341101)<<12|r>>>20)+e<<0)&(e^t))+a[14]-1502002290)<<17|n>>>15)+r<<0)&(r^e))+a[15]+1236535329)<<22|t>>>10)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+a[1]-165796510)<<5|e>>>27)+t<<0)^t))+a[6]-1069501632)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+a[11]+643717713)<<14|n>>>18)+r<<0)^r))+a[0]-373897302)<<20|t>>>12)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+a[5]-701558691)<<5|e>>>27)+t<<0)^t))+a[10]+38016083)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+a[15]-660478335)<<14|n>>>18)+r<<0)^r))+a[4]-405537848)<<20|t>>>12)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+a[9]+568446438)<<5|e>>>27)+t<<0)^t))+a[14]-1019803690)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+a[3]-187363961)<<14|n>>>18)+r<<0)^r))+a[8]+1163531501)<<20|t>>>12)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+a[13]-1444681467)<<5|e>>>27)+t<<0)^t))+a[2]-51403784)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+a[7]+1735328473)<<14|n>>>18)+r<<0)^r))+a[12]-1926607734)<<20|t>>>12)+n<<0,t=((t+=((o=(r=((r+=((i=t^n)^(e=((e+=(i^r)+a[5]-378558)<<4|e>>>28)+t<<0))+a[8]-2022574463)<<11|r>>>21)+e<<0)^e)^(n=((n+=(o^t)+a[11]+1839030562)<<16|n>>>16)+r<<0))+a[14]-35309556)<<23|t>>>9)+n<<0,t=((t+=((o=(r=((r+=((i=t^n)^(e=((e+=(i^r)+a[1]-1530992060)<<4|e>>>28)+t<<0))+a[4]+1272893353)<<11|r>>>21)+e<<0)^e)^(n=((n+=(o^t)+a[7]-155497632)<<16|n>>>16)+r<<0))+a[10]-1094730640)<<23|t>>>9)+n<<0,t=((t+=((o=(r=((r+=((i=t^n)^(e=((e+=(i^r)+a[13]+681279174)<<4|e>>>28)+t<<0))+a[0]-358537222)<<11|r>>>21)+e<<0)^e)^(n=((n+=(o^t)+a[3]-722521979)<<16|n>>>16)+r<<0))+a[6]+76029189)<<23|t>>>9)+n<<0,t=((t+=((o=(r=((r+=((i=t^n)^(e=((e+=(i^r)+a[9]-640364487)<<4|e>>>28)+t<<0))+a[12]-421815835)<<11|r>>>21)+e<<0)^e)^(n=((n+=(o^t)+a[15]+530742520)<<16|n>>>16)+r<<0))+a[2]-995338651)<<23|t>>>9)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+a[0]-198630844)<<6|e>>>26)+t<<0)|~n))+a[7]+1126891415)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+a[14]-1416354905)<<15|n>>>17)+r<<0)|~e))+a[5]-57434055)<<21|t>>>11)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+a[12]+1700485571)<<6|e>>>26)+t<<0)|~n))+a[3]-1894986606)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+a[10]-1051523)<<15|n>>>17)+r<<0)|~e))+a[1]-2054922799)<<21|t>>>11)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+a[8]+1873313359)<<6|e>>>26)+t<<0)|~n))+a[15]-30611744)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+a[6]-1560198380)<<15|n>>>17)+r<<0)|~e))+a[13]+1309151649)<<21|t>>>11)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+a[4]-145523070)<<6|e>>>26)+t<<0)|~n))+a[11]-1120210379)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+a[2]+718787259)<<15|n>>>17)+r<<0)|~e))+a[9]-343485551)<<21|t>>>11)+n<<0,this.first?(this.h0=e+1732584193<<0,this.h1=t-271733879<<0,this.h2=n-1732584194<<0,this.h3=r+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0)},Md5.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3;return HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3;return[255&e,e>>8&255,e>>16&255,e>>24&255,255&t,t>>8&255,t>>16&255,t>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,255&r,r>>8&255,r>>16&255,r>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var e,t,n,r="",i=this.array(),o=0;o<15;)e=i[o++],t=i[o++],n=i[o++],r+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[63&(e<<4|t>>>4)]+BASE64_ENCODE_CHAR[63&(t<<2|n>>>6)]+BASE64_ENCODE_CHAR[63&n];return e=i[o],r+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[e<<4&63]+"=="};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}()}).call(this,__webpack_require__(115),__webpack_require__(53),__webpack_require__(98)(module))},function(e,t,n){(function(e){var n,r,i,o;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}o=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==a(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,r){void 0===r&&(r=!1);var i=e.getVersionPrecision(t),o=e.getVersionPrecision(n),a=Math.max(i,o),s=0,c=e.map([t,n],(function(t){var n=a-e.getVersionPrecision(t),r=t+new Array(n+1).join(".0");return e.map(r.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(r&&(s=a-Math.min(i,o)),a-=1;a>=s;){if(c[0][a]>c[1][a])return 1;if(c[0][a]===c[1][a]){if(a===s)return 0;a-=1}else if(c[0][a]<c[1][a])return-1}},e.map=function(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r},e.getBrowserAlias=function(e){return r.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return r.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,n){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},o=n(18);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){}var t,n;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},t=e,(n=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}])&&a(t,n),e}();t.default=s,e.exports=t.default},91:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=u(n(92)),i=u(n(93)),o=u(n(94)),s=u(n(95)),c=u(n(17));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=r.default.find((function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=i.default.find((function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=o.default.find((function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=s.default.find((function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return Object.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},r=0,i={},o=0;if(Object.keys(e).forEach((function(t){var s=e[t];"string"==typeof s?(i[t]=s,o+=1):"object"==a(s)&&(n[t]=s,r+=1)})),r>0){var s=Object.keys(n),c=s.find((function(e){return t.isOS(e)}));if(c){var u=this.satisfies(n[c]);if(void 0!==u)return u}var l=s.find((function(e){return t.isPlatform(e)}));if(l){var d=this.satisfies(n[l]);if(void 0!==d)return d}}if(o>0){var f=Object.keys(i).find((function(e){return t.isBrowser(e,!0)}));if(void 0!==f)return this.compareVersion(i[f])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),r=e.toLowerCase(),i=c.default.getBrowserTypeByAlias(r);return t&&i&&(r=i.toLowerCase()),r===n},t.compareVersion=function(e){var t=[0],n=e,r=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(c.default.compareVersions(i,n,r))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e){return this.isBrowser(e)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=l,e.exports=t.default},92:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=a,e.exports=t.default},93:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:o.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.WindowsPhone,version:t}}},{test:[/windows/i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=i.default.getWindowsVersionName(t);return{name:o.OS_MAP.Windows,version:t,versionName:n}}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=i.default.getMacOSVersionName(t),r={name:o.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=i.default.getAndroidVersionName(t),r={name:o.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:o.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:o.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.PlayStation4,version:t}}}];t.default=a,e.exports=t.default},94:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];t.default=a,e.exports=t.default},95:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:o.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:o.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:o.ENGINE_MAP.Trident},n=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:o.ENGINE_MAP.Presto},n=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:o.ENGINE_MAP.Gecko},n=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:o.ENGINE_MAP.WebKit},n=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=a,e.exports=t.default}})},"object"==a(t)&&"object"==a(e)?e.exports=o():(r=[],void 0===(i="function"==typeof(n=o)?n.apply(t,r):n)||(e.exports=i))}).call(this,n(98)(e))},function(e,t,n){"use strict";(function(e){var r=n(4),i=n(11),o=n(5);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=Object(r.getLogger)(e),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.reset()}var t,n,r;return t=e,(n=[{key:"reset",value:function(){this.disposed=!1,this.analyticsHandlers=new Set,this.cache=[],this.permanentProperties={},this.conferenceName="",this.addPermanentProperties({user_agent:navigator.userAgent,browser_name:o.a.getName()})}},{key:"dispose",value:function(){c.warn("Disposing of analytics adapter."),this.analyticsHandlers&&this.analyticsHandlers.size>0&&this.analyticsHandlers.forEach((function(e){"function"==typeof e.dispose&&e.dispose()})),this.setAnalyticsHandlers([]),this.disposed=!0}},{key:"setAnalyticsHandlers",value:function(e){var t=this;if(!this.disposed){this.analyticsHandlers=new Set(e),this._setUserProperties();var n=this.cache;this.cache=null,n&&n.forEach((function(e){return t._sendEvent(e)}))}}},{key:"_setUserProperties",value:function(){var e=this;this.analyticsHandlers.forEach((function(t){try{t.setUserProperties(e.permanentProperties)}catch(e){c.warn("Error in setUserProperties method of one of the "+"analytics handlers: ".concat(e))}}))}},{key:"addPermanentProperties",value:function(e){this.permanentProperties=Object.assign(Object.assign({},this.permanentProperties),e),this._setUserProperties()}},{key:"setConferenceName",value:function(e){this.conferenceName=e,this.addPermanentProperties({conference_name:e})}},{key:"sendEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.disposed){var n=null;"string"==typeof e?n={type:i.t,action:e,actionSubject:e,source:e,attributes:t}:"object"===a(e)&&(n=e),this._verifyRequiredFields(n)?this._sendEvent(n):c.error("Dropping a mis-formatted event: ".concat(JSON.stringify(n)))}}},{key:"_verifyRequiredFields",value:function(e){if(!e)return!1;e.type||(e.type=i.t);var t=e.type;return t!==i.t&&t!==i.u&&t!==i.w&&t!==i.v?(c.error("Unknown event type: ".concat(t)),!1):t===i.u?Boolean(e.name):(e.action=e.action||e.name||e.actionSubject,e.actionSubject=e.actionSubject||e.name||e.action,e.source=e.source||e.name||e.action||e.actionSubject,e.action&&e.actionSubject&&e.source?!!(t!==i.v||(e.objectType=e.objectType||"generic-object-type",e.containerType=e.containerType||"conference","conference"!==e.containerType||e.containerId||(e.containerId=this.conferenceName),e.objectType&&e.objectId&&e.containerType&&e.containerId))||(c.error("Required field missing (containerId, containerType, objectId or objectType)"),!1):(c.error("Required field missing (action, actionSubject or source)"),!1))}},{key:"_maybeCacheEvent",value:function(e){return!!this.cache&&(this.cache.push(e),this.cache.length>100&&this.cache.splice(0,1),!0)}},{key:"_sendEvent",value:function(e){this._maybeCacheEvent(e)||this.analyticsHandlers.forEach((function(t){try{t.sendEvent(e)}catch(e){c.warn("Error sending analytics event: ".concat(e))}}))}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=new u}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var r=n(4),i=n(46),o=n(56);function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=Object(r.getLogger)(e),l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventEmitter=t,this.longTasks=0,this.maxDuration=0,this.performanceStatsInterval=n,this.stats=new o.a}var t,n,r;return t=e,(n=[{key:"getLongTasksStats",value:function(){return{avgRatePerMinute:(60*this.stats.getAverage()).toFixed(2),maxDurationMs:this.maxDuration}}},{key:"startObserver",value:function(){var e=this;this.longTaskEventHandler=function(t){var n,r=a(t.getEntries());try{for(r.s();!(n=r.n()).done;){var i=n.value;e.longTasks++,e.maxDuration=Math.max(e.maxDuration,i.duration).toFixed(3)}}catch(e){r.e(e)}finally{r.f()}},u.info("Creating a Performance Observer for monitoring Long Tasks"),this.observer=new PerformanceObserver(this.longTaskEventHandler),this.observer.observe({type:"longtask",buffered:!0});var t=Date.now();this.longTasksIntervalId=setInterval((function(){var n=Date.now(),r=e._lastTimeStamp?(n-e._lastTimeStamp)/1e3:(n-t)/1e3,o=e.longTasks/r;e.stats.addNext(o),e.eventEmitter.emit(i.e,e.getLongTasksStats()),e.longTasks=0,e._lastTimeStamp=Date.now()}),this.performanceStatsInterval)}},{key:"stopObserver",value:function(){this.observer&&this.observer.disconnect(),this.longTaskEventHandler=null,this.longTasksIntervalId&&(clearInterval(this.longTasksIntervalId),this.longTasksIntervalId=null)}}])&&c(t.prototype,n),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m}));var r=n(4),i=n(3),o=n(46),a=n(5);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=n(22),d=Object(r.getLogger)(e);function f(e,t){return!t||t<=0||!e||e<=0?0:Math.round(e/t*100)}function h(){this.loss={},this.bitrate={download:0,upload:0},this.resolution={},this.framerate=0,this.codec=""}function p(){this.bandwidth={},this.bitrate={},this.packetLoss=null,this.transport=[]}function m(e,t,n,r){this.peerconnection=e,this.baselineAudioLevelsReport=null,this.currentAudioLevelsReport=null,this.currentStatsReport=null,this.previousStatsReport=null,this.audioLevelReportHistory={},this.audioLevelsIntervalId=null,this.eventEmitter=r,this.conferenceStats=new p,this.audioLevelsIntervalMilis=t,this.speakerList=[],this.statsIntervalId=null,this.statsIntervalMilis=n,this.ssrc2stats=new Map}h.prototype.setLoss=function(e){this.loss=e||{}},h.prototype.setResolution=function(e){this.resolution=e||{}},h.prototype.addBitrate=function(e){this.bitrate.download+=e.download,this.bitrate.upload+=e.upload},h.prototype.resetBitrate=function(){this.bitrate.download=0,this.bitrate.upload=0},h.prototype.setFramerate=function(e){this.framerate=e||0},h.prototype.setCodec=function(e){this.codec=e||""},m.prototype.setSpeakerList=function(e){this.speakerList=e},m.prototype.stop=function(){this.audioLevelsIntervalId&&(clearInterval(this.audioLevelsIntervalId),this.audioLevelsIntervalId=null),this.statsIntervalId&&(clearInterval(this.statsIntervalId),this.statsIntervalId=null)},m.prototype.errorCallback=function(e){l.callErrorHandler(e),d.error("Get stats error",e),this.stop()},m.prototype.start=function(e){var t=this;e&&(a.a.supportsReceiverStats()&&d.info("Using RTCRtpSynchronizationSource for remote audio levels"),this.audioLevelsIntervalId=setInterval((function(){if(a.a.supportsReceiverStats()){var e=t.peerconnection.getAudioLevels(t.speakerList);for(var n in e)if(e.hasOwnProperty(n)){var r=2.5*e[n];t.eventEmitter.emit(o.a,t.peerconnection,Number.parseInt(n,10),r,!1)}}else t.peerconnection.getStats().then((function(e){t.currentAudioLevelsReport="function"==typeof(null==e?void 0:e.result)?e.result():e,t.processAudioLevelReport(),t.baselineAudioLevelsReport=t.currentAudioLevelsReport})).catch((function(e){return t.errorCallback(e)}))}),this.audioLevelsIntervalMilis));var n=function(){t.peerconnection.getStats().then((function(e){t.currentStatsReport="function"==typeof(null==e?void 0:e.result)?e.result():e;try{t.processStatsReport()}catch(e){l.callErrorHandler(e),d.error("Processing of RTP stats failed:",e)}t.previousStatsReport=t.currentStatsReport})).catch((function(e){return t.errorCallback(e)}))};n(),this.statsIntervalId=setInterval(n,this.statsIntervalMilis)},m.prototype._processAndEmitReport=function(){var e,t,n,r=this,i={download:0,upload:0},a={download:0,upload:0},u=0,l=0,h={},p={},m={},v=0,g=0,y=0,_=0,b=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(this.ssrc2stats);try{for(b.s();!(n=b.n()).done;){var E=s(n.value,2),S=E[0],C=E[1],w=C.loss,T=w.isDownloadStream?"download":"upload";i[T]+=w.packetsTotal,a[T]+=w.packetsLost,u+=C.bitrate.download,l+=C.bitrate.upload;var D=this.peerconnection.getTrackBySSRC(S);if(D){D.isAudioTrack()?(v+=C.bitrate.download,g+=C.bitrate.upload,e=C.codec):(y+=C.bitrate.download,_+=C.bitrate.upload,t=C.codec);var A=D.getParticipantId();if(A){var R=C.resolution;if(R.width&&R.height&&-1!==R.width&&-1!==R.height){var k=h[A]||{};k[S]=R,h[A]=k}if(0!==C.framerate){var O=p[A]||{};O[S]=C.framerate,p[A]=O}if(e&&t){var j={audio:e,video:t},P=m[A]||{};P[S]=j,m[A]=P}}else d.error("No participant ID returned by ".concat(D))}C.resetBitrate()}}catch(e){b.e(e)}finally{b.f()}this.conferenceStats.bitrate={upload:l,download:u},this.conferenceStats.bitrate.audio={upload:g,download:v},this.conferenceStats.bitrate.video={upload:_,download:y},this.conferenceStats.packetLoss={total:f(a.download+a.upload,i.download+i.upload),download:f(a.download,i.download),upload:f(a.upload,i.upload)};var I,N={};Object.keys(this.audioLevelReportHistory).forEach((function(e){var t=r.audioLevelReportHistory[e],n=t.data,i=t.isLocal,o=n.reduce((function(e,t){return e+t}))/n.length;if(i)I=o;else{var a=r.peerconnection.getTrackBySSRC(Number(e));if(a){var s=a.getParticipantId();s&&(N[s]=o)}}})),this.audioLevelReportHistory={},this.eventEmitter.emit(o.d,this.peerconnection,{bandwidth:this.conferenceStats.bandwidth,bitrate:this.conferenceStats.bitrate,packetLoss:this.conferenceStats.packetLoss,resolution:h,framerate:p,codec:m,transport:this.conferenceStats.transport,localAvgAudioLevels:I,avgAudioLevels:N}),this.conferenceStats.transport=[]},m.prototype.getNonNegativeValue=function(e){var t=e;return"number"!=typeof t&&(t=Number(t)),isNaN(t)?0:Math.max(0,t)},m.prototype._calculateBitrate=function(e,t,n){var r=this.getNonNegativeValue(e[n]),i=this.getNonNegativeValue(t[n]),o=Math.max(0,r-i),a=e.timestamp-t.timestamp,s=0;return a>0&&(s=Math.round(8*o/a)),s},m.prototype.processStatsReport=function(){var e=this;if(this.previousStatsReport){var t={};this.currentStatsReport.forEach((function(n){if("candidate-pair"===n.type&&n.nominated&&"succeeded"===n.state){var r=n.availableIncomingBitrate,o=n.availableOutgoingBitrate;(r||o)&&(e.conferenceStats.bandwidth={download:Math.round(r/1e3),upload:Math.round(o/1e3)});var s=e.currentStatsReport.get(n.remoteCandidateId),c=e.currentStatsReport.get(n.localCandidateId);if(s&&c){var u=a.a.isChromiumBased()?s.ip:s.address,l=s.port,d="".concat(u,":").concat(l),f=a.a.isChromiumBased()?c.ip:c.address,p=c.port,m="".concat(f,":").concat(p),v=s.protocol,g=e.conferenceStats.transport;g.some((function(e){return e.ip===d&&e.type===v&&e.localip===m}))||g.push({ip:d,type:v,localip:m,p2p:e.peerconnection.isP2P,localCandidateType:c.candidateType,remoteCandidateType:s.candidateType,networkType:c.networkType,rtt:1e3*n.currentRoundTripTime})}}else if("inbound-rtp"===n.type||"outbound-rtp"===n.type){var y=e.previousStatsReport.get(n.id),_=e.getNonNegativeValue(n.ssrc);if(!y||!_)return;var b=e.ssrc2stats.get(_);b||(b=new h,e.ssrc2stats.set(_,b));var E=!0,S="packetsReceived";"outbound-rtp"===n.type&&(E=!1,S="packetsSent");var C=n[S];(!C||C<0)&&(C=0);var w=e.getNonNegativeValue(y[S]),T=Math.max(0,C-w),D=e.getNonNegativeValue(n.packetsLost),A=e.getNonNegativeValue(y.packetsLost),R=Math.max(0,D-A);if(b.setLoss({packetsTotal:T+R,packetsLost:R,isDownloadStream:E}),"inbound-rtp"===n.type){var k={height:n.frameHeight,width:n.frameWidth},O=n.framesPerSecond;k.height&&k.width&&b.setResolution(k),b.setFramerate(Math.round(O||0)),b.addBitrate({download:e._calculateBitrate(n,y,"bytesReceived"),upload:0})}else t[_]=e.getNonNegativeValue(n.bytesSent),b.addBitrate({download:0,upload:e._calculateBitrate(n,y,"bytesSent")});var j=e.currentStatsReport.get(n.codecId);if(j){var P=j.mimeType.split("/")[1];P&&b.setCodec(P)}}else if("track"===n.type&&n.kind===i.a.VIDEO&&!n.remoteSource){var I={height:n.frameHeight,width:n.frameWidth},N=e.peerconnection.getLocalTracks(i.a.VIDEO);if(!(null==N?void 0:N.length))return;var M=e.peerconnection.getLocalSSRC(N[0]);if(!M)return;var x=e.ssrc2stats.get(M);x||(x=new h,e.ssrc2stats.set(M,x)),I.height&&I.width&&x.setResolution(I);var L=n.framesPerSecond;if(!L){var F=e.previousStatsReport.get(n.id);if(F){var B=n.timestamp-F.timestamp;if(B>0&&n.framesSent)L=(n.framesSent-F.framesSent)/B*1e3}if(!L)return}var U=e.peerconnection.getActiveSimulcastStreams();L=U?Math.round(L/U):0,x.setFramerate(L)}})),this.eventEmitter.emit(o.c,this.peerconnection,t),this._processAndEmitReport()}},m.prototype.processAudioLevelReport=function(){var e=this;this.baselineAudioLevelsReport&&this.currentAudioLevelsReport.forEach((function(t){if("track"===t.type){var n=t.audioLevel;if(n){var r=t.trackIdentifier,a=e.peerconnection.getSsrcByTrackId(r);if(a){var s=a===e.peerconnection.getLocalSSRC(e.peerconnection.getLocalTracks(i.a.AUDIO));e.eventEmitter.emit(o.a,e.peerconnection,a,n,s)}}}}))}}).call(this,"/index.js")},function(e,t){function n(e,t){if(!e||!t||"function"!=typeof e.addListener||"function"!=typeof t.emit)throw new Error("Invalid arguments passed to EventEmitterForwarder");this.src=e,this.dest=t}n.prototype.forward=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];t[0]=this.dest,this.src.addListener(r,Function.prototype.bind.apply(this.dest.emit,t))},e.exports=n},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2),i=n(1),o=n(129),a=n(3);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t,n,i,a,s,c,u,l,d){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._jid=t,this._id=r.Strophe.getResourceFromJid(t),this._conference=n,this._displayName=i,this._supportsDTMF=!1,this._tracks=[],this._role="none",this._status=c,this._hidden=a,this._statsID=s,this._connectionStatus=o.a.ACTIVE,this._properties={},this._identity=u,this._isReplacing=l,this._isReplaced=d,this._features=new Set}var t,n,c;return t=e,(n=[{key:"getConference",value:function(){return this._conference}},{key:"getProperty",value:function(e){return this._properties[e]}},{key:"hasAnyVideoTrackWebRTCMuted",value:function(){return this.getTracks().some((function(e){return e.getType()===a.a.VIDEO&&e.isWebRTCTrackMuted()}))}},{key:"_setConnectionStatus",value:function(e){this._connectionStatus=e}},{key:"getConnectionStatus",value:function(){return this._connectionStatus}},{key:"setProperty",value:function(e,t){var n=this._properties[e];t!==n&&(this._properties[e]=t,this._conference.eventEmitter.emit(i.PARTICIPANT_PROPERTY_CHANGED,this,e,n,t))}},{key:"getTracks",value:function(){return this._tracks.slice()}},{key:"getTracksByMediaType",value:function(e){return this.getTracks().filter((function(t){return t.getType()===e}))}},{key:"getId",value:function(){return this._id}},{key:"getJid",value:function(){return this._jid}},{key:"getDisplayName",value:function(){return this._displayName}},{key:"getStatsID",value:function(){return this._statsID}},{key:"getStatus",value:function(){return this._status}},{key:"isModerator",value:function(){return"moderator"===this._role}},{key:"isHidden",value:function(){return this._hidden}},{key:"isHiddenFromRecorder",value:function(){var e,t;return Boolean(null===(t=null===(e=this._identity)||void 0===e?void 0:e.user)||void 0===t?void 0:t["hidden-from-recorder"])}},{key:"isReplacing",value:function(){return this._isReplacing}},{key:"isReplaced",value:function(){return this._isReplaced}},{key:"isAudioMuted",value:function(){return this._isMediaTypeMuted(a.a.AUDIO)}},{key:"_isMediaTypeMuted",value:function(e){return this.getTracks().reduce((function(t,n){return t&&(n.getType()!==e||n.isMuted())}),!0)}},{key:"isVideoMuted",value:function(){return this._isMediaTypeMuted(a.a.VIDEO)}},{key:"getRole",value:function(){return this._role}},{key:"setRole",value:function(e){this._role=e}},{key:"setIsReplacing",value:function(e){this._isReplacing=e}},{key:"setIsReplaced",value:function(e){this._isReplaced=e}},{key:"supportsDTMF",value:function(){return this._supportsDTMF}},{key:"getFeatures",value:function(){return Promise.resolve(this._features)}},{key:"hasFeature",value:function(e){return this._features.has(e)}},{key:"setFeatures",value:function(e){this._features=e||new Set}},{key:"getBotType",value:function(){return this._botType}},{key:"setBotType",value:function(e){this._botType=e}},{key:"getConnectionJid",value:function(){return this._connectionJid}},{key:"setConnectionJid",value:function(e){this._connectionJid=e}}])&&s(t.prototype,n),c&&s(t,c),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(45),i=n(41);function o(e){var t,n=this,o=e.id,a=e.password,s=e.onCreateResource,c=e.onLoginSuccessful,u=e.roomPassword,l=!1,d=new i.e(this.connection.options),f=new Promise((function(e,i){t=i,d.addListener(r.CONNECTION_DISCONNECTED,(function(){d=void 0})),d.addListener(r.CONNECTION_ESTABLISHED,(function(){l||(c&&c(),d.createRoom(n.options.name,n.options.config,s).moderator.authenticate().then((function(){d&&d.disconnect(),l||(n.join(u),e())})).catch((function(e){var t=e.error,n=e.message;d.disconnect(),i({authenticationError:t,message:n})})))})),d.addListener(r.CONNECTION_FAILED,(function(e,t,n){i({connectionError:e,credentials:n,message:t}),d=void 0})),l||d.connect(o,a)}));return f.cancel=function(){l=!0,t({}),d&&d.disconnect()},f}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var r=n(4);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=Object(r.getLogger)(e),s=Symbol("kJitsiE2EE"),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.sharedKey;i(this,e);var r="",o=document.querySelector('script[src*="lib-jitsi-meet"]');if(o){var s=o.src.lastIndexOf("/");r="".concat(o.src.substring(0,s),"/")}var c="".concat(r,"lib-jitsi-meet.e2ee-worker.js");if(r&&"/"!==r){var u=new Blob(['importScripts("'.concat(c,'");')],{type:"application/javascript"});c=window.URL.createObjectURL(u)}this._worker=new Worker(c,{name:"E2EE Worker"}),this._worker.onerror=function(e){return a.error(e)},this._worker.postMessage({operation:"initialize",sharedKey:n})}var t,n,r;return t=e,(n=[{key:"cleanup",value:function(e){this._worker.postMessage({operation:"cleanup",participantId:e})}},{key:"cleanupAll",value:function(){this._worker.postMessage({operation:"cleanupAll"})}},{key:"handleReceiver",value:function(e,t,n){if(!e[s])if(e[s]=!0,window.RTCRtpScriptTransform){var r={operation:"decode",participantId:n};e.transform=new RTCRtpScriptTransform(this._worker,r)}else{var i=e.createEncodedStreams();this._worker.postMessage({operation:"decode",readableStream:i.readable,writableStream:i.writable,participantId:n},[i.readable,i.writable])}}},{key:"handleSender",value:function(e,t,n){if(!e[s])if(e[s]=!0,window.RTCRtpScriptTransform){var r={operation:"encode",participantId:n};e.transform=new RTCRtpScriptTransform(this._worker,r)}else{var i=e.createEncodedStreams();this._worker.postMessage({operation:"encode",readableStream:i.readable,writableStream:i.writable,participantId:n},[i.readable,i.writable])}}},{key:"setKey",value:function(e,t,n){this._worker.postMessage({operation:"setKey",key:t,keyIndex:n,participantId:e})}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return _}));var r=n(4),i=n(223),o=n.n(i),a=n(1),s=n(174),c=n(143),u=n(224);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},y=Object(r.getLogger)(e),_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(s,e);var t,n,r,i=h(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e))._key=void 0,t._conferenceJoined=!1,t._olmAdapter=new c.a(e),t._rotateKey=o()(t._rotateKeyImpl,5e3),t._ratchetKey=o()(t._ratchetKeyImpl,5e3),t._olmAdapter.on(c.a.events.PARTICIPANT_KEY_UPDATED,t._onParticipantKeyUpdated.bind(m(t))),t.conference.on(a.PARTICIPANT_PROPERTY_CHANGED,t._onParticipantPropertyChanged.bind(m(t))),t.conference.on(a.USER_JOINED,t._onParticipantJoined.bind(m(t))),t.conference.on(a.USER_LEFT,t._onParticipantLeft.bind(m(t))),t.conference.on(a.CONFERENCE_JOINED,(function(){t._conferenceJoined=!0})),t}return t=s,(n=[{key:"_setEnabled",value:function(e){return g(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return t.next=3,this._olmAdapter.initSessions();case 3:t.next=6;break;case 5:this._olmAdapter.clearAllParticipantsSessions();case 6:return this._key=!!e&&this._generateKey(),t.next=9,this._olmAdapter.updateKey(this._key);case 9:n=t.sent,this.e2eeCtx.setKey(this.conference.myUserId(),this._key,n);case 11:case"end":return t.stop()}}),t,this)})))}},{key:"_onParticipantPropertyChanged",value:function(e,t,n,r){return g(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=t,n.next="e2ee.idKey"===n.t0?3:"e2ee.enabled"===n.t0?5:7;break;case 3:return y.debug("Participant ".concat(e.getId()," updated their id key: ").concat(r)),n.abrupt("break",7);case 5:return!r&&this.enabled&&this._olmAdapter.clearParticipantSession(e),n.abrupt("break",7);case 7:case"end":return n.stop()}}),n,this)})))}},{key:"_onParticipantJoined",value:function(){this._conferenceJoined&&this.enabled&&this._ratchetKey()}},{key:"_onParticipantLeft",value:function(e){this.e2eeCtx.cleanup(e),this.enabled&&this._rotateKey()}},{key:"_rotateKeyImpl",value:function(){return g(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.debug("Rotating key"),this._key=this._generateKey(),e.next=4,this._olmAdapter.updateKey(this._key);case 4:t=e.sent,this.e2eeCtx.setKey(this.conference.myUserId(),this._key,t);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"_ratchetKeyImpl",value:function(){return g(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.debug("Ratchetting key"),e.next=3,Object(u.a)(this._key);case 3:return t=e.sent,e.next=6,Object(u.b)(t);case 6:n=e.sent,this._key=new Uint8Array(n),r=this._olmAdapter.updateCurrentKey(this._key),this.e2eeCtx.setKey(this.conference.myUserId(),this._key,r);case 10:case"end":return e.stop()}}),e,this)})))}},{key:"_onParticipantKeyUpdated",value:function(e,t,n){y.debug("Participant ".concat(e," updated their key")),this.e2eeCtx.setKey(e,t,n)}},{key:"_generateKey",value:function(){return window.crypto.getRandomValues(new Uint8Array(32))}}])&&d(t.prototype,n),r&&d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(s.a)}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var r=n(4),i=n(131),o=n(317);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=Object(r.getLogger)(e),c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._stropheConn=t,this._resumeRetryN=0,this._retryDelay=void 0}var t,n,r;return t=e,(n=[{key:"retryDelay",get:function(){return this._retryDelay}},{key:"schedule",value:function(){var e=this;this._cancelResume(),this._resumeRetryN+=1,this._networkOnlineListener=i.b.addEventListener(i.a,(function(t){t.isOnline?e._scheduleResume():e._cancelResume()})),i.b.isOnline()&&this._scheduleResume()}},{key:"_scheduleResume",value:function(){var e=this;this._resumeTimeout||(this._resumeRetryN=Math.min(3,this._resumeRetryN),this._retryDelay=Object(o.a)(this._resumeRetryN,1500*this._resumeRetryN,3),s.info("Will try to resume the XMPP connection in ".concat(this.retryDelay,"ms")),this._resumeTimeout=setTimeout((function(){return e._resumeConnection()}),this.retryDelay))}},{key:"_cancelResume",value:function(){this._resumeTimeout&&(s.info("Canceling connection resume task"),clearTimeout(this._resumeTimeout),this._resumeTimeout=void 0,this._retryDelay=void 0)}},{key:"_resumeConnection",value:function(){var e=this._stropheConn.streamManagement,t=e.getResumeToken();if(t){s.info("Trying to resume the XMPP connection");var n=new URL(this._stropheConn.service),r=n.search,i=/(previd=)([\w-]+)/,o=r.match(i);o&&-1===o.indexOf(t)?r=r.replace(i,"$1".concat(t)):o||(r+=-1===r.indexOf("?")?"?previd=".concat(t):"&previd=".concat(t)),n.search=r,this._stropheConn.service=n.toString(),e.resume()}}},{key:"cancel",value:function(){this._cancelResume(),this._resumeRetryN=0,this._networkOnlineListener&&(this._networkOnlineListener(),this._networkOnlineListener=null)}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}).call(this,"/index.js")},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return Math.floor(Math.random()*(1e3*Math.pow(n,e)-t)+t)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return i}));var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._lastSuccess=null,this._lastFailedMessage=null}var t,n,i;return t=e,(n=[{key:"startTracking",value:function(e,t){var n=this,r=t.rawInput;t.rawInput=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var s=o[0];s.includes("failure")&&(n._lastFailedMessage=s),e.connected&&(n._lastSuccess=Date.now()),r.apply(t,o)}}},{key:"getLastFailedMessage",value:function(){return this._lastFailedMessage}},{key:"getTimeSinceLastSuccess",value:function(){return this._lastSuccess?Date.now()-this._lastSuccess:null}}])&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return g}));var r=n(4),i=n(2),o=n(22),a=n.n(o),s=n(88);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=d(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=Object(r.getLogger)(e),g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(s,e);var t,n,r,o=h(s);function s(e){var t,n=e.getTimeSinceLastServerResponse,r=e.onPingThresholdExceeded,i=e.pingOptions,a=void 0===i?{}:i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this)).failedPings=0,t._onPingThresholdExceeded=r,t._getTimeSinceLastServerResponse=n,t.pingInterval="number"==typeof a.interval?a.interval:1e4,t.pingTimeout="number"==typeof a.timeout?a.timeout:5e3,t.pingThreshold="number"==typeof a.threshold?a.threshold:2,t.pingTimestampsToKeep=Math.round(12e4/t.pingInterval),t.pingExecIntervals=new Array(t.pingTimestampsToKeep),t}return t=s,(n=[{key:"init",value:function(e){l(m(s.prototype),"init",this).call(this,e),i.Strophe.addNamespace("PING","urn:xmpp:ping")}},{key:"ping",value:function(e,t,n,r){this._addPingExecutionTimestamp();var o=Object(i.$iq)({type:"get",to:e});o.c("ping",{xmlns:i.Strophe.NS.PING}),this.connection.sendIQ2(o,{timeout:r}).then(t,n)}},{key:"startInterval",value:function(e){var t=this;clearInterval(this.intervalId),this.intervalId=window.setInterval((function(){var n=Date.now();if(t._getTimeSinceLastServerResponse()<n-t._lastServerCheck)return t._addPingExecutionTimestamp(),t._lastServerCheck=n,void(t.failedPings=0);t.ping(e,(function(){t._lastServerCheck=t._getTimeSinceLastServerResponse()+Date.now(),t.failedPings=0}),(function(e){t.failedPings+=1;var n="Ping ".concat(e?"error":"timeout");t.failedPings>=t.pingThreshold?(a.a.callErrorHandler(new Error(n)),v.error(n,e),t._onPingThresholdExceeded&&t._onPingThresholdExceeded()):v.warn(n,e)}),t.pingTimeout)}),this.pingInterval),v.info("XMPP pings will be sent every ".concat(this.pingInterval," ms"))}},{key:"stopInterval",value:function(){this.intervalId&&(window.clearInterval(this.intervalId),this.intervalId=null,this.failedPings=0,v.info("Ping interval cleared"))}},{key:"_addPingExecutionTimestamp",value:function(){this.pingExecIntervals.push((new Date).getTime()),this.pingExecIntervals.length>this.pingTimestampsToKeep&&this.pingExecIntervals.shift()}},{key:"getPingSuspendTime",value:function(){var e=this.pingExecIntervals.slice();e.push((new Date).getTime());var t=0,n=e[0];return e.forEach((function(e){var r=e-n;r>t&&(t=r),n=e})),t-=this.pingInterval,Math.max(t,0)}}])&&u(t.prototype,n),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(s.b)}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return g}));var r=n(4),i=n(2),o=n(0),a=n(175),s=n(88);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=d(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=Object(r.getLogger)(e),g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(c,e);var t,n,r,s=h(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=s.call(this)).xmpp=e,t.rooms={},t}return t=c,(n=[{key:"init",value:function(e){l(m(c.prototype),"init",this).call(this,e),this.connection.addHandler(this.onPresence.bind(this),null,"presence",null,null,null,null),this.connection.addHandler(this.onPresenceUnavailable.bind(this),null,"presence","unavailable",null),this.connection.addHandler(this.onPresenceError.bind(this),null,"presence","error",null),this.connection.addHandler(this.onMessage.bind(this),null,"message",null,null),this.connection.addHandler(this.onMute.bind(this),"http://jitsi.org/jitmeet/audio","iq","set",null,null),this.connection.addHandler(this.onMuteVideo.bind(this),"http://jitsi.org/jitmeet/video","iq","set",null,null)}},{key:"createRoom",value:function(e,t,n){var r=i.Strophe.getBareJidFromJid(e);if(this.isRoomCreated(r)){var s="You are already in the room!";throw v.error(s),new Error(s)}return this.rooms[r]=new a.a(this.connection,e,t,this.xmpp,n),this.eventEmitter.emit(o.XMPPEvents.EMUC_ROOM_ADDED,this.rooms[r]),this.rooms[r]}},{key:"isRoomCreated",value:function(e){return e in this.rooms}},{key:"doLeave",value:function(e){this.eventEmitter.emit(o.XMPPEvents.EMUC_ROOM_REMOVED,this.rooms[e]),delete this.rooms[e]}},{key:"onPresence",value:function(e){var t=e.getAttribute("from");if(e.getAttribute("type"))return!0;var n=this.rooms[i.Strophe.getBareJidFromJid(t)];return!n||($(e).find('>x[xmlns="http://jabber.org/protocol/muc#user"]>status[code="201"]').length&&n.createNonAnonymousRoom(),n.onPresence(e),!0)}},{key:"onPresenceUnavailable",value:function(e){var t=e.getAttribute("from"),n=this.rooms[i.Strophe.getBareJidFromJid(t)];return!n||(n.onPresenceUnavailable(e,t),!0)}},{key:"onPresenceError",value:function(e){var t=e.getAttribute("from"),n=this.rooms[i.Strophe.getBareJidFromJid(t)];return!n||(n.onPresenceError(e,t),!0)}},{key:"onMessage",value:function(e){var t=e.getAttribute("from"),n=this.rooms[i.Strophe.getBareJidFromJid(t)];return!n||(n.onMessage(e,t),!0)}},{key:"onMute",value:function(e){var t=e.getAttribute("from"),n=this.rooms[i.Strophe.getBareJidFromJid(t)];return!n||(n.onMute(e),!0)}},{key:"onMuteVideo",value:function(e){var t=e.getAttribute("from"),n=this.rooms[i.Strophe.getBareJidFromJid(t)];return!n||(n.onMuteVideo(e),!0)}}])&&u(t.prototype,n),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(s.a)}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var r=n(4),i=n(2),o=n(3),a=n(0);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=Object(r.getLogger)(e),l=function(){function e(t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._xmpp=t.xmpp,this._mainRoom=t,this._moderationEnabledByType=(s(n={},o.a.AUDIO,!1),s(n,o.a.VIDEO,!1),n),this._whitelistAudio=[],this._whitelistVideo=[],this._onMessage=this._onMessage.bind(this),this._xmpp.addListener(a.XMPPEvents.AV_MODERATION_RECEIVED,this._onMessage)}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this._xmpp.removeListener(a.XMPPEvents.AV_MODERATION_RECEIVED,this._onMessage)}},{key:"isSupported",value:function(){return Boolean(this._xmpp.avModerationComponentAddress)}},{key:"enable",value:function(e,t){if(this.isSupported()&&this._mainRoom.isModerator())if(e!==this._moderationEnabledByType[t]){var n=Object(i.$msg)({to:this._xmpp.avModerationComponentAddress});n.c("av_moderation",{enable:e,mediaType:t}).up(),this._xmpp.connection.send(n)}else u.warn("Moderation already in state:".concat(e," for mediaType:").concat(t));else u.error("Cannot enable:".concat(e," AV moderation supported:").concat(this.isSupported(),",\n                moderator:").concat(this._mainRoom.isModerator()))}},{key:"approve",value:function(e,t){if(this.isSupported()&&this._mainRoom.isModerator()){var n=Object(i.$msg)({to:this._xmpp.avModerationComponentAddress});n.c("av_moderation",{mediaType:e,jidToWhitelist:t}).up(),this._xmpp.connection.send(n)}else u.error("Cannot approve in AV moderation supported:".concat(this.isSupported(),",\n                moderator:").concat(this._mainRoom.isModerator()))}},{key:"reject",value:function(e,t){if(this.isSupported()&&this._mainRoom.isModerator()){var n=Object(i.$msg)({to:this._xmpp.avModerationComponentAddress});n.c("av_moderation",{mediaType:e,jidToBlacklist:t}).up(),this._xmpp.connection.send(n)}else u.error("Cannot reject in AV moderation supported:".concat(this.isSupported(),",\n                moderator:").concat(this._mainRoom.isModerator()))}},{key:"_onMessage",value:function(e){var t=this,n=e.removed,r=e.mediaType,i=e.enabled,s=e.approved,c=e.actor,u=e.whitelists;if(u){var l=r===o.a.AUDIO?this._whitelistAudio:this._whitelistVideo,d=Array.isArray(u[r])?u[r]:[];n?l.filter((function(e){return!d.includes(e)})).forEach((function(e){return t._xmpp.eventEmitter.emit(a.XMPPEvents.AV_MODERATION_PARTICIPANT_REJECTED,r,e)})):d.filter((function(e){return!l.includes(e)})).forEach((function(e){return t._xmpp.eventEmitter.emit(a.XMPPEvents.AV_MODERATION_PARTICIPANT_APPROVED,r,e)})),r===o.a.AUDIO?this._whitelistAudio=d:this._whitelistVideo=d}else void 0!==i&&this._moderationEnabledByType[r]!==i?(this._moderationEnabledByType[r]=i,this._xmpp.eventEmitter.emit(a.XMPPEvents.AV_MODERATION_CHANGED,i,r,c)):n?this._xmpp.eventEmitter.emit(a.XMPPEvents.AV_MODERATION_REJECTED,r):s&&this._xmpp.eventEmitter.emit(a.XMPPEvents.AV_MODERATION_APPROVED,r)}}])&&c(t.prototype,n),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var r=n(4),i=n(2),o=n(0);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s="features/breakout-rooms",c={ADD:"".concat(s,"/add"),REMOVE:"".concat(s,"/remove"),MOVE_TO_ROOM:"".concat(s,"/move-to-room")},u="".concat(s,"/move-to-room"),l="".concat(s,"/update"),d=Object(r.getLogger)(e),f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.room=t,this._handleMessages=this._handleMessages.bind(this),this.room.xmpp.addListener(o.XMPPEvents.BREAKOUT_ROOMS_EVENT,this._handleMessages),this._rooms={}}var t,n,r;return t=e,(n=[{key:"dispose",value:function(){this.room.xmpp.removeListener(o.XMPPEvents.BREAKOUT_ROOMS_EVENT,this._handleMessages)}},{key:"createBreakoutRoom",value:function(e){if(this.isSupported()&&this.room.isModerator()){var t={type:c.ADD,subject:e};this._sendMessage(t)}else d.error("Cannot create breakout room - supported:".concat(this.isSupported(),",\n                moderator:").concat(this.room.isModerator()))}},{key:"removeBreakoutRoom",value:function(e){if(this.isSupported()&&this.room.isModerator()){var t={type:c.REMOVE,breakoutRoomJid:e};this._sendMessage(t)}else d.error("Cannot remove breakout room - supported:".concat(this.isSupported(),",\n                moderator:").concat(this.room.isModerator()))}},{key:"sendParticipantToRoom",value:function(e,t){if(this.isSupported()&&this.room.isModerator()){var n={type:c.MOVE_TO_ROOM,participantJid:e,roomJid:t};this._sendMessage(n)}else d.error("Cannot send participant to room - supported:".concat(this.isSupported(),",\n                moderator:").concat(this.room.isModerator()))}},{key:"isSupported",value:function(){return Boolean(this.getComponentAddress())}},{key:"getComponentAddress",value:function(){return this.room.xmpp.breakoutRoomsComponentAddress}},{key:"_setIsBreakoutRoom",value:function(e){this._isBreakoutRoom=e}},{key:"isBreakoutRoom",value:function(){return void 0!==this._isBreakoutRoom?this._isBreakoutRoom:i.Strophe.getDomainFromJid(this.room.myroomjid)===this.getComponentAddress()}},{key:"_setMainRoomJid",value:function(e){this._mainRoomJid=e}},{key:"getMainRoomJid",value:function(){return this._mainRoomJid}},{key:"_handleMessages",value:function(e){switch(e.event){case u:this.room.eventEmitter.emit(o.XMPPEvents.BREAKOUT_ROOMS_MOVE_TO_ROOM,e.roomJid);break;case l:this._rooms=e.rooms,this.room.eventEmitter.emit(o.XMPPEvents.BREAKOUT_ROOMS_UPDATED,e)}}},{key:"_sendMessage",value:function(e){var t=Object(i.$msg)({to:this.getComponentAddress()});t.c("breakout_rooms",e).up(),this.room.xmpp.connection.send(t)}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var r=n(4),i=n(2),o=n(0);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=Object(r.getLogger)(e),c=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.xmpp=t.xmpp,this.mainRoom=t;var r=this._maybeJoinLobbyRoom.bind(this);this.mainRoom.addEventListener(o.XMPPEvents.LOCAL_ROLE_CHANGED,r),this.mainRoom.addEventListener(o.XMPPEvents.MUC_MEMBERS_ONLY_CHANGED,r),this.mainRoom.addEventListener(o.XMPPEvents.ROOM_CONNECT_MEMBERS_ONLY_ERROR,(function(e){n.lobbyRoomJid=e}))}var t,n,r;return t=e,(n=[{key:"isSupported",value:function(){return this.xmpp.lobbySupported}},{key:"enable",value:function(){var e=this;return this.isSupported()?new Promise((function(t,n){e.mainRoom.setMembersOnly(!0,t,n)})):Promise.reject(new Error("Lobby not supported!"))}},{key:"disable",value:function(){this.isSupported()&&this.mainRoom.isModerator()&&this.lobbyRoom&&this.mainRoom.membersOnlyEnabled&&this.mainRoom.setMembersOnly(!1)}},{key:"sendMessage",value:function(e){this.lobbyRoom&&this.lobbyRoom.sendMessage(JSON.stringify(e),"json-message")}},{key:"sendPrivateMessage",value:function(e,t){this.lobbyRoom&&this.lobbyRoom.sendPrivateMessage(e,JSON.stringify(t),"json-message")}},{key:"getLocalId",value:function(){if(this.lobbyRoom)return i.Strophe.getResourceFromJid(this.lobbyRoom.myroomjid)}},{key:"addMessageListener",value:function(e){if(this.lobbyRoom){var t=function(t,n){e(n,i.Strophe.getResourceFromJid(t))};return this.lobbyRoom.on(o.XMPPEvents.JSON_MESSAGE_RECEIVED,t),t}}},{key:"removeMessageHandler",value:function(e){this.lobbyRoom&&this.lobbyRoom.off(o.XMPPEvents.JSON_MESSAGE_RECEIVED,e)}},{key:"leave",value:function(){var e=this;return this.lobbyRoom?this.lobbyRoom.leave().then((function(){e.lobbyRoom=void 0,s.info("Lobby room left!")})).catch((function(){})):Promise.reject(new Error("The lobby has already been left"))}},{key:"setLobbyRoomJid",value:function(e){this.lobbyRoomJid=e}},{key:"_maybeJoinLobbyRoom",value:function(){this.isSupported()&&this.mainRoom.joined&&this.mainRoom.isModerator()&&this.mainRoom.membersOnlyEnabled&&!this.lobbyRoom&&this.join().then((function(){return s.info("Joined lobby room")})).catch((function(e){return s.error("Failed joining lobby",e)}))}},{key:"join",value:function(e,t){var n=this,r=this.mainRoom.joined&&this.mainRoom.isModerator();if(!this.lobbyRoomJid)return Promise.reject(new Error("Missing lobbyRoomJid, cannot join lobby room."));var a=i.Strophe.getNodeFromJid(this.lobbyRoomJid),c=i.Strophe.getDomainFromJid(this.lobbyRoomJid);return this.lobbyRoom=this.xmpp.createRoom(a,{customDomain:c,disableDiscoInfo:!0,disableFocus:!0,enableLobby:!1}),e&&this.lobbyRoom.addOrReplaceInPresence("nick",{attributes:{xmlns:"http://jabber.org/protocol/nick"},value:e}),r?(this.lobbyRoom.addPresenceListener("email",(function(e,t){n.mainRoom.eventEmitter.emit(o.XMPPEvents.MUC_LOBBY_MEMBER_UPDATED,t,{email:e.value})})),this.lobbyRoom.addEventListener(o.XMPPEvents.MUC_MEMBER_JOINED,(function(e,t,r,a,s,c,u,l,d){if(!Object.values(n.mainRoom.members).find((function(e){return e.jid===d}))){for(var f=0,h=Object.values(n.mainRoom.getBreakoutRooms()._rooms);f<h.length;f++){var p=h[f];if(Object.values(p.participants).find((function(e){return e.jid===d})))return}n.mainRoom.eventEmitter.emit(o.XMPPEvents.MUC_LOBBY_MEMBER_JOINED,i.Strophe.getResourceFromJid(e),t,u?u.avatar:void 0)}})),this.lobbyRoom.addEventListener(o.XMPPEvents.MUC_MEMBER_LEFT,(function(e){n.mainRoom.eventEmitter.emit(o.XMPPEvents.MUC_LOBBY_MEMBER_LEFT,i.Strophe.getResourceFromJid(e))})),this.lobbyRoom.addEventListener(o.XMPPEvents.MUC_DESTROYED,(function(){Object.keys(n.lobbyRoom.members).forEach((function(e){return n.mainRoom.eventEmitter.emit(o.XMPPEvents.MUC_LOBBY_MEMBER_LEFT,i.Strophe.getResourceFromJid(e))})),n.lobbyRoom.clean(),n.lobbyRoom=void 0,s.info("Lobby room left(destroyed)!")}))):(this.lobbyRoom.addEventListener(o.XMPPEvents.KICKED,(function(e){if(e)return n.mainRoom.eventEmitter.emit(o.XMPPEvents.MUC_DENIED_ACCESS),void n.lobbyRoom.clean()})),this.mainRoom.addEventListener(o.XMPPEvents.INVITE_MESSAGE_RECEIVED,(function(e,t,r,i){s.debug("Received approval to join ".concat(e," ").concat(t," ").concat(r)),e===n.mainRoom.roomjid&&n.mainRoom.join(i)})),this.lobbyRoom.addEventListener(o.XMPPEvents.MUC_DESTROYED,(function(e,t){t?n.mainRoom.join():(n.lobbyRoom.clean(),n.mainRoom.eventEmitter.emit(o.XMPPEvents.MUC_DESTROYED,e))})),this.mainRoom.addEventListener(o.XMPPEvents.MUC_JOINED,(function(){n.leave()}))),new Promise((function(e,i){n.lobbyRoom.addEventListener(o.XMPPEvents.MUC_JOINED,(function(){e(),t&&!r&&n.lobbyRoom.addOrReplaceInPresence("email",{value:t})&&n.lobbyRoom.sendPresence()})),n.lobbyRoom.addEventListener(o.XMPPEvents.ROOM_JOIN_ERROR,i),n.lobbyRoom.addEventListener(o.XMPPEvents.ROOM_CONNECT_NOT_ALLOWED_ERROR,i),n.lobbyRoom.addEventListener(o.XMPPEvents.ROOM_CONNECT_ERROR,i),n.lobbyRoom.join()}))}},{key:"denyAccess",value:function(e){if(this.isSupported()&&this.mainRoom.isModerator()){var t=Object.keys(this.lobbyRoom.members).find((function(t){return i.Strophe.getResourceFromJid(t)===e}));t?this.lobbyRoom.kick(t):s.error("Not found member for ".concat(e," in lobby room."))}}},{key:"approveAccess",value:function(e){if(this.isSupported()&&this.mainRoom.isModerator()){var t=this.mainRoom.roomjid;this.mainRoom.getBreakoutRooms().isBreakoutRoom()&&(t=this.mainRoom.getBreakoutRooms().getMainRoomJid());var n=Object.keys(this.lobbyRoom.members).find((function(t){return i.Strophe.getResourceFromJid(t)===e}));if(n){var r=this.lobbyRoom.members[n].jid,o=Object(i.$msg)({to:t}).c("x",{xmlns:"http://jabber.org/protocol/muc#user"}).c("invite",{to:r});this.xmpp.connection.sendIQ(o,(function(){}),(function(e){s.error("Error sending invite for ".concat(r),e)}))}else s.error("Not found member for ".concat(n," in lobby room."))}}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d}));var r=n(4),i=n(2),o=n(51),a=n(222),s=n(0).XMPPEvents,c=n(22),u=Object(r.getLogger)(e);function l(e){var t=1;return function(n){if(!n){var r=Math.pow(2,t-1);return t+=1,r*e}t=1}}function d(e,t,n,r){function i(e){if(e.data&&e.data.sessionId){if(e.origin!==window.location.origin)return void u.warn("Ignoring sessionId from different origin: ".concat(e.origin));o.a.sessionId=e.data.sessionId}}this.roomName=e,this.xmppService=t,this.getNextTimeout=l(1e3),this.getNextErrorTimeout=l(1e3),this.externalAuthEnabled=!1,this.options=r,this.sipGatewayEnabled=!1,this.eventEmitter=n,this.connection=this.xmppService.connection,window.addEventListener?window.addEventListener("message",i,!1):window.attachEvent("onmessage",i)}d.prototype.isExternalAuthEnabled=function(){return this.externalAuthEnabled},d.prototype.isSipGatewayEnabled=function(){return this.sipGatewayEnabled},d.prototype.onMucMemberLeft=function(e){"focus"===i.Strophe.getResourceFromJid(e)&&(u.info("Focus has left the room - leaving conference"),this.eventEmitter.emit(s.FOCUS_LEFT))},d.prototype.setFocusUserJid=function(e){this.focusUserJid||(this.focusUserJid=e,u.info("Focus jid set to:  ".concat(this.focusUserJid)))},d.prototype.getFocusUserJid=function(){return this.focusUserJid},d.prototype.getFocusComponent=function(){var e=this.options.connection.hosts.focus;return e||(e="focus.".concat(this.options.connection.hosts.domain)),e},d.prototype.createConferenceIq=function(){var e,t,n,r=Object(i.$iq)({to:this.getFocusComponent(),type:"set"}),a=o.a.sessionId,s=o.a.machineId,c=this.options.conference;u.info("Session ID: ".concat(a," machine UID: ").concat(s)),r.c("conference",{xmlns:"http://jitsi.org/protocol/focus",room:this.roomName,"machine-uid":s}),a&&r.attrs({"session-id":a}),r.c("property",{name:"disableRtx",value:Boolean(c.disableRtx)}).up(),void 0!==c.audioPacketDelay&&r.c("property",{name:"audioPacketDelay",value:c.audioPacketDelay}).up(),c.startBitrate&&r.c("property",{name:"startBitrate",value:c.startBitrate}).up(),c.minBitrate&&r.c("property",{name:"minBitrate",value:c.minBitrate}).up(),void 0!==this.options.conference.startAudioMuted&&r.c("property",{name:"startAudioMuted",value:this.options.conference.startAudioMuted}).up(),void 0!==this.options.conference.startVideoMuted&&r.c("property",{name:"startVideoMuted",value:this.options.conference.startVideoMuted}).up();var l=null!==(n=null===(t=null===(e=this.options.conference)||void 0===e?void 0:e.analytics)||void 0===t?void 0:t.rtcstatsEnabled)&&void 0!==n&&n;l||r.c("property",{name:"rtcstatsEnabled",value:l}).up();var d=this.options.conference,f=d.callStatsID,h=d.callStatsSecret,p=d.disableThirdPartyRequests,m=d.enableCallStats,v=!f||!h||!m||!0===p;return v&&r.c("property",{name:"callstatsEnabled",value:!v}).up(),r.up(),r},d.prototype.parseSessionId=function(e){var t=$(e).find("conference").attr("session-id");t&&(u.info("Received sessionId:  ".concat(t)),o.a.sessionId=t)},d.prototype.parseConfigOptions=function(e){this.setFocusUserJid($(e).find("conference").attr("focusjid"));var t=$(e).find(">conference>property[name='authentication'][value='true']").length>0;u.info("Authentication enabled: ".concat(t)),this.externalAuthEnabled=$(e).find(">conference>property[name='externalAuth'][value='true']").length>0,u.info("External authentication enabled: ".concat(this.externalAuthEnabled)),this.externalAuthEnabled||this.parseSessionId(e);var n=$(e).find(">conference").attr("identity");this.eventEmitter.emit(a.IDENTITY_UPDATED,t,n),$(e).find(">conference>property[name='sipGatewayEnabled'][value='true']").length&&(this.sipGatewayEnabled=!0),u.info("Sip gateway enabled:  ".concat(this.sipGatewayEnabled))},d.prototype.allocateConferenceFocus=function(){var e=this;return new Promise((function(t){e.setFocusUserJid(e.options.connection.focusUserJid),e.connection.sendIQ(e.createConferenceIq(),(function(n){return e._allocateConferenceFocusSuccess(n,t)}),(function(n){return e._allocateConferenceFocusError(n,t)})),e.connection.flush()}))},d.prototype._allocateConferenceFocusError=function(e,t){var n=this,r=$(e).find(">error>session-invalid").length||$(e).find(">error>not-acceptable").length;if(r&&(u.info("Session expired! - removing"),o.a.sessionId=void 0),$(e).find(">error>graceful-shutdown").length)this.eventEmitter.emit(s.GRACEFUL_SHUTDOWN);else{var a=$(e).find(">error>reservation-error");if(a.length){var l,d=a.attr("error-code"),f=$(e).find(">error>text");return f&&(l=f.text()),void this.eventEmitter.emit(s.RESERVATION_ERROR,d,l)}if($(e).find(">error>not-authorized").length)return u.warn("Unauthorized to start the conference",e),i.Strophe.getDomainFromJid(e.getAttribute("to"))!==this.options.connection.hosts.anonymousdomain&&(this.externalAuthEnabled=!0),void this.eventEmitter.emit(s.AUTHENTICATION_REQUIRED);var h=this.getNextErrorTimeout(),p="Focus error, retry after ".concat(h);c.callErrorHandler(new Error(p)),u.error(p,e);var m=this.getFocusComponent(),v=h/1e3;r||this.eventEmitter.emit(s.FOCUS_DISCONNECTED,m,v),this.getNextTimeout(!0),window.setTimeout((function(){return n.allocateConferenceFocus().then(t)}),h)}},d.prototype._allocateConferenceFocusSuccess=function(e,t){var n=this;if(this.parseConfigOptions(e),this.getNextErrorTimeout(!0),"true"===$(e).find("conference").attr("ready"))this.getNextTimeout(!0),t();else{var r=this.getNextTimeout();u.info("Waiting for the focus... ".concat(r)),window.setTimeout((function(){return n.allocateConferenceFocus().then(t)}),r)}},d.prototype.authenticate=function(){var e=this;return new Promise((function(t,n){e.connection.sendIQ(e.createConferenceIq(),(function(n){e.parseSessionId(n),t()}),(function(e){return n({error:$(e).find("iq>error :first").prop("tagName"),message:$(e).find("iq>error>text").text()})}))}))},d.prototype.getLoginUrl=function(e,t){this._getLoginUrl(!1,e,t)},d.prototype._getLoginUrl=function(e,t,n){var r=Object(i.$iq)({to:this.getFocusComponent(),type:"get"}),a={xmlns:"http://jitsi.org/protocol/focus",room:this.roomName,"machine-uid":o.a.machineId},s="auth url";function l(e,t){c.callErrorHandler(new Error(e)),u.error(e,t),n(t)}e&&(a.popup=!0,s="POPUP ".concat(s)),r.c("login-url",a),this.connection.sendIQ(r,(function(e){var n=$(e).find("login-url").attr("url");(n=decodeURIComponent(n))?(u.info("Got ".concat(s,": ").concat(n)),t(n)):l("Failed to get ".concat(s," from the focus"),e)}),l.bind(void 0,"Get ".concat(s," error")))},d.prototype.getPopupLoginUrl=function(e,t){this._getLoginUrl(!0,e,t)},d.prototype.logout=function(e){var t=Object(i.$iq)({to:this.getFocusComponent(),type:"set"}),n=o.a.sessionId;n?(t.c("logout",{xmlns:"http://jitsi.org/protocol/focus","session-id":n}),this.connection.sendIQ(t,(function(t){var n=$(t).find("logout").attr("logout-url");n&&(n=decodeURIComponent(n)),u.info("Log out OK, url: ".concat(n),t),o.a.sessionId=void 0,e(n)}),(function(e){c.callErrorHandler(new Error("Logout error")),u.error("Logout error",e)}))):e()}}).call(this,"/index.js")},function(e,t,n){var r=n(116),i=["Aaliyah","Aaron","Abagail","Abbey","Abbie","Abbigail","Abby","Abdiel","Abdul","Abdullah","Abe","Abel","Abelardo","Abigail","Abigale","Abigayle","Abner","Abraham","Ada","Adah","Adalberto","Adaline","Adam","Adan","Addie","Addison","Adela","Adelbert","Adele","Adelia","Adeline","Adell","Adella","Adelle","Aditya","Adolf","Adolfo","Adolph","Adolphus","Adonis","Adrain","Adrian","Adriana","Adrianna","Adriel","Adrien","Adrienne","Afton","Aglae","Agnes","Agustin","Agustina","Ahmad","Ahmed","Aida","Aidan","Aiden","Aileen","Aisha","Aiyana","Akeem","Al","Alaina","Alan","Alana","Alanis","Alanna","Alayna","Alba","Albert","Alberta","Albertha","Alberto","Albin","Albina","Alda","Alden","Alec","Aleen","Alejandra","Alejandrin","Alek","Alena","Alene","Alessandra","Alessandro","Alessia","Aletha","Alex","Alexa","Alexander","Alexandra","Alexandre","Alexandrea","Alexandria","Alexandrine","Alexandro","Alexane","Alexanne","Alexie","Alexis","Alexys","Alexzander","Alf","Alfonso","Alfonzo","Alford","Alfred","Alfreda","Alfredo","Ali","Alia","Alice","Alicia","Alisa","Alisha","Alison","Alivia","Aliya","Aliyah","Aliza","Alize","Allan","Allen","Allene","Allie","Allison","Ally","Alphonso","Alta","Althea","Alva","Alvah","Alvena","Alvera","Alverta","Alvina","Alvis","Alyce","Alycia","Alysa","Alysha","Alyson","Alysson","Amalia","Amanda","Amani","Amara","Amari","Amaya","Amber","Ambrose","Amelia","Amelie","Amely","America","Americo","Amie","Amina","Amir","Amira","Amiya","Amos","Amparo","Amy","Amya","Ana","Anabel","Anabelle","Anahi","Anais","Anastacio","Anastasia","Anderson","Andre","Andreane","Andreanne","Andres","Andrew","Andy","Angel","Angela","Angelica","Angelina","Angeline","Angelita","Angelo","Angie","Angus","Anibal","Anika","Anissa","Anita","Aniya","Aniyah","Anjali","Anna","Annabel","Annabell","Annabelle","Annalise","Annamae","Annamarie","Anne","Annetta","Annette","Annie","Ansel","Ansley","Anthony","Antoinette","Antone","Antonetta","Antonette","Antonia","Antonietta","Antonina","Antonio","Antwan","Antwon","Anya","April","Ara","Araceli","Aracely","Arch","Archibald","Ardella","Arden","Ardith","Arely","Ari","Ariane","Arianna","Aric","Ariel","Arielle","Arjun","Arlene","Arlie","Arlo","Armand","Armando","Armani","Arnaldo","Arne","Arno","Arnold","Arnoldo","Arnulfo","Aron","Art","Arthur","Arturo","Arvel","Arvid","Arvilla","Aryanna","Asa","Asha","Ashlee","Ashleigh","Ashley","Ashly","Ashlynn","Ashton","Ashtyn","Asia","Assunta","Astrid","Athena","Aubree","Aubrey","Audie","Audra","Audreanne","Audrey","August","Augusta","Augustine","Augustus","Aurelia","Aurelie","Aurelio","Aurore","Austen","Austin","Austyn","Autumn","Ava","Avery","Avis","Axel","Ayana","Ayden","Ayla","Aylin","Baby","Bailee","Bailey","Barbara","Barney","Baron","Barrett","Barry","Bart","Bartholome","Barton","Baylee","Beatrice","Beau","Beaulah","Bell","Bella","Belle","Ben","Benedict","Benjamin","Bennett","Bennie","Benny","Benton","Berenice","Bernadette","Bernadine","Bernard","Bernardo","Berneice","Bernhard","Bernice","Bernie","Berniece","Bernita","Berry","Bert","Berta","Bertha","Bertram","Bertrand","Beryl","Bessie","Beth","Bethany","Bethel","Betsy","Bette","Bettie","Betty","Bettye","Beulah","Beverly","Bianka","Bill","Billie","Billy","Birdie","Blair","Blaise","Blake","Blanca","Blanche","Blaze","Bo","Bobbie","Bobby","Bonita","Bonnie","Boris","Boyd","Brad","Braden","Bradford","Bradley","Bradly","Brady","Braeden","Brain","Brandi","Brando","Brandon","Brandt","Brandy","Brandyn","Brannon","Branson","Brant","Braulio","Braxton","Brayan","Breana","Breanna","Breanne","Brenda","Brendan","Brenden","Brendon","Brenna","Brennan","Brennon","Brent","Bret","Brett","Bria","Brian","Briana","Brianne","Brice","Bridget","Bridgette","Bridie","Brielle","Brigitte","Brionna","Brisa","Britney","Brittany","Brock","Broderick","Brody","Brook","Brooke","Brooklyn","Brooks","Brown","Bruce","Bryana","Bryce","Brycen","Bryon","Buck","Bud","Buddy","Buford","Bulah","Burdette","Burley","Burnice","Buster","Cade","Caden","Caesar","Caitlyn","Cale","Caleb","Caleigh","Cali","Calista","Callie","Camden","Cameron","Camila","Camilla","Camille","Camren","Camron","Camryn","Camylle","Candace","Candelario","Candice","Candida","Candido","Cara","Carey","Carissa","Carlee","Carleton","Carley","Carli","Carlie","Carlo","Carlos","Carlotta","Carmel","Carmela","Carmella","Carmelo","Carmen","Carmine","Carol","Carolanne","Carole","Carolina","Caroline","Carolyn","Carolyne","Carrie","Carroll","Carson","Carter","Cary","Casandra","Casey","Casimer","Casimir","Casper","Cassandra","Cassandre","Cassidy","Cassie","Catalina","Caterina","Catharine","Catherine","Cathrine","Cathryn","Cathy","Cayla","Ceasar","Cecelia","Cecil","Cecile","Cecilia","Cedrick","Celestine","Celestino","Celia","Celine","Cesar","Chad","Chadd","Chadrick","Chaim","Chance","Chandler","Chanel","Chanelle","Charity","Charlene","Charles","Charley","Charlie","Charlotte","Chase","Chasity","Chauncey","Chaya","Chaz","Chelsea","Chelsey","Chelsie","Chesley","Chester","Chet","Cheyanne","Cheyenne","Chloe","Chris","Christ","Christa","Christelle","Christian","Christiana","Christina","Christine","Christop","Christophe","Christopher","Christy","Chyna","Ciara","Cicero","Cielo","Cierra","Cindy","Citlalli","Clair","Claire","Clara","Clarabelle","Clare","Clarissa","Clark","Claud","Claude","Claudia","Claudie","Claudine","Clay","Clemens","Clement","Clementina","Clementine","Clemmie","Cleo","Cleora","Cleta","Cletus","Cleve","Cleveland","Clifford","Clifton","Clint","Clinton","Clotilde","Clovis","Cloyd","Clyde","Coby","Cody","Colby","Cole","Coleman","Colin","Colleen","Collin","Colt","Colten","Colton","Columbus","Concepcion","Conner","Connie","Connor","Conor","Conrad","Constance","Constantin","Consuelo","Cooper","Cora","Coralie","Corbin","Cordelia","Cordell","Cordia","Cordie","Corene","Corine","Cornelius","Cornell","Corrine","Cortez","Cortney","Cory","Coty","Courtney","Coy","Craig","Crawford","Creola","Cristal","Cristian","Cristina","Cristobal","Cristopher","Cruz","Crystal","Crystel","Cullen","Curt","Curtis","Cydney","Cynthia","Cyril","Cyrus","Dagmar","Dahlia","Daija","Daisha","Daisy","Dakota","Dale","Dallas","Dallin","Dalton","Damaris","Dameon","Damian","Damien","Damion","Damon","Dan","Dana","Dandre","Dane","D'angelo","Dangelo","Danial","Daniela","Daniella","Danielle","Danika","Dannie","Danny","Dante","Danyka","Daphne","Daphnee","Daphney","Darby","Daren","Darian","Dariana","Darien","Dario","Darion","Darius","Darlene","Daron","Darrel","Darrell","Darren","Darrick","Darrin","Darrion","Darron","Darryl","Darwin","Daryl","Dashawn","Dasia","Dave","David","Davin","Davion","Davon","Davonte","Dawn","Dawson","Dax","Dayana","Dayna","Dayne","Dayton","Dean","Deangelo","Deanna","Deborah","Declan","Dedric","Dedrick","Dee","Deion","Deja","Dejah","Dejon","Dejuan","Delaney","Delbert","Delfina","Delia","Delilah","Dell","Della","Delmer","Delores","Delpha","Delphia","Delphine","Delta","Demarco","Demarcus","Demario","Demetris","Demetrius","Demond","Dena","Denis","Dennis","Deon","Deondre","Deontae","Deonte","Dereck","Derek","Derick","Deron","Derrick","Deshaun","Deshawn","Desiree","Desmond","Dessie","Destany","Destin","Destinee","Destiney","Destini","Destiny","Devan","Devante","Deven","Devin","Devon","Devonte","Devyn","Dewayne","Dewitt","Dexter","Diamond","Diana","Dianna","Diego","Dillan","Dillon","Dimitri","Dina","Dino","Dion","Dixie","Dock","Dolly","Dolores","Domenic","Domenica","Domenick","Domenico","Domingo","Dominic","Dominique","Don","Donald","Donato","Donavon","Donna","Donnell","Donnie","Donny","Dora","Dorcas","Dorian","Doris","Dorothea","Dorothy","Dorris","Dortha","Dorthy","Doug","Douglas","Dovie","Doyle","Drake","Drew","Duane","Dudley","Dulce","Duncan","Durward","Dustin","Dusty","Dwight","Dylan","Earl","Earlene","Earline","Earnest","Earnestine","Easter","Easton","Ebba","Ebony","Ed","Eda","Edd","Eddie","Eden","Edgar","Edgardo","Edison","Edmond","Edmund","Edna","Eduardo","Edward","Edwardo","Edwin","Edwina","Edyth","Edythe","Effie","Efrain","Efren","Eileen","Einar","Eino","Eladio","Elaina","Elbert","Elda","Eldon","Eldora","Eldred","Eldridge","Eleanora","Eleanore","Eleazar","Electa","Elena","Elenor","Elenora","Eleonore","Elfrieda","Eli","Elian","Eliane","Elias","Eliezer","Elijah","Elinor","Elinore","Elisa","Elisabeth","Elise","Eliseo","Elisha","Elissa","Eliza","Elizabeth","Ella","Ellen","Ellie","Elliot","Elliott","Ellis","Ellsworth","Elmer","Elmira","Elmo","Elmore","Elna","Elnora","Elody","Eloisa","Eloise","Elouise","Eloy","Elroy","Elsa","Else","Elsie","Elta","Elton","Elva","Elvera","Elvie","Elvis","Elwin","Elwyn","Elyse","Elyssa","Elza","Emanuel","Emelia","Emelie","Emely","Emerald","Emerson","Emery","Emie","Emil","Emile","Emilia","Emiliano","Emilie","Emilio","Emily","Emma","Emmalee","Emmanuel","Emmanuelle","Emmet","Emmett","Emmie","Emmitt","Emmy","Emory","Ena","Enid","Enoch","Enola","Enos","Enrico","Enrique","Ephraim","Era","Eriberto","Eric","Erica","Erich","Erick","Ericka","Erik","Erika","Erin","Erling","Erna","Ernest","Ernestina","Ernestine","Ernesto","Ernie","Ervin","Erwin","Eryn","Esmeralda","Esperanza","Esta","Esteban","Estefania","Estel","Estell","Estella","Estelle","Estevan","Esther","Estrella","Etha","Ethan","Ethel","Ethelyn","Ethyl","Ettie","Eudora","Eugene","Eugenia","Eula","Eulah","Eulalia","Euna","Eunice","Eusebio","Eva","Evalyn","Evan","Evangeline","Evans","Eve","Eveline","Evelyn","Everardo","Everett","Everette","Evert","Evie","Ewald","Ewell","Ezekiel","Ezequiel","Ezra","Fabian","Fabiola","Fae","Fannie","Fanny","Fatima","Faustino","Fausto","Favian","Fay","Faye","Federico","Felicia","Felicita","Felicity","Felipa","Felipe","Felix","Felton","Fermin","Fern","Fernando","Ferne","Fidel","Filiberto","Filomena","Finn","Fiona","Flavie","Flavio","Fleta","Fletcher","Flo","Florence","Florencio","Florian","Florida","Florine","Flossie","Floy","Floyd","Ford","Forest","Forrest","Foster","Frances","Francesca","Francesco","Francis","Francisca","Francisco","Franco","Frank","Frankie","Franz","Fred","Freda","Freddie","Freddy","Frederic","Frederick","Frederik","Frederique","Fredrick","Fredy","Freeda","Freeman","Freida","Frida","Frieda","Friedrich","Fritz","Furman","Gabe","Gabriel","Gabriella","Gabrielle","Gaetano","Gage","Gail","Gardner","Garett","Garfield","Garland","Garnet","Garnett","Garret","Garrett","Garrick","Garrison","Garry","Garth","Gaston","Gavin","Gay","Gayle","Gaylord","Gene","General","Genesis","Genevieve","Gennaro","Genoveva","Geo","Geoffrey","George","Georgette","Georgiana","Georgianna","Geovanni","Geovanny","Geovany","Gerald","Geraldine","Gerard","Gerardo","Gerda","Gerhard","Germaine","German","Gerry","Gerson","Gertrude","Gia","Gianni","Gideon","Gilbert","Gilberto","Gilda","Giles","Gillian","Gina","Gino","Giovani","Giovanna","Giovanni","Giovanny","Gisselle","Giuseppe","Gladyce","Gladys","Glen","Glenda","Glenna","Glennie","Gloria","Godfrey","Golda","Golden","Gonzalo","Gordon","Grace","Gracie","Graciela","Grady","Graham","Grant","Granville","Grayce","Grayson","Green","Greg","Gregg","Gregoria","Gregorio","Gregory","Greta","Gretchen","Greyson","Griffin","Grover","Guadalupe","Gudrun","Guido","Guillermo","Guiseppe","Gunnar","Gunner","Gus","Gussie","Gust","Gustave","Guy","Gwen","Gwendolyn","Hadley","Hailee","Hailey","Hailie","Hal","Haleigh","Haley","Halie","Halle","Hallie","Hank","Hanna","Hannah","Hans","Hardy","Harley","Harmon","Harmony","Harold","Harrison","Harry","Harvey","Haskell","Hassan","Hassie","Hattie","Haven","Hayden","Haylee","Hayley","Haylie","Hazel","Hazle","Heath","Heather","Heaven","Heber","Hector","Heidi","Helen","Helena","Helene","Helga","Hellen","Helmer","Heloise","Henderson","Henri","Henriette","Henry","Herbert","Herman","Hermann","Hermina","Herminia","Herminio","Hershel","Herta","Hertha","Hester","Hettie","Hilario","Hilbert","Hilda","Hildegard","Hillard","Hillary","Hilma","Hilton","Hipolito","Hiram","Hobart","Holden","Hollie","Hollis","Holly","Hope","Horace","Horacio","Hortense","Hosea","Houston","Howard","Howell","Hoyt","Hubert","Hudson","Hugh","Hulda","Humberto","Hunter","Hyman","Ian","Ibrahim","Icie","Ida","Idell","Idella","Ignacio","Ignatius","Ike","Ila","Ilene","Iliana","Ima","Imani","Imelda","Immanuel","Imogene","Ines","Irma","Irving","Irwin","Isaac","Isabel","Isabell","Isabella","Isabelle","Isac","Isadore","Isai","Isaiah","Isaias","Isidro","Ismael","Isobel","Isom","Israel","Issac","Itzel","Iva","Ivah","Ivory","Ivy","Izabella","Izaiah","Jabari","Jace","Jacey","Jacinthe","Jacinto","Jack","Jackeline","Jackie","Jacklyn","Jackson","Jacky","Jaclyn","Jacquelyn","Jacques","Jacynthe","Jada","Jade","Jaden","Jadon","Jadyn","Jaeden","Jaida","Jaiden","Jailyn","Jaime","Jairo","Jakayla","Jake","Jakob","Jaleel","Jalen","Jalon","Jalyn","Jamaal","Jamal","Jamar","Jamarcus","Jamel","Jameson","Jamey","Jamie","Jamil","Jamir","Jamison","Jammie","Jan","Jana","Janae","Jane","Janelle","Janessa","Janet","Janice","Janick","Janie","Janis","Janiya","Jannie","Jany","Jaquan","Jaquelin","Jaqueline","Jared","Jaren","Jarod","Jaron","Jarred","Jarrell","Jarret","Jarrett","Jarrod","Jarvis","Jasen","Jasmin","Jason","Jasper","Jaunita","Javier","Javon","Javonte","Jay","Jayce","Jaycee","Jayda","Jayde","Jayden","Jaydon","Jaylan","Jaylen","Jaylin","Jaylon","Jayme","Jayne","Jayson","Jazlyn","Jazmin","Jazmyn","Jazmyne","Jean","Jeanette","Jeanie","Jeanne","Jed","Jedediah","Jedidiah","Jeff","Jefferey","Jeffery","Jeffrey","Jeffry","Jena","Jenifer","Jennie","Jennifer","Jennings","Jennyfer","Jensen","Jerad","Jerald","Jeramie","Jeramy","Jerel","Jeremie","Jeremy","Jermain","Jermaine","Jermey","Jerod","Jerome","Jeromy","Jerrell","Jerrod","Jerrold","Jerry","Jess","Jesse","Jessica","Jessie","Jessika","Jessy","Jessyca","Jesus","Jett","Jettie","Jevon","Jewel","Jewell","Jillian","Jimmie","Jimmy","Jo","Joan","Joana","Joanie","Joanne","Joannie","Joanny","Joany","Joaquin","Jocelyn","Jodie","Jody","Joe","Joel","Joelle","Joesph","Joey","Johan","Johann","Johanna","Johathan","John","Johnathan","Johnathon","Johnnie","Johnny","Johnpaul","Johnson","Jolie","Jon","Jonas","Jonatan","Jonathan","Jonathon","Jordan","Jordane","Jordi","Jordon","Jordy","Jordyn","Jorge","Jose","Josefa","Josefina","Joseph","Josephine","Josh","Joshua","Joshuah","Josiah","Josiane","Josianne","Josie","Josue","Jovan","Jovani","Jovanny","Jovany","Joy","Joyce","Juana","Juanita","Judah","Judd","Jude","Judge","Judson","Judy","Jules","Julia","Julian","Juliana","Julianne","Julie","Julien","Juliet","Julio","Julius","June","Junior","Junius","Justen","Justice","Justina","Justine","Juston","Justus","Justyn","Juvenal","Juwan","Kacey","Kaci","Kacie","Kade","Kaden","Kadin","Kaela","Kaelyn","Kaia","Kailee","Kailey","Kailyn","Kaitlin","Kaitlyn","Kale","Kaleb","Kaleigh","Kaley","Kali","Kallie","Kameron","Kamille","Kamren","Kamron","Kamryn","Kane","Kara","Kareem","Karelle","Karen","Kari","Kariane","Karianne","Karina","Karine","Karl","Karlee","Karley","Karli","Karlie","Karolann","Karson","Kasandra","Kasey","Kassandra","Katarina","Katelin","Katelyn","Katelynn","Katharina","Katherine","Katheryn","Kathleen","Kathlyn","Kathryn","Kathryne","Katlyn","Katlynn","Katrina","Katrine","Kattie","Kavon","Kay","Kaya","Kaycee","Kayden","Kayla","Kaylah","Kaylee","Kayleigh","Kayley","Kayli","Kaylie","Kaylin","Keagan","Keanu","Keara","Keaton","Keegan","Keeley","Keely","Keenan","Keira","Keith","Kellen","Kelley","Kelli","Kellie","Kelly","Kelsi","Kelsie","Kelton","Kelvin","Ken","Kendall","Kendra","Kendrick","Kenna","Kennedi","Kennedy","Kenneth","Kennith","Kenny","Kenton","Kenya","Kenyatta","Kenyon","Keon","Keshaun","Keshawn","Keven","Kevin","Kevon","Keyon","Keyshawn","Khalid","Khalil","Kian","Kiana","Kianna","Kiara","Kiarra","Kiel","Kiera","Kieran","Kiley","Kim","Kimberly","King","Kip","Kira","Kirk","Kirsten","Kirstin","Kitty","Kobe","Koby","Kody","Kolby","Kole","Korbin","Korey","Kory","Kraig","Kris","Krista","Kristian","Kristin","Kristina","Kristofer","Kristoffer","Kristopher","Kristy","Krystal","Krystel","Krystina","Kurt","Kurtis","Kyla","Kyle","Kylee","Kyleigh","Kyler","Kylie","Kyra","Lacey","Lacy","Ladarius","Lafayette","Laila","Laisha","Lamar","Lambert","Lamont","Lance","Landen","Lane","Laney","Larissa","Laron","Larry","Larue","Laura","Laurel","Lauren","Laurence","Lauretta","Lauriane","Laurianne","Laurie","Laurine","Laury","Lauryn","Lavada","Lavern","Laverna","Laverne","Lavina","Lavinia","Lavon","Lavonne","Lawrence","Lawson","Layla","Layne","Lazaro","Lea","Leann","Leanna","Leanne","Leatha","Leda","Lee","Leif","Leila","Leilani","Lela","Lelah","Leland","Lelia","Lempi","Lemuel","Lenna","Lennie","Lenny","Lenora","Lenore","Leo","Leola","Leon","Leonard","Leonardo","Leone","Leonel","Leonie","Leonor","Leonora","Leopold","Leopoldo","Leora","Lera","Lesley","Leslie","Lesly","Lessie","Lester","Leta","Letha","Letitia","Levi","Lew","Lewis","Lexi","Lexie","Lexus","Lia","Liam","Liana","Libbie","Libby","Lila","Lilian","Liliana","Liliane","Lilla","Lillian","Lilliana","Lillie","Lilly","Lily","Lilyan","Lina","Lincoln","Linda","Lindsay","Lindsey","Linnea","Linnie","Linwood","Lionel","Lisa","Lisandro","Lisette","Litzy","Liza","Lizeth","Lizzie","Llewellyn","Lloyd","Logan","Lois","Lola","Lolita","Loma","Lon","London","Lonie","Lonnie","Lonny","Lonzo","Lora","Loraine","Loren","Lorena","Lorenz","Lorenza","Lorenzo","Lori","Lorine","Lorna","Lottie","Lou","Louie","Louisa","Lourdes","Louvenia","Lowell","Loy","Loyal","Loyce","Lucas","Luciano","Lucie","Lucienne","Lucile","Lucinda","Lucio","Lucious","Lucius","Lucy","Ludie","Ludwig","Lue","Luella","Luigi","Luis","Luisa","Lukas","Lula","Lulu","Luna","Lupe","Lura","Lurline","Luther","Luz","Lyda","Lydia","Lyla","Lynn","Lyric","Lysanne","Mabel","Mabelle","Mable","Mac","Macey","Maci","Macie","Mack","Mackenzie","Macy","Madaline","Madalyn","Maddison","Madeline","Madelyn","Madelynn","Madge","Madie","Madilyn","Madisen","Madison","Madisyn","Madonna","Madyson","Mae","Maegan","Maeve","Mafalda","Magali","Magdalen","Magdalena","Maggie","Magnolia","Magnus","Maia","Maida","Maiya","Major","Makayla","Makenna","Makenzie","Malachi","Malcolm","Malika","Malinda","Mallie","Mallory","Malvina","Mandy","Manley","Manuel","Manuela","Mara","Marc","Marcel","Marcelina","Marcelino","Marcella","Marcelle","Marcellus","Marcelo","Marcia","Marco","Marcos","Marcus","Margaret","Margarete","Margarett","Margaretta","Margarette","Margarita","Marge","Margie","Margot","Margret","Marguerite","Maria","Mariah","Mariam","Marian","Mariana","Mariane","Marianna","Marianne","Mariano","Maribel","Marie","Mariela","Marielle","Marietta","Marilie","Marilou","Marilyne","Marina","Mario","Marion","Marisa","Marisol","Maritza","Marjolaine","Marjorie","Marjory","Mark","Markus","Marlee","Marlen","Marlene","Marley","Marlin","Marlon","Marques","Marquis","Marquise","Marshall","Marta","Martin","Martina","Martine","Marty","Marvin","Mary","Maryam","Maryjane","Maryse","Mason","Mateo","Mathew","Mathias","Mathilde","Matilda","Matilde","Matt","Matteo","Mattie","Maud","Maude","Maudie","Maureen","Maurice","Mauricio","Maurine","Maverick","Mavis","Max","Maxie","Maxime","Maximilian","Maximillia","Maximillian","Maximo","Maximus","Maxine","Maxwell","May","Maya","Maybell","Maybelle","Maye","Maymie","Maynard","Mayra","Mazie","Mckayla","Mckenna","Mckenzie","Meagan","Meaghan","Meda","Megane","Meggie","Meghan","Mekhi","Melany","Melba","Melisa","Melissa","Mellie","Melody","Melvin","Melvina","Melyna","Melyssa","Mercedes","Meredith","Merl","Merle","Merlin","Merritt","Mertie","Mervin","Meta","Mia","Micaela","Micah","Michael","Michaela","Michale","Micheal","Michel","Michele","Michelle","Miguel","Mikayla","Mike","Mikel","Milan","Miles","Milford","Miller","Millie","Milo","Milton","Mina","Minerva","Minnie","Miracle","Mireille","Mireya","Misael","Missouri","Misty","Mitchel","Mitchell","Mittie","Modesta","Modesto","Mohamed","Mohammad","Mohammed","Moises","Mollie","Molly","Mona","Monica","Monique","Monroe","Monserrat","Monserrate","Montana","Monte","Monty","Morgan","Moriah","Morris","Mortimer","Morton","Mose","Moses","Moshe","Mossie","Mozell","Mozelle","Muhammad","Muriel","Murl","Murphy","Murray","Mustafa","Mya","Myah","Mylene","Myles","Myra","Myriam","Myrl","Myrna","Myron","Myrtice","Myrtie","Myrtis","Myrtle","Nadia","Nakia","Name","Nannie","Naomi","Naomie","Napoleon","Narciso","Nash","Nasir","Nat","Natalia","Natalie","Natasha","Nathan","Nathanael","Nathanial","Nathaniel","Nathen","Nayeli","Neal","Ned","Nedra","Neha","Neil","Nelda","Nella","Nelle","Nellie","Nels","Nelson","Neoma","Nestor","Nettie","Neva","Newell","Newton","Nia","Nicholas","Nicholaus","Nichole","Nick","Nicklaus","Nickolas","Nico","Nicola","Nicolas","Nicole","Nicolette","Nigel","Nikita","Nikki","Nikko","Niko","Nikolas","Nils","Nina","Noah","Noble","Noe","Noel","Noelia","Noemi","Noemie","Noemy","Nola","Nolan","Nona","Nora","Norbert","Norberto","Norene","Norma","Norris","Norval","Norwood","Nova","Novella","Nya","Nyah","Nyasia","Obie","Oceane","Ocie","Octavia","Oda","Odell","Odessa","Odie","Ofelia","Okey","Ola","Olaf","Ole","Olen","Oleta","Olga","Olin","Oliver","Ollie","Oma","Omari","Omer","Ona","Onie","Opal","Ophelia","Ora","Oral","Oran","Oren","Orie","Orin","Orion","Orland","Orlando","Orlo","Orpha","Orrin","Orval","Orville","Osbaldo","Osborne","Oscar","Osvaldo","Oswald","Oswaldo","Otha","Otho","Otilia","Otis","Ottilie","Ottis","Otto","Ova","Owen","Ozella","Pablo","Paige","Palma","Pamela","Pansy","Paolo","Paris","Parker","Pascale","Pasquale","Pat","Patience","Patricia","Patrick","Patsy","Pattie","Paul","Paula","Pauline","Paxton","Payton","Pearl","Pearlie","Pearline","Pedro","Peggie","Penelope","Percival","Percy","Perry","Pete","Peter","Petra","Peyton","Philip","Phoebe","Phyllis","Pierce","Pierre","Pietro","Pink","Pinkie","Piper","Polly","Porter","Precious","Presley","Preston","Price","Prince","Princess","Priscilla","Providenci","Prudence","Queen","Queenie","Quentin","Quincy","Quinn","Quinten","Quinton","Rachael","Rachel","Rachelle","Rae","Raegan","Rafael","Rafaela","Raheem","Rahsaan","Rahul","Raina","Raleigh","Ralph","Ramiro","Ramon","Ramona","Randal","Randall","Randi","Randy","Ransom","Raoul","Raphael","Raphaelle","Raquel","Rashad","Rashawn","Rasheed","Raul","Raven","Ray","Raymond","Raymundo","Reagan","Reanna","Reba","Rebeca","Rebecca","Rebeka","Rebekah","Reece","Reed","Reese","Regan","Reggie","Reginald","Reid","Reilly","Reina","Reinhold","Remington","Rene","Renee","Ressie","Reta","Retha","Retta","Reuben","Reva","Rex","Rey","Reyes","Reymundo","Reyna","Reynold","Rhea","Rhett","Rhianna","Rhiannon","Rhoda","Ricardo","Richard","Richie","Richmond","Rick","Rickey","Rickie","Ricky","Rico","Rigoberto","Riley","Rita","River","Robb","Robbie","Robert","Roberta","Roberto","Robin","Robyn","Rocio","Rocky","Rod","Roderick","Rodger","Rodolfo","Rodrick","Rodrigo","Roel","Rogelio","Roger","Rogers","Rolando","Rollin","Roma","Romaine","Roman","Ron","Ronaldo","Ronny","Roosevelt","Rory","Rosa","Rosalee","Rosalia","Rosalind","Rosalinda","Rosalyn","Rosamond","Rosanna","Rosario","Roscoe","Rose","Rosella","Roselyn","Rosemarie","Rosemary","Rosendo","Rosetta","Rosie","Rosina","Roslyn","Ross","Rossie","Rowan","Rowena","Rowland","Roxane","Roxanne","Roy","Royal","Royce","Rozella","Ruben","Rubie","Ruby","Rubye","Rudolph","Rudy","Rupert","Russ","Russel","Russell","Rusty","Ruth","Ruthe","Ruthie","Ryan","Ryann","Ryder","Rylan","Rylee","Ryleigh","Ryley","Sabina","Sabrina","Sabryna","Sadie","Sadye","Sage","Saige","Sallie","Sally","Salma","Salvador","Salvatore","Sam","Samanta","Samantha","Samara","Samir","Sammie","Sammy","Samson","Sandra","Sandrine","Sandy","Sanford","Santa","Santiago","Santina","Santino","Santos","Sarah","Sarai","Sarina","Sasha","Saul","Savanah","Savanna","Savannah","Savion","Scarlett","Schuyler","Scot","Scottie","Scotty","Seamus","Sean","Sebastian","Sedrick","Selena","Selina","Selmer","Serena","Serenity","Seth","Shad","Shaina","Shakira","Shana","Shane","Shanel","Shanelle","Shania","Shanie","Shaniya","Shanna","Shannon","Shanny","Shanon","Shany","Sharon","Shaun","Shawn","Shawna","Shaylee","Shayna","Shayne","Shea","Sheila","Sheldon","Shemar","Sheridan","Sherman","Sherwood","Shirley","Shyann","Shyanne","Sibyl","Sid","Sidney","Sienna","Sierra","Sigmund","Sigrid","Sigurd","Silas","Sim","Simeon","Simone","Sincere","Sister","Skye","Skyla","Skylar","Sofia","Soledad","Solon","Sonia","Sonny","Sonya","Sophia","Sophie","Spencer","Stacey","Stacy","Stan","Stanford","Stanley","Stanton","Stefan","Stefanie","Stella","Stephan","Stephania","Stephanie","Stephany","Stephen","Stephon","Sterling","Steve","Stevie","Stewart","Stone","Stuart","Summer","Sunny","Susan","Susana","Susanna","Susie","Suzanne","Sven","Syble","Sydnee","Sydney","Sydni","Sydnie","Sylvan","Sylvester","Sylvia","Tabitha","Tad","Talia","Talon","Tamara","Tamia","Tania","Tanner","Tanya","Tara","Taryn","Tate","Tatum","Tatyana","Taurean","Tavares","Taya","Taylor","Teagan","Ted","Telly","Terence","Teresa","Terrance","Terrell","Terrence","Terrill","Terry","Tess","Tessie","Tevin","Thad","Thaddeus","Thalia","Thea","Thelma","Theo","Theodora","Theodore","Theresa","Therese","Theresia","Theron","Thomas","Thora","Thurman","Tia","Tiana","Tianna","Tiara","Tierra","Tiffany","Tillman","Timmothy","Timmy","Timothy","Tina","Tito","Titus","Tobin","Toby","Tod","Tom","Tomas","Tomasa","Tommie","Toney","Toni","Tony","Torey","Torrance","Torrey","Toy","Trace","Tracey","Tracy","Travis","Travon","Tre","Tremaine","Tremayne","Trent","Trenton","Tressa","Tressie","Treva","Trever","Trevion","Trevor","Trey","Trinity","Trisha","Tristian","Tristin","Triston","Troy","Trudie","Trycia","Trystan","Turner","Twila","Tyler","Tyra","Tyree","Tyreek","Tyrel","Tyrell","Tyrese","Tyrique","Tyshawn","Tyson","Ubaldo","Ulices","Ulises","Una","Unique","Urban","Uriah","Uriel","Ursula","Vada","Valentin","Valentina","Valentine","Valerie","Vallie","Van","Vance","Vanessa","Vaughn","Veda","Velda","Vella","Velma","Velva","Vena","Verda","Verdie","Vergie","Verla","Verlie","Vern","Verna","Verner","Vernice","Vernie","Vernon","Verona","Veronica","Vesta","Vicenta","Vicente","Vickie","Vicky","Victor","Victoria","Vida","Vidal","Vilma","Vince","Vincent","Vincenza","Vincenzo","Vinnie","Viola","Violet","Violette","Virgie","Virgil","Virginia","Virginie","Vita","Vito","Viva","Vivian","Viviane","Vivianne","Vivien","Vivienne","Vladimir","Wade","Waino","Waldo","Walker","Wallace","Walter","Walton","Wanda","Ward","Warren","Watson","Wava","Waylon","Wayne","Webster","Weldon","Wellington","Wendell","Wendy","Werner","Westley","Weston","Whitney","Wilber","Wilbert","Wilburn","Wiley","Wilford","Wilfred","Wilfredo","Wilfrid","Wilhelm","Wilhelmine","Will","Willa","Willard","William","Willie","Willis","Willow","Willy","Wilma","Wilmer","Wilson","Wilton","Winfield","Winifred","Winnifred","Winona","Winston","Woodrow","Wyatt","Wyman","Xander","Xavier","Xzavier","Yadira","Yasmeen","Yasmin","Yasmine","Yazmin","Yesenia","Yessenia","Yolanda","Yoshiko","Yvette","Yvonne","Zachariah","Zachary","Zachery","Zack","Zackary","Zackery","Zakary","Zander","Zane","Zaria","Zechariah","Zelda","Zella","Zelma","Zena","Zetta","Zion","Zita","Zoe","Zoey","Zoie","Zoila","Zola","Zora","Zula"];e.exports={generateUsername:function(){var e=r.randomElement(i),t=r.randomAlphanumStr(3);return"".concat(e,"-").concat(t)}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return R}));var r=n(4),i=n(2),o=n(3),a=n(11),s=n(0),c=n(8),u=n(22),l=n.n(u),d=n(116),f=n.n(d),h=n(88),p=n(327),m=n(144);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=E(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function E(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var i=T(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=Object(r.getLogger)(e);function A(e){var t=$(e).find(">candidate"),n=[];return t.each((function(e,t){for(var r=t.attributes,i=[],o=0;o<r.length;o++){var a=r[o];i.push("".concat(a.name,": ").concat(a.value))}n.push(i.join(" "))})),n}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(d,e);var t,n,r,u=C(d);function d(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(r=u.call(this)).xmpp=e,r.eventEmitter=t,r.sessions={},r.jvbIceConfig=n.jvb,r.p2pIceConfig=n.p2p,r.mediaConstraints={offerToReceiveAudio:!0,offerToReceiveVideo:!0},r}return t=d,(n=[{key:"init",value:function(e){b(T(d.prototype),"init",this).call(this,e),this.connection.addHandler(this.onJingle.bind(this),"urn:xmpp:jingle:1","iq","set",null,null)}},{key:"onJingle",value:function(e){var t,n=$(e).find("jingle").attr("sid"),r=$(e).find("jingle").attr("action"),u=e.getAttribute("from"),d=Object(i.$iq)({type:"result",to:u,id:e.getAttribute("id")}),f=this.sessions[n];if("session-initiate"!==r){if(!f)return d.attrs({type:"error"}),d.c("error",{type:"cancel"}).c("item-not-found",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).up().c("unknown-session",{xmlns:"urn:xmpp:jingle:errors:1"}),D.warn("invalid session id: ".concat(n)),D.debug(e),this.connection.send(d),!0;if(u!==f.remoteJid)return D.warn("jid mismatch for session id",n,f.remoteJid,e),d.attrs({type:"error"}),d.c("error",{type:"cancel"}).c("item-not-found",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).up().c("unknown-session",{xmlns:"urn:xmpp:jingle:errors:1"}),this.connection.send(d),!0}else if(void 0!==f)return d.attrs({type:"error"}),d.c("error",{type:"cancel"}).c("service-unavailable",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).up(),D.warn("duplicate session id",n,e),this.connection.send(d),!0;var h=window.performance.now(),v="focus"!==i.Strophe.getResourceFromJid(u),y=$(e).find("jingle>json-message");if(null==y?void 0:y.length){var _;D.info("Found a JSON-encoded element in ".concat(r,", translating to standard Jingle."));for(var b=0;b<y.length;b++)_=Object(p.a)(e,y[b]);if(null==_?void 0:_.size){var E,S=[],C=g(_.keys());try{for(C.s();!(E=C.n()).done;){var w=E.value;S.push("".concat(w,":[").concat(_.get(w),"]"))}}catch(e){C.e(e)}finally{C.f()}D.debug("Received ".concat(r," from ").concat(u," with sources=").concat(S.join(", ")))}}switch(r){case"session-initiate":D.log("(TIME) received session-initiate:\t",h);var T=$(e).find("jingle>startmuted");if(v&&D.debug("Received ".concat(r," from ").concat(u)),null==T?void 0:T.length){var R=T.attr(o.a.AUDIO),k=T.attr(o.a.VIDEO);this.eventEmitter.emit(s.XMPPEvents.START_MUTED_FROM_FOCUS,"true"===R,"true"===k)}var O=v?this.p2pIceConfig:this.jvbIceConfig;f=new m.a($(e).find("jingle").attr("sid"),$(e).attr("to"),u,this.connection,this.mediaConstraints,JSON.parse(JSON.stringify(O)),v,!1),this.sessions[f.sid]=f,this.eventEmitter.emit(s.XMPPEvents.CALL_INCOMING,f,$(e).find(">jingle"),h);break;case"session-accept":var j,P=[],I=g($(e).find("jingle>content"));try{for(I.s();!(j=I.n()).done;){var N=j.value,M=$(N).find("description").attr("ssrc");M&&P.push(M)}}catch(e){I.e(e)}finally{I.f()}D.debug("Received ".concat(r," from ").concat(u," with ssrcs=").concat(P)),this.eventEmitter.emit(s.XMPPEvents.CALL_ACCEPTED,f,$(e).find(">jingle"));break;case"content-modify":var x=$(e).find('jingle>content[name="video"]>max-frame-height');D.debug("Received ".concat(r," from ").concat(u," with a max-frame-height=").concat(null==x?void 0:x.text())),f.modifyContents($(e).find(">jingle"));break;case"transport-info":var L=A($(e).find("jingle>content>transport"));D.debug("Received ".concat(r," from ").concat(u," for candidates=").concat(L.join(", "))),this.eventEmitter.emit(s.XMPPEvents.TRANSPORT_INFO,f,$(e).find(">jingle"));break;case"session-terminate":D.log("terminating...",f.sid);var F=null,B=null;$(e).find(">jingle>reason").length&&(F=$(e).find(">jingle>reason>:first")[0].tagName,B=$(e).find(">jingle>reason>text").text()),D.debug("Received ".concat(r," from ").concat(u," disconnect reason=").concat(B)),this.terminate(f.sid,F,B),this.eventEmitter.emit(s.XMPPEvents.CALL_ENDED,f,F,B);break;case"transport-replace":D.info("(TIME) Start transport replace:\t",h);var U=$(e).find("jingle>content>transport"),V=A(U),H=$(U).attr("ufrag"),G=$(U).attr("pwd"),J=null===(t=$(U).find(">fingerprint"))||void 0===t?void 0:t.text();D.debug("Received ".concat(r," from ").concat(u," with iceUfrag=").concat(H,",")+" icePwd=".concat(G,", DTLS fingerprint=").concat(J,", candidates=").concat(V.join(", "))),c.a.sendAnalytics(Object(a.F)(a.f,{p2p:v,value:h})),f.replaceTransport($(e).find(">jingle"),(function(){var e=window.performance.now();D.info("(TIME) Transport replace success:\t",e),c.a.sendAnalytics(Object(a.F)(a.g,{p2p:v,value:e}))}),(function(e){l.a.callErrorHandler(e),D.error("Transport replace failed",e),f.sendTransportReject()}));break;case"source-add":f.addRemoteStream($(e).find(">jingle>content"));break;case"source-remove":f.removeRemoteStream($(e).find(">jingle>content"));break;default:D.warn("jingle action not implemented",r),d.attrs({type:"error"}),d.c("error",{type:"cancel"}).c("bad-request",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).up()}return this.connection.send(d),!0}},{key:"newP2PJingleSession",value:function(e,t){var n=new m.a(f.a.randomHexString(12),e,t,this.connection,this.mediaConstraints,this.p2pIceConfig,!0,!0);return this.sessions[n.sid]=n,n}},{key:"terminate",value:function(e,t,n){this.sessions.hasOwnProperty(e)&&("ended"!==this.sessions[e].state&&this.sessions[e].onTerminated(t,n),delete this.sessions[e])}},{key:"getStunAndTurnCredentials",value:function(){var e=this;this.connection.sendIQ(Object(i.$iq)({type:"get",to:this.xmpp.options.hosts.domain}).c("services",{xmlns:"urn:xmpp:extdisco:2"}),(function(t){return e.onReceiveStunAndTurnCredentials(t)}),(function(){D.warn("getting turn credentials with extdisco:2 failed, trying extdisco:1"),e.connection.sendIQ(Object(i.$iq)({type:"get",to:e.xmpp.options.hosts.domain}).c("services",{xmlns:"urn:xmpp:extdisco:1"}),(function(t){return e.onReceiveStunAndTurnCredentials(t)}),(function(){D.warn("getting turn credentials failed"),D.warn("is mod_turncredentials or similar installed and configured?")}))}))}},{key:"onReceiveStunAndTurnCredentials",value:function(e){var t=[];$(e).find(">services>service").each((function(e,n){var r={},i=(n=$(n)).attr("type");switch(i){case"stun":r.urls="stun:".concat(n.attr("host")),n.attr("port")&&(r.urls+=":".concat(n.attr("port"))),t.push(r);break;case"turn":case"turns":r.urls="".concat(i,":"),r.username=n.attr("username"),r.urls+=n.attr("host"),n.attr("port")&&(r.urls+=":".concat(n.attr("port")));var o=n.attr("transport");o&&"udp"!==o&&(r.urls+="?transport=".concat(o)),r.credential=n.attr("password")||r.credential,t.push(r)}}));for(var n,r=this.xmpp.options,i=t.length-1;i>0;i--){var o=Math.floor(Math.random()*(i+1)),a=t[i];t[i]=t[o],t[o]=a}return n=r.useTurnUdp?function(e){return e.urls.startsWith("turn")}:function(e){return e.urls.startsWith("turn")&&e.urls.indexOf("transport=tcp")>=0},this.jvbIceConfig.iceServers=t.filter(n),this.p2pIceConfig.iceServers=t,t.length>0}},{key:"getLog",value:function(){var e=this,t={};return Object.keys(this.sessions).forEach((function(n){var r=e.sessions[n].peerconnection;r&&r.updateLog&&(t["jingle_".concat(n)]={updateLog:r.updateLog,stats:r.stats,url:window.location.href})})),t}}])&&_(t.prototype,n),r&&_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),d}(h.b)}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var r=n(4),i=n(2),o=n(3),a=n(12),s=Object(r.getLogger)(e);function c(e,t){var n=Object(i.$build)("source",{xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0",ssrc:t.s,name:a.a.isSourceNameSignalingEnabled()?t.n:void 0});return t.m&&n.c("parameter",{name:"msid",value:t.m}).up(),n.c("ssrc-info",{xmlns:"http://jitsi.org/jitmeet",owner:e}).up(),n.node}function u(e){for(var t=Object(i.$build)("ssrc-group",{xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0",semantics:d(e[0])}),n=1;n<e.length;n++)t.c("source",{xmlns:"urn:xmpp:jingle:apps:rtp:ssma:0",ssrc:e[n]}).up();return t.node}function l(e,t){var n,r=$(e).find("jingle")[0],o=$(r).find('content[name="'.concat(t,'"]'));return o.length?o=o[0]:(o=Object(i.$build)("content",{name:t}).node,r.appendChild(o)),(n=$(o).find("description")).length?n=n[0]:(n=Object(i.$build)("description",{xmlns:"urn:xmpp:jingle:apps:rtp:1",media:t}).node,o.appendChild(n)),n}function d(e){return"f"===e?"FID":"s"===e?"SIM":null}function f(e,t){var n,r,i;try{i=JSON.parse(t.textContent)}catch(e){return s.error("json-message XML contained invalid JSON, ignoring: ".concat(t.textContent)),null}if(!(null==i?void 0:i.sources))return null;var a=l(e,o.a.AUDIO),d=l(e,o.a.VIDEO),f=new Map;for(var h in i.sources)if(i.sources.hasOwnProperty(h)){var p=[],m=i.sources[h],v=(null==m?void 0:m.length)&&m[0],g=(null==m?void 0:m.length)>1&&m[1],y=(null==m?void 0:m.length)>2&&m[2],_=(null==m?void 0:m.length)>3&&m[3];if(null==v?void 0:v.length)for(var b=0;b<v.length;b++)d.appendChild(c(h,v[b])),p.push(null===(n=v[b])||void 0===n?void 0:n.s);if(null==g?void 0:g.length)for(var E=0;E<g.length;E++)d.appendChild(u(g[E]));if(null==y?void 0:y.length)for(var S=0;S<y.length;S++)a.appendChild(c(h,y[S])),p.push(null===(r=y[S])||void 0===r?void 0:r.s);if(null==_?void 0:_.length)for(var C=0;C<_.length;C++)a.appendChild(u(_[C]));f.set(h,p)}return f}}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var r=n(4),i=n(329),o=n.n(i);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=Object(r.getLogger)(e),c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._queue=o.a.queue(this._processQueueTasks.bind(this),1),this._stopped=!1}var t,n,r;return t=e,(n=[{key:"clear",value:function(){this._queue.kill()}},{key:"_processQueueTasks",value:function(e,t){try{e(t)}catch(e){s.error("Task failed: ".concat(null==e?void 0:e.stack)),t(e)}}},{key:"push",value:function(e,t){this._stopped?t&&t(new Error("The queue has been stopped")):this._queue.push(e,t)}},{key:"shutdown",value:function(){this._stopped=!0}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}).call(this,"/index.js")},function(e,t,n){(function(n,r){var i;
/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */!function(){var o,a,s={};function c(e){var t=!1;return function(){if(t)throw new Error("Callback was already called.");t=!0,e.apply(o,arguments)}}null!=(o=this)&&(a=o.async),s.noConflict=function(){return o.async=a,s};var u=Object.prototype.toString,l=Array.isArray||function(e){return"[object Array]"===u.call(e)},d=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n+=1)t(e[n],n,e)},f=function(e,t){if(e.map)return e.map(t);var n=[];return d(e,(function(e,r,i){n.push(t(e,r,i))})),n},h=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};void 0!==n&&n.nextTick?(s.nextTick=n.nextTick,s.setImmediate=void 0!==r?function(e){r(e)}:s.nextTick):"function"==typeof r?(s.nextTick=function(e){r(e)},s.setImmediate=s.nextTick):(s.nextTick=function(e){setTimeout(e,0)},s.setImmediate=s.nextTick),s.each=function(e,t,n){if(n=n||function(){},!e.length)return n();var r=0;function i(t){t?(n(t),n=function(){}):(r+=1)>=e.length&&n()}d(e,(function(e){t(e,c(i))}))},s.forEach=s.each,s.eachSeries=function(e,t,n){if(n=n||function(){},!e.length)return n();var r=0;!function i(){t(e[r],(function(t){t?(n(t),n=function(){}):(r+=1)>=e.length?n():i()}))}()},s.forEachSeries=s.eachSeries,s.eachLimit=function(e,t,n,r){p(t).apply(null,[e,n,r])},s.forEachLimit=s.eachLimit;var p=function(e){return function(t,n,r){if(r=r||function(){},!t.length||e<=0)return r();var i=0,o=0,a=0;!function s(){if(i>=t.length)return r();for(;a<e&&o<t.length;)a+=1,n(t[(o+=1)-1],(function(e){e?(r(e),r=function(){}):(a-=1,(i+=1)>=t.length?r():s())}))}()}},m=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[s.each].concat(t))}},v=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[s.eachSeries].concat(t))}},g=function(e,t,n,r){if(t=f(t,(function(e,t){return{index:t,value:e}})),r){var i=[];e(t,(function(e,t){n(e.value,(function(n,r){i[e.index]=r,t(n)}))}),(function(e){r(e,i)}))}else e(t,(function(e,t){n(e.value,(function(e){t(e)}))}))};s.map=m(g),s.mapSeries=v(g),s.mapLimit=function(e,t,n,r){return y(t)(e,n,r)};var y=function(e){return function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[p(e)].concat(n))}}(e,g)};s.reduce=function(e,t,n,r){s.eachSeries(e,(function(e,r){n(t,e,(function(e,n){t=n,r(e)}))}),(function(e){r(e,t)}))},s.inject=s.reduce,s.foldl=s.reduce,s.reduceRight=function(e,t,n,r){var i=f(e,(function(e){return e})).reverse();s.reduce(i,t,n,r)},s.foldr=s.reduceRight;var _=function(e,t,n,r){var i=[];e(t=f(t,(function(e,t){return{index:t,value:e}})),(function(e,t){n(e.value,(function(n){n&&i.push(e),t()}))}),(function(e){r(f(i.sort((function(e,t){return e.index-t.index})),(function(e){return e.value})))}))};s.filter=m(_),s.filterSeries=v(_),s.select=s.filter,s.selectSeries=s.filterSeries;var b=function(e,t,n,r){var i=[];e(t=f(t,(function(e,t){return{index:t,value:e}})),(function(e,t){n(e.value,(function(n){n||i.push(e),t()}))}),(function(e){r(f(i.sort((function(e,t){return e.index-t.index})),(function(e){return e.value})))}))};s.reject=m(b),s.rejectSeries=v(b);var E=function(e,t,n,r){e(t,(function(e,t){n(e,(function(n){n?(r(e),r=function(){}):t()}))}),(function(e){r()}))};s.detect=m(E),s.detectSeries=v(E),s.some=function(e,t,n){s.each(e,(function(e,r){t(e,(function(e){e&&(n(!0),n=function(){}),r()}))}),(function(e){n(!1)}))},s.any=s.some,s.every=function(e,t,n){s.each(e,(function(e,r){t(e,(function(e){e||(n(!1),n=function(){}),r()}))}),(function(e){n(!0)}))},s.all=s.every,s.sortBy=function(e,t,n){s.map(e,(function(e,n){t(e,(function(t,r){t?n(t):n(null,{value:e,criteria:r})}))}),(function(e,t){if(e)return n(e);n(null,f(t.sort((function(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0})),(function(e){return e.value})))}))},s.auto=function(e,t){t=t||function(){};var n=h(e),r=n.length;if(!r)return t();var i={},o=[],a=function(e){o.unshift(e)},c=function(){r--,d(o.slice(0),(function(e){e()}))};a((function(){if(!r){var e=t;t=function(){},e(null,i)}})),d(n,(function(n){var r=l(e[n])?e[n]:[e[n]],u=function(e){var r=Array.prototype.slice.call(arguments,1);if(r.length<=1&&(r=r[0]),e){var o={};d(h(i),(function(e){o[e]=i[e]})),o[n]=r,t(e,o),t=function(){}}else i[n]=r,s.setImmediate(c)},f=r.slice(0,Math.abs(r.length-1))||[],p=function(){return t=function(e,t){return e&&i.hasOwnProperty(t)},r=!0,((e=f).reduce?e.reduce(t,r):(d(e,(function(e,n,i){r=t(r,e,n,i)})),r))&&!i.hasOwnProperty(n);var e,t,r};if(p())r[r.length-1](u,i);else{a((function e(){p()&&(!function(e){for(var t=0;t<o.length;t+=1)if(o[t]===e)return void o.splice(t,1)}(e),r[r.length-1](u,i))}))}}))},s.retry=function(e,t,n){var r=[];"function"==typeof e&&(n=t,t=e,e=5),e=parseInt(e,10)||5;var i=function(i,o){for(var a=function(e,t){return function(n){e((function(e,r){n(!e||t,{err:e,result:r})}),o)}};e;)r.push(a(t,!(e-=1)));s.series(r,(function(e,t){t=t[t.length-1],(i||n)(t.err,t.result)}))};return n?i():i},s.waterfall=function(e,t){if(t=t||function(){},!l(e)){var n=new Error("First argument to waterfall must be an array of functions");return t(n)}if(!e.length)return t();!function e(n){return function(r){if(r)t.apply(null,arguments),t=function(){};else{var i=Array.prototype.slice.call(arguments,1),o=n.next();o?i.push(e(o)):i.push(t),s.setImmediate((function(){n.apply(null,i)}))}}}(s.iterator(e))()};var S=function(e,t,n){if(n=n||function(){},l(t))e.map(t,(function(e,t){e&&e((function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)}))}),n);else{var r={};e.each(h(t),(function(e,n){t[e]((function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,n(t)}))}),(function(e){n(e,r)}))}};s.parallel=function(e,t){S({map:s.map,each:s.each},e,t)},s.parallelLimit=function(e,t,n){S({map:y(t),each:p(t)},e,n)},s.series=function(e,t){if(t=t||function(){},l(e))s.mapSeries(e,(function(e,t){e&&e((function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)}))}),t);else{var n={};s.eachSeries(h(e),(function(t,r){e[t]((function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),n[t]=i,r(e)}))}),(function(e){t(e,n)}))}},s.iterator=function(e){return function t(n){var r=function t(){return e.length&&e[n].apply(null,arguments),t.next()};return r.next=function(){return n<e.length-1?t(n+1):null},r}(0)},s.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var C=function(e,t,n,r){var i=[];e(t,(function(e,t){n(e,(function(e,n){i=i.concat(n||[]),t(e)}))}),(function(e){r(e,i)}))};s.concat=m(C),s.concatSeries=v(C),s.whilst=function(e,t,n){e()?t((function(r){if(r)return n(r);s.whilst(e,t,n)})):n()},s.doWhilst=function(e,t,n){e((function(r){if(r)return n(r);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?s.doWhilst(e,t,n):n()}))},s.until=function(e,t,n){e()?n():t((function(r){if(r)return n(r);s.until(e,t,n)}))},s.doUntil=function(e,t,n){e((function(r){if(r)return n(r);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?n():s.doUntil(e,t,n)}))},s.queue=function(e,t){function n(e,t,n,r){if(e.started||(e.started=!0),l(t)||(t=[t]),0==t.length)return s.setImmediate((function(){e.drain&&e.drain()}));d(t,(function(t){var i={data:t,callback:"function"==typeof r?r:null};n?e.tasks.unshift(i):e.tasks.push(i),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),s.setImmediate(e.process)}))}void 0===t&&(t=1);var r=0,i={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(e,t){n(i,e,!1,t)},kill:function(){i.drain=null,i.tasks=[]},unshift:function(e,t){n(i,e,!0,t)},process:function(){if(!i.paused&&r<i.concurrency&&i.tasks.length){var t=i.tasks.shift();i.empty&&0===i.tasks.length&&i.empty(),r+=1;var n=c((function(){r-=1,t.callback&&t.callback.apply(t,arguments),i.drain&&i.tasks.length+r===0&&i.drain(),i.process()}));e(t.data,n)}},length:function(){return i.tasks.length},running:function(){return r},idle:function(){return i.tasks.length+r===0},pause:function(){!0!==i.paused&&(i.paused=!0,i.process())},resume:function(){!1!==i.paused&&(i.paused=!1,i.process())}};return i},s.priorityQueue=function(e,t){function n(e,t){return e.priority-t.priority}var r=s.queue(e,t);return r.push=function(e,t,i){!function(e,t,r,i){if(e.started||(e.started=!0),l(t)||(t=[t]),0==t.length)return s.setImmediate((function(){e.drain&&e.drain()}));d(t,(function(t){var o={data:t,priority:r,callback:"function"==typeof i?i:null};e.tasks.splice(function(e,t,n){for(var r=-1,i=e.length-1;r<i;){var o=r+(i-r+1>>>1);n(t,e[o])>=0?r=o:i=o-1}return r}(e.tasks,o,n)+1,0,o),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),s.setImmediate(e.process)}))}(r,e,t,i)},delete r.unshift,r},s.cargo=function(e,t){var n=!1,r=[],i={tasks:r,payload:t,saturated:null,empty:null,drain:null,drained:!0,push:function(e,n){l(e)||(e=[e]),d(e,(function(e){r.push({data:e,callback:"function"==typeof n?n:null}),i.drained=!1,i.saturated&&r.length===t&&i.saturated()})),s.setImmediate(i.process)},process:function o(){if(!n){if(0===r.length)return i.drain&&!i.drained&&i.drain(),void(i.drained=!0);var a="number"==typeof t?r.splice(0,t):r.splice(0,r.length),s=f(a,(function(e){return e.data}));i.empty&&i.empty(),n=!0,e(s,(function(){n=!1;var e=arguments;d(a,(function(t){t.callback&&t.callback.apply(null,e)})),o()}))}},length:function(){return r.length},running:function(){return n}};return i};var w=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&d(n,(function(t){console[e](t)})))}]))}};s.log=w("log"),s.dir=w("dir"),s.memoize=function(e,t){var n={},r={};t=t||function(e){return e};var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),a=t.apply(null,i);a in n?s.nextTick((function(){o.apply(null,n[a])})):a in r?r[a].push(o):(r[a]=[o],e.apply(null,i.concat([function(){n[a]=arguments;var e=r[a];delete r[a];for(var t=0,i=e.length;t<i;t++)e[t].apply(null,arguments)}])))};return i.memo=n,i.unmemoized=e,i},s.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},s.times=function(e,t,n){for(var r=[],i=0;i<e;i++)r.push(i);return s.map(r,t,n)},s.timesSeries=function(e,t,n){for(var r=[],i=0;i<e;i++)r.push(i);return s.mapSeries(r,t,n)},s.seq=function(){var e=arguments;return function(){var t=this,n=Array.prototype.slice.call(arguments),r=n.pop();s.reduce(e,n,(function(e,n,r){n.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);r(e,t)}]))}),(function(e,n){r.apply(t,[e].concat(n))}))}},s.compose=function(){return s.seq.apply(null,Array.prototype.reverse.call(arguments))};var T=function(e,t){var n=function(){var n=this,r=Array.prototype.slice.call(arguments),i=r.pop();return e(t,(function(e,t){e.apply(n,r.concat([t]))}),i)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return n.apply(this,r)}return n};s.applyEach=m(T),s.applyEachSeries=v(T),s.forever=function(e,t){!function n(r){if(r){if(t)return t(r);throw r}e(n)}()},e.exports?e.exports=s:void 0===(i=function(){return s}.apply(t,[]))||(e.exports=i)}()}).call(this,n(115),n(280).setImmediate)},function(e,t){e.exports={integerHash:function(e){if(!e)return 0;var t,n=0;for(t=0;t<e.length;t++)n+=e.charCodeAt(t)*Math.pow(31,e.length-1-t),n=Math.abs(0|n);return n}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var r=n(4),i=n(35),o=n(63);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=Object(r.getLogger)(e),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(a,e);var t,n,r,i=u(a);function a(e,t,n,r,o,s,c){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).sid=e,u.localJid=t,u.remoteJid=n,u.connection=r,u.mediaConstraints=o,u.pcConfig=s,u.isInitiator=c,u.usedrip=!0,u.dripContainer=[],u.room=null,u._signalingLayer=null,u.state=null,u.rtc=null,u}return t=a,(n=[{key:"initiatorJid",get:function(){return this.isInitiator?this.localJid:this.remoteJid}},{key:"responderJid",get:function(){return this.isInitiator?this.remoteJid:this.localJid}},{key:"initialize",value:function(e,t,n,r){if(null!==this.state){var i="attempt to initiate on session ".concat(this.sid,"\n                   in state ").concat(this.state);throw f.error(i),new Error(i)}this.room=e,this.rtc=t,this._signalingLayer=n,this.state=o.c,this.doInitialize(r)}},{key:"doInitialize",value:function(e){}},{key:"addIceCandidates",value:function(e){}},{key:"getState",value:function(){return this.state}},{key:"addSources",value:function(e){}},{key:"removeSources",value:function(e){}},{key:"terminate",value:function(e,t,n){}},{key:"acceptOffer",value:function(e,t,n){}},{key:"_getInitiatorJid",value:function(){return this.isInitiator?this.localJid:this.remoteJid}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(i.a)}).call(this,"/index.js")},function(e,t,n){"use strict";var r=n(2);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=s(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function s(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(s,e);var t,n,r,i=u(s);function s(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(e=i.call(this)).log=[],e}return t=s,(n=[{key:"init",value:function(e){a(d(s.prototype),"init",this).call(this,e),this.connection.rawInput=this.logIncoming.bind(this),this.connection.rawOutput=this.logOutgoing.bind(this)}},{key:"logIncoming",value:function(e){this.log.push([(new Date).getTime(),"incoming",e])}},{key:"logOutgoing",value:function(e){this.log.push([(new Date).getTime(),"outgoing",e])}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(n(88).b);t.a=function(){r.Strophe.addConnectionPlugin("logger",new f)}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return v}));var r=n(4),i=n(2),o=n(88);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=l(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=Object(r.getLogger)(e),v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(a,e);var t,n,r,o=f(a);function a(){return s(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"init",value:function(e){u(p(a.prototype),"init",this).call(this,e),this.connection.addHandler(this.onRayo.bind(this),"urn:xmpp:rayo:1","iq","set",null,null)}},{key:"onRayo",value:function(e){m.info("Rayo IQ",e)}},{key:"dial",value:function(e,t,n,r,o){var a=this;return new Promise((function(s,c){if(o){var u=Object(i.$iq)({type:"set",to:o});u.c("dial",{xmlns:"urn:xmpp:rayo:1",to:e,from:t}),u.c("header",{name:"JvbRoomName",value:n}).up(),r&&r.length&&u.c("header",{name:"JvbRoomPassword",value:r}).up(),a.connection.sendIQ(u,(function(e){m.info("Dial result ",e);var t=$(e).find("ref").attr("uri");a.callResource=t.substr("xmpp:".length),m.info("Received call resource: ".concat(a.callResource)),s()}),(function(e){m.info("Dial error ",e),c(e)}))}else c(new Error("Internal error!"))}))}},{key:"hangup",value:function(){var e=this;return new Promise((function(t,n){if(!e.callResource)return n(new Error("No call in progress")),void m.warn("No call in progress");var r=Object(i.$iq)({type:"set",to:e.callResource});r.c("hangup",{xmlns:"urn:xmpp:rayo:1"}),e.connection.sendIQ(r,(function(n){m.info("Hangup result ",n),e.callResource=null,t()}),(function(t){m.info("Hangup error ",t),e.callResource=null,n(new Error("Hangup error "))}))}))}}])&&c(t.prototype,n),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.b)}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){var r=n(4),i=n(2),o=n(22),a=n.n(o),s=Object(r.getLogger)(e),c=-1,u=/request id \d+.\d+ got 200/,l=/request errored, status: (\d+), number of errors: \d+/;t.a=function(){i.Strophe.log=function(e,t){switch(s.trace("Strophe",e,t),"string"==typeof t&&-1!==t.indexOf("Request ")&&-1!==t.indexOf("timed out (secondary), restarting")&&(e=i.Strophe.LogLevel.WARN),e){case i.Strophe.LogLevel.DEBUG:-1!==c&&u.test(t)&&(s.debug("Reset lastErrorStatus"),c=-1);break;case i.Strophe.LogLevel.WARN:s.warn("Strophe: ".concat(t));var n=l.exec(t);n&&2===n.length&&(c=parseInt(n[1],10),s.debug("lastErrorStatus set to: ".concat(c)));break;case i.Strophe.LogLevel.ERROR:case i.Strophe.LogLevel.FATAL:t="Strophe: ".concat(t),a.a.callErrorHandler(new Error(t)),s.error(t)}},i.Strophe.getLastErrorStatus=function(){return c},i.Strophe.getStatusString=function(e){switch(e){case i.Strophe.Status.BINDREQUIRED:return"BINDREQUIRED";case i.Strophe.Status.ERROR:return"ERROR";case i.Strophe.Status.CONNECTING:return"CONNECTING";case i.Strophe.Status.CONNFAIL:return"CONNFAIL";case i.Strophe.Status.AUTHENTICATING:return"AUTHENTICATING";case i.Strophe.Status.AUTHFAIL:return"AUTHFAIL";case i.Strophe.Status.CONNECTED:return"CONNECTED";case i.Strophe.Status.DISCONNECTED:return"DISCONNECTED";case i.Strophe.Status.DISCONNECTING:return"DISCONNECTING";case i.Strophe.Status.ATTACHED:return"ATTACHED";default:return"unknown"}}}}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var r=n(4),i=n(1),o=n(33),a=n.n(o),s=n(3),c=n(5);function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=Object(r.getLogger)(e),h=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.conference=t,this.options=n,this.disabledCodec=n.disabledCodec===a.a.VP8?void 0:this._getCodecMimeType(n.disabledCodec);var o=this._getCodecMimeType(n.jvbCodec),s=this._getCodecMimeType(n.p2pCodec);this.jvbPreferredCodec=o&&this._isCodecSupported(o)?o:a.a.VP8,this.p2pPreferredCodec=s&&this._isCodecSupported(s)?s:a.a.VP8,f.debug("Codec preferences for the conference are JVB: ".concat(this.jvbPreferredCodec,",\n            P2P: ").concat(this.p2pPreferredCodec)),this.jvbPreferredCodec!==a.a.VP9||c.a.supportsVP9()||(this.jvbPreferredCodec=a.a.VP8),this.conference.on(i.USER_JOINED,(function(){return r._selectPreferredCodec()})),this.conference.on(i.USER_LEFT,(function(){return r._selectPreferredCodec()})),this.conference.on(i._MEDIA_SESSION_STARTED,(function(e){return r._onMediaSessionStarted(e)}))}var t,n,r;return t=e,(n=[{key:"_getCodecMimeType",value:function(e){return"string"==typeof e?Object.values(a.a).find((function(t){return t===e.toLowerCase()})):null}},{key:"_isCodecSupported",value:function(e){return!(!c.a.isFirefox()&&!c.a.isReactNative())||window.RTCRtpReceiver&&window.RTCRtpReceiver.getCapabilities&&window.RTCRtpReceiver.getCapabilities("video").codecs.some((function(t){return t.mimeType.toLowerCase()==="video/".concat(e)}))}},{key:"_onMediaSessionStarted",value:function(e){var t=e.isP2P?this.p2pPreferredCodec:this.jvbPreferredCodec,n=this.disabledCodec&&this._isCodecSupported(this.disabledCodec)?this.disabledCodec:null;this._selectPreferredCodec(e,t,n)}},{key:"_selectPreferredCodec",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e||this.conference.jvbJingleSession,i=t||this.jvbPreferredCodec,o=i;if(r&&!r.isP2P&&!this.options.enforcePreferredCodec){var l,d=this.conference.getParticipants().map((function(e){return e.getId()})),f=u(d);try{for(f.s();!(l=f.n()).done;){var h=l.value,p=r._signalingLayer.getPeerMediaInfo(h,s.a.VIDEO),m=null==p?void 0:p.codecType;m&&m!==i&&(m!==a.a.VP9||c.a.supportsVP9())&&(o=m)}}catch(e){f.e(e)}finally{f.f()}}r&&r.setVideoCodecs(o,n)}},{key:"getPreferredCodec",value:function(){return this.jvbPreferredCodec}}])&&d(t.prototype,n),r&&d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var r=n(4),i=n(9),o=n(11),a=n(12),s=n(8),c=n(22),u=n.n(c);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=Object(r.getLogger)(e),f=function(){function e(t,n,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t&&!n)throw new TypeError("At least peerconnection or wsUrl must be given");if(t&&n)throw new TypeError("Just one of peerconnection or wsUrl must be given");if(t?d.debug("constructor() with peerconnection"):d.debug('constructor() with wsUrl:"'.concat(n,'"')),this._channel=null,this._eventEmitter=r,this._mode=null,this._areRetriesEnabled=!1,this._closedFromClient=!1,t){var i=t.createDataChannel("JVB data channel",{protocol:"http://jitsi.org/protocols/colibri"});this._handleChannel(i),this._mode="datachannel"}else n&&(this._areRetriesEnabled=!0,this._wsUrl=n,this._initWebSocket())}var t,n,r;return t=e,(n=[{key:"_initWebSocket",value:function(){var e=new WebSocket(this._wsUrl);this._handleChannel(e),this._mode="websocket"}},{key:"_startConnectionRetries",value:function(){var e=this,t=1;this._retryTimeout=setTimeout((function n(){e.isOpen()||(e._initWebSocket(e._wsUrl),t=Math.min(2*t,60),e._retryTimeout=setTimeout(n,1e3*t))}),1e3*t)}},{key:"_stopConnectionRetries",value:function(){this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=void 0)}},{key:"_retryWebSocketConnection",value:function(e){var t=this;if(this._areRetriesEnabled){var n=e.code,r=e.reason;s.a.sendAnalytics(Object(o.y)(n,r)),this._areRetriesEnabled=!1,this._eventEmitter.once(i.default.DATA_CHANNEL_OPEN,(function(){t._stopConnectionRetries(),t._areRetriesEnabled=!0})),this._startConnectionRetries()}}},{key:"mode",get:function(){return this._mode}},{key:"close",value:function(){if(this._closedFromClient=!0,this._stopConnectionRetries(),this._areRetriesEnabled=!1,this._channel){try{this._channel.close()}catch(e){}this._channel=null}}},{key:"isOpen",value:function(){return this._channel&&("open"===this._channel.readyState||this._channel.readyState===WebSocket.OPEN)}},{key:"sendEndpointStatsMessage",value:function(e){this._send(Object.assign({colibriClass:"EndpointStats"},e))}},{key:"sendMessage",value:function(e,t){this._send({colibriClass:"EndpointMessage",msgPayload:t,to:e})}},{key:"sendSetLastNMessage",value:function(e){d.log("Sending lastN=".concat(e,".")),this._send({colibriClass:"LastNChangedEvent",lastN:e})}},{key:"sendSelectedEndpointsMessage",value:function(e){d.log("Sending selected endpoints: ".concat(e,".")),this._send({colibriClass:"SelectedEndpointsChangedEvent",selectedEndpoints:e})}},{key:"sendReceiverVideoConstraintMessage",value:function(e){d.log("Sending ReceiverVideoConstraint with maxFrameHeight=".concat(e,"px")),this._send({colibriClass:"ReceiverVideoConstraint",maxFrameHeight:e})}},{key:"sendNewReceiverVideoConstraintsMessage",value:function(e){d.log("Sending ReceiverVideoConstraints with ".concat(JSON.stringify(e))),this._send(Object.assign({colibriClass:"ReceiverVideoConstraints"},e))}},{key:"sendVideoTypeMessage",value:function(e){d.debug("Sending VideoTypeMessage with video type as ".concat(e)),this._send({colibriClass:"VideoTypeMessage",videoType:e})}},{key:"sendSourceVideoTypeMessage",value:function(e,t){d.info("Sending SourceVideoTypeMessage with video type ".concat(e,": ").concat(t)),this._send({colibriClass:"SourceVideoTypeMessage",sourceName:e,videoType:t})}},{key:"_handleChannel",value:function(e){var t=this,n=this._eventEmitter;e.onopen=function(){d.info("".concat(t._mode," channel opened")),n.emit(i.default.DATA_CHANNEL_OPEN)},e.onerror=function(e){"websocket"!==t._mode&&d.error("Channel error: ".concat(e.message))},e.onmessage=function(e){var t,r=e.data;try{t=JSON.parse(r)}catch(e){return u.a.callErrorHandler(e),void d.error("Failed to parse channel message as JSON: ",r,e)}var o=t.colibriClass;switch(o){case"DominantSpeakerEndpointChangeEvent":var s=t,c=s.dominantSpeakerEndpoint,l=s.previousSpeakers,f=void 0===l?[]:l;d.debug("Dominant speaker: ".concat(c,", previous speakers: ").concat(f)),n.emit(i.default.DOMINANT_SPEAKER_CHANGED,c,f);break;case"EndpointConnectivityStatusChangeEvent":var h=t.endpoint,p="true"===t.active;d.info("Endpoint connection status changed: ".concat(h," active=").concat(p)),n.emit(i.default.ENDPOINT_CONN_STATUS_CHANGED,h,p);break;case"EndpointMessage":n.emit(i.default.ENDPOINT_MESSAGE_RECEIVED,t.from,t.msgPayload);break;case"EndpointStats":n.emit(i.default.ENDPOINT_STATS_RECEIVED,t.from,t);break;case"LastNEndpointsChangeEvent":if(!a.a.isSourceNameSignalingEnabled()){var m=t.lastNEndpoints;d.info("New forwarded endpoints: ".concat(m)),n.emit(i.default.LASTN_ENDPOINT_CHANGED,m)}break;case"ForwardedSources":if(a.a.isSourceNameSignalingEnabled()){var v=t.forwardedSources;d.info("New forwarded sources: ".concat(v)),n.emit(i.default.FORWARDED_SOURCES_CHANGED,v)}break;case"SenderVideoConstraints":var g=t.videoConstraints;g&&(d.info("SenderVideoConstraints: ".concat(JSON.stringify(g))),n.emit(i.default.SENDER_VIDEO_CONSTRAINTS_CHANGED,g));break;case"SenderSourceConstraints":if(a.a.isSourceNameSignalingEnabled()){var y=t,_=y.sourceName,b=y.maxHeight;"string"==typeof _&&"number"==typeof b?(d.info("SenderSourceConstraints: ".concat(JSON.stringify({sourceName:_,maxHeight:b}))),n.emit(i.default.SENDER_VIDEO_CONSTRAINTS_CHANGED,{sourceName:_,maxHeight:b})):d.error("Invalid SenderSourceConstraints: ".concat(JSON.stringify(t)))}break;case"ServerHello":d.info("Received ServerHello, version=".concat(t.version,"."));break;default:d.debug("Channel JSON-formatted message: ",t),n.emit("rtc.datachannel.".concat(o),t)}},e.onclose=function(e){d.info("Channel closed by ".concat(t._closedFromClient?"client":"server")),"websocket"===t._mode&&(t._closedFromClient||(d.error("Channel closed: ".concat(e.code," ").concat(e.reason)),t._retryWebSocketConnection(e))),t._channel=null},this._channel=e}},{key:"_send",value:function(e){var t=this._channel;if(!this.isOpen())throw d.error("Bridge Channel send: no opened channel."),new Error("No opened channel");t.send(JSON.stringify(e))}}])&&l(t.prototype,n),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return R}));var r=n(4),i=n(37),o=n(26),a=n(24),s=n(118),c=n.n(s),u=n(3),l=n(9),d=n(18),f=n(11),h=n(5),p=n(12),m=n(8),v=n(177),g=n(21);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=E(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function E(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=D(e)););return e}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){var i=D(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=Object(r.getLogger)(e),R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(v,e);var t,n,r,s=C(v);function v(e){var t,n=e.deviceId,r=e.facingMode,i=e.mediaType,o=e.resolution,c=e.rtcId,u=e.sourceId,f=e.sourceType,h=e.stream,p=e.track,m=e.videoType,y=e.effects,_=void 0===y?[]:y;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(t=s.call(this,null,h,p,(function(){return t.emit(a.LOCAL_TRACK_STOPPED)}),i,m))._setEffectInProgress=!1;var b=_.find((function(e){return e.isEnabled(T(t))}));b&&t._startStreamEffect(b);var E=m===d.VideoType.DESKTOP?p.getSettings().displaySurface:null;return t.metadata=Object.assign({timestamp:Date.now()},E?{displaySurface:E}:{}),t.rtcId=c,t.sourceId=u,t.sourceType=f,t.resolution=p.getSettings().height,t.maxEnabledResolution=o,t._constraints=p.getConstraints(),Object.keys(t._constraints).length||m!==d.VideoType.CAMERA||(t._constraints={height:p.getSettings().height,width:p.getSettings().width}),t.deviceId=n,t._prevSetMuted=Promise.resolve(),t._facingMode=r,t._trackEnded=!1,t._hasSentData=!1,t._testDataSent=!0,t._realDeviceId=""===t.deviceId?void 0:t.deviceId,t._sourceName=null,t._trackMutedTS=0,t._onDeviceListWillChange=function(e){var n=t._realDeviceId;t._setRealDeviceIdFromDeviceList(e),(void 0===t.getTrack().readyState&&void 0!==t._realDeviceId&&!e.find((function(e){return e.deviceId===t._realDeviceId}))||void 0!==n&&void 0===t._realDeviceId)&&(t._trackEnded=!0)},t.isAudioTrack()&&g.a.isDeviceChangeAvailable("output")&&(t._onAudioOutputDeviceChanged=t.setAudioOutput.bind(T(t)),g.a.addListener(l.default.AUDIO_OUTPUT_DEVICE_CHANGED,t._onAudioOutputDeviceChanged)),g.a.addListener(l.default.DEVICE_LIST_WILL_CHANGE,t._onDeviceListWillChange),t._initNoDataFromSourceHandlers(),t}return t=v,(n=[{key:"_addStreamToConferenceAsUnmute",value:function(){var e=this;return this.conference?new Promise((function(t,n){e.conference._addLocalTrackAsUnmute(e).then(t,(function(e){return n(new Error(e))}))})):Promise.resolve()}},{key:"_fireNoDataFromSourceEvent",value:function(){var e=!this.isReceivingData();this.emit(a.NO_DATA_FROM_SOURCE,e),m.a.sendAnalytics(Object(f.G)(this.getType(),e)),m.a.sendLog(JSON.stringify({name:a.NO_DATA_FROM_SOURCE,log:e}))}},{key:"_initNoDataFromSourceHandlers",value:function(){var e=this;this._isNoDataFromSourceEventsEnabled()&&(this._setHandler("track_mute",(function(){e._trackMutedTS=window.performance.now(),e._fireNoDataFromSourceEvent()})),this._setHandler("track_unmute",(function(){e._fireNoDataFromSourceEvent(),m.a.sendAnalyticsAndLog(f.s,{media_type:e.getType(),track_type:"local",value:window.performance.now()-e._trackMutedTS})})),this.isVideoTrack()&&this.videoType===d.VideoType.CAMERA&&this._setHandler("track_ended",(function(){e.isReceivingData()||e._fireNoDataFromSourceEvent()})))}},{key:"_isNoDataFromSourceEventsEnabled",value:function(){return!this.isVideoTrack()||this.videoType!==d.VideoType.DESKTOP}},{key:"_queueSetMuted",value:function(e){var t=this._setMuted.bind(this,e);return this._prevSetMuted=this._prevSetMuted.then(t,t),this._prevSetMuted}},{key:"_removeStreamFromConferenceAsMute",value:function(e,t){this.conference?this.conference._removeLocalTrackAsMute(this).then(e,(function(e){return t(new Error(e))})):e()}},{key:"_sendMuteStatus",value:function(e){this.conference&&this.conference._setTrackMuteStatus(this.getType(),this,e)&&this.conference.room.sendPresence()}},{key:"_setMuted",value:function(e){var t=this;if(this.isMuted()===e&&(this.videoType!==d.VideoType.DESKTOP||!p.a.isMultiStreamSupportEnabled()))return Promise.resolve();if(this.disposed)return Promise.reject(new i.a(o.TRACK_IS_DISPOSED));var n=Promise.resolve(),r=function(){return A.info("Mute ".concat(t,": ").concat(e))};if(this.isAudioTrack()||this.videoType===d.VideoType.DESKTOP&&!p.a.isMultiStreamSupportEnabled()||!h.a.doesVideoMuteByStreamRemove())r(),this._streamEffect&&this._streamEffect.setMuted?this._streamEffect.setMuted(e):this.track&&(this.track.enabled=!e);else if(e)n=new Promise((function(e,n){r(),t._removeStreamFromConferenceAsMute((function(){t._streamEffect&&t._stopStreamEffect(),t._unregisterHandlers(),t.stopStream(),t._setStream(null),e()}),n)}));else{r();var s={cameraDeviceId:this.getDeviceId(),devices:[u.a.VIDEO],effects:this._streamEffect?[this._streamEffect]:[],facingMode:this.getCameraFacingMode()};n=(n=g.a.obtainAudioAndVideoPermissions(Object.assign({},s,{constraints:{video:this._constraints}}))).then((function(e){var n=t.getType()===u.a.PRESENTER?u.a.VIDEO:t.getType(),r=e.find((function(e){return e.track.kind===n}));if(!r)throw new i.a(o.TRACK_NO_STREAM_FOUND);return t._setStream(r.stream),t.track=r.track,t.videoType!==r.videoType&&(A.warn("".concat(t,": video type has changed after unmute!"),t.videoType,r.videoType),t.videoType=r.videoType),t._streamEffect&&t._startStreamEffect(t._streamEffect),t.containers.map((function(e){return g.a.attachMediaStream(e,t.stream)})),t._addStreamToConferenceAsUnmute()}))}return n.then((function(){t._sendMuteStatus(e),t.isVideoTrack()&&t.conference&&t.conference._sendBridgeVideoTypeMessage(t),t.emit(a.TRACK_MUTE_CHANGED,t)}))}},{key:"_setRealDeviceIdFromDeviceList",value:function(e){var t=this,n=this.getTrack(),r="".concat(n.kind,"input"),i=e.find((function(e){return e.kind===r&&e.label===n.label&&e.deviceId===t.deviceId}));if(!i&&"default"===this._realDeviceId){var o=(n.label||"").replace("Default - ","");i=e.find((function(e){return e.kind===r&&e.label===o}))}this._realDeviceId=i?i.deviceId:void 0}},{key:"_setStream",value:function(e){b(D(v.prototype),"_setStream",this).call(this,e),e?(this.storedMSID=this.getMSID(),A.debug("Setting new MSID: ".concat(this.storedMSID," on ").concat(this))):A.debug("Setting 'null' stream on ".concat(this))}},{key:"_startStreamEffect",value:function(e){this._streamEffect=e,this._originalStream=this.stream,this._setStream(this._streamEffect.startEffect(this._originalStream)),this.track=this.stream.getTracks()[0]}},{key:"_stopStreamEffect",value:function(){this._streamEffect&&(this._streamEffect.stopEffect(),this._setStream(this._originalStream),this._originalStream=null,this.track=this.stream?this.stream.getTracks()[0]:null)}},{key:"_switchCamera",value:function(){this.isVideoTrack()&&this.videoType===d.VideoType.CAMERA&&"function"==typeof this.track._switchCamera&&(this.track._switchCamera(),this._facingMode=this._facingMode===c.a.ENVIRONMENT?c.a.USER:c.a.ENVIRONMENT)}},{key:"_switchStreamEffect",value:function(e){this._streamEffect&&(this._stopStreamEffect(),this._streamEffect=void 0),e&&this._startStreamEffect(e)}},{key:"dispose",value:function(){var e=this,t=Promise.resolve();return this._streamEffect&&(t=this.setEffect()),this.conference&&(t=t.then((function(){return e.conference.removeTrack(e)}))),this.stream&&(this.stopStream(),this.detach()),g.a.removeListener(l.default.DEVICE_LIST_WILL_CHANGE,this._onDeviceListWillChange),this._onAudioOutputDeviceChanged&&g.a.removeListener(l.default.AUDIO_OUTPUT_DEVICE_CHANGED,this._onAudioOutputDeviceChanged),t.then((function(){return b(D(v.prototype),"dispose",e).call(e)}))}},{key:"getCameraFacingMode",value:function(){var e,t;if(this.isVideoTrack()&&this.videoType===d.VideoType.CAMERA){var n=null===(t=(e=this.track).getSettings)||void 0===t?void 0:t.call(e);return n&&"facingMode"in n?n.facingMode:void 0!==this._facingMode?this._facingMode:c.a.USER}}},{key:"getDeviceId",value:function(){return this._realDeviceId||this.deviceId}},{key:"getDuration",value:function(){return Date.now()/1e3-this.metadata.timestamp/1e3}},{key:"getParticipantId",value:function(){return this.conference&&this.conference.myUserId()}},{key:"getSourceName",value:function(){return this._sourceName}},{key:"isEnded",value:function(){return this.isVideoTrack()&&this.isMuted()?this._trackEnded:"ended"===this.getTrack().readyState||this._trackEnded}},{key:"isLocal",value:function(){return!0}},{key:"isMuted",value:function(){return!this.stream||!(!this.isVideoTrack()||this.isActive())||(this._streamEffect&&this._streamEffect.isMuted?this._streamEffect.isMuted():!this.track||!this.track.enabled)}},{key:"isReceivingData",value:function(){return!(!this.isVideoTrack()||!this.isMuted()&&!this._stopStreamInProgress&&this.videoType!==d.VideoType.DESKTOP)||!!this.stream&&(this._effectEnabled?this._originalStream:this.stream).getTracks().some((function(e){return!("readyState"in e&&"live"!==e.readyState||"muted"in e&&!0===e.muted)}))}},{key:"mute",value:function(){return this._queueSetMuted(!0)}},{key:"onByteSentStatsReceived",value:function(e,t){var n=this;t>0&&(this._hasSentData=!0);var r=e.getConnectionState();this._testDataSent&&"connected"===r&&(setTimeout((function(){n._hasSentData||(A.warn("".concat(n," 'bytes sent' <= 0:                         ").concat(t)),m.a.analytics.sendEvent(f.r,{media_type:n.getType()}))}),3e3),this._testDataSent=!1)}},{key:"setConference",value:function(e){this.conference=e;for(var t=0;t<this.containers.length;t++)this._maybeFireTrackAttached(this.containers[t])}},{key:"setEffect",value:function(e){var t=this;if(void 0===this._streamEffect&&void 0===e)return Promise.resolve();if(void 0!==e&&!e.isEnabled(this))return Promise.reject(new Error("Incompatible effect instance!"));if(!0===this._setEffectInProgress)return Promise.reject(new Error("setEffect already in progress!"));if(this.isMuted()&&!this.isAudioTrack())return this._streamEffect=e,Promise.resolve();var n=this.conference;return n?(this._setEffectInProgress=!0,n.removeTrack(this).then((function(){return t._switchStreamEffect(e),t.isVideoTrack()&&t.containers.forEach((function(e){return g.a.attachMediaStream(e,t.stream)})),n.addTrack(t)})).then((function(){t._setEffectInProgress=!1})).catch((function(e){throw t._setEffectInProgress=!1,t._switchStreamEffect(),A.error("Failed to switch to the new stream!",e),e}))):(this._switchStreamEffect(e),this.isVideoTrack()&&this.containers.forEach((function(e){return g.a.attachMediaStream(e,t.stream)})),Promise.resolve())}},{key:"setSourceName",value:function(e){this._sourceName=e}},{key:"stopStream",value:function(){this._stopStreamInProgress=!0;try{g.a.stopMediaStream(this.stream)}finally{this._stopStreamInProgress=!1}}},{key:"toString",value:function(){return"LocalTrack[".concat(this.rtcId,",").concat(this.getType(),"]")}},{key:"unmute",value:function(){return this._queueSetMuted(!1)}}])&&_(t.prototype,n),r&&_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),v}(v.a)}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return M}));var r=n(4),i=n(375),o=n(32),a=n.n(o),s=n(33),c=n(15),u=n(3),l=n(9),d=n(49),f=n(89),h=n(18),p=n(70),m=n(5),v=n(12),g=n(339),y=n(340),_=n(28),b=n(10),E=n(341),S=n(342),C=n(52),w=n(22),T=n(343),D=n(23),A=n(21),R=n(94);function k(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||P(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=P(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function P(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var N=Object(r.getLogger)(e);function M(e,t,r,o,a,s,c){var u=this;this.audioTransferActive=!(!0===c.startSilent),this._dtmfSender=void 0,this._dtmfTonesQueue=[],this.videoTransferActive=!0,this.rtc=e,this.id=t,this.isP2P=s,this.remoteTracks=new Map,this.localTracks=new Map,this._addedStreams=[],this.localSSRCs=new Map,this.localUfrag=null,this.remoteUfrag=null,this._dtlsTransport=null,this.signalingLayer=r,this._peerVideoTypeChanged=this._peerVideoTypeChanged.bind(this),this.signalingLayer.on(d.b,this._peerVideoTypeChanged),this._peerMutedChanged=this._peerMutedChanged.bind(this),this.signalingLayer.on(d.a,this._peerMutedChanged),this.options=c,this.signalingLayer.on(d.c,(function(e,t){return u._sourceMutedChanged(e,t)})),this.signalingLayer.on(d.d,(function(e,t){return u._sourceVideoTypeChanged(e,t)}));var l=a||{};if(l.optional=l.optional||[],Array.isArray(l.optional)?l.optional.push({rtcStatsSFUP2P:this.isP2P}):N.warn("Optional param is not an array, rtcstats p2p data is omitted."),this.peerconnection=new A.a.RTCPeerConnectionType(o,l),this.tpcUtils=new R.d(this),this.updateLog=[],this.stats={},this.statsinterval=null,this._capScreenshareBitrate=this.options.capScreenshareBitrate,this._usesUnifiedPlan=c.usesUnifiedPlan,this._usesTransceiverCodecPreferences=m.a.supportsCodecPreferences()&&this._usesUnifiedPlan,this._usesTransceiverCodecPreferences&&N.info("Using RTCRtpTransceiver#setCodecPreferences for codec selection"),this.maxstats=c.maxstats,this.interop=new i.a,this._usesUnifiedPlan)this.simulcast=new S.a({numOfLayers:R.c.length});else{var f=n(621);this.simulcast=new f({numOfLayers:R.c.length,explodeRemoteSimulcast:!1,usesUnifiedPlan:!1})}this.sdpConsistency=new E.a(this.toString()),this.localSdpMunger=new g.a(this,this.rtc.getLocalEndpointId()),this.eventEmitter=e.eventEmitter,this.rtxModifier=new y.a,this._senderVideoMaxHeight=2160,this._senderMaxHeights=new Map,this.trace=function(e,t){N.debug(e,t),u.updateLog.push({time:new Date,type:e,value:t||""})},this.onicecandidate=null,this.peerconnection.onicecandidate=function(e){u.trace("onicecandidate",JSON.stringify(e.candidate,null," ")),null!==u.onicecandidate&&u.onicecandidate(e)},this._usesUnifiedPlan?(this.onTrack=function(e){var t=e.streams[0];u._remoteTrackAdded(t,e.track,e.transceiver),t.addEventListener("removetrack",(function(e){u._remoteTrackRemoved(t,e.track)}))},this.peerconnection.addEventListener("track",this.onTrack)):(this.peerconnection.onaddstream=function(e){return u._remoteStreamAdded(e.stream)},this.peerconnection.onremovestream=function(e){return u._remoteStreamRemoved(e.stream)}),this.onsignalingstatechange=null,this.peerconnection.onsignalingstatechange=function(e){u.trace("onsignalingstatechange",u.signalingState),null!==u.onsignalingstatechange&&u.onsignalingstatechange(e)},this.oniceconnectionstatechange=null,this.peerconnection.oniceconnectionstatechange=function(e){u.trace("oniceconnectionstatechange",u.iceConnectionState),null!==u.oniceconnectionstatechange&&u.oniceconnectionstatechange(e)},this.onnegotiationneeded=null,this.peerconnection.onnegotiationneeded=function(e){u.trace("onnegotiationneeded"),null!==u.onnegotiationneeded&&u.onnegotiationneeded(e)},this.onconnectionstatechange=null,this.peerconnection.onconnectionstatechange=function(e){u.trace("onconnectionstatechange",u.connectionState),null!==u.onconnectionstatechange&&u.onconnectionstatechange(e)},this.ondatachannel=null,this.peerconnection.ondatachannel=function(e){u.trace("ondatachannel"),null!==u.ondatachannel&&u.ondatachannel(e)},this.maxstats&&(this.statsinterval=window.setInterval((function(){u.getStats().then((function(e){if("function"==typeof(null==e?void 0:e.result))for(var t=e.result(),n=function(e){var n=t[e];n.names().forEach((function(e){u._processStat(n,e,n.stat(e))}))},r=0;r<t.length;++r)n(r);else e.forEach((function(e){return u._processStat(e,"",e)}))}))}),1e3)),N.info("Create new ".concat(this))}M.prototype._processStat=function(e,t,n){var r="".concat(e.id,"-").concat(t),i=this.stats[r],o=new Date;i||(this.stats[r]=i={startTime:o,endTime:o,values:[],times:[]}),i.values.push(n),i.times.push(o.getTime()),i.values.length>this.maxstats&&(i.values.shift(),i.times.shift()),i.endTime=o};var x=function(e){return null==e?"":"type: ".concat(e.type,"\r\n").concat(e.sdp)};M.prototype.getConnectionState=function(){var e=this.peerconnection.iceConnectionState;return"completed"===e?"connected":e},M.prototype.getDesiredMediaDirection=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.hasAnyTracksOfType(e);if(this._usesUnifiedPlan)return t?n?c.a.SENDRECV:c.a.SENDONLY:n?c.a.RECVONLY:c.a.INACTIVE;var r=e===u.a.AUDIO?this.audioTransferActive:this.videoTransferActive;return r?n?c.a.SENDRECV:c.a.RECVONLY:c.a.INACTIVE},M.prototype._getReceiversByEndpointIds=function(e,t){var n,r=[],i=j(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;r=r.concat(this.getRemoteTracks(o,t))}}catch(e){i.e(e)}finally{i.f()}var a=r.map((function(e){var t;return null===(t=e.track)||void 0===t?void 0:t.id}));return this.peerconnection.getReceivers().filter((function(e){return e.track&&e.track.kind===t&&a.find((function(t){return t===e.track.id}))}))},M.prototype.isSimulcastOn=function(){return!this.options.disableSimulcast},M.prototype._peerVideoTypeChanged=function(e,t){if(e){var n=this.getRemoteTracks(e,u.a.VIDEO);n.length&&n[0]._setVideoType(t)}else N.error("".concat(this," No endpointID on peerVideoTypeChanged"))},M.prototype._peerMutedChanged=function(e,t,n){if(e){var r=this.getRemoteTracks(e,t);r.length&&r[0].setMute(n)}else N.error("".concat(this," On peerMuteChanged - no endpoint ID"))},M.prototype._sourceMutedChanged=function(e,t){var n=this.getRemoteTracks().find((function(t){return t.getSourceName()===e}));n&&n.setMute(t)},M.prototype._sourceVideoTypeChanged=function(e,t){var n=this.getRemoteTracks().find((function(t){return t.getSourceName()===e}));n&&n._setVideoType(t)},M.prototype.getAudioLevels=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={},n=e.length?this._getReceiversByEndpointIds(e,u.a.AUDIO):this.peerconnection.getReceivers().filter((function(e){return e.track&&e.track.kind===u.a.AUDIO&&e.track.enabled}));return n.forEach((function(e){var n=e.getSynchronizationSources();n&&n.length&&(t[n[0].source]=n[0].audioLevel)})),t},M.prototype.getLocalTracks=function(e){var t=Array.from(this.localTracks.values());return void 0!==e&&(t=t.filter((function(t){return t.getType()===e}))),t},M.prototype.getLocalVideoTracks=function(){return this.getLocalTracks(u.a.VIDEO)},M.prototype.hasAnyTracksOfType=function(e){if(!e)throw new Error('"mediaType" is required');return this.getLocalTracks(e).length>0},M.prototype.getRemoteTracks=function(e,t){var n,r=[],i=j(e?[e]:this.remoteTracks.keys());try{for(i.s();!(n=i.n()).done;){var o=n.value,a=this.remoteTracks.get(o);if(a){var s,c=j(a.keys());try{for(c.s();!(s=c.n()).done;){var u=s.value;t&&t!==u||(r=r.concat(Array.from(a.get(u))))}}catch(e){c.e(e)}finally{c.f()}}}}catch(e){i.e(e)}finally{i.f()}return r},M.prototype.getRemoteSourceInfoByParticipant=function(e){var t=[],n=this.getRemoteTracks(e);if(!(null==n?void 0:n.length))return t;var r=n.map((function(e){return e.getSSRC()})),i=new _.a(this.remoteDescription.sdp);return r.forEach((function(e,n){var r,o=j(i.media);try{for(o.s();!(r=o.n()).done;){var a=r.value,s="",c=b.a.findLines(a,"a=ssrc:".concat(e));if(c.length){t[n]||(t[n]="");var u=b.a.findLines(a,"a=ssrc-group:FID ".concat(e));if(u.length){var l=u[0].split(" ")[2];s+="".concat(u[0],"\r\n"),c=c.concat(b.a.findLines(a,"a=ssrc:".concat(l)))}t[n]+="".concat(c.join("\r\n"),"\r\n"),t[n]+=s}}}catch(e){o.e(e)}finally{o.f()}})),t},M.prototype.getTargetVideoBitrates=function(){var e=this.getConfiguredVideoCodec();return this.tpcUtils.videoBitrates[e.toUpperCase()]||this.tpcUtils.videoBitrates},M.prototype.getTrackBySSRC=function(e){if("number"!=typeof e)throw new Error("SSRC ".concat(e," is not a number"));var t,n=j(this.localTracks.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.getLocalSSRC(r)===e)return r}}catch(e){n.e(e)}finally{n.f()}var i,o=j(this.getRemoteTracks());try{for(o.s();!(i=o.n()).done;){var a=i.value;if(a.getSSRC()===e)return a}}catch(e){o.e(e)}finally{o.f()}return null},M.prototype.getSsrcByTrackId=function(e){var t=function(t){return t.getTrack().id===e},n=this.getLocalTracks().find(t);if(n)return this.getLocalSSRC(n);var r=this.getRemoteTracks().find(t);return r?r.getSSRC():null},M.prototype._remoteStreamAdded=function(e){var t=this,n=D.a.getStreamID(e);if(D.a.isUserStreamById(n)){m.a.isChromiumBased()&&(e.onaddtrack=function(n){t._remoteTrackAdded(e,n.track)},e.onremovetrack=function(n){t._remoteTrackRemoved(e,n.track)});var r,i=j(e.getAudioTracks());try{for(i.s();!(r=i.n()).done;){var o=r.value;this._remoteTrackAdded(e,o)}}catch(e){i.e(e)}finally{i.f()}var a,s=j(e.getVideoTracks());try{for(s.s();!(a=s.n()).done;){var c=a.value;this._remoteTrackAdded(e,c)}}catch(e){s.e(e)}finally{s.f()}}else N.info("".concat(this," ignored remote 'stream added' event for non-user stream[id=").concat(n,"]"))},M.prototype._remoteTrackAdded=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=D.a.getStreamID(e),i=t.kind;if(this.isP2P||D.a.isUserStreamById(r))if(N.info("".concat(this," adding remote track for stream[id=").concat(r,",type=").concat(i,"]")),i){var o,a=this._usesUnifiedPlan?new _.a(this.peerconnection.remoteDescription.sdp):new _.a(this.remoteDescription.sdp);if(this._usesUnifiedPlan)if(n&&n.mid){var s=n.mid;o=a.media.filter((function(e){return b.a.findLine(e,"a=mid:".concat(s))}))}else o=a.media.filter((function(e){var t=b.a.findLine(e,"a=msid:");return void 0!==t&&r===t.substring(7).split(" ")[0]}));else o=a.media.filter((function(e){return e.startsWith("m=".concat(i))}));if(o.length){var c=b.a.findLines(o[0],"a=ssrc:");if((c=c.filter((function(e){return-1!==e.indexOf("msid:".concat(r))}))).length){var u=c[0].substring(7).split(" ")[0],l=Number(u),d=this.signalingLayer.getSSRCOwner(l);if(isNaN(l)||l<0)w.callErrorHandler(new Error("Invalid SSRC for remote stream[ssrc=".concat(l,",id=").concat(r,",type=").concat(i,"]")));else if(d){var h;v.a.isSourceNameSignalingEnabled()&&((h=this.signalingLayer.getTrackSourceName(l))||(h=Object(f.c)(d,i,0))),N.info("".concat(this," creating remote track[endpoint=").concat(d,",ssrc=").concat(l,",")+"type=".concat(i,",sourceName=").concat(h,"]"));var p=this.signalingLayer.getPeerMediaInfo(d,i,h);if(p){var m=p.muted,g=p.videoType;this._createRemoteTrack(d,e,t,i,g,l,m,h)}else w.callErrorHandler(new Error("".concat(this,": no peer media info available for ").concat(d)))}else w.callErrorHandler(new Error("No SSRC owner known for remote stream[ssrc=".concat(l,",id=").concat(r,",type=").concat(i,"]")))}else w.callErrorHandler(new Error("No SSRC lines found in remote SDP for remote stream[msid=".concat(r,",type=").concat(i,"]")))}else w.callErrorHandler(new Error("No media lines found in remote SDP for remote stream[id=".concat(r,",type=").concat(i,"]")))}else w.callErrorHandler(new Error("MediaType undefined for remote track, stream id: ".concat(r)));else N.info("".concat(this," ignored remote 'stream added' event for non-user stream[id=").concat(r,"]"))},M.prototype._createRemoteTrack=function(e,t,n,r,i,o,a,s){var c=this.remoteTracks.get(e);c||((c=new Map).set(u.a.AUDIO,new Set),c.set(u.a.VIDEO,new Set),this.remoteTracks.set(e,c));var d=c.get(r);if((null==d?void 0:d.size)&&Array.from(d).find((function(e){return e.getTrack()===n})))N.info("".concat(this," ignored duplicated track event for track[endpoint=").concat(e,",type=").concat(r,"]"));else{if((null==d?void 0:d.size)&&!v.a.isSourceNameSignalingEnabled()){N.error("".concat(this," received a second remote track for track[endpoint=").concat(e,",type=").concat(r,"]")+"deleting the existing track");var f=Array.from(d)[0];this._remoteTrackRemoved(f.getOriginalStream(),f.getTrack())}var h=new T.a(this.rtc,this.rtc.conference,e,t,n,r,i,o,a,this.isP2P,s);d.add(h),this.eventEmitter.emit(l.default.REMOTE_TRACK_ADDED,h,this)}},M.prototype._remoteStreamRemoved=function(e){if(D.a.isUserStream(e)){var t,n=j(e.getVideoTracks());try{for(n.s();!(t=n.n()).done;){var r=t.value;this._remoteTrackRemoved(e,r)}}catch(e){n.e(e)}finally{n.f()}var i,o=j(e.getAudioTracks());try{for(o.s();!(i=o.n()).done;){var a=i.value;this._remoteTrackRemoved(e,a)}}catch(e){o.e(e)}finally{o.f()}}else{var s=D.a.getStreamID(e);N.info("Ignored remote 'stream removed' event for stream[id=".concat(s,"]"))}},M.prototype._remoteTrackRemoved=function(e,t){var n=D.a.getStreamID(e),r=t&&D.a.getTrackID(t);if(D.a.isUserStreamById(n))if(n)if(r){var i=this.getRemoteTracks().find((function(e){return e.getStreamId()===n&&e.getTrackId()===r}));i?(N.info("".concat(this," remote track removed stream[id=").concat(n,",trackId=").concat(r,"]")),this._removeRemoteTrack(i)):w.callErrorHandler(new Error("".concat(this," remote track removal failed - track not found")))}else w.callErrorHandler(new Error("".concat(this," remote track removal failed - no track ID")));else w.callErrorHandler(new Error("".concat(this," remote track removal failed - no stream ID")));else N.info("".concat(this," ignored remote 'stream removed' event for non-user stream[id=").concat(n,"]"))},M.prototype.removeRemoteTracks=function(e){var t=[],n=this.remoteTracks.get(e);return n&&(t=(t=t.concat(Array.from(n.get(u.a.AUDIO)))).concat(Array.from(n.get(u.a.VIDEO))),this.remoteTracks.delete(e)),N.debug("".concat(this," removed remote tracks[endpoint=").concat(e,",count=").concat(t.length)),t},M.prototype._removeRemoteTrack=function(e){var t;e.dispose();var n=e.getParticipantId(),r=this.remoteTracks.get(n);r?(null===(t=r.get(e.getType()))||void 0===t?void 0:t.delete(e))||N.error("".concat(this," Failed to remove ").concat(e," - type mapping messed up ?")):N.error("".concat(this," removeRemoteTrack: no remote tracks map for endpoint=").concat(n)),this.eventEmitter.emit(l.default.REMOTE_TRACK_REMOVED,e)},M.prototype._extractSSRCMap=function(e){var t=new Map,n=new Map;if("object"!==O(e)||null===e||"string"!=typeof e.sdp)return N.warn("An empty description was passed as an argument"),t;var r=a.a.parse(e.sdp);if(!Array.isArray(r.media))return t;var i=r.media;this._usesUnifiedPlan&&(i=[],[u.a.AUDIO,u.a.VIDEO].forEach((function(e){var t=r.media.find((function(t){return t.type===e}));t&&i.push(t)})));var o,s=j(i);try{for(s.s();!(o=s.n()).done;){var c=o.value;if(Array.isArray(c.ssrcs)){if(Array.isArray(c.ssrcGroups)){var l,d=j(c.ssrcGroups);try{for(d.s();!(l=d.n()).done;){var f=l.value;if(void 0!==f.semantics&&void 0!==f.ssrcs){var h=f.ssrcs.split(" ").map((function(e){return parseInt(e,10)})),p=h[0];f.ssrcs=h,n.has(p)||n.set(p,[]),n.get(p).push(f)}}}catch(e){d.e(e)}finally{d.f()}}var m,v=c.ssrcs,g=j(v=this._usesUnifiedPlan?v.filter((function(e){return"cname"===e.attribute})):v.filter((function(e){return"msid"===e.attribute})));try{for(g.s();!(m=g.n()).done;){var y=m.value,_=this._usesUnifiedPlan?c.type:y.value,b=y.id,E=t.get(_);if(E||(E={ssrcs:[],groups:[],msid:_},t.set(_,E)),E.ssrcs.push(b),n.has(b)){var S,C=j(n.get(b));try{for(C.s();!(S=C.n()).done;){var w=S.value;E.groups.push(w)}}catch(e){C.e(e)}finally{C.f()}}}}catch(e){g.e(e)}finally{g.f()}}}}catch(e){s.e(e)}finally{s.f()}return t};var L=function(e){if("object"!==O(e)||null===e||"string"!=typeof e.sdp)return N.warn("An empty description was passed as an argument"),e;var t=n(32),r=t.parse(e.sdp);void 0!==r&&void 0!==r.media&&Array.isArray(r.media)&&r.media.forEach((function(e){var t=[],n=[];if(void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&e.ssrcGroups.forEach((function(e){void 0!==e.semantics&&"FID"===e.semantics&&void 0!==e.ssrcs&&t.push(Number(e.ssrcs.split(" ")[0]))})),Array.isArray(e.ssrcs)){var r;for(r=0;r<e.ssrcs.length;r++)"object"===O(e.ssrcs[r])&&void 0!==e.ssrcs[r].id&&t.indexOf(e.ssrcs[r].id)>=0&&(n.push(e.ssrcs[r]),delete e.ssrcs[r]);for(r=0;r<e.ssrcs.length;r++)void 0!==e.ssrcs[r]&&n.push(e.ssrcs[r]);e.ssrcs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!m.a.isChrome()||!m.a.isVersionGreaterThan(70))return e;var t=k(e),n=e.filter((function(e){return"mslabel"===e.attribute&&"-"===e.value})).map((function(e){return e.id}));return n.forEach((function(e){var n=t.find((function(t){return t.id===e&&"cname"===t.attribute}));n.value="".concat(c.a.RECVONLY,"-").concat(e),(t=t.filter((function(t){return t.id!==e}))).push(n)})),t}(n)}}));var i=t.write(r);return new RTCSessionDescription({type:e.type,sdp:i})};M.prototype.getLocalSSRC=function(e){var t=this._getSSRC(e.rtcId);return t&&t.ssrcs[0]},M.prototype._injectSsrcGroupForUnifiedSimulcast=function(e){var t=a.a.parse(e.sdp),n=t.media.find((function(e){return"video"===e.type}));n.ssrcGroups=n.ssrcGroups||[];var r=n.ssrcGroups.filter((function(e){return"FID"===e.semantics}));if(n.simulcast||n.simulcast_03){var i=[];if(r&&r.length?r.forEach((function(e){i.push(e.ssrcs.split(" ")[0])})):n.ssrcs.forEach((function(e){"msid"===e.attribute&&i.push(e.id)})),n.ssrcGroups.find((function(e){return"SIM"===e.semantics})))return e;n.ssrcGroups.push({semantics:"SIM",ssrcs:i.join(" ")})}return new RTCSessionDescription({type:e.type,sdp:a.a.write(t)})};var F={signalingState:function(){return this.peerconnection.signalingState},iceConnectionState:function(){return this.peerconnection.iceConnectionState},connectionState:function(){return this.peerconnection.connectionState},localDescription:function(){var e=this.peerconnection.localDescription;return e?(this.trace("getLocalDescription::preTransform",x(e)),this._usesUnifiedPlan&&!this.isP2P?(e=this.interop.toPlanB(e),this.trace("getLocalDescription::postTransform (Plan B)",x(e)),e=this._injectSsrcGroupForUnifiedSimulcast(e),this.trace("getLocalDescription::postTransform (inject ssrc group)",x(e))):this._usesUnifiedPlan||(m.a.doesVideoMuteByStreamRemove()&&(e=this.localSdpMunger.maybeAddMutedLocalVideoTracksToSDP(e),N.debug("getLocalDescription::postTransform (munge local SDP)",e)),e=function(e,t){var n,r;if(!e)throw new Error("No local description passed in.");var i=new C.a(e.sdp),o=null===(n=i.selectMedia(u.a.AUDIO))||void 0===n?void 0:n[0],a=!1;o&&o.direction!==c.a.SENDRECV&&(t.startSilent?o.direction=c.a.INACTIVE:o.direction=c.a.SENDRECV,a=!0);var s=null===(r=i.selectMedia(u.a.VIDEO))||void 0===r?void 0:r[0];return s&&s.direction!==c.a.SENDRECV&&(s.direction=c.a.SENDRECV,a=!0),a?new RTCSessionDescription({type:e.type,sdp:i.toRawSDP()}):e}(e,this.options)),e=this.localSdpMunger.transformStreamIdentifiers(e)):(N.debug("".concat(this," getLocalDescription no localDescription found")),{})},remoteDescription:function(){var e=this.peerconnection.remoteDescription;return e?(this.trace("getRemoteDescription::preTransform",x(e)),this._usesUnifiedPlan&&(this.isP2P?e=this._adjustRemoteMediaDirection(e):(e=this.interop.toPlanB(e),this.trace("getRemoteDescription::postTransform (Plan B)",x(e)))),e):(N.debug("".concat(this," getRemoteDescription no remoteDescription found")),{})}};Object.keys(F).forEach((function(e){Object.defineProperty(M.prototype,e,{get:F[e]})})),M.prototype._getSSRC=function(e){return this.localSSRCs.get(e)},M.prototype.isSharingLowFpsScreen=function(){return this._isSharingScreen()&&this._capScreenshareBitrate},M.prototype._isSharingScreen=function(){var e=this.getLocalVideoTracks();return Boolean(e.find((function(e){return e.videoType===h.VideoType.DESKTOP})))},M.prototype._mungeCodecOrder=function(e){var t=this;if(!this.codecPreference)return e;var n=a.a.parse(e.sdp),r=n.media.find((function(e){return e.type===t.codecPreference.mediaType}));if(!r)return e;if(this.codecPreference.enable)if(b.a.preferCodec(r,this.codecPreference.mimeType),this.codecPreference.mimeType===s.H264&&m.a.isReactNative()&&this.isP2P&&b.a.stripCodec(r,this.codecPreference.mimeType,!0),this.codecPreference.mimeType===s.VP9&&this.getConfiguredVideoCodec()===s.VP9){var i=this.tpcUtils.videoBitrates.VP9||this.tpcUtils.videoBitrates,o=i.high?i.high:R.a,c=Math.floor((this._isSharingScreen()?R.a:o)/1e3);r.bandwidth=[{type:"AS",limit:c}]}else r.bandwidth=void 0;else b.a.stripCodec(r,this.codecPreference.mimeType);return new RTCSessionDescription({type:e.type,sdp:a.a.write(n)})},M.prototype.addTrack=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.rtcId;if(N.info("".concat(this," adding ").concat(e)),this.localTracks.has(r))return Promise.reject(new Error("".concat(e," is already in ").concat(this)));this.localTracks.set(r,e);var i=e.getOriginalStream();if(this._usesUnifiedPlan){N.debug("".concat(this," TPC.addTrack using unified plan"));try{this.tpcUtils.addTrack(e,n)}catch(t){return N.error("".concat(this," Adding track=").concat(e," failed: ").concat(null==t?void 0:t.message)),Promise.reject(t)}}else{if(i)this._addStream(i);else if(!m.a.doesVideoMuteByStreamRemove()||e.isAudioTrack()||e.isVideoTrack()&&!e.isMuted())return Promise.reject(new Error("".concat(this," no WebRTC stream for track=").concat(e)));if(m.a.doesVideoMuteByStreamRemove()&&e.isVideoTrack()&&e.isMuted()){var o=this.generateNewStreamSSRCInfo(e);this.sdpConsistency.setPrimarySsrc(o.ssrcs[0]);var a=o.groups.find((function(e){return"SIM"===e.semantics}));a&&this.simulcast.setSsrcCache(a.ssrcs);var s=o.groups.filter((function(e){return"FID"===e.semantics}));if(s){var c=new Map;s.forEach((function(e){var t=e.ssrcs[0],n=e.ssrcs[1];c.set(t,n)})),this.rtxModifier.setSsrcCache(c)}}}var u=Promise.resolve();return m.a.isFirefox()&&(u=u.then((function(){return i&&t.tpcUtils.setEncodings(e)}))),u},M.prototype.addTrackUnmute=function(e){if(N.info("".concat(this," Adding track=").concat(e," as unmute")),!this._assertTrackBelongs("addTrackUnmute",e))return Promise.reject("Track not found on the peerconnection");var t=e.getOriginalStream();return t?this._usesUnifiedPlan?this.tpcUtils.replaceTrack(null,e).then((function(){return!1})):(this._addStream(t),Promise.resolve(!0)):(N.error("".concat(this," Unable to add track=").concat(e," as unmute - no WebRTC stream")),Promise.reject("Stream not found"))},M.prototype._addStream=function(e){this.peerconnection.addStream(e),this._addedStreams.push(e)},M.prototype._removeStream=function(e){this.peerconnection.removeStream(e),this._addedStreams=this._addedStreams.filter((function(t){return t!==e}))},M.prototype._assertTrackBelongs=function(e,t){var n=this.localTracks.has(null==t?void 0:t.rtcId);return n||N.error("".concat(this," ").concat(e,": track=").concat(t," does not belong to pc")),n},M.prototype.getConfiguredVideoCodec=function(){var e,t=null===(e=this.peerconnection.localDescription)||void 0===e?void 0:e.sdp,n=s.VP8;if(!t)return n;var r=a.a.parse(t).media.find((function(e){return e.type===u.a.VIDEO})).rtp[0].codec;return r?Object.values(s).find((function(e){return e===r.toLowerCase()})):n},M.prototype.setDesktopSharingFrameRate=function(e){var t=e<=p.a;this._capScreenshareBitrate=this.isSimulcastOn()&&t},M.prototype.setVideoCodecs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null===t,r=t||e;this.codecPreference&&(e||t)?(this.codecPreference.enable=n,this.codecPreference.mimeType=r):e||t?this.codecPreference={enable:n,mediaType:u.a.VIDEO,mimeType:r}:N.warn("".concat(this," Invalid codec settings[preferred=").concat(e,",disabled=").concat(t,"],\n            atleast one value is needed"))},M.prototype.isMediaStreamInPc=function(e){return this._addedStreams.indexOf(e)>-1},M.prototype.removeTrack=function(e){var t=e.getOriginalStream();this.trace("removeStream",e.rtcId,t?t.id:void 0),this._assertTrackBelongs("removeStream",e)&&(this.localTracks.delete(e.rtcId),this.localSSRCs.delete(e.rtcId),t&&this.peerconnection.removeStream(t))},M.prototype.findSenderByKind=function(e){if(this.peerconnection.getSenders)return this.peerconnection.getSenders().find((function(t){return t.track&&t.track.kind===e}))},M.prototype.findReceiverForTrack=function(e){return this.peerconnection.getReceivers().find((function(t){return t.track===e}))},M.prototype.findSenderForTrack=function(e){if(this.peerconnection.getSenders)return this.peerconnection.getSenders().find((function(t){return t.track===e}))},M.prototype.replaceTrack=function(e,t){var n,r=this;if(!e&&!t)return N.info("".concat(this," replaceTrack called with no new track and no old track")),Promise.resolve();var i=!(!e&&(null==t?void 0:t.getVideoType())===h.VideoType.DESKTOP&&v.a.isMultiStreamSupportEnabled()&&!this.isP2P)&&Boolean(!e||!this.localTracks.has(null==e?void 0:e.rtcId));if(this._usesUnifiedPlan){N.debug("".concat(this," TPC.replaceTrack using unified plan"));var o=null!==(n=null==t?void 0:t.getType())&&void 0!==n?n:null==e?void 0:e.getType(),a=null==t?void 0:t.getOriginalStream();return(t&&!a?Promise.resolve():this.tpcUtils.replaceTrack(e,t)).then((function(n){if(e&&r.localTracks.delete(e.rtcId),t&&r.localTracks.set(t.rtcId,t),e&&t){var a=r.localSSRCs.get(e.rtcId);a&&(r.localSSRCs.delete(e.rtcId),r.localSSRCs.set(t.rtcId,a))}var s=o===u.a.AUDIO?r.audioTransferActive:r.videoTransferActive;return n&&s?n.direction=t?c.a.SENDRECV:c.a.RECVONLY:n&&(n.direction=c.a.INACTIVE),(m.a.usesSdpMungingForSimulcast()||!t?Promise.resolve():r.tpcUtils.setEncodings(t)).then((function(){return i}))}))}N.debug("".concat(this," TPC.replaceTrack using plan B"));var s=Promise.resolve();return e&&this.removeTrack(e),t&&(s=this.addTrack(t)),s.then((function(){return!0}))},M.prototype.removeTrackMute=function(e){var t=e.getOriginalStream();return this.trace("removeTrackMute",e.rtcId,t?t.id:null),this._assertTrackBelongs("removeTrackMute",e)?this._usesUnifiedPlan?this.tpcUtils.replaceTrack(e,null).then((function(){return!1})):t?(N.info("".concat(this," Removing track=").concat(e," as mute")),this._removeStream(t),Promise.resolve(!0)):(N.error("".concat(this," removeTrackMute - no WebRTC stream for track=").concat(e)),Promise.reject("Stream not found")):Promise.reject("Track not found in the peerconnection")},M.prototype.createDataChannel=function(e,t){return this.trace("createDataChannel",e,t),this.peerconnection.createDataChannel(e,t)},M.prototype._ensureSimulcastGroupIsLast=function(e){var t=e.sdp,n=t.indexOf("m=video"),r=t.indexOf("a=ssrc-group:SIM",n),i=t.lastIndexOf("a=ssrc-group");if(-1===r||-1===i||i===r)return e;var o=t.indexOf("\r\n",r),a=t.substring(r,o+2);i=(t=t.replace(a,"")).lastIndexOf("a=ssrc-group");var s=t.indexOf("\r\n",i),c=t.slice(0,s),u=a.trim(),l=t.slice(s);return t="".concat(c,"\r\n").concat(u).concat(l),new RTCSessionDescription({type:e.type,sdp:t})},M.prototype._adjustLocalMediaDirection=function(e){var t,n,r=new C.a(e.sdp),i=!1,o=null===(t=r.selectMedia(u.a.AUDIO))||void 0===t?void 0:t[0];if(o){var a=this.getDesiredMediaDirection(u.a.AUDIO);o.direction!==a&&(o.direction=a,N.info("".concat(this," Adjusted local audio direction to ").concat(a)),i=!0)}else N.warn("".concat(this,' No "audio" media found in the local description'));var s=null===(n=r.selectMedia(u.a.VIDEO))||void 0===n?void 0:n[0];if(s){var c=this.getDesiredMediaDirection(u.a.VIDEO);s.direction!==c&&(s.direction=c,N.info("".concat(this," Adjusted local video direction to ").concat(c)),i=!0)}else N.warn("".concat(this,' No "video" media found in the local description'));return i?new RTCSessionDescription({type:e.type,sdp:r.toRawSDP()}):e},M.prototype._adjustRemoteMediaDirection=function(e){var t=this,n=new C.a(e.sdp);return[u.a.AUDIO,u.a.VIDEO].forEach((function(e){var r,i=null===(r=n.selectMedia(e))||void 0===r?void 0:r[0],o=t.hasAnyTracksOfType(e),a=t.getRemoteTracks(null,e).length>0;i.direction=o&&a?c.a.SENDRECV:o?c.a.RECVONLY:a?c.a.SENDONLY:c.a.INACTIVE})),new RTCSessionDescription({type:e.type,sdp:n.toRawSDP()})},M.prototype._mungeOpus=function(e){var t=this.options.audioQuality;if(!(null==t?void 0:t.stereo)&&!(null==t?void 0:t.opusMaxAverageBitrate))return e;var n,r=a.a.parse(e.sdp),i=j(r.media);try{for(i.s();!(n=i.n()).done;){var o=n.value;if("audio"===o.type)if("continue"===function(){var e=o.rtp.find((function(e){return e.codec===s.OPUS})).payload;if(!e)return"continue";var n=o.fmtp.find((function(t){return t.payload===e}));n||(n={payload:e,config:""});var r=a.a.parseParams(n.config),i=!1;if((null==t?void 0:t.stereo)&&(r.stereo=1,i=!0),(null==t?void 0:t.opusMaxAverageBitrate)&&(r.maxaveragebitrate=t.opusMaxAverageBitrate,i=!0),!i)return"continue";for(var c="",u=0,l=Object.keys(r);u<l.length;u++){var d=l[u];c+="".concat(d,"=").concat(r[d],"; ")}n.config=c.trim()}())continue}}catch(e){i.e(e)}finally{i.f()}return new RTCSessionDescription({type:e.type,sdp:a.a.write(r)})},M.prototype._initializeDtlsTransport=function(){var e=this;if(this.peerconnection.getSenders&&!this._dtlsTransport){var t=this.peerconnection.getSenders();0!==t.length&&t[0].transport&&(this._dtlsTransport=t[0].transport,this._dtlsTransport.onerror=function(t){N.error("".concat(e," DtlsTransport error: ").concat(t))},this._dtlsTransport.onstatechange=function(){e.trace("dtlsTransport.onstatechange",e._dtlsTransport.state)})}},M.prototype.configureSenderVideoEncodings=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(v.a.isSourceNameSignalingEnabled()){if(e)return this.setSenderVideoConstraints(this._senderMaxHeights.get(e.getSourceName()),e);var t,n=[],r=j(this.getLocalVideoTracks());try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push(this.setSenderVideoConstraints(this._senderMaxHeights.get(i.getSourceName()),i))}}catch(e){r.e(e)}finally{r.f()}return Promise.allSettled(n)}var o=e;return o||(o=this.getLocalVideoTracks()[0]),this.setSenderVideoConstraints(this._senderVideoMaxHeight,o)},M.prototype.setLocalDescription=function(e){var t=this,n=e;return this.trace("setLocalDescription::preTransform",x(n)),n=this._mungeOpus(n),this._usesUnifiedPlan||(n=this._adjustLocalMediaDirection(n),n=this._ensureSimulcastGroupIsLast(n)),this._usesTransceiverCodecPreferences||(n=this._mungeCodecOrder(n)),this.trace("setLocalDescription::postTransform",x(n)),new Promise((function(e,r){t.peerconnection.setLocalDescription(n).then((function(){t.trace("setLocalDescriptionOnSuccess");var r=b.a.getUfrag(n.sdp);r!==t.localUfrag&&(t.localUfrag=r,t.eventEmitter.emit(l.default.LOCAL_UFRAG_CHANGED,t,r)),t._initializeDtlsTransport(),e()}),(function(e){t.trace("setLocalDescriptionOnFailure",e),t.eventEmitter.emit(l.default.SET_LOCAL_DESCRIPTION_FAILED,e,t),r(e)}))}))},M.prototype.setAudioTransferActive=function(e){N.debug("".concat(this," audio transfer active: ").concat(e));var t=this.audioTransferActive!==e;return this.audioTransferActive=e,this._usesUnifiedPlan?(this.tpcUtils.setAudioTransferActive(e),!1):t},M.prototype.setRemoteDescription=function(e){var t=this,n=e;if(this.trace("setRemoteDescription::preTransform",x(e)),n=this._mungeOpus(n),this._usesUnifiedPlan){if(!this.isP2P){var r=this.peerconnection.remoteDescription;n=this.interop.toUnifiedPlan(n,r),this.trace("setRemoteDescription::postTransform (Unified)",x(n))}this.isSimulcastOn()&&(n=this.simulcast.mungeRemoteDescription(n),this.trace("setRemoteDescription::postTransform (simulcast)",x(n)),n=this.tpcUtils.insertUnifiedPlanSimulcastReceive(n),this.trace("setRemoteDescription::postTransform (sim receive)",x(n))),n=this.tpcUtils.ensureCorrectOrderOfSsrcs(n),this.trace("setRemoteDescription::postTransform (correct ssrc order)",x(n))}else this.isSimulcastOn()&&(n=this.simulcast.mungeRemoteDescription(n,!0),this.trace("setRemoteDescription::postTransform (simulcast)",x(n))),n=L(n);return n=this._mungeCodecOrder(n),this.trace("setRemoteDescription::postTransform (munge codec order)",x(n)),new Promise((function(e,r){t.peerconnection.setRemoteDescription(n).then((function(){t.trace("setRemoteDescriptionOnSuccess");var r=b.a.getUfrag(n.sdp);r!==t.remoteUfrag&&(t.remoteUfrag=r,t.eventEmitter.emit(l.default.REMOTE_UFRAG_CHANGED,t,r)),t._initializeDtlsTransport(),e()}),(function(e){t.trace("setRemoteDescriptionOnFailure",e),t.eventEmitter.emit(l.default.SET_REMOTE_DESCRIPTION_FAILED,e,t),r(e)}))}))},M.prototype.setSenderVideoConstraints=function(e,t){var n,r,i,o,a,c,u,d,f=this;if(e<0)throw new Error("Invalid frameHeight: ".concat(e));if(m.a.isReactNative())return Promise.resolve();if(v.a.isSourceNameSignalingEnabled()?this._senderMaxHeights.set(t.getSourceName(),e):this._senderVideoMaxHeight=e,!t||t.isMuted())return Promise.resolve();var p=this.findSenderForTrack(t.getTrack());if(!p)return Promise.resolve();var g=p.getParameters();if(!(null===(n=null==g?void 0:g.encodings)||void 0===n?void 0:n.length))return Promise.resolve();var y=this.isSharingLowFpsScreen()?"maintain-resolution":"maintain-framerate";g.degradationPreference=y,N.info("".concat(this," Setting degradation preference [preference=").concat(y,",track=").concat(t)),this.encodingsEnabledState=this.tpcUtils.calculateEncodingsActiveState(t,e);var _=this.tpcUtils.calculateEncodingsBitrates(t),b=t.getVideoType();if(this.isSimulcastOn()){for(var E in g.encodings)g.encodings.hasOwnProperty(E)&&(g.encodings[E].active=this.encodingsEnabledState[E],m.a.isFirefox()&&(g.encodings[E].degradationPreference=y),this.getConfiguredVideoCodec()===s.VP8&&((null===(i=null===(r=this.options)||void 0===r?void 0:r.videoQuality)||void 0===i?void 0:i.maxBitratesVideo)||this.isSharingLowFpsScreen()||this._usesUnifiedPlan)&&(g.encodings[E].maxBitrate=_[E]));this.tpcUtils.updateEncodingsResolution(g)}else if(e>0){var S=R.b;if(b===h.VideoType.CAMERA&&t.resolution>e&&(S=Math.floor(t.resolution/e)),g.encodings[0].active=!0,g.encodings[0].scaleResolutionDownBy=S,m.a.isFirefox()&&(g.encodings[0].degradationPreference=y),this.getConfiguredVideoCodec()===s.VP8&&(null===(a=null===(o=this.options)||void 0===o?void 0:o.videoQuality)||void 0===a?void 0:a.maxBitratesVideo)){var C=null===(c=this.getTargetVideoBitrates())||void 0===c?void 0:c.high;b===h.VideoType.CAMERA&&(C=null!==(d=null===(u=this.tpcUtils.localStreamEncodingsConfig.find((function(e){return e.scaleResolutionDownBy===S})))||void 0===u?void 0:u.maxBitrate)&&void 0!==d?d:C),g.encodings[0].maxBitrate=C}}else g.encodings[0].active=!1;return N.info("".concat(this," setting max height=").concat(e,",encodings=").concat(JSON.stringify(g.encodings))),p.setParameters(g).then((function(){t.maxEnabledResolution=e,f.eventEmitter.emit(l.default.LOCAL_TRACK_MAX_ENABLED_RESOLUTION_CHANGED,t)}))},M.prototype.setVideoTransferActive=function(e){N.debug("".concat(this," video transfer active: ").concat(e));var t=this.videoTransferActive!==e;return this.videoTransferActive=e,this._usesUnifiedPlan?(this.tpcUtils.setVideoTransferActive(e),!1):t},M.prototype.sendTones=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;if(!this._dtmfSender){if(this.peerconnection.getSenders){var r=this.peerconnection.getSenders().find((function(e){return e.dtmf}));this._dtmfSender=r&&r.dtmf,this._dtmfSender&&N.info("".concat(this," initialized DTMFSender using getSenders"))}if(!this._dtmfSender){var i=Array.from(this.localTracks.values()).find((function(e){return e.isAudioTrack()}));this.peerconnection.createDTMFSender&&i&&(this._dtmfSender=this.peerconnection.createDTMFSender(i.getTrack())),this._dtmfSender&&N.info("".concat(this," initialized DTMFSender using deprecated createDTMFSender"))}this._dtmfSender&&(this._dtmfSender.ontonechange=this._onToneChange.bind(this))}if(this._dtmfSender){if(this._dtmfSender.toneBuffer)return void this._dtmfTonesQueue.push({tones:e,duration:t,interToneGap:n});this._dtmfSender.insertDTMF(e,t,n)}else N.warn("".concat(this," sendTones - failed to select DTMFSender"))},M.prototype._onToneChange=function(e){if(this._dtmfSender&&""===e.tone&&this._dtmfTonesQueue.length){var t=this._dtmfTonesQueue.shift(),n=t.tones,r=t.duration,i=t.interToneGap;this._dtmfSender.insertDTMF(n,r,i)}},M.prototype.generateRecvonlySsrc=function(){var e=b.a.generateSsrc();N.info("".concat(this," generated new recvonly SSRC=").concat(e)),this.sdpConsistency.setPrimarySsrc(e)},M.prototype.clearRecvonlySsrc=function(){N.info("".concat(this," Clearing primary video SSRC!")),this.sdpConsistency.clearVideoSsrcCache()},M.prototype.close=function(){this.trace("stop"),this.signalingLayer.off(d.a,this._peerMutedChanged),this.signalingLayer.off(d.b,this._peerVideoTypeChanged),this._usesUnifiedPlan&&this.peerconnection.removeEventListener("track",this.onTrack);var e,t=j(this.remoteTracks.values());try{for(t.s();!(e=t.n()).done;){var n,r=j(e.value.values());try{for(r.s();!(n=r.n()).done;){var i,o=j(n.value);try{for(o.s();!(i=o.n()).done;){var a=i.value;this._removeRemoteTrack(a)}}catch(e){o.e(e)}finally{o.f()}}}catch(e){r.e(e)}finally{r.f()}}}catch(e){t.e(e)}finally{t.f()}this.remoteTracks.clear(),this._addedStreams=[],this._dtmfSender=null,this._dtmfTonesQueue=[],this.rtc._removePeerConnection(this)||N.error("".concat(this," RTC._removePeerConnection returned false")),null!==this.statsinterval&&(window.clearInterval(this.statsinterval),this.statsinterval=null),N.info("".concat(this," Closing peerconnection")),this.peerconnection.close()},M.prototype.createAnswer=function(e){return this._createOfferOrAnswer(!1,e)},M.prototype.createOffer=function(e){return this._createOfferOrAnswer(!0,e)},M.prototype._createOfferOrAnswer=function(e,t){var n,r,i,o=this,a=e?"Offer":"Answer";this.trace("create".concat(a),JSON.stringify(t,null," "));if(this._usesTransceiverCodecPreferences){var c=this.peerconnection.getTransceivers().find((function(e){var t,n;return e.receiver&&(null===(n=null===(t=e.receiver)||void 0===t?void 0:t.track)||void 0===n?void 0:n.kind)===u.a.VIDEO}));if(c){var d=null===(n=RTCRtpReceiver.getCapabilities(u.a.VIDEO))||void 0===n?void 0:n.codecs,f=null===(r=this.codecPreference)||void 0===r?void 0:r.mimeType,p=null===(i=this.codecPreference)||void 0===i?void 0:i.enable;d&&f&&p?d.sort((function(e){return e.mimeType.toLowerCase()==="".concat(u.a.VIDEO,"/").concat(f)?-1:1})):d&&f&&(d=d.filter((function(e){return e.mimeType.toLowerCase()!=="".concat(u.a.VIDEO,"/").concat(f)}))),m.a.isChromiumBased()&&(d=d.filter((function(e){return e.mimeType.toLowerCase()!=="".concat(u.a.VIDEO,"/").concat(s.ULPFEC)})));try{c.setCodecPreferences(d)}catch(e){N.warn("".concat(this," Setting codec[preference=").concat(f,",enable=").concat(p,"] failed"),e)}}}return new Promise((function(n,r){(e?o.peerconnection.createOffer(t):o.peerconnection.createAnswer(t)).then((function(e){return function(e,t,n){try{o.trace("create".concat(a,"OnSuccess::preTransform"),x(e)),o._usesUnifiedPlan||(o.hasAnyTracksOfType(u.a.VIDEO)||o.sdpConsistency.hasPrimarySsrcCached()||o.generateRecvonlySsrc(),e=new RTCSessionDescription({type:e.type,sdp:o.sdpConsistency.makeVideoPrimarySsrcsConsistent(e.sdp)}),o.trace("create".concat(a,"OnSuccess::postTransform ")+"(make primary audio/video ssrcs consistent)",x(e)));var r=o.getLocalVideoTracks()[0];o.isSimulcastOn()&&m.a.usesSdpMungingForSimulcast()&&((null==r?void 0:r.getVideoType())===h.VideoType.CAMERA||o._usesUnifiedPlan||!o.isSharingLowFpsScreen())&&(e=o.simulcast.mungeLocalDescription(e),o.trace("create".concat(a," OnSuccess::postTransform (simulcast)"),x(e))),!o.options.disableRtx&&m.a.usesSdpMungingForSimulcast()&&(e=new RTCSessionDescription({type:e.type,sdp:o.rtxModifier.modifyRtxSsrcs(e.sdp)}),o.trace("create".concat(a)+"OnSuccess::postTransform (rtx modifier)",x(e)));var i=o._extractSSRCMap(e);o._processLocalSSRCsMap(i),t(e)}catch(t){o.trace("create".concat(a,"OnError"),t),o.trace("create".concat(a,"OnError"),x(e)),N.error("".concat(o," create").concat(a,"OnError"),t,x(e)),n(t)}}(e,n,r)}),(function(t){return function(t,n){o.trace("create".concat(a,"OnFailure"),t);var r=e?l.default.CREATE_OFFER_FAILED:l.default.CREATE_ANSWER_FAILED;o.eventEmitter.emit(r,t,o),n(t)}(t,r)}))}))},M.prototype._extractPrimarySSRC=function(e){return e&&e.groups&&e.groups.length?e.groups[0].ssrcs[0]:e&&e.ssrcs&&e.ssrcs.length?e.ssrcs[0]:null},M.prototype._processLocalSSRCsMap=function(e){var t,n=j(this.localTracks.values());try{for(n.s();!(t=n.n()).done;){var r=t.value,i=this._usesUnifiedPlan?r.getType():r.storedMSID;if(e.has(i)){var o=e.get(i);if(!o)return void N.error("".concat(this," No SSRC found for stream=").concat(i));var a=this.localSSRCs.get(r.rtcId),s=this._extractPrimarySSRC(o),c=this._extractPrimarySSRC(a);s!==c&&(c&&N.error("".concat(this," Overwriting SSRC for track=").concat(r,"] with ssrc=").concat(o)),this.localSSRCs.set(r.rtcId,o),this.eventEmitter.emit(l.default.LOCAL_TRACK_SSRC_UPDATED,r,s))}else r.isVideoTrack()||r.isMuted()||N.warn("".concat(this," No SSRCs found in the local SDP for track=").concat(r,", stream=").concat(i))}}catch(e){n.e(e)}finally{n.f()}},M.prototype.addIceCandidate=function(e){return this.trace("addIceCandidate",JSON.stringify({candidate:e.candidate,sdpMid:e.sdpMid,sdpMLineIndex:e.sdpMLineIndex,usernameFragment:e.usernameFragment},null," ")),this.peerconnection.addIceCandidate(e)},M.prototype.getActiveSimulcastStreams=function(){var e,t=1;return this.isSimulcastOn()&&this.encodingsEnabledState?t=null===(e=this.encodingsEnabledState.filter((function(e){return Boolean(e)})))||void 0===e?void 0:e.length:this.isSimulcastOn()&&(t=R.c.length),t},M.prototype.getStats=function(){return this.peerconnection.getStats()},M.prototype.generateNewStreamSSRCInfo=function(e){var t=e.rtcId,n=this._getSSRC(t);if(n&&N.error("".concat(this," Overwriting local SSRCs for track id=").concat(t)),!this.isSimulcastOn()||e.getVideoType()!==h.VideoType.CAMERA&&this.isSharingLowFpsScreen())n={ssrcs:[b.a.generateSsrc()],groups:[]};else{n={ssrcs:[],groups:[]};for(var r=0;r<R.c.length;r++)n.ssrcs.push(b.a.generateSsrc());n.groups.push({ssrcs:n.ssrcs.slice(),semantics:"SIM"})}if(!this.options.disableRtx)for(var i=n.ssrcs.length,o=0;o<i;++o){var a=n.ssrcs[o],s=b.a.generateSsrc();n.ssrcs.push(s),n.groups.push({ssrcs:[a,s],semantics:"FID"})}return n.msid=e.storedMSID,this.localSSRCs.set(t,n),n},M.prototype.usesUnifiedPlan=function(){return this._usesUnifiedPlan},M.prototype.toString=function(){return"TPC[id=".concat(this.id,",type=").concat(this.isP2P?"P2P":"JVB","]")}}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return v}));var r=n(4),i=n(15),o=n(3),a=n(89),s=n(18),c=n(12),u=n(52);function l(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=f(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function f(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=Object(r.getLogger)(e),v=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tpc=t,this.localEndpointId=n,this.audioSourcesToMsidMap=new Map,this.videoSourcesToMsidMap=new Map}var t,n,r;return t=e,(n=[{key:"_addMutedLocalVideoTracksToSDP",value:function(e){var t,n=this.tpc.getLocalTracks(o.a.VIDEO);if(!n.length)return!1;1!==n.length&&m.error("".concat(this.tpc," there is more than 1 video track ! ")+"Strange things may happen !",n);var r=null===(t=e.selectMedia(o.a.VIDEO))||void 0===t?void 0:t[0];if(!r)return m.debug("".concat(this.tpc," unable to hack local video track SDP")+'- no "video" media'),!1;var a,c=!1,u=d(n);try{for(u.s();!(a=u.n()).done;){var l=a.value,f=l.isMuted(),h=l.getOriginalStream(),p=l.videoType===s.VideoType.CAMERA,v=h&&this.tpc.isMediaStreamInPc(h);if(p&&(f||!v)){var g=this.tpc.isSimulcastOn()?this.tpc.simulcast.ssrcCache:[this.tpc.sdpConsistency.cachedPrimarySsrc];if(g.length){c=!0,r.direction=i.a.SENDRECV;var y,_=g[0],b="injected-".concat(_),E=d(g);try{for(E.s();!(y=E.n()).done;){var S=y.value;r.removeSSRC(S),r.addSSRCAttribute({id:S,attribute:"cname",value:b}),r.addSSRCAttribute({id:S,attribute:"msid",value:l.storedMSID})}}catch(e){E.e(e)}finally{E.f()}if(g.length>1){var C={ssrcs:g.join(" "),semantics:"SIM"};r.findGroup(C.semantics,C.ssrcs)||r.addSSRCGroup(C)}this.tpc.options.disableRtx||this.tpc.rtxModifier.modifyRtxSsrcs2(r)}else m.error("No SSRCs stored for: ".concat(l," in ").concat(this.tpc))}}}catch(e){u.e(e)}finally{u.f()}return c}},{key:"_generateMsidAttribute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e||!t)return m.error("Unable to munge local MSID - track id=".concat(t," or media type=").concat(e," is missing")),null;var r=this.tpc.id;return"-"!==n&&n?"".concat(n,"-").concat(r," ").concat(t,"-").concat(r):"".concat(this.localEndpointId,"-").concat(e,"-").concat(r," ").concat(t,"-").concat(r)}},{key:"_transformMediaIdentifiers",value:function(e){var t,n,r,a,s,u,f=this,h=null===(t=e.mLine)||void 0===t?void 0:t.type,p=this.tpc.id,v=d(e.ssrcs);try{for(v.s();!(u=v.n()).done;){var g=u.value;switch(g.attribute){case"cname":case"label":case"mslabel":g.value=g.value&&"".concat(g.value,"-").concat(p);break;case"msid":if(g.value){var y=g.value.split(" "),_=y[0],b=y[1];c.a.isSourceNameSignalingEnabled()&&(_="".concat(this.localEndpointId,"-").concat(h),h===o.a.VIDEO?this.videoSourcesToMsidMap.has(b)||(_="".concat(_,"-").concat(this.videoSourcesToMsidMap.size),this.videoSourcesToMsidMap.set(b,_)):this.audioSourcesToMsidMap.has(b)||(_="".concat(_,"-").concat(this.audioSourcesToMsidMap.size),this.audioSourcesToMsidMap.set(b,_)),_=h===o.a.VIDEO?this.videoSourcesToMsidMap.get(b):this.audioSourcesToMsidMap.get(b)),g.value=this._generateMsidAttribute(h,b,_)}else m.warn("Unable to munge local MSID - weird format detected: ".concat(g.value))}}}catch(e){v.e(e)}finally{v.f()}if(this.tpc.usesUnifiedPlan()){var E=null===(n=e.mLine)||void 0===n?void 0:n.direction;if(E===i.a.RECVONLY||E===i.a.INACTIVE)e.ssrcs=void 0,e.ssrcGroups=void 0;else{var S,C=null===(r=e.mLine)||void 0===r?void 0:r.msid,w=C&&C.split(" ")[1],T=d(l(new Set(null===(s=null===(a=e.mLine)||void 0===a?void 0:a.ssrcs)||void 0===s?void 0:s.map((function(e){return e.id})))));try{var D=function(){var t=S.value;if(!e.ssrcs.find((function(e){return e.id===t&&"msid"===e.attribute}))&&w){var n=f._generateMsidAttribute(h,w);e.ssrcs.push({id:t,attribute:"msid",value:n})}};for(T.s();!(S=T.n()).done;)D()}catch(e){T.e(e)}finally{T.f()}}}}},{key:"maybeAddMutedLocalVideoTracksToSDP",value:function(e){if(!e)throw new Error("No local description passed in.");var t=new u.a(e.sdp);return this._addMutedLocalVideoTracksToSDP(t)?new RTCSessionDescription({type:e.type,sdp:t.toRawSDP()}):e}},{key:"transformStreamIdentifiers",value:function(e){var t;if(!e||!e.sdp||!e.type)return e;var n=new u.a(e.sdp),r=null===(t=n.selectMedia(o.a.AUDIO))||void 0===t?void 0:t[0];r&&(this._transformMediaIdentifiers(r),this._injectSourceNames(r));var i=n.selectMedia(o.a.VIDEO);c.a.isMultiStreamSupportEnabled()||i.splice(1);var a,s=d(i);try{for(s.s();!(a=s.n()).done;){var l=a.value;this._transformMediaIdentifiers(l),this._injectSourceNames(l)}}catch(e){s.e(e)}finally{s.f()}return new RTCSessionDescription({type:e.type,sdp:n.toRawSDP()})}},{key:"_injectSourceNames",value:function(e){var t,n,r,i,o=this;if(c.a.isSourceNameSignalingEnabled()){var s=l(new Set(null===(n=null===(t=e.mLine)||void 0===t?void 0:t.ssrcs)||void 0===n?void 0:n.map((function(e){return e.id})))),u=null===(r=e.mLine)||void 0===r?void 0:r.type;if(!u)throw new Error("_transformMediaIdentifiers - no media type in mediaSection");var f,h=d(s);try{var p=function(){var t=f.value,n=e.ssrcs.find((function(e){return e.id===t&&"name"===e.attribute})),r=null===(i=e.ssrcs.find((function(e){return e.id===t&&"msid"===e.attribute})))||void 0===i?void 0:i.value,s=void 0;r&&(s=r.split(" ")[0].split("-")[2]),n||e.ssrcs.push({id:t,attribute:"name",value:Object(a.c)(o.localEndpointId,u,s)})};for(h.s();!(f=h.n()).done;)p()}catch(e){h.e(e)}finally{h.f()}}}}])&&p(t.prototype,n),r&&p(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var r=n(4),i=n(15),o=n(3),a=n(10),s=n(52);function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=Object(r.getLogger)(e);var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.correspondingRtxSsrcs=new Map}var t,n,r;return t=e,(n=[{key:"clearSsrcCache",value:function(){this.correspondingRtxSsrcs.clear()}},{key:"setSsrcCache",value:function(e){d.debug("Setting ssrc cache to ",e),this.correspondingRtxSsrcs=e}},{key:"modifyRtxSsrcs",value:function(e){var t=!1,n=new s.a(e),r=n.selectMedia(o.a.VIDEO);if(!(null==r?void 0:r.length))return d.debug("No 'video' media found in the sdp: ".concat(e)),e;var i,a=c(r);try{for(a.s();!(i=a.n()).done;){var u=i.value;this.modifyRtxSsrcs2(u)&&(t=!0)}}catch(e){a.e(e)}finally{a.f()}return t?n.toRawSDP():e}},{key:"modifyRtxSsrcs2",value:function(e){if(e.direction===i.a.RECVONLY)return!1;if(e.getSSRCCount()<1)return!1;var t,n,r,o,s,u,l,d,f=c(e.getPrimaryVideoSSRCs());try{for(f.s();!(t=f.n()).done;){var h=t.value,p=e.getSSRCAttrValue(h,"msid"),m=e.getSSRCAttrValue(h,"cname"),v=this.correspondingRtxSsrcs.get(h);if(!v){var g=e.getRtxSSRC(h);v=g||a.a.generateSsrc(),this.correspondingRtxSsrcs.set(h,v)}n=e,o=v,s=void 0,u=void 0,l=void 0,d=void 0,s=(r={id:h,cname:m,msid:p}).id,u=r.msid,l=r.cname,(d=n.getRtxSSRC(s))!==o&&(d&&(n.removeSSRC(d),n.removeGroupsWithSSRC(d)),n.addSSRCAttribute({id:o,attribute:"cname",value:l}),n.addSSRCAttribute({id:o,attribute:"msid",value:u}),n.addSSRCGroup({semantics:"FID",ssrcs:"".concat(s," ").concat(o)}))}}catch(e){f.e(e)}finally{f.f()}return!0}},{key:"stripRtx",value:function(e){var t=new s.a(e),n=t.selectMedia(o.a.VIDEO);if(!(null==n?void 0:n.length))return d.debug("No 'video' media found in the sdp: ".concat(e)),e;var r,a=c(n);try{for(a.s();!(r=a.n()).done;){var u=r.value;if(u.direction!==i.a.RECVONLY&&u.getSSRCCount()&&u.containsAnySSRCGroups()){var l=u.findGroups("FID");u.removeGroupsBySemantics("FID");var f,h=c(l);try{for(h.s();!(f=h.n()).done;){var p=f.value,m=Object(s.c)(p);u.removeSSRC(m)}}catch(e){h.e(e)}finally{h.f()}}}}catch(e){a.e(e)}finally{a.f()}return t.toRawSDP()}}])&&l(t.prototype,n),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var r=n(4),i=n(3),o=n(52);function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=Object(r.getLogger)(e),l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clearVideoSsrcCache(),this.logPrefix=t}var t,n,r;return t=e,(n=[{key:"clearVideoSsrcCache",value:function(){this.cachedPrimarySsrc=null,this.injectRecvOnly=!1}},{key:"setPrimarySsrc",value:function(e){if("number"!=typeof e)throw new Error("Primary SSRC must be a number!");this.cachedPrimarySsrc=e}},{key:"hasPrimarySsrcCached",value:function(){return Boolean(this.cachedPrimarySsrc)}},{key:"makeVideoPrimarySsrcsConsistent",value:function(e){var t,n=new o.a(e),r=null===(t=n.selectMedia(i.a.VIDEO))||void 0===t?void 0:t[0];if(!r)return u.debug("".concat(this.logPrefix," no 'video' media found in the sdp: ").concat(e)),e;if("recvonly"===r.direction)this.cachedPrimarySsrc&&this.injectRecvOnly?r.addSSRCAttribute({id:this.cachedPrimarySsrc,attribute:"cname",value:"recvonly-".concat(this.cachedPrimarySsrc)}):u.info("".concat(this.logPrefix," no SSRC found for the recvonly video stream!"));else{var s=r.getPrimaryVideoSsrc();if(!s)return u.info("".concat(this.logPrefix," sdp-consistency couldn't parse new primary ssrc")),e;if(this.cachedPrimarySsrc){r.replaceSSRC(s,this.cachedPrimarySsrc);var c,l=a(r.ssrcGroups);try{for(l.s();!(c=l.n()).done;){var d=c.value;if("FID"===d.semantics){var f=Object(o.b)(d),h=Object(o.c)(d);f===s&&(d.ssrcs="".concat(this.cachedPrimarySsrc," ").concat(h))}}}catch(e){l.e(e)}finally{l.f()}}else this.cachedPrimarySsrc=s;this.injectRecvOnly=!0}return n.toRawSDP()}}])&&c(t.prototype,n),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}).call(this,"/index.js")},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(15),i=n(3),o=n(32);function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._options=t,this._ssrcCache=new Map,this._options.numOfLayers||(this._options.numOfLayers=3)}var t,n,s;return t=e,(n=[{key:"_fillSsrcsFromCache",value:function(e){var t=e.mid,n=this._ssrcCache.get(t),r=this._parseSimLayers(e),i=this._getSsrcAttribute(e,r[0],"msid"),o=this._getSsrcAttribute(e,r[0],"cname");e.ssrcs=[],e.ssrcGroups=[];var s,c=a(n);try{for(c.s();!(s=c.n()).done;){var u=s.value;e.ssrcs.push({id:u,attribute:"msid",value:i}),e.ssrcs.push({id:u,attribute:"cname",value:o})}}catch(e){c.e(e)}finally{c.f()}return e.ssrcGroups.push({semantics:"SIM",ssrcs:n.join(" ")}),e}},{key:"_generateNewSsrcsForSimulcast",value:function(e,t){var n=this._getSsrcAttribute(e,t,"cname"),r=this._getSsrcAttribute(e,t,"msid"),i=function(e,t){e.ssrcs.push({id:t,attribute:"cname",value:n}),e.ssrcs.push({id:t,attribute:"msid",value:r})};r||(r=e.msid,e.ssrcs.forEach((function(t){e.ssrcs.push({id:t.id,attribute:"msid",value:r})})));for(var o=[],a=0;a<this._options.numOfLayers-1;++a){var s=this._generateSsrc();i(e,s),o.push(s)}return e.ssrcGroups=e.ssrcGroups||[],e.ssrcGroups.push({semantics:"SIM",ssrcs:t+" "+o.join(" ")}),e}},{key:"_generateSsrc",value:function(){return Math.floor(4294967295*Math.random())}},{key:"_getSsrcAttribute",value:function(e,t,n){var r,i;return null===(i=null===(r=e.ssrcs)||void 0===r?void 0:r.find((function(e){return Number(e.id)===t&&e.attribute===n})))||void 0===i?void 0:i.value}},{key:"_parseSimLayers",value:function(e){var t,n,r=null===(t=e.ssrcGroups)||void 0===t?void 0:t.find((function(e){return"SIM"===e.semantics}));return r?r.ssrcs.split(" ").map((function(e){return Number(e)})):(null===(n=e.ssrcs)||void 0===n?void 0:n.length)?[Number(e.ssrcs[0].id)]:null}},{key:"mungeLocalDescription",value:function(e){var t,n,s,c;if(!e||!e.sdp)return e;var u,l=o.parse(e.sdp),d=a(l.media);try{for(d.s();!(u=d.n()).done;){var f=u.value;if(f.direction!==r.a.RECVONLY&&f.direction!==r.a.INACTIVE&&f.type===i.a.VIDEO){var h=f.mid,p=new Set(null===(t=f.ssrcs)||void 0===t?void 0:t.map((function(e){return e.id}))),m=null!==(s=null===(n=f.ssrcGroups)||void 0===n?void 0:n.length)&&void 0!==s?s:0,v=void 0;if(!(0===p.size||p.size>2||2===p.size&&0===m)){if(1===p.size)v=Number(null===(c=f.ssrcs[0])||void 0===c?void 0:c.id);else{var g=f.ssrcGroups.find((function(e){return"FID"===e.semantics}));g&&(v=Number(g.ssrcs.split(" ")[0]))}if(this._ssrcCache.has(h))f=this._fillSsrcsFromCache(f);else{f=this._generateNewSsrcsForSimulcast(f,v);var y=this._parseSimLayers(f);this._ssrcCache.set(h,y)}}}}}catch(e){d.e(e)}finally{d.f()}return new RTCSessionDescription({type:e.type,sdp:o.write(l)})}},{key:"mungeRemoteDescription",value:function(e){var t;if(!e||!e.sdp)return e;var n,s=o.parse(e.sdp),c=a(s.media);try{var u=function(){var e=n.value;if(e.type!==i.a.VIDEO)return"continue";if(e.direction!==r.a.SENDONLY)return"continue";if(!(null===(t=e.ssrcGroups)||void 0===t?void 0:t.length)||!(null==e?void 0:e.ssrcs.length))return"continue";var o=new Set(e.ssrcs.slice()),s=new Set(e.ssrcGroups.slice()),c=e.ssrcGroups.filter((function(e){return"FID"===e.semantics})),u=e.ssrcGroups.find((function(e){return"SIM"===e.semantics})),l=null==u?void 0:u.ssrcs.split(" ")[0];if(c.length&&u){var d,f=c.find((function(e){return e.ssrcs.includes(l)})),h=f.ssrcs.split(" ")[1],p=a(e.ssrcGroups);try{for(p.s();!(d=p.n()).done;){var m=d.value;m!==f&&s.delete(m)}}catch(e){p.e(e)}finally{p.f()}var v,g=a(e.ssrcs);try{for(g.s();!(v=g.n()).done;){var y=v.value;y.id.toString()!==l&&y.id.toString()!==h&&o.delete(y)}}catch(e){g.e(e)}finally{g.f()}}else if(u){s.delete(u);var _,b=a(e.ssrcs);try{for(b.s();!(_=b.n()).done;){var E=_.value;E.id.toString()!==l&&o.delete(E)}}catch(e){b.e(e)}finally{b.f()}}e.ssrcs=Array.from(o),e.ssrcGroups=Array.from(s)};for(c.s();!(n=c.n()).done;)u()}catch(e){c.e(e)}finally{c.f()}return new RTCSessionDescription({type:e.type,sdp:o.write(s)})}}])&&c(t.prototype,n),s&&c(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return C}));var r=n(24),i=n(11),o=n(145),a=n(12),s=n(8),c=n(177);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=f(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var i=g(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=n(4).getLogger(e),_=n(9),b=!1,E=!1,S=["abort","canplaythrough","ended","error"],C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(f,e);var t,n,c,u=p(f);function f(e,t,n,r,i,o,a,s,c,l,d){var h;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(h=u.call(this,t,r,i,(function(){}),o,a)).rtc=e,"number"!=typeof s)throw new TypeError("SSRC ".concat(s," is not a number"));return h.ssrc=s,h.ownerEndpointId=n,h.muted=c,h.isP2P=l,h._sourceName=d,h._trackStreamingStatus=null,h._trackStreamingStatusImpl=null,h._enteredForwardedSourcesTimestamp=null,h.addEventListener=h.on=h._addEventListener.bind(v(h)),h.removeEventListener=h.off=h._removeEventListener.bind(v(h)),y.debug("New remote track added: ".concat(v(h))),h.hasBeenMuted=c,h.rtc&&h.track&&h._bindTrackHandlers(),h._containerHandlers={},S.forEach((function(e){h._containerHandlers[e]=h._containerEventHandler.bind(v(h),e)})),h}return t=f,(n=[{key:"_bindTrackHandlers",value:function(){var e=this;this.track.addEventListener("mute",(function(){return e._onTrackMute()})),this.track.addEventListener("unmute",(function(){return e._onTrackUnmute()})),this.track.addEventListener("ended",(function(){y.debug('"onended" event('.concat(Date.now(),"): ").concat(e))}))}},{key:"_addEventListener",value:function(e,t){d(g(f.prototype),"addListener",this).call(this,e,t),a.a.isSourceNameSignalingEnabled()&&e===r.TRACK_STREAMING_STATUS_CHANGED&&this.listenerCount(r.TRACK_STREAMING_STATUS_CHANGED)&&!this._trackStreamingStatusImpl&&(this._initTrackStreamingStatus(),y.debug("Initializing track streaming status: ".concat(this._sourceName)))}},{key:"_removeEventListener",value:function(e,t){d(g(f.prototype),"removeListener",this).call(this,e,t),a.a.isSourceNameSignalingEnabled()&&e===r.TRACK_STREAMING_STATUS_CHANGED&&!this.listenerCount(r.TRACK_STREAMING_STATUS_CHANGED)&&(this._disposeTrackStreamingStatus(),y.debug("Disposing track streaming status: ".concat(this._sourceName)))}},{key:"_onTrackMute",value:function(){y.debug('"onmute" event('.concat(Date.now(),"): ").concat(this)),this.rtc.eventEmitter.emit(_.REMOTE_TRACK_MUTE,this)}},{key:"_onTrackUnmute",value:function(){y.debug('"onunmute" event('.concat(Date.now(),"): ").concat(this)),this.rtc.eventEmitter.emit(_.REMOTE_TRACK_UNMUTE,this)}},{key:"dispose",value:function(){return a.a.isSourceNameSignalingEnabled()&&this._disposeTrackStreamingStatus(),d(g(f.prototype),"dispose",this).call(this)}},{key:"setMute",value:function(e){this.muted!==e&&(e&&(this.hasBeenMuted=!0),this.stream&&(this.stream.muted=e),this.muted=e,this.emit(r.TRACK_MUTE_CHANGED,this))}},{key:"isMuted",value:function(){return this.muted}},{key:"getParticipantId",value:function(){return this.ownerEndpointId}},{key:"isLocal",value:function(){return!1}},{key:"getSSRC",value:function(){return this.ssrc}},{key:"getSourceName",value:function(){return this._sourceName}},{key:"_setVideoType",value:function(e){this.videoType!==e&&(this.videoType=e,this.emit(r.TRACK_VIDEOTYPE_CHANGED,e))}},{key:"_playCallback",value:function(){if(this.conference.room){var e=this.isVideoTrack()?"video":"audio",t=window.performance.now();console.log("(TIME) Render ".concat(e,":\t"),t),this.conference.getConnectionTimes()["".concat(e,".render")]=t;var n=window.connectionTimes["obtainPermissions.start"],r=window.connectionTimes["obtainPermissions.end"],o=isNaN(r)||isNaN(n)?0:r-n,a=t-(this.conference.getConnectionTimes()["session.initiate"]-this.conference.getConnectionTimes()["muc.joined"])-o;this.conference.getConnectionTimes()["".concat(e,".ttfm")]=a,console.log("(TIME) TTFM ".concat(e,":\t"),a),s.a.sendAnalytics(Object(i.N)({media_type:e,muted:this.hasBeenMuted,value:a}))}}},{key:"_attachTTFMTracker",value:function(e){b&&this.isAudioTrack()||E&&this.isVideoTrack()||(this.isAudioTrack()&&(b=!0),this.isVideoTrack()&&(E=!0),e.addEventListener("canplay",this._playCallback.bind(this)))}},{key:"_onTrackAttach",value:function(e){var t=this;S.forEach((function(n){e.addEventListener(n,t._containerHandlers[n])}))}},{key:"_onTrackDetach",value:function(e){var t=this;S.forEach((function(n){e.removeEventListener(n,t._containerHandlers[n])}))}},{key:"_containerEventHandler",value:function(e){y.debug("".concat(e," handler was called for a container with attached ").concat(this))}},{key:"_getStatus",value:function(){var e=this.track,t=e.enabled,n=e.muted,r=e.readyState;return"readyState: ".concat(r,", muted: ").concat(n,", enabled: ").concat(t)}},{key:"_initTrackStreamingStatus",value:function(){var e=this.conference.options.config;this._trackStreamingStatus=o.a.ACTIVE,this._trackStreamingStatusImpl=new o.b(this.rtc,this.conference,this,{p2pRtcMuteTimeout:e._p2pConnStatusRtcMuteTimeout,rtcMuteTimeout:e._peerConnStatusRtcMuteTimeout,outOfForwardedSourcesTimeout:e._peerConnStatusOutOfLastNTimeout}),this._trackStreamingStatusImpl.init()}},{key:"_disposeTrackStreamingStatus",value:function(){this._trackStreamingStatusImpl&&(this._trackStreamingStatusImpl.dispose(),this._trackStreamingStatusImpl=null,this._trackStreamingStatus=null)}},{key:"_setTrackStreamingStatus",value:function(e){this._trackStreamingStatus=e}},{key:"getTrackStreamingStatus",value:function(){return this._trackStreamingStatus}},{key:"_clearEnteredForwardedSourcesTimestamp",value:function(){this._enteredForwardedSourcesTimestamp=null}},{key:"_setEnteredForwardedSourcesTimestamp",value:function(e){this._enteredForwardedSourcesTimestamp=e}},{key:"_getEnteredForwardedSourcesTimestamp",value:function(){return this._enteredForwardedSourcesTimestamp}},{key:"toString",value:function(){return"RemoteTrack[userID: ".concat(this.getParticipantId(),", type: ").concat(this.getType(),", ssrc: ").concat(this.getSSRC(),", p2p: ").concat(this.isP2P,", sourceName: ").concat(this._sourceName,", status: ").concat(this._getStatus(),"]")}}])&&l(t.prototype,n),c&&l(t,c),Object.defineProperty(t,"prototype",{writable:!1}),f}(c.a)}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return y}));var r=n(4),i=n(1),o=n(33),a=n.n(o),s=n(9),c=n(57),u=n(5);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=n(178),f=n(18).VideoType,h=n(0).XMPPEvents,p=Object(r.getLogger)(e),m=[{width:1920,height:1080,layers:3,target:"high",targetRN:4e6},{width:1280,height:720,layers:3,target:"high",targetRN:25e5},{width:960,height:540,layers:3,target:"standard",targetRN:9e5},{width:640,height:360,layers:2,target:"standard",targetRN:5e5},{width:480,height:270,layers:2,target:"low",targetRN:35e4},{width:320,height:180,layers:1,target:"low",targetRN:15e4}],v=800;function g(e,t,n,r){var i=0,o=Math.min(t.height,t.width),s=m.find((function(e){return e.height<=o}));if(s&&e&&r.codec===a.a.VP8){var c=function(){var e=o;if(!(s=m.find((function(t){return t.height===e}))))return"break";i+=u.a.isReactNative()?s.targetRN:r[s.target]};for(o=s.height;o>=180;o/=2){if("break"===c())break}}else s&&(i=u.a.isReactNative()?s.targetRN:r[s.target]);return Math.min(i/1e3,function(e){if(e>6e4)return Number.MAX_SAFE_INTEGER;return v*Math.pow(1.08,e/1e3)}(Math.max(0,n-1e3)))}var y=function(){function e(t,n,r){var o,a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventEmitter=n,this._conference=t,this._localStats={connectionQuality:100,jvbRTT:void 0},this._lastConnectionQualityUpdate=-1,this._options=r,this._remoteStats={},this._timeIceConnected=-1,this._timeVideoUnmuted=-1,(null===(o=this._options.config)||void 0===o?void 0:o.startBitrate)>0&&(v=this._options.config.startBitrate),t.on(i.CONNECTION_INTERRUPTED,(function(){a._updateLocalConnectionQuality(0),a.eventEmitter.emit(c.LOCAL_STATS_UPDATED,a._localStats),a._broadcastLocalStats()})),t.room.addListener(h.ICE_CONNECTION_STATE_CHANGED,(function(e,t){e.isP2P||"connected"!==t||(a._timeIceConnected=window.performance.now())})),t.on(i.ENDPOINT_MESSAGE_RECEIVED,(function(e,t){"stats"===t.type&&a._updateRemoteStats(e.getId(),t.values)})),t.on(i.ENDPOINT_STATS_RECEIVED,(function(e,t){a._updateRemoteStats(e.getId(),t)})),t.on(i.ENDPOINT_MESSAGE_RECEIVED,(function(e,t){"face_landmark"===t.type&&a.eventEmitter.emit(i.FACE_LANDMARK_ADDED,e.getId(),t)})),t.statistics.addConnectionStatsListener(this._updateLocalStats.bind(this)),t.on(i.TRACK_MUTE_CHANGED,(function(e){e.isVideoTrack()&&(e.isMuted()?a._timeVideoUnmuted=-1:a._maybeUpdateUnmuteTime())})),t.on(i.TRACK_ADDED,(function(e){e.isVideoTrack()&&!e.isMuted()&&a._maybeUpdateUnmuteTime()})),t.rtc.on(s.LOCAL_TRACK_MAX_ENABLED_RESOLUTION_CHANGED,(function(e){a._localStats.maxEnabledResolution=e.maxEnabledResolution})),t.on(i.SERVER_REGION_CHANGED,(function(e){a._localStats.serverRegion=e})),t.on(i.PROPERTIES_CHANGED,(function(e){a._localStats.bridgeCount=Number((e||{})["bridge-count"])}))}var t,n,r;return t=e,(n=[{key:"_maybeUpdateUnmuteTime",value:function(){this._timeVideoUnmuted<0&&(this._timeVideoUnmuted=window.performance.now())}},{key:"_calculateConnectionQuality",value:function(e,t,n){var r,i,o,a=d[n],s=100;if(this._localStats.packetLoss&&(o=this._localStats.packetLoss.upload,t&&(o*=.5)),t||!a||e===f.DESKTOP||this._timeIceConnected<0||this._timeVideoUnmuted<0)void 0===o?(p.error("Cannot calculate connection quality, unknown packet loss."),s=100):s=o<=2?100:o<=4?70:o<=6?50:o<=8?30:o<=12?10:0;else{var c=this._conference.getActivePeerConnection();if(c){var u=c.isSimulcastOn(),l=c.getTargetVideoBitrates();l.codec=c.getConfiguredVideoCodec();var h=window.performance.now()-Math.max(this._timeVideoUnmuted,this._timeIceConnected),m=null!==(i=null===(r=this._options.config)||void 0===r?void 0:r.pcStatsInterval)&&void 0!==i?i:1e4,v=g(u,a,h,l);v=Math.min(v,2500),h>m&&(s=100*this._localStats.bitrate.upload/v)}o&&o>=10&&(s=Math.min(s,30))}if(this._lastConnectionQualityUpdate>0){var y=this._localStats.connectionQuality,_=(window.performance.now()-this._lastConnectionQualityUpdate)/1e3;s=Math.min(s,y+2*_)}return Math.min(100,s)}},{key:"_updateLocalConnectionQuality",value:function(e){this._localStats.connectionQuality=e,this._lastConnectionQualityUpdate=window.performance.now()}},{key:"_broadcastLocalStats",value:function(){var e={bitrate:this._localStats.bitrate,packetLoss:this._localStats.packetLoss,connectionQuality:this._localStats.connectionQuality,jvbRTT:this._localStats.jvbRTT,serverRegion:this._localStats.serverRegion,maxEnabledResolution:this._localStats.maxEnabledResolution,avgAudioLevels:this._localStats.localAvgAudioLevels};try{this._conference.sendEndpointStatsMessage(e)}catch(e){}}},{key:"_updateLocalStats",value:function(e,t){if(!e.isP2P){var n=t.transport&&t.transport.length&&t.transport[0].rtt;this._localStats.jvbRTT=n||void 0}if(e===this._conference.getActivePeerConnection()){var r,i=!this._conference.isConnectionInterrupted(),o=this._conference.getLocalVideoTrack(),a=o?o.videoType:void 0,s=!o||o.isMuted(),u=o?Math.min(o.resolution,o.maxEnabledResolution):null;for(r in s||this._maybeUpdateUnmuteTime(),t)t.hasOwnProperty(r)&&(this._localStats[r]=t[r]);i&&this._updateLocalConnectionQuality(this._calculateConnectionQuality(a,s,u)),this.eventEmitter.emit(c.LOCAL_STATS_UPDATED,this._localStats),this._broadcastLocalStats()}}},{key:"_updateRemoteStats",value:function(e,t){this._remoteStats[e]={bitrate:t.bitrate,packetLoss:t.packetLoss,connectionQuality:t.connectionQuality,jvbRTT:t.jvbRTT,serverRegion:t.serverRegion,maxEnabledResolution:t.maxEnabledResolution,avgAudioLevels:t.avgAudioLevels},this.eventEmitter.emit(c.REMOTE_STATS_UPDATED,e,this._remoteStats[e])}},{key:"getStats",value:function(){return this._localStats}}])&&l(t.prototype,n),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var r=n(4),i=n(30),o=n(1);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=Object(r.getLogger)(e),c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._conference=t}var t,n,r;return t=e,(n=[{key:"_actOnIceFailed",value:function(){if(this._conference.room){var e=this._conference.options.config,t=e.enableForcedReload,n=e.enableIceRestart,r=void 0!==n&&!n,a=this._conference.room.supportsRestartByTerminate(),c=a&&!n;if(s.info("ICE failed,"+" enableForcedReload: ".concat(t,",")+" enableIceRestart: ".concat(n,",")+" supports restart by terminate: ".concat(a)),r||!n&&!a||t){s.info("ICE failed, but ICE restarts are disabled");var u=t?i.CONFERENCE_RESTARTED:i.ICE_FAILED;this._conference.eventEmitter.emit(o.CONFERENCE_FAILED,u)}else{var l=this._conference.jvbJingleSession,d=l&&l.getIceConnectionState();l?"connected"===d?s.info("ICE connection restored - not sending ICE failed"):(s.info("Sending ICE failed - the connection did not recover, "+"ICE state: ".concat(d,", ")+"use 'session-terminate': ".concat(c)),c?this._conference.jvbJingleSession.terminate((function(){s.info("session-terminate for ice restart - done")}),(function(e){s.error("session-terminate for ice restart - error: ".concat(e.message))}),{reason:"connectivity-error",reasonDescription:"ICE FAILED",requestRestart:!0,sendSessionTerminate:!0}):this._conference.jvbJingleSession.sendIceFailedNotification()):s.warn("Not sending ICE failed - no JVB connection")}}}},{key:"start",value:function(){var e=this;this._conference.xmpp.ping(65e3).then((function(){e._canceled||(e._iceFailedTimeout=window.setTimeout((function(){e._iceFailedTimeout=void 0,e._actOnIceFailed()}),2e3))}),(function(e){s.error("PING error/timeout - not sending ICE failed",e)}))}},{key:"cancel",value:function(){this._canceled=!0,window.clearTimeout(this._iceFailedTimeout)}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}).call(this,"/index.js")},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(34),i=n.n(r),o=n(1),a=n(24),s=n(5),c=n(40);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(u,e);var t,n,r,i=f(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this))._conference=e,t._timeoutTrigger=null,t._hasAudioInput=null,s.a.supportsReceiverStats()||e.statistics.addAudioLevelListener(t._audioLevel.bind(p(t))),e.on(o.TRACK_ADDED,t._trackAdded.bind(p(t))),t}return t=u,(n=[{key:"_clearTriggerTimeout",value:function(){clearTimeout(this._timeoutTrigger),this._timeoutTrigger=null}},{key:"_handleAudioInputStateChange",value:function(e){var t=0!==e;null!==this._hasAudioInput&&this._hasAudioInput===t||(this._hasAudioInput=t,this.emit(c.AUDIO_INPUT_STATE_CHANGE,this._hasAudioInput))}},{key:"_handleNoAudioInputDetection",value:function(e){var t=this;this._eventFired||(0!==e||this._timeoutTrigger?0!==e&&this._timeoutTrigger&&this._clearTriggerTimeout():this._timeoutTrigger=setTimeout((function(){t._eventFired=!0,t.emit(c.NO_AUDIO_INPUT)}),4e3))}},{key:"_audioLevel",value:function(e,t,n,r){if(r&&this._audioTrack){var i=e.localSSRCs.get(this._audioTrack.rtcId);i&&i.ssrcs.includes(t)&&(this._handleAudioInputStateChange(n),this._handleNoAudioInputDetection(n))}}},{key:"_trackAdded",value:function(e){var t=this;e.isLocalAudioTrack()&&(this._audioTrack=e,this._eventFired=!1,this._clearTriggerTimeout(),s.a.supportsReceiverStats()&&(e.on(a.NO_AUDIO_INPUT,(function(e){t._handleNoAudioInputDetection(e)})),e.on(a.TRACK_AUDIO_LEVEL_CHANGED,(function(e){t._handleNoAudioInputDetection(e),t._handleAudioInputStateChange(e)}))))}}])&&l(t.prototype,n),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(i.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1),i=n(9);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.conference=t,t.addEventListener(r.TRACK_AUDIO_LEVEL_CHANGED,this._audioLevel.bind(this)),this.myUserID=this.conference.myUserId()}var t,n,a;return t=e,(n=[{key:"_audioLevel",value:function(e,t){!this.conference.isP2PActive()||t<=.6||e===this.myUserID&&this.conference.getLocalAudioTrack().isMuted()||this.conference.rtc.eventEmitter.emit(i.default.DOMINANT_SPEAKER_CHANGED,e)}}])&&o(t.prototype,n),a&&o(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(34),i=n(56),o=n(40);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(l,e);var t,n,r,a=u(l);function l(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=a.call(this))._processing=!1,e._scoreArray=[],e._audioLvlArray=[],e._active=!1,e._calculateNoisyScore=e._calculateNoisyScore.bind(d(e)),e}return t=l,(n=[{key:"_calculateNoisyScore",value:function(){var e=Object(i.b)(this._scoreArray),t=Object(i.b)(this._audioLvlArray);e<.2&&t>.04&&(this.emit(o.VAD_NOISY_DEVICE),this._setActiveState(!1)),this.reset()}},{key:"_recordValues",value:function(e,t){this._scoreArray.push(e),this._audioLvlArray.push(t)}},{key:"_setActiveState",value:function(e){this._active=e,this.emit(o.DETECTOR_STATE_CHANGE,this._active)}},{key:"changeMuteState",value:function(e){this._setActiveState(!e),this.reset()}},{key:"isActive",value:function(){return this._active}},{key:"reset",value:function(){this._processing=!1,this._scoreArray=[],this._audioLvlArray=[],clearTimeout(this._processTimeout)}},{key:"processVADScore",value:function(e){if(this._active)if(this._processing){var t=Object(i.c)(e.pcmData);this._recordValues(e.score,Object(i.b)(t))}else if(e.score<.2){var n=Object(i.c)(e.pcmData),r=Object(i.b)(n);r>.02&&(this._processing=!0,this._recordValues(e.score,r),this._processTimeout=setTimeout(this._calculateNoisyScore,1500))}}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(r.EventEmitter)},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(34),i=n(56),o=n(40);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(l,e);var t,n,r,a=u(l);function l(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=a.call(this))._processing=!1,e._scoreArray=[],e._active=!1,e._calculateVADScore=e._calculateVADScore.bind(d(e)),e}return t=l,(n=[{key:"_calculateVADScore",value:function(){Object(i.b)(this._scoreArray)>.6&&(this.emit(o.VAD_TALK_WHILE_MUTED),this._setActiveState(!1)),this.reset()}},{key:"_setActiveState",value:function(e){this._active=e,this.emit(o.DETECTOR_STATE_CHANGE,this._active)}},{key:"changeMuteState",value:function(e){this._setActiveState(e),this.reset()}},{key:"isActive",value:function(){return this._active}},{key:"processVADScore",value:function(e){this._active&&(this._processing?this._scoreArray.push(e.score):e.score>.9&&(this._processing=!0,this._scoreArray.push(e.score),this._processTimeout=setTimeout(this._calculateVADScore,700)))}},{key:"reset",value:function(){this._processing=!1,this._scoreArray=[],clearTimeout(this._processTimeout)}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(r.EventEmitter)},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d}));var r=n(4),i=n(1),o=n(181);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var u=Object(r.getLogger)(e),l=function(){function e(t,n){a(this,e),this.participant=t,this.e2eping=n,this.id=t.getId(),this.requests={},this.lastRequestId=1,this.sendRequest=this.sendRequest.bind(this),this.handleResponse=this.handleResponse.bind(this),this.maybeLogRttAndStop=this.maybeLogRttAndStop.bind(this),this.scheduleNext=this.scheduleNext.bind(this),this.stop=this.stop.bind(this),this.getDelay=this.getDelay.bind(this),this.timeout=this.scheduleNext()}return c(e,[{key:"scheduleNext",value:function(){return window.setTimeout(this.sendRequest,this.getDelay())}},{key:"stop",value:function(){this.timeout&&window.clearTimeout(this.timeout),this.e2eping.removeParticipant(this.id)}},{key:"getDelay",value:function(){var e=this.e2eping.conference.getParticipants().length,t=e*(e-1)/2*this.e2eping.numRequests/this.e2eping.maxMessagesPerSecond;return(1.5-Math.random())*Math.max(t/this.e2eping.numRequests*1e3,1e3)}},{key:"sendRequest",value:function(){var e=this.lastRequestId++,t={type:"e2e-ping-request",id:e};this.e2eping.sendMessage(t,this.id),this.requests[e]={id:e,timeSent:window.performance.now()}}},{key:"handleResponse",value:function(e){var t=this.requests[e.id];t&&(t.rtt=window.performance.now()-t.timeSent),this.maybeLogRttAndStop()}},{key:"maybeLogRttAndStop",value:function(){var e,t,n=1/0,r=0,i=0;for(t in this.requests)this.requests.hasOwnProperty(t)&&(i++,(e=this.requests[t]).rtt&&(r++,n=Math.min(n,e.rtt)));return r>=this.e2eping.numRequests?(u.info("Measured RTT=".concat(n," ms to ").concat(this.id," (in ").concat(this.participant.getProperty("region"),")")),this.stop(),void this.e2eping.conference.eventEmitter.emit(o.E2E_RTT_CHANGED,this.participant,n)):i>2*this.e2eping.numRequests?(u.info("Stopping e2eping for ".concat(this.id," because we sent ").concat(i," with only ")+"".concat(r," responses.")),void this.stop()):void(this.timeout=this.scheduleNext())}}]),e}(),d=function(){function e(t,n,r){a(this,e),this.conference=t,this.eventEmitter=t.eventEmitter,this.sendMessage=r,this.participants={},this.numRequests=5,this.maxConferenceSize=200,this.maxMessagesPerSecond=250,n&&n.e2eping&&("number"==typeof n.e2eping.numRequests&&(this.numRequests=n.e2eping.numRequests),"number"==typeof n.e2eping.maxConferenceSize&&(this.maxConferenceSize=n.e2eping.maxConferenceSize),"number"==typeof n.e2eping.maxMessagesPerSecond&&(this.maxMessagesPerSecond=n.e2eping.maxMessagesPerSecond)),u.info("Initializing e2e ping with numRequests=".concat(this.numRequests,", maxConferenceSize=").concat(this.maxConferenceSize,", ")+"maxMessagesPerSecond=".concat(this.maxMessagesPerSecond,".")),this.participantJoined=this.participantJoined.bind(this),this.participantLeft=this.participantLeft.bind(this),t.on(i.USER_LEFT,this.participantLeft),this.messageReceived=this.messageReceived.bind(this),t.on(i.ENDPOINT_MESSAGE_RECEIVED,this.messageReceived),this.conferenceJoined=this.conferenceJoined.bind(this),t.on(i.CONFERENCE_JOINED,this.conferenceJoined)}return c(e,[{key:"conferenceJoined",value:function(){var e=this;this.conference.getParticipants().forEach((function(t){return e.participantJoined(t.getId(),t)})),this.conference.on(i.USER_JOINED,this.participantJoined)}},{key:"messageReceived",value:function(e,t){"e2e-ping-request"===t.type?this.handleRequest(e.getId(),t):"e2e-ping-response"===t.type&&this.handleResponse(e.getId(),t)}},{key:"participantJoined",value:function(e,t){this.participants[e]&&(u.info("Participant wrapper already exists for ".concat(e,". Clearing.")),this.participants[e].stop()),this.conference.getParticipants().length>this.maxConferenceSize||this.conference.myUserId()>e&&(u.info("Starting e2eping for participant ".concat(e)),this.participants[e]=new l(t,this))}},{key:"removeParticipant",value:function(e){this.participants[e]&&delete this.participants[e]}},{key:"participantLeft",value:function(e){this.participants[e]&&(this.participants[e].stop(),delete this.participants[e])}},{key:"handleRequest",value:function(e,t){if(t&&t.id){var n={type:"e2e-ping-response",id:t.id};this.sendMessage(n,e)}else u.info("Received an invalid e2e ping request from ".concat(e,"."))}},{key:"handleResponse",value:function(e,t){var n=this.participants[e];n&&n.handleResponse(t)}},{key:"stop",value:function(){for(var e in u.info("Stopping e2eping"),this.conference.off(i.USER_JOINED,this.participantJoined),this.conference.off(i.USER_LEFT,this.participantLeft),this.conference.off(i.ENDPOINT_MESSAGE_RECEIVED,this.messageReceived),this.participants)this.participants.hasOwnProperty(e)&&this.participants[e].stop();this.participants={}}}]),e}()}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var r=n(4),i=n(1);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=Object(r.getLogger)(e),s=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._conference=t,this._jvb121=!0,this._conference.addEventListener(i.USER_JOINED,(function(){return n.evaluateStatus()})),this._conference.addEventListener(i.USER_LEFT,(function(){return n.evaluateStatus()})),this._conference.addEventListener(i.P2P_STATUS,(function(){return n.evaluateStatus()}))}var t,n,r;return t=e,(n=[{key:"evaluateStatus",value:function(){var e=this._jvb121,t=!this._conference.isP2PActive()&&this._conference.getParticipantCount()<=2;e!==t&&(this._jvb121=t,a.debug("JVB121 status ".concat(e," => ").concat(t)),this._conference.eventEmitter.emit(i.JVB121_STATUS,e,t))}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return v}));var r=n(4),i=n(62),o=n.n(i),a=n(1),s=n(3),c=n(12);function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var p=Object(r.getLogger)(e),m=function(){function e(){d(this,e),this._defaultConstraints={maxHeight:180},this._lastN=-1,this._maxFrameHeight=2160,this._selectedEndpoints=[],this._receiverVideoConstraints={constraints:{},defaultConstraints:this.defaultConstraints,lastN:this._lastN,onStageEndpoints:[],selectedEndpoints:this._selectedEndpoints}}return h(e,[{key:"constraints",get:function(){return this._receiverVideoConstraints.lastN=this._lastN,this._selectedEndpoints.length?(this._receiverVideoConstraints.constraints={},this._selectedEndpoints.length>1?(this._receiverVideoConstraints.defaultConstraints={maxHeight:this._maxFrameHeight},this._receiverVideoConstraints.onStageEndpoints=[],this._receiverVideoConstraints.selectedEndpoints=[]):(this._receiverVideoConstraints.constraints[this._selectedEndpoints[0]]={maxHeight:this._maxFrameHeight},this._receiverVideoConstraints.defaultConstraints=this._defaultConstraints,this._receiverVideoConstraints.onStageEndpoints=this._selectedEndpoints,this._receiverVideoConstraints.selectedEndpoints=[]),this._receiverVideoConstraints):this._receiverVideoConstraints}},{key:"updateLastN",value:function(e){var t=this._lastN!==e;return t&&(this._lastN=e,p.debug("Updating ReceiverVideoConstraints lastN(".concat(e,")"))),t}},{key:"updateReceiveResolution",value:function(e){var t=this._maxFrameHeight!==e;return t&&(this._maxFrameHeight=e,p.debug("Updating receive maxFrameHeight: ".concat(e))),t}},{key:"updateReceiverVideoConstraints",value:function(e){var t=!o()(this._receiverVideoConstraints,e);return t&&(this._receiverVideoConstraints=e,p.debug("Updating ReceiverVideoConstraints ".concat(JSON.stringify(e)))),t}},{key:"updateSelectedEndpoints",value:function(e){p.debug("Updating selected endpoints: ".concat(JSON.stringify(e))),this._selectedEndpoints=e}}]),e}(),v=function(){function e(t,n){var r,i,o=this;d(this,e),this._conference=t,this._rtc=n;var s=t.options.config;(this._lastN=null!==(r=null==s?void 0:s.startLastN)&&void 0!==r?r:(null==s?void 0:s.channelLastN)||-1,this._maxFrameHeight=2160,this._sourceReceiverConstraints=new Map,null===(i=null==s?void 0:s.useNewBandwidthAllocationStrategy)||void 0===i||i)?(this._receiverVideoConstraints=new m,this._receiverVideoConstraints.updateLastN(this._lastN)&&this._rtc.setNewReceiverVideoConstraints(this._receiverVideoConstraints.constraints)):this._rtc.setLastN(this._lastN);this._selectedEndpoints=[],this._conference.on(a._MEDIA_SESSION_STARTED,(function(e){return o._onMediaSessionStarted(e)}))}return h(e,[{key:"_getDefaultSourceReceiverConstraints",value:function(e,t){var n;if(!c.a.isSourceNameSignalingEnabled())return null;var r,i=(null===(n=e.peerconnection)||void 0===n?void 0:n.getRemoteTracks(null,s.a.VIDEO))||[],o=new Map,a=u(i);try{for(a.s();!(r=a.n()).done;){var l=r.value;o.set(l.getSourceName(),t)}}catch(e){a.e(e)}finally{a.f()}return o}},{key:"_onMediaSessionStarted",value:function(e){e.isP2P||!this._receiverVideoConstraints?e.setReceiverVideoConstraint(this._maxFrameHeight,this._sourceReceiverConstraints):(this._receiverVideoConstraints.updateReceiveResolution(this._maxFrameHeight),this._rtc.setNewReceiverVideoConstraints(this._receiverVideoConstraints.constraints))}},{key:"getLastN",value:function(){return this._lastN}},{key:"selectEndpoints",value:function(e){var t=this;if(this._selectedEndpoints=e,this._receiverVideoConstraints){var n=e.filter((function(e){return e!==t._conference.myUserId()})),r=JSON.parse(JSON.stringify(this._receiverVideoConstraints.constraints));n.length&&this._receiverVideoConstraints.updateSelectedEndpoints(n);var i=this._receiverVideoConstraints.constraints;o()(i,r)||this._rtc.setNewReceiverVideoConstraints(i)}else this._rtc.selectEndpoints(e)}},{key:"setLastN",value:function(e){if(this._lastN!==e){if(this._lastN=e,this._receiverVideoConstraints)return void(this._receiverVideoConstraints.updateLastN(e)&&this._rtc.setNewReceiverVideoConstraints(this._receiverVideoConstraints.constraints));this._rtc.setLastN(e)}}},{key:"setPreferredReceiveMaxFrameHeight",value:function(e){this._maxFrameHeight=e;var t,n=u(this._conference.getMediaSessions());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.isP2P||!this._receiverVideoConstraints)r.setReceiverVideoConstraint(e,this._getDefaultSourceReceiverConstraints(this._maxFrameHeight));else this._receiverVideoConstraints.updateReceiveResolution(e)&&this._rtc.setNewReceiverVideoConstraints(this._receiverVideoConstraints.constraints)}}catch(e){n.e(e)}finally{n.f()}}},{key:"setReceiverConstraints",value:function(e){var t,n,r,i;this._receiverVideoConstraints||(this._receiverVideoConstraints=new m);var o=Object.keys(e).includes("onStageEndpoints","selectedEndpoints"),a=Object.keys(e).includes("onStageSources","selectedSources");if(!c.a.isSourceNameSignalingEnabled()&&a)throw new Error('"onStageSources" and "selectedSources" are not supported when sourceNameSignaling is disabled.');if(c.a.isSourceNameSignalingEnabled()&&o)throw new Error('"onStageEndpoints" and "selectedEndpoints" are not supported when sourceNameSignaling is enabled.');if(this._receiverVideoConstraints.updateReceiverVideoConstraints(e)){this._lastN=null!==(t=e.lastN)&&void 0!==t?t:this._lastN,this._selectedEndpoints=null!==(n=e.selectedEndpoints)&&void 0!==n?n:this._selectedEndpoints,this._rtc.setNewReceiverVideoConstraints(e);var s=this._conference.getMediaSessions().find((function(e){return e.isP2P}));if(!s)return;if(c.a.isSourceNameSignalingEnabled()){var u=Array.from(Object.entries(e.constraints)).map((function(e){return e[1]=e[1].maxHeight,e}));this._sourceReceiverConstraints=new Map(u),s.setReceiverVideoConstraint(null,this._sourceReceiverConstraints)}else{var l=null===(r=Object.values(e.constraints)[0])||void 0===r?void 0:r.maxHeight;l||(l=null===(i=e.defaultConstraints)||void 0===i?void 0:i.maxHeight),l&&s.setReceiverVideoConstraint(l)}}}}]),e}()}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var r=n(4),i=n(1),o=n(9),a=n(12),s=n(132);function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=Object(r.getLogger)(e),f=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._conference=t,this._preferredSendMaxFrameHeight=2160,this._rtc=n,this._sourceSenderConstraints=new Map,this._conference.on(i._MEDIA_SESSION_STARTED,(function(e){return r._onMediaSessionStarted(e)})),this._conference.on(i._MEDIA_SESSION_ACTIVE_CHANGED,(function(){return r._configureConstraintsForLocalSources()})),this._rtc.on(o.default.SENDER_VIDEO_CONSTRAINTS_CHANGED,(function(e){return r._onSenderConstraintsReceived(e)}))}var t,n,r;return t=e,(n=[{key:"_configureConstraintsForLocalSources",value:function(){if(a.a.isSourceNameSignalingEnabled()){var e,t=c(this._rtc.getLocalVideoTracks());try{for(t.s();!(e=t.n()).done;){var n=e.value.getSourceName();n&&this._propagateSendMaxFrameHeight(n)}}catch(e){t.e(e)}finally{t.f()}}else this._propagateSendMaxFrameHeight()}},{key:"_onMediaSessionStarted",value:function(e){var t=this;a.a.isSourceNameSignalingEnabled()?e.addListener(s.a.REMOTE_SOURCE_CONSTRAINTS_CHANGED,(function(e,n){e===t._conference.getActiveMediaSession()&&n.forEach((function(e){return t._onSenderConstraintsReceived(e)}))})):e.addListener(s.a.REMOTE_VIDEO_CONSTRAINTS_CHANGED,(function(e){return e===t._conference.getActiveMediaSession()&&t._configureConstraintsForLocalSources()}))}},{key:"_onSenderConstraintsReceived",value:function(e){var t,n;if(a.a.isSourceNameSignalingEnabled()){var r,i=e.maxHeight,o=e.sourceName,s=c(null!==(t=this._conference.getLocalVideoTracks())&&void 0!==t?t:[]);try{for(s.s();!(r=s.n()).done;)r.value.getSourceName()!==o||this._sourceSenderConstraints.has(o)&&this._sourceSenderConstraints.get(o)===i||(this._sourceSenderConstraints.set(o,i),d.debug("Sender constraints for source:".concat(o," changed to maxHeight:").concat(i)),this._propagateSendMaxFrameHeight(o))}catch(e){s.e(e)}finally{s.f()}}else(null===(n=this._senderVideoConstraints)||void 0===n?void 0:n.idealHeight)!==e.idealHeight&&(this._senderVideoConstraints=e,this._propagateSendMaxFrameHeight())}},{key:"_propagateSendMaxFrameHeight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(a.a.isSourceNameSignalingEnabled()&&!e)throw new Error("sourceName missing for calculating the sendMaxHeight for video tracks");var t=this._selectSendMaxFrameHeight(e),n=[];if(t>=0){var r,i=c(this._conference.getMediaSessions());try{for(i.s();!(r=i.n()).done;){var o=r.value;n.push(o.setSenderVideoConstraint(t,e))}}catch(e){i.e(e)}finally{i.f()}}return Promise.all(n)}},{key:"_selectSendMaxFrameHeight",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(a.a.isSourceNameSignalingEnabled()&&!t)throw new Error("sourceName missing for calculating the sendMaxHeight for video tracks");var n=this._conference.getActiveMediaSession(),r=n?n.isP2P?t?this._sourceSenderConstraints.get(t):n.getRemoteRecvMaxFrameHeight():t?this._sourceSenderConstraints.get(t):null===(e=this._senderVideoConstraints)||void 0===e?void 0:e.idealHeight:void 0;return this._preferredSendMaxFrameHeight>=0&&r>=0?Math.min(this._preferredSendMaxFrameHeight,r):r>=0?r:this._preferredSendMaxFrameHeight}},{key:"setPreferredSendMaxFrameHeight",value:function(e){if(this._preferredSendMaxFrameHeight=e,a.a.isSourceNameSignalingEnabled()){var t,n=[],r=c(this._sourceSenderConstraints.keys());try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push(this._propagateSendMaxFrameHeight(i))}}catch(e){r.e(e)}finally{r.f()}return Promise.allSettled(n)}return this._propagateSendMaxFrameHeight()}}])&&l(t.prototype,n),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){var r=n(4),i=n(0),o=n(228),a=n(134);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=Object(r.getLogger)(e),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._sessions={},this._chatRoom=t,this.onPresence=this.onPresence.bind(this),this._chatRoom.eventEmitter.addListener(i.XMPPEvents.PRESENCE_RECEIVED,this.onPresence)}var t,n,r;return t=e,(n=[{key:"getSession",value:function(e){return this._sessions[e]}},{key:"onPresence",value:function(e){var t=e.fromHiddenDomain,n=e.presence;a.a.isFromFocus(n)?this._handleFocusPresence(n):t&&this._handleJibriPresence(n)}},{key:"startRecording",value:function(e){var t=this,n=new o.a(Object.assign(Object.assign({},e),{connection:this._chatRoom.connection}));return n.start({appData:e.appData,broadcastId:e.broadcastId,focusMucJid:this._chatRoom.focusMucJid,streamId:e.streamId}).then((function(){return t.getSession(n.getID())||(t._addSession(n),t._emitSessionUpdate(n)),n})).catch((function(e){return t._emitSessionUpdate(n),Promise.reject(e)}))}},{key:"stopRecording",value:function(e){var t=this.getSession(e);return t?t.stop({focusMucJid:this._chatRoom.focusMucJid}):Promise.reject(new Error("Could not find session"))}},{key:"_addSession",value:function(e){this._sessions[e.getID()]=e}},{key:"_createSession",value:function(e,t,n){var r=new o.a({connection:this._chatRoom.connection,focusMucJid:this._chatRoom.focusMucJid,mode:n,sessionID:e,status:t});return this._addSession(r),r}},{key:"_emitSessionUpdate",value:function(e,t){this._chatRoom.eventEmitter.emit(i.XMPPEvents.RECORDER_STATE_CHANGED,e,t)}},{key:"_handleFocusPresence",value:function(e){var t=a.a.getFocusRecordingUpdate(e);if(t){var n=t.error,r=t.initiator,i=t.recordingMode,o=t.sessionID,s=t.status,u=this.getSession(o);u||"off"!==s?u&&u.getStatus()===s&&u.getError()===n?c.warn("Ignoring duplicate presence update: ",JSON.stringify(t)):(u||(u=this._createSession(o,s,i)),u.setStatus(s),n&&u.setError(n),this._emitSessionUpdate(u,r)):c.warn("Ignoring recording presence update","Received a new session with status off.")}}},{key:"_handleJibriPresence",value:function(e){var t=a.a.getHiddenDomainUpdate(e),n=t.liveStreamViewURL,r=t.mode,i=t.sessionID;if(i){var o=this.getSession(i);o||(o=this._createSession(i,"",r)),o.setLiveStreamViewURL(n),this._emitSessionUpdate(o)}else c.warn("Ignoring potential jibri presence due to no session id.")}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.a=u}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d}));var r=n(4),i=n(1),o=n(3),a=n(57),s=n(11),c=n(8);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=Object(r.getLogger)(e),d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._conference=t,this._localAudioLevelCache={},this._reportedParticipants=[],this._audioProblemCandidates={},this._numberOfRemoteAudioLevelsReceived={},this._onLocalAudioLevelsReport=this._onLocalAudioLevelsReport.bind(this),this._onRemoteAudioLevelReceived=this._onRemoteAudioLevelReceived.bind(this),this._clearUserData=this._clearUserData.bind(this),this._conference.on(a.REMOTE_STATS_UPDATED,this._onRemoteAudioLevelReceived),this._conference.statistics.addConnectionStatsListener(this._onLocalAudioLevelsReport),this._conference.on(i.USER_LEFT,this._clearUserData)}var t,n,r;return t=e,(n=[{key:"_onRemoteAudioLevelReceived",value:function(e,t){var n=t.avgAudioLevels,r=this._numberOfRemoteAudioLevelsReceived[e]+1||0;if(this._numberOfRemoteAudioLevelsReceived[e]=r,!(-1!==this._reportedParticipants.indexOf(e)||e in this._audioProblemCandidates||n<=0||r<3)){var i=this._conference.getParticipantById(e);if(i&&i.getTracksByMediaType(o.a.AUDIO).length>0&&i.isAudioMuted())return;var a=this._localAudioLevelCache[e];Array.isArray(a)&&!a.every((function(e){return 0===e}))||(this._audioProblemCandidates[e]={remoteAudioLevels:n,localAudioLevels:[]})}}},{key:"_onLocalAudioLevelsReport",value:function(e,t){var n=this,r=t.avgAudioLevels;e===this._conference.getActivePeerConnection()&&(Object.keys(r).forEach((function(e){if(-1===n._reportedParticipants.indexOf(e)){var t=n._localAudioLevelCache[e];Array.isArray(t)?t.length>=2&&t.shift():n._localAudioLevelCache[e]=[],n._localAudioLevelCache[e].push(r[e])}})),Object.keys(this._audioProblemCandidates).forEach((function(e){var t=n._audioProblemCandidates[e],i=t.localAudioLevels,o=t.remoteAudioLevels;if(i.push(r[e]),2===i.length){if(i.every((function(e){return void 0===e||0===e}))){var a=JSON.stringify(i);c.a.sendAnalytics(Object(s.x)(e,a,o)),l.warn("A potential problem is detected with the audio output for participant ".concat(e,", local audio levels: ").concat(a,", remote audio levels: ").concat(o)),n._reportedParticipants.push(e),n._clearUserData(e)}delete n._audioProblemCandidates[e]}})))}},{key:"_clearUserData",value:function(e){delete this._localAudioLevelCache[e]}},{key:"dispose",value:function(){this._conference.off(a.REMOTE_STATS_UPDATED,this._onRemoteAudioLevelReceived),this._conference.off(i.USER_LEFT,this._clearUserData),this._conference.statistics.removeConnectionStatsListener(this._onLocalAudioLevelsReport),this._localAudioLevelCache=void 0,this._audioProblemCandidates=void 0,this._reportedParticipants=void 0,this._numberOfRemoteAudioLevelsReceived=void 0,this._conference=void 0}}])&&u(t.prototype,n),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return E}));var r=n(4),i=n(62),o=n.n(i),a=n(1),s=n(3),c=n(18),u=n(57),l=n(11),d=n(5),f=n(8);function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var y=Object(r.getLogger)(e),_=function(){function e(t){m(this,e),this.name=t,this.count=0,this.sum=0,this.samples=[]}return g(e,[{key:"addNext",value:function(e){"number"!=typeof e?y.error("".concat(this.name," - invalid value for idx: ").concat(this.count),e):isNaN(e)||(this.sum+=e,this.samples.push(e),this.count+=1)}},{key:"calculate",value:function(){return this.sum/this.count}},{key:"appendReport",value:function(e){e["".concat(this.name,"_avg")]=this.calculate(),e["".concat(this.name,"_samples")]=JSON.stringify(this.samples)}},{key:"reset",value:function(){this.samples=[],this.sum=0,this.count=0}}]),e}(),b=function(){function e(t,n,r){var i=this;m(this,e),this.isP2P=n,this._n=r,this._sampleIdx=0,this._avgRTT=new _("rtt"),this._avgRemoteRTTMap=new Map,this._avgRtpStatsReporter=t,this._avgEnd2EndRTT=void 0,this._onConnectionStats=function(e,t){i.isP2P===e.isP2P&&i._calculateAvgStats(t)};var o=t._conference;o.statistics.addConnectionStatsListener(this._onConnectionStats),this.isP2P||(this._onUserLeft=function(e){return i._avgRemoteRTTMap.delete(e)},o.on(a.USER_LEFT,this._onUserLeft),this._onRemoteStatsUpdated=function(e,t){return i._processRemoteStats(e,t)},o.on(u.REMOTE_STATS_UPDATED,this._onRemoteStatsUpdated))}return g(e,[{key:"_calculateAvgStats",value:function(e){if(e){if(d.a.supportsRTTStatistics()&&e.transport&&e.transport.length&&this._avgRTT.addNext(e.transport[0].rtt),this._sampleIdx+=1,this._sampleIdx>=this._n){if(d.a.supportsRTTStatistics()){var t=this._avgRtpStatsReporter._conference,n={p2p:this.isP2P,conference_size:t.getParticipantCount()};if(e.transport&&e.transport.length&&Object.assign(n,{local_candidate_type:e.transport[0].localCandidateType,remote_candidate_type:e.transport[0].remoteCandidateType,transport_type:e.transport[0].type}),this._avgRTT.appendReport(n),this.isP2P){var r=this._avgRtpStatsReporter.jvbStatsMonitor._avgEnd2EndRTT;isNaN(r)||(n.rtt_diff=this._avgRTT.calculate()-r)}else{var i=this._calculateAvgRemoteRTT(),o=this._avgRTT.calculate();this._avgEnd2EndRTT=o+i,isNaN(o)||isNaN(i)||(n.end2end_rtt_avg=this._avgEnd2EndRTT)}f.a.sendAnalytics(Object(l.K)(n))}this._resetAvgStats()}}else y.error("No stats")}},{key:"_calculateAvgRemoteRTT",value:function(){var e,t=0,n=0,r=h(this._avgRemoteRTTMap.values());try{for(r.s();!(e=r.n()).done;){var i=e.value,o=i.calculate();isNaN(o)||(n+=o,t+=1,i.reset())}}catch(e){r.e(e)}finally{r.f()}return n/t}},{key:"_processRemoteStats",value:function(e,t){var n="number"==typeof t.jvbRTT,r=this._avgRemoteRTTMap.get(e);!r&&n&&(r=new _("".concat(e,"_stat_rtt")),this._avgRemoteRTTMap.set(e,r)),n?r.addNext(t.jvbRTT):r&&this._avgRemoteRTTMap.delete(e)}},{key:"_resetAvgStats",value:function(){this._avgRTT.reset(),this._avgRemoteRTTMap&&this._avgRemoteRTTMap.clear(),this._sampleIdx=0}},{key:"dispose",value:function(){var e=this._avgRtpStatsReporter._conference;e.statistics.removeConnectionStatsListener(this._onConnectionStats),this.isP2P||(e.off(u.REMOTE_STATS_UPDATED,this._onRemoteStatsUpdated),e.off(a.USER_LEFT,this._onUserLeft))}}]),e}(),E=function(){function e(t,n){var r=this;m(this,e),this._n=n,n>0?(y.info("Avg RTP stats will be calculated every ".concat(n," samples")),this._sampleIdx=0,this._conference=t,this._avgAudioBitrateUp=new _("bitrate_audio_upload"),this._avgAudioBitrateDown=new _("bitrate_audio_download"),this._avgVideoBitrateUp=new _("bitrate_video_upload"),this._avgVideoBitrateDown=new _("bitrate_video_download"),this._avgBandwidthUp=new _("bandwidth_upload"),this._avgBandwidthDown=new _("bandwidth_download"),this._avgPacketLossTotal=new _("packet_loss_total"),this._avgPacketLossUp=new _("packet_loss_upload"),this._avgPacketLossDown=new _("packet_loss_download"),this._avgRemoteFPS=new _("framerate_remote"),this._avgRemoteScreenFPS=new _("framerate_screen_remote"),this._avgLocalFPS=new _("framerate_local"),this._avgLocalScreenFPS=new _("framerate_screen_local"),this._avgRemoteCameraPixels=new _("pixels_remote"),this._avgRemoteScreenPixels=new _("pixels_screen_remote"),this._avgLocalCameraPixels=new _("pixels_local"),this._avgLocalScreenPixels=new _("pixels_screen_local"),this._avgCQ=new _("connection_quality"),this._cachedTransportStats=void 0,this._onLocalStatsUpdated=function(e){r._calculateAvgStats(e),r._maybeSendTransportAnalyticsEvent(e)},t.on(u.LOCAL_STATS_UPDATED,this._onLocalStatsUpdated),this._onP2PStatusChanged=function(){y.debug("Resetting average stats calculation"),r._resetAvgStats(),r.jvbStatsMonitor._resetAvgStats(),r.p2pStatsMonitor._resetAvgStats()},t.on(a.P2P_STATUS,this._onP2PStatusChanged),this._onJvb121StatusChanged=function(e,t){!0===t&&(y.info("Resetting JVB avg RTP stats"),r._resetAvgJvbStats())},t.on(a.JVB121_STATUS,this._onJvb121StatusChanged),this.jvbStatsMonitor=new b(this,!1,n),this.p2pStatsMonitor=new b(this,!0,n)):y.info("Avg RTP stats reports are disabled.")}return g(e,[{key:"_calculateAvgStats",value:function(e){if(e){var t=this._conference.isP2PActive(),n=this._conference.getParticipantCount();if(t||!(n<2)){var r=e.bitrate,i=e.bandwidth,o=e.packetLoss,a=e.framerate,s=e.resolution;if(r)if(i)if(o)if(a)if(s){if(this._avgAudioBitrateUp.addNext(r.audio.upload),this._avgAudioBitrateDown.addNext(r.audio.download),this._avgVideoBitrateUp.addNext(r.video.upload),this._avgVideoBitrateDown.addNext(r.video.download),d.a.supportsBandwidthStatistics()&&(this._avgBandwidthUp.addNext(i.upload),this._avgBandwidthDown.addNext(i.download)),this._avgPacketLossUp.addNext(o.upload),this._avgPacketLossDown.addNext(o.download),this._avgPacketLossTotal.addNext(o.total),this._avgCQ.addNext(e.connectionQuality),a&&(this._avgRemoteFPS.addNext(this._calculateAvgVideoFps(a,!1,c.VideoType.CAMERA)),this._avgRemoteScreenFPS.addNext(this._calculateAvgVideoFps(a,!1,c.VideoType.DESKTOP)),this._avgLocalFPS.addNext(this._calculateAvgVideoFps(a,!0,c.VideoType.CAMERA)),this._avgLocalScreenFPS.addNext(this._calculateAvgVideoFps(a,!0,c.VideoType.DESKTOP))),s&&(this._avgRemoteCameraPixels.addNext(this._calculateAvgVideoPixels(s,!1,c.VideoType.CAMERA)),this._avgRemoteScreenPixels.addNext(this._calculateAvgVideoPixels(s,!1,c.VideoType.DESKTOP)),this._avgLocalCameraPixels.addNext(this._calculateAvgVideoPixels(s,!0,c.VideoType.CAMERA)),this._avgLocalScreenPixels.addNext(this._calculateAvgVideoPixels(s,!0,c.VideoType.DESKTOP))),this._sampleIdx+=1,this._sampleIdx>=this._n){var u={p2p:t,conference_size:n};e.transport&&e.transport.length&&Object.assign(u,{local_candidate_type:e.transport[0].localCandidateType,remote_candidate_type:e.transport[0].remoteCandidateType,transport_type:e.transport[0].type}),this._avgAudioBitrateUp.appendReport(u),this._avgAudioBitrateDown.appendReport(u),this._avgVideoBitrateUp.appendReport(u),this._avgVideoBitrateDown.appendReport(u),d.a.supportsBandwidthStatistics()&&(this._avgBandwidthUp.appendReport(u),this._avgBandwidthDown.appendReport(u)),this._avgPacketLossUp.appendReport(u),this._avgPacketLossDown.appendReport(u),this._avgPacketLossTotal.appendReport(u),this._avgRemoteFPS.appendReport(u),isNaN(this._avgRemoteScreenFPS.calculate())||this._avgRemoteScreenFPS.appendReport(u),this._avgLocalFPS.appendReport(u),isNaN(this._avgLocalScreenFPS.calculate())||this._avgLocalScreenFPS.appendReport(u),this._avgRemoteCameraPixels.appendReport(u),isNaN(this._avgRemoteScreenPixels.calculate())||this._avgRemoteScreenPixels.appendReport(u),this._avgLocalCameraPixels.appendReport(u),isNaN(this._avgLocalScreenPixels.calculate())||this._avgLocalScreenPixels.appendReport(u),this._avgCQ.appendReport(u),f.a.sendAnalytics(Object(l.K)(u)),this._resetAvgStats()}}else y.error("No resolution");else y.error('No "framerate"');else y.error('No "packetloss"');else y.error('No "bandwidth"');else y.error('No "bitrate"')}}else y.error("No stats")}},{key:"_calculateAvgVideoPixels",value:function(e,t,n){for(var r=0,i=0,o=this._conference.myUserId(),a=0,s=Object.keys(e);a<s.length;a++){var c=s[a];if(t?c===o:c!==o){var u=t?null:this._conference.getParticipantById(c),l=e[c];if((t||u)&&l){var d=this._calculatePeerAvgVideoPixels(l,u,n);isNaN(d)||(r+=d,i+=1)}}}return r/i}},{key:"_calculatePeerAvgVideoPixels",value:function(e,t,n){var r=Object.keys(e).map((function(e){return Number(e)})),i=null,o=this._conference.getActivePeerConnection();t?(i=t.getTracksByMediaType(s.a.VIDEO))&&(r=r.filter((function(e){return i.find((function(t){return!t.isMuted()&&t.getSSRC()===e&&t.videoType===n}))}))):(i=this._conference.getLocalTracks(s.a.VIDEO),r=r.filter((function(e){return i.find((function(t){return!t.isMuted()&&o.getLocalSSRC(t)===e&&t.videoType===n}))})));var a,c=0,u=0,l=h(r);try{for(l.s();!(a=l.n()).done;){var d=a.value,f=Number(e[d].height)*Number(e[d].width);!isNaN(f)&&f>0&&(c+=f,u+=1)}}catch(e){l.e(e)}finally{l.f()}return c/u}},{key:"_calculateAvgVideoFps",value:function(e,t,n){for(var r=0,i=0,o=this._conference.myUserId(),a=0,s=Object.keys(e);a<s.length;a++){var c=s[a];if(t?c===o:c!==o){var u=t?null:this._conference.getParticipantById(c),l=e[c];if((t||u)&&l){var d=this._calculatePeerAvgVideoFps(l,u,n);isNaN(d)||(r+=d,i+=1)}}}return r/i}},{key:"_calculatePeerAvgVideoFps",value:function(e,t,n){var r=Object.keys(e).map((function(e){return Number(e)})),i=null,o=this._conference.getActivePeerConnection();t?(i=t.getTracksByMediaType(s.a.VIDEO))&&(r=r.filter((function(e){return i.find((function(t){return!t.isMuted()&&t.getSSRC()===e&&t.videoType===n}))}))):(i=this._conference.getLocalTracks(s.a.VIDEO),r=r.filter((function(e){return i.find((function(t){return!t.isMuted()&&o.getLocalSSRC(t)===e&&t.videoType===n}))})));var a,c=0,u=0,l=h(r);try{for(l.s();!(a=l.n()).done;){var d=a.value,f=Number(e[d]);!isNaN(f)&&f>0&&(c+=f,u+=1)}}catch(e){l.e(e)}finally{l.f()}return c/u}},{key:"_maybeSendTransportAnalyticsEvent",value:function(e){if(e&&e.transport&&e.transport.length){var t={p2p:e.transport[0].p2p,local_candidate_type:e.transport[0].localCandidateType,remote_candidate_type:e.transport[0].remoteCandidateType,transport_type:e.transport[0].type};this._cachedTransportStats&&o()(t,this._cachedTransportStats)||(this._cachedTransportStats=t,f.a.sendAnalytics(Object(l.M)(t)))}}},{key:"_resetAvgJvbStats",value:function(){this._resetAvgStats(),this.jvbStatsMonitor._resetAvgStats()}},{key:"_resetAvgStats",value:function(){this._avgAudioBitrateUp.reset(),this._avgAudioBitrateDown.reset(),this._avgVideoBitrateUp.reset(),this._avgVideoBitrateDown.reset(),this._avgBandwidthUp.reset(),this._avgBandwidthDown.reset(),this._avgPacketLossUp.reset(),this._avgPacketLossDown.reset(),this._avgPacketLossTotal.reset(),this._avgRemoteFPS.reset(),this._avgRemoteScreenFPS.reset(),this._avgLocalFPS.reset(),this._avgLocalScreenFPS.reset(),this._avgRemoteCameraPixels.reset(),this._avgRemoteScreenPixels.reset(),this._avgLocalCameraPixels.reset(),this._avgLocalScreenPixels.reset(),this._avgCQ.reset(),this._sampleIdx=0}},{key:"dispose",value:function(){this._conference.off(a.P2P_STATUS,this._onP2PStatusChanged),this._conference.off(u.LOCAL_STATS_UPDATED,this._onLocalStatsUpdated),this._conference.off(a.JVB121_STATUS,this._onJvb121StatusChanged),this.jvbStatsMonitor.dispose(),this.p2pStatsMonitor.dispose()}}]),e}()}).call(this,"/index.js")},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),i=n(0),o=n(185),a=n.n(o);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stats={users:{},dominantSpeakerId:null};var n=t.myUserId();this.stats.users[n]=new a.a(n,null,!0),this.conference=t,t.addEventListener(r.DOMINANT_SPEAKER_CHANGED,this._onDominantSpeaker.bind(this)),t.addEventListener(r.USER_JOINED,this._onUserJoin.bind(this)),t.addEventListener(r.USER_LEFT,this._onUserLeave.bind(this)),t.addEventListener(r.DISPLAY_NAME_CHANGED,this._onDisplayNameChange.bind(this)),t.addEventListener(r.FACE_LANDMARK_ADDED,this._onFaceLandmarkAdd.bind(this)),t.xmpp&&t.xmpp.addListener(i.XMPPEvents.SPEAKER_STATS_RECEIVED,this._updateStats.bind(this))}var t,n,o;return t=e,(n=[{key:"_onDominantSpeaker",value:function(e){var t=this.stats.users[this.stats.dominantSpeakerId],n=this.stats.users[e];t&&t.setDominantSpeaker(!1),n&&n.setDominantSpeaker(!0),this.stats.dominantSpeakerId=e}},{key:"_onUserJoin",value:function(e,t){t.isHidden()||this.stats.users[e]||(this.stats.users[e]=new a.a(e,t.getDisplayName()))}},{key:"_onUserLeave",value:function(e){var t=this.stats.users[e];t&&t.markAsHasLeft()}},{key:"_onDisplayNameChange",value:function(e,t){var n=this.stats.users[e];n&&n.setDisplayName(t)}},{key:"_onFaceLandmarkAdd",value:function(e,t){var n=this.stats.users[e];n&&t.faceExpression&&n.addFaceExpression(t.faceExpression,t.duration)}},{key:"getStats",value:function(){return this.stats.users}},{key:"_updateStats",value:function(e){for(var t in e){var n=void 0,r=this.conference.getParticipantById(t);r&&r.isHidden()||(this.stats.users[t]?(n=this.stats.users[t]).getDisplayName()||n.setDisplayName(e[t].displayName):(n=new a.a(t,e[t].displayName),this.stats.users[t]=n,n.markAsHasLeft())),n.totalDominantSpeakerTime=e[t].totalDominantSpeakerTime,n.setFaceExpressions(e[t].faceExpressions)}}}])&&s(t.prototype,n),o&&s(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var r=n(8),i=n(4).getLogger(e);function o(e){this.versions={},this.conference=e,this.conference.addCommandListener("versions",this.processVersions.bind(this))}o.prototype.processVersions=function(e,t,n){var o=this;if(this.conference.isFocus(n)){var a=[];e.children.forEach((function(e){var t=e.attributes.name,n=e.value;o.versions[t]!==n&&(o.versions[t]=n,i.info("Got ".concat(t," version: ").concat(n)),a.push({id:"component_version",component:t,version:n}))})),a.length>0&&r.a.sendLog(JSON.stringify(a))}else i.warn("Received versions not from the focus user: ".concat(e),n)},o.prototype.getComponentVersion=function(e){return this.versions[e]}}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));var r=n(4),i=n(0),o=n(360),a=n(43);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=Object(r.getLogger)(e),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.chatRoom=t,this.eventEmitter=t.eventEmitter,c.debug("creating VideoSIPGW"),this.sessions={},this.sessionStateChangeListener=this.sessionStateChanged.bind(this),t.addPresenceListener("jibri-sip-call-state",this.handleJibriSIPState.bind(this))}var t,n,r;return t=e,(n=[{key:"handleJibriSIPState",value:function(e){var t=e.attributes;if(t){c.debug("Handle video sip gw state : ",t);var n=t.state;if(n!==this.state)switch(n){case a.STATE_ON:case a.STATE_OFF:case a.STATE_PENDING:case a.STATE_RETRYING:case a.STATE_FAILED:var r=t.sipaddress;if(!r)return;var i=this.sessions[r];i?i.setState(n,t.failure_reason):c.warn("Video SIP GW session not found:",r)}}}},{key:"createVideoSIPGWSession",value:function(e,t){if(this.sessions[e])return c.warn("There was already a Video SIP GW session for address",e),new Error(a.ERROR_SESSION_EXISTS);var n=new o.a(e,t,this.chatRoom);return n.addStateListener(this.sessionStateChangeListener),this.sessions[e]=n,n}},{key:"sessionStateChanged",value:function(e){var t=e.address;if(e.newState===a.STATE_OFF||e.newState===a.STATE_FAILED){var n=this.sessions[t];if(!n)return void c.error("Missing Video SIP GW session with address:",t);n.removeStateListener(this.sessionStateChangeListener),delete this.sessions[t]}this.eventEmitter.emit(i.XMPPEvents.VIDEO_SIP_GW_SESSION_STATE_CHANGED,e)}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var r=n(4),i=n(2),o=n(35),a=n(43);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=Object(r.getLogger)(e),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(s,e);var t,n,r,o=l(s);function s(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(r=o.call(this)).sipAddress=e,r.displayName=t,r.chatRoom=n,r.state=void 0,r}return t=s,(n=[{key:"stop",value:function(){this.state!==a.STATE_OFF&&this.state!==a.STATE_FAILED?this._sendJibriIQ("stop"):h.warn("Video SIP GW session already stopped or failed!")}},{key:"start",value:function(){this.state!==a.STATE_ON&&this.state!==a.STATE_OFF&&this.state!==a.STATE_PENDING&&this.state!==a.STATE_RETRYING?this._sendJibriIQ("start"):h.warn("Video SIP GW session already started!")}},{key:"setState",value:function(e,t){if(e!==this.state){var n=this.state;this.state=e,this.eventEmitter.emit("STATE_CHANGED",{address:this.sipAddress,failureReason:t,oldState:n,newState:this.state,displayName:this.displayName})}}},{key:"addStateListener",value:function(e){this.addListener("STATE_CHANGED",e)}},{key:"removeStateListener",value:function(e){this.removeListener("STATE_CHANGED",e)}},{key:"_sendJibriIQ",value:function(e){var t=this,n={};n.baseUrl=window.location.origin,n.token=this.chatRoom.connection.emuc.xmpp.token;var r={xmlns:"http://jitsi.org/protocol/jibri",action:e,app_data:JSON.stringify(n),sipaddress:this.sipAddress};r.displayname=this.displayName;var o=Object(i.$iq)({to:this.chatRoom.focusMucJid,type:"set"}).c("jibri",r).up();h.debug("".concat(e," video SIP GW session"),o.nodeTree),this.chatRoom.connection.sendIQ(o,(function(){}),(function(n){h.error("Failed to ".concat(e," video SIP GW session, error: "),n),t.setState(a.STATE_FAILED)}))}}])&&c(t.prototype,n),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(o.a)}).call(this,"/index.js")},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(1),i=n(8);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var s={localTracksDuration:{audio:{startedTime:-1,value:0},video:{camera:{startedTime:-1,value:0},desktop:{startedTime:-1,value:0}},conference:{startedTime:-1,value:0}}},c={localTracksDuration:{audio:{startedTime:-1,value:0},video:{camera:{startedTime:-1,value:0},desktop:{startedTime:-1,value:0}},conference:{startedTime:-1,value:0}}};function u(e,t){var n=Date.now(),r=e.localTracksDuration,i=r.audio,o=r.video,a=o.camera,s=o.desktop,c=t.getLocalTracks(),u=c.find((function(e){return"audio"===e.getType()})),l=c.find((function(e){return"video"===e.getType()})),d=Object.assign({},r);if(u&&!u.muted&&t?-1===i.startedTime&&(d.audio.startedTime=n):d.audio={startedTime:-1,value:i.value+(-1===i.startedTime?0:n-i.startedTime)},l&&!l.muted&&t){var f=l.videoType;-1===o[f].startedTime&&(d.video[f].startedTime=n)}else d.video={camera:{startedTime:-1,value:a.value+(-1===a.startedTime?0:n-a.startedTime)},desktop:{startedTime:-1,value:s.value+(-1===s.startedTime?0:n-s.startedTime)}};return Object.assign(Object.assign({},r),d)}var l=a((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.addEventListener(r.CONFERENCE_JOINED,(function(){c={localTracksDuration:Object.assign(Object.assign({},u(s,t)),{conference:{startedTime:Date.now(),value:0}})}})),t.addEventListener(r.TRACK_UPDATED,(function(){var e=c.localTracksDuration;-1!==e.conference.startedTime&&(c={localTracksDuration:Object.assign(Object.assign({},e),u(c,t))})})),t.addEventListener(r.TRACK_ADDED,(function(){var e=c.localTracksDuration;-1!==e.conference.startedTime&&(c={localTracksDuration:Object.assign(Object.assign({},e),u(c,t))})})),t.addEventListener(r.TRACK_REMOVED,(function(){var e=c.localTracksDuration;-1!==e.conference.startedTime&&(c={localTracksDuration:Object.assign(Object.assign({},e),u(c,t))})})),t.addEventListener(r.CONFERENCE_LEFT,(function(){var e=c.localTracksDuration,n=Object.assign(Object.assign({},u(c,t)),{conference:{startedTime:-1,value:Date.now()-e.conference.startedTime}});i.a.sendAnalytics(function(e){var t=e.audio,n=e.video,r=e.conference,i=n.camera,o=n.desktop;return{action:"local.tracks.durations",attributes:{audio:t.value,camera:i.value,conference:r.value,desktop:o.value}}}(n))}))}))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var r=n(4),i=n(24),o=n(23),a=n(8);function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=Object(r.getLogger)(e);function l(){return new Promise((function(e){o.a.enumerateDevices((function(t){var n,r=[],c=s(t.filter((function(e){return"audioinput"===e.kind})));try{for(c.s();!(n=c.n()).done;){var l=n.value,f=o.a.obtainAudioAndVideoPermissions({devices:["audio"],micDeviceId:l.deviceId}).then((function(e){var t=e[0],n=t.getOriginalStream();return a.a.startLocalStats(n,t.setAudioLevel.bind(t)),t.addEventListener(i.LOCAL_TRACK_STOPPED,(function(){a.a.stopLocalStats(n)})),t}));r.push(f)}}catch(e){c.e(e)}finally{c.f()}Promise.allSettled(r).then((function(t){var n,r=t.filter((function(e){return"fulfilled"===e.status})),o=t.filter((function(e){return"rejected"===e.status})),a=r.map((function(e){return e.value})),c=s(o.map((function(e){return e.value})));try{for(c.s();!(n=c.n()).done;){var l=n.value;u.error("Failed to acquire audio device with error: ",l)}}catch(e){c.e(e)}finally{c.f()}var f,h=s(a);try{var p=function(){var t=f.value;t.on(i.TRACK_AUDIO_LEVEL_CHANGED,(function(n){n>.008&&(d(a),e({deviceId:t.deviceId,deviceLabel:t.track.label}))}))};for(h.s();!(f=h.n()).done;)p()}catch(e){h.e(e)}finally{h.f()}setTimeout((function(){d(a),e({deviceId:"",deviceLabel:""})}),3e3)}))}))}))}function d(e){var t,n=s(e);try{for(n.s();!(t=n.n()).done;){t.value.stopStream()}}catch(e){n.e(e)}finally{n.f()}}}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var r=n(4),i=n(2),o=n(3),a=n(18),s=n(23),c=n(364),u=n(64);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},h=Object(r.getLogger)(e),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,e);var n=t.jitsiConnection,r=f(t,["jitsiConnection"]);this._options=Object.assign({pcConfig:n&&n.xmpp.connection.jingle.p2pIceConfig},r),this._peerConnection=null,this._onFatalError=this._onFatalError.bind(this),this._onSendMessage=this._onSendMessage.bind(this),this._onRemoteStream=this._onRemoteStream.bind(this)}var t,n,r;return t=e,(n=[{key:"processMessage",value:function(e){var t=e.from;if(t)if(this._peerConnection&&this._peerConnection.getPeerJid()!==t)this._onFatalError(t,u.a.CONNECTION_ERROR,"rejected");else{var n=this._convertStringToXML(e.data.iq),r=n&&n.find("jingle"),i=r&&r.attr("action");i===u.a.INITIATE&&(this._peerConnection=this._createPeerConnection(t,{isInitiator:!1,receiveVideo:!0})),this._peerConnection&&this._peerConnection.processMessage(r),i!==u.a.CONNECTION_ERROR&&i!==u.a.UNAVAILABLE&&i!==u.a.TERMINATE||this._selfCloseConnection()}}},{key:"start",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._peerConnection=this._createPeerConnection(e,{isInitiator:!0,receiveVideo:!1}),this._peerConnection.start(t)}},{key:"stop",value:function(){this._peerConnection&&this._peerConnection.stop(),this._peerConnection=null}},{key:"_convertStringToXML",value:function(e){try{var t=(new DOMParser).parseFromString(e,"text/xml");return $(t)}catch(e){return h.error("Attempted to convert incorrectly formatted xml"),null}}},{key:"_createPeerConnection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("Cannot create ProxyConnectionPC without a peer.");var n=Object.assign({pcConfig:this._options.pcConfig,onError:this._onFatalError,onRemoteStream:this._onRemoteStream,onSendMessage:this._onSendMessage,peerJid:e},t);return new c.a(n)}},{key:"_onFatalError",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";h.error("Received a proxy connection error",e,t,n);var r=Object(i.$iq)({to:e,type:"set"}).c("jingle",{xmlns:"urn:xmpp:jingle:1",action:t}).c("details").t(n).up();this._onSendMessage(e,r),this._peerConnection&&this._peerConnection.getPeerJid()===e&&this._selfCloseConnection()}},{key:"_onRemoteStream",value:function(e){if(!this._options.onRemoteStream)return h.error("Remote track received without callback."),void e.dispose();var t,n=e.isVideoTrack();n&&(t=this._options.convertVideoToDesktop?a.VideoType.DESKTOP:a.VideoType.CAMERA);var r=e.getOriginalStream(),i=s.a.createLocalTracks([{deviceId:"proxy:".concat(this._peerConnection.getPeerJid()),mediaType:n?o.a.VIDEO:o.a.AUDIO,sourceType:"proxy",stream:r,track:r.getVideoTracks()[0],videoType:t}]);this._options.onRemoteStream(i[0])}},{key:"_onSendMessage",value:function(e,t){if(this._options.onSendMessage)try{var n=(new XMLSerializer).serializeToString(t.nodeTree||t);this._options.onSendMessage(e,{iq:n})}catch(e){h.error("Attempted to send an incorrectly formatted iq.")}}},{key:"_selfCloseConnection",value:function(){this.stop(),this._options.onConnectionClosed&&this._options.onConnectionClosed()}}])&&d(t.prototype,n),r&&d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var r=n(4),i=n(9),o=n(0),a=n(23),s=n(144),c=n(183),u=n(41),l=n(64);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=Object(r.getLogger)(e),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,e),this._options=Object.assign({pcConfig:{},isInitiator:!1,receiveAudio:!1,receiveVideo:!1},t),this._tracks=[],this._peerConnection=null,this._onError=this._onError.bind(this),this._onRemoteStream=this._onRemoteStream.bind(this),this._onSendMessage=this._onSendMessage.bind(this)}var t,n,r;return t=e,(n=[{key:"getPeerJid",value:function(){return this._options.peerJid}},{key:"processMessage",value:function(e){switch(e.attr("action")){case l.a.ACCEPT:this._onSessionAccept(e);break;case l.a.INITIATE:this._onSessionInitiate(e);break;case l.a.TERMINATE:this._onSessionTerminate(e);break;case l.a.TRANSPORT_INFO:this._onTransportInfo(e)}}},{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._peerConnection||(this._tracks=this._tracks.concat(e),this._peerConnection=this._createPeerConnection(),this._peerConnection.invite(e))}},{key:"stop",value:function(){this._peerConnection&&this._peerConnection.terminate(),this._onSessionTerminate()}},{key:"_createPeerConnection",value:function(){var e=this,t={connected:!0,jingle:{terminate:function(){}},sendIQ:this._onSendMessage,addEventListener:function(){return function(){}}},n=Object.assign({iceServers:u.a},this._options.pcConfig),r={addPresenceListener:function(){},connectionTimes:[],eventEmitter:{emit:function(t){switch(t){case o.XMPPEvents.CONNECTION_ICE_FAILED:case o.XMPPEvents.CONNECTION_FAILED:e._onError(l.a.CONNECTION_ERROR,t)}}},getMediaPresenceInfo:function(){return{}},removePresenceListener:function(){},supportsRestartByTerminate:function(){return!1}};this._rtc=new a.a({myUserId:function(){return""}},{}),this._rtc.addListener(i.default.REMOTE_TRACK_ADDED,this._onRemoteStream);var d=new s.a(void 0,void 0,this._options.peerJid,t,{offerToReceiveAudio:this._options.receiveAudio,offerToReceiveVideo:this._options.receiveVideo},n,!0,this._options.isInitiator),f=new c.a;return f.setChatRoom(r),d.initialize(r,this._rtc,f,{}),d}},{key:"_onError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._options.onError(this._options.peerJid,e,t)}},{key:"_onRemoteStream",value:function(e){this._tracks.push(e),this._options.onRemoteStream(e)}},{key:"_onSendMessage",value:function(e){this._options.onSendMessage(this._options.peerJid,e)}},{key:"_onSessionAccept",value:function(e){this._peerConnection?this._peerConnection.setAnswer(e):h.error("Received an answer when no peer connection exists.")}},{key:"_onSessionInitiate",value:function(e){var t=this;this._peerConnection?h.error("Received an offer when an offer was already sent."):(this._peerConnection=this._createPeerConnection(),this._peerConnection.acceptOffer(e,(function(){}),(function(){return t._onError(t._options.peerJid,l.a.CONNECTION_ERROR,"session initiate error")})))}},{key:"_onSessionTerminate",value:function(){this._tracks.forEach((function(e){return e.dispose()})),this._tracks=[],this._peerConnection&&this._peerConnection.onTerminated(),this._rtc&&(this._rtc.removeListener(i.default.REMOTE_TRACK_ADDED,this._onRemoteStream),this._rtc.destroy())}},{key:"_onTransportInfo",value:function(e){this._peerConnection.addIceCandidates(e)}}])&&f(t.prototype,n),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}).call(this,"/index.js")},function(e,t,n){"use strict";t.a={error:{BUSY:"busy",ERROR:"error",RESOURCE_CONSTRAINT:"resource-constraint",UNEXPECTED_REQUEST:"unexpected-request",SERVICE_UNAVAILABLE:"service-unavailable"},mode:{FILE:"file",STREAM:"stream"},status:{OFF:"off",ON:"on",PENDING:"pending"}}},function(e,t,n){"use strict";var r=n(34),i=n.n(r),o=n(5),a=n(51),s=n(128),c=n.n(s),u=n(102),l=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},d="preCallTestResults",f=new i.a,h=!1,p=null;function m(e){if(!o.a.isReactNative())return new Promise((function(t){c.a.loadScript(e.callStatsCustomScriptUrl||u.a,!0,!0,void 0,t)}))}function v(e){return new Promise((function(t,n){var r=e.callStatsID,i=e.callStatsSecret,o=e.statisticsId||e.statisticsDisplayName||a.a.callStatsUserName;p.initialize(r,i,o,(function(e,r){"success"===e?(p.on(d,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];f.emit.apply(f,[d].concat(t))})),h=!0,t()):n({status:e,message:r})}),null,{disablePrecalltest:!0})}))}t.a={init:function(e){return l(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!h){t.next=2;break}throw new Error("Precall Test already initialized");case 2:if(n=e.callStatsID,r=e.callStatsSecret,i=e.disableThirdPartyRequests,n&&r&&!i){t.next=5;break}throw new Error("Callstats is disabled");case 5:return t.next=7,m(e);case 7:return p=new window.callstats,t.abrupt("return",v(e));case 9:case"end":return t.stop()}}),t)})))},execute:function(){return h?new Promise((function(e,t){f.on(d,(function(n,r){"success"===n?e(r):t({status:n,payload:r})})),p.makePrecallTest()})):Promise.reject("uninitialized")}}},function(e,t){e.exports={getTokenAuthUrl:function(e,t,n){return"string"!=typeof e?null:e.replace("{room}",t).replace("{roleUpgrade}",!0===n)}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));var r=n(4),i=n(180);function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=Object(r.getLogger)(e),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._started=!1,this._streamsToMix=[],this._streamMSSArray=[]}var t,n,r;return t=e,(n=[{key:"addMediaStream",value:function(e){e.getAudioTracks()||c.warn("Added MediaStream doesn't contain audio tracks."),this._streamsToMix.push(e)}},{key:"start",value:function(){if(this._started)return this._mixedMSD.stream;if(this._audioContext=Object(i.a)(),!this._streamsToMix.length)return c.warn("No MediaStream's added to AudioMixer, nothing will happen."),null;this._started=!0,this._mixedMSD=this._audioContext.createMediaStreamDestination();var e,t=o(this._streamsToMix);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=this._audioContext.createMediaStreamSource(n);r.connect(this._mixedMSD),this._streamMSSArray.push(r)}}catch(e){t.e(e)}finally{t.f()}return this._mixedMSD.stream}},{key:"reset",value:function(){this._started=!1,this._streamsToMix=[];var e,t=o(this._streamMSSArray);try{for(t.s();!(e=t.n()).done;)e.value.disconnect()}catch(e){t.e(e)}finally{t.f()}this._streamMSSArray=[],this._audioContext&&(this._audioContext=void 0)}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}).call(this,"/index.js")},function(e,t,n){"use strict";(function(e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=function(t){var r;(t=void 0!==(t=t||{})?t:{}).ready=new Promise((function(e,t){r=e}));var i,o={};for(i in t)t.hasOwnProperty(i)&&(o[i]=t[i]);var a,s,c=[];a="object"===("undefined"==typeof window?"undefined":n(window)),s="function"==typeof importScripts,"object"===(void 0===e?"undefined":n(e))&&"object"===n(e.versions)&&"string"==typeof e.versions.node;var u,l="";(a||s)&&(s?l=self.location.href:document.currentScript&&(l=document.currentScript.src),l=0!==(l="https://sdk.sariska.io/").indexOf("blob:")?l.substr(0,l.lastIndexOf("/")+1):"",s&&(u=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}));var d,f,h=t.print||console.log.bind(console),p=t.printErr||console.warn.bind(console);for(i in o)o.hasOwnProperty(i)&&(t[i]=o[i]);o=null,t.arguments&&(c=t.arguments),t.thisProgram&&t.thisProgram,t.quit&&t.quit,t.wasmBinary&&(d=t.wasmBinary),t.noExitRuntime&&t.noExitRuntime,"object"!==("undefined"==typeof WebAssembly?"undefined":n(WebAssembly))&&p("no native wasm support detected");var m,v,g,y=new WebAssembly.Table({initial:1,maximum:1,element:"anyfunc"}),_=!1;function b(e){m=e,t.HEAP8=new Int8Array(e),t.HEAP16=new Int16Array(e),t.HEAP32=g=new Int32Array(e),t.HEAPU8=v=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAPU32=new Uint32Array(e),t.HEAPF32=new Float32Array(e),t.HEAPF64=new Float64Array(e)}var E=t.INITIAL_MEMORY||16777216;function S(e){for(;e.length>0;){var n=e.shift();if("function"!=typeof n){var r=n.func;"number"==typeof r?void 0===n.arg?t.dynCall_v(r):t.dynCall_vi(r,n.arg):r(void 0===n.arg?null:n.arg)}else n(t)}}(f=t.wasmMemory?t.wasmMemory:new WebAssembly.Memory({initial:E/65536,maximum:32768}))&&(m=f.buffer),E=m.byteLength,b(m),g[24364]=5340496;var C=[],w=[],T=[],D=[],A=0,R=null,k=null;function O(e){throw t.onAbort&&t.onAbort(e),h(e+=""),p(e),_=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(e)}function j(e){return t=e,n="data:application/octet-stream;base64,",String.prototype.startsWith?t.startsWith(n):0===t.indexOf(n);var t,n}t.preloadedImages={},t.preloadedAudios={};var P,I="rnnoise.wasm";function N(){try{if(d)return new Uint8Array(d);if(u)return u(I);throw"both async and sync fetching of the wasm failed"}catch(e){O(e)}}function M(e){try{return f.grow(e-m.byteLength+65535>>>16),b(f.buffer),1}catch(e){}}j(I)||(P=I,I=t.locateFile?t.locateFile(P,l):l+P),w.push({func:function(){F()}});var x,L={a:function(e,t,n){v.copyWithin(e,t,t+n)},b:function(e){e>>>=0;var t=v.length;if(e>2147483648)return!1;for(var n,r,i=1;i<=4;i*=2){var o=t*(1+.2/i);if(o=Math.min(o,e+100663296),M(Math.min(2147483648,((n=Math.max(16777216,e,o))%(r=65536)>0&&(n+=r-n%r),n))))return!0}return!1},memory:f,table:y},F=(function(){var e={a:L};function n(e,n){var r=e.exports;t.asm=r,function(e){if(A--,t.monitorRunDependencies&&t.monitorRunDependencies(A),0==A&&(null!==R&&(clearInterval(R),R=null),k)){var n=k;k=null,n()}}()}function r(e){n(e.instance)}function i(t){return(d||!a&&!s||"function"!=typeof fetch?new Promise((function(e,t){e(N())})):fetch(I,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+I+"'";return e.arrayBuffer()})).catch((function(){return N()}))).then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){p("failed to asynchronously prepare wasm: "+e),O(e)}))}if(A++,t.monitorRunDependencies&&t.monitorRunDependencies(A),t.instantiateWasm)try{return t.instantiateWasm(e,n)}catch(e){return p("Module.instantiateWasm callback failed with error: "+e),!1}!function(){if(d||"function"!=typeof WebAssembly.instantiateStreaming||j(I)||"function"!=typeof fetch)return i(r);fetch(I,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(e){return p("wasm streaming compile failed: "+e),p("falling back to ArrayBuffer instantiation"),i(r)}))}))}()}(),t.___wasm_call_ctors=function(){return(F=t.___wasm_call_ctors=t.asm.c).apply(null,arguments)});function B(e){function n(){x||(x=!0,t.calledRun=!0,_||(S(w),S(T),r(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),function(){if(t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;)e=t.postRun.shift(),D.unshift(e);var e;S(D)}()))}e=e||c,A>0||(function(){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)e=t.preRun.shift(),C.unshift(e);var e;S(C)}(),A>0||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),n()}),1)):n()))}if(t._rnnoise_init=function(){return(t._rnnoise_init=t.asm.d).apply(null,arguments)},t._rnnoise_create=function(){return(t._rnnoise_create=t.asm.e).apply(null,arguments)},t._malloc=function(){return(t._malloc=t.asm.f).apply(null,arguments)},t._rnnoise_destroy=function(){return(t._rnnoise_destroy=t.asm.g).apply(null,arguments)},t._free=function(){return(t._free=t.asm.h).apply(null,arguments)},t._rnnoise_process_frame=function(){return(t._rnnoise_process_frame=t.asm.i).apply(null,arguments)},k=function e(){x||B(),x||(k=e)},t.run=B,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return B(),t.ready};t.a=r}).call(this,n(115))},function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.exports=function(e,t,n,i,c,l){if(!a(e)||!a(t)||n&&!a(n))throw new Error("Image data: Uint8Array, Uint8ClampedArray or Buffer expected.");if(e.length!==t.length||n&&n.length!==e.length)throw new Error("Image sizes do not match.");if(e.length!==i*c*4)throw new Error("Image data size does not match width/height.");l=Object.assign({},o,l);for(var d=i*c,f=new Uint32Array(e.buffer,e.byteOffset,d),h=new Uint32Array(t.buffer,t.byteOffset,d),v=!0,g=0;g<d;g++)if(f[g]!==h[g]){v=!1;break}if(v){if(n&&!l.diffMask)for(var y=0;y<d;y++)m(e,4*y,l.alpha,n);return 0}for(var _=35215*l.threshold*l.threshold,b=0,E=0;E<c;E++)for(var S=0;S<i;S++){var C=4*(E*i+S),w=u(e,t,C,C);Math.abs(w)>_?l.includeAA||!s(e,S,E,i,c,t)&&!s(t,S,E,i,c,e)?(n&&p.apply(void 0,[n,C].concat(r(w<0&&l.diffColorAlt||l.diffColor))),b++):n&&!l.diffMask&&p.apply(void 0,[n,C].concat(r(l.aaColor))):n&&(l.diffMask||m(e,C,l.alpha,n))}return b};var o={threshold:.1,includeAA:!1,alpha:.1,aaColor:[255,255,0],diffColor:[255,0,0],diffColorAlt:null,diffMask:!1};function a(e){return ArrayBuffer.isView(e)&&1===e.constructor.BYTES_PER_ELEMENT}function s(e,t,n,r,i,o){for(var a,s,l,d,f=Math.max(t-1,0),h=Math.max(n-1,0),p=Math.min(t+1,r-1),m=Math.min(n+1,i-1),v=4*(n*r+t),g=t===f||t===p||n===h||n===m?1:0,y=0,_=0,b=f;b<=p;b++)for(var E=h;E<=m;E++)if(b!==t||E!==n){var S=u(e,e,v,4*(E*r+b),!0);if(0===S){if(++g>2)return!1}else S<y?(y=S,a=b,s=E):S>_&&(_=S,l=b,d=E)}return 0!==y&&0!==_&&(c(e,a,s,r,i)&&c(o,a,s,r,i)||c(e,l,d,r,i)&&c(o,l,d,r,i))}function c(e,t,n,r,i){for(var o=Math.max(t-1,0),a=Math.max(n-1,0),s=Math.min(t+1,r-1),c=Math.min(n+1,i-1),u=4*(n*r+t),l=t===o||t===s||n===a||n===c?1:0,d=o;d<=s;d++)for(var f=a;f<=c;f++)if(d!==t||f!==n){var h=4*(f*r+d);if(e[u]===e[h]&&e[u+1]===e[h+1]&&e[u+2]===e[h+2]&&e[u+3]===e[h+3]&&l++,l>2)return!0}return!1}function u(e,t,n,r,i){var o=e[n+0],a=e[n+1],s=e[n+2],c=e[n+3],u=t[r+0],p=t[r+1],m=t[r+2],v=t[r+3];if(c===v&&o===u&&a===p&&s===m)return 0;c<255&&(o=h(o,c/=255),a=h(a,c),s=h(s,c)),v<255&&(u=h(u,v/=255),p=h(p,v),m=h(m,v));var g=l(o,a,s),y=l(u,p,m),_=g-y;if(i)return _;var b=d(o,a,s)-d(u,p,m),E=f(o,a,s)-f(u,p,m),S=.5053*_*_+.299*b*b+.1957*E*E;return g>y?-S:S}function l(e,t,n){return.29889531*e+.58662247*t+.11448223*n}function d(e,t,n){return.59597799*e-.2741761*t-.32180189*n}function f(e,t,n){return.21147017*e-.52261711*t+.31114694*n}function h(e,t){return 255+(e-255)*t}function p(e,t,n,r,i){e[t+0]=n,e[t+1]=r,e[t+2]=i,e[t+3]=255}function m(e,t,n,r){var i=h(l(e[t+0],e[t+1],e[t+2]),n*e[t+3]/255);p(r,t,i,i,i)}},function(e,t,n){(function(e,n,r){var i;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a,s=(a=(a="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||e,function(e){var t,r,i=void 0!==(e=e||{})?e:{};i.ready=new Promise((function(e,n){t=e,r=n}));var s,c={};for(s in i)i.hasOwnProperty(s)&&(c[s]=i[s]);var u,l=[],d="./this.program",f=function(e,t){throw t},h=!1,p=!1;h="object"==("undefined"==typeof window?"undefined":o(window)),p="function"==typeof importScripts,u="object"==(void 0===n?"undefined":o(n))&&"object"==o(n.versions)&&"string"==typeof n.versions.node;var m,v,g="";h||u||p?(h||p)&&(p?g=self.location.href:"undefined"!=typeof document&&document.currentScript&&(g=document.currentScript.src),a&&(g=a),g=0!==g.indexOf("blob:")?g.substr(0,g.lastIndexOf("/")+1):"",p&&(v=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),m=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}):(v=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):("object"==o(t=read(e,"binary"))||B("Assertion failed: "+void 0),t)},"undefined"!=typeof scriptArgs?l=scriptArgs:void 0!==arguments&&(l=arguments),"function"==typeof quit&&(f=function(e){quit(e)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print));var y,_,b,E=i.print||console.log.bind(console),S=i.printErr||console.warn.bind(console);for(s in c)c.hasOwnProperty(s)&&(i[s]=c[s]);c=null,i.arguments&&(l=i.arguments),i.thisProgram&&(d=i.thisProgram),i.quit&&(f=i.quit),i.wasmBinary&&(y=i.wasmBinary),i.noExitRuntime&&(_=i.noExitRuntime),"object"!=("undefined"==typeof WebAssembly?"undefined":o(WebAssembly))&&B("no native wasm support detected");var C,w,T,D,A=!1,R="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function k(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.subarray&&R)return R.decode(e.subarray(t,i));for(var o="";t<i;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var c=63&e[t++];if((a=224==(240&a)?(15&a)<<12|s<<6|c:(7&a)<<18|s<<12|c<<6|63&e[t++])<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|s)}else o+=String.fromCharCode(a)}return o}function O(e){C=e,i.HEAP8=w=new Int8Array(e),i.HEAP16=new Int16Array(e),i.HEAP32=D=new Int32Array(e),i.HEAPU8=T=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAPU32=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=new Float64Array(e)}i.INITIAL_MEMORY;var j,P=[],I=[],N=[],M=[];I.push({func:function(){re()}});var x=0,L=null,F=null;function B(e){i.onAbort&&i.onAbort(e),S(e+=""),A=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw r(t),t}function U(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}i.preloadedImages={},i.preloadedAudios={};var V="data:application/octet-stream;base64,";function H(e){return U(e,V)}var G="file://";function J(e){return U(e,G)}var z,W="https://sdk.sariska.io/tflite.wasm";function K(e){try{if(e==W&&y)return new Uint8Array(y);if(v)return v(e);throw"both async and sync fetching of the wasm failed"}catch(e){B(e)}}function q(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?j.get(n)():j.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(i)}}H(W)||(W=W),z=u?function(){var e=n.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof dateNow?dateNow:function(){return performance.now()};var $=!0;function X(e){return D[ie()>>2]=e,e}function Y(e){try{return b.grow(e-C.byteLength+65535>>>16),O(b.buffer),1}catch(e){}}var Q={};function Z(){if(!Z.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==("undefined"==typeof navigator?"undefined":o(navigator))&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:d||"./this.program"};for(var t in Q)e[t]=Q[t];var n=[];for(var t in e)n.push(t+"="+e[t]);Z.strings=n}return Z.strings}var ee,te={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=te.buffers[e];0===t||10===t?((1===e?E:S)(k(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return te.varargs+=4,D[te.varargs-4>>2]},getStr:function(e){return function(e,t){return e?k(T,e,void 0):""}(e)},get64:function(e,t){return e}},ne={a:function(){B()},n:function(e,t){var n;if(0===e)n=Date.now();else{if(1!==e&&4!==e||!$)return X(28),-1;n=z()}return D[t>>2]=n/1e3|0,D[t+4>>2]=n%1e3*1e3*1e3|0,0},i:function(e,t){B("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},e:function(e,t){B("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},l:function(e,t,n){T.copyWithin(e,t,t+n)},m:function(e){e>>>=0;var t=T.length;if(e>2147483648)return!1;for(var n,r=1;r<=4;r*=2){var i=t*(1+.2/r);if(i=Math.min(i,e+100663296),Y(Math.min(2147483648,((n=Math.max(16777216,e,i))%65536>0&&(n+=65536-n%65536),n))))return!0}return!1},o:function(e){for(var t=z();z()-t<e;);},p:function(e,t){var n=0;return Z().forEach((function(r,i){var o=t+n;D[e+4*i>>2]=o,function(e,t,n){for(var r=0;r<e.length;++r)w[t++>>0]=e.charCodeAt(r);w[t>>0]=0}(r,o),n+=r.length+1})),0},g:function(e,t){var n=Z();D[e>>2]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),D[t>>2]=r,0},j:function(e){!function(e,t){_||(i.onExit&&i.onExit(e),A=!0),f(e,new oe(e))}(e)},h:function(e){return 0},k:function(e,t,n,r,i){},c:function(e,t,n,r){for(var i=0,o=0;o<n;o++){for(var a=D[t+8*o>>2],s=D[t+(8*o+4)>>2],c=0;c<s;c++)te.printChar(e,T[a+c]);i+=s}return D[r>>2]=i,0},d:function(){return 6},f:function(){return 28},b:function(e){switch(e){case 30:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==("undefined"==typeof navigator?"undefined":o(navigator))&&navigator.hardwareConcurrency||1}return X(28),-1}},re=(function(){var e={a:ne};function t(e,t){var n=e.exports;i.asm=n,O((b=i.asm.q).buffer),j=i.asm.D,function(e){if(x--,i.monitorRunDependencies&&i.monitorRunDependencies(x),0==x&&(null!==L&&(clearInterval(L),L=null),F)){var t=F;F=null,t()}}()}function n(e){t(e.instance)}function o(t){return function(){if(!y&&(h||p)){if("function"==typeof fetch&&!J(W))return fetch(W,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+W+"'";return e.arrayBuffer()})).catch((function(){return K(W)}));if(m)return new Promise((function(e,t){m(W,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return K(W)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){S("failed to asynchronously prepare wasm: "+e),B(e)}))}if(x++,i.monitorRunDependencies&&i.monitorRunDependencies(x),i.instantiateWasm)try{return i.instantiateWasm(e,t)}catch(e){return S("Module.instantiateWasm callback failed with error: "+e),!1}(y||"function"!=typeof WebAssembly.instantiateStreaming||H(W)||J(W)||"function"!=typeof fetch?o(n):fetch(W,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return S("wasm streaming compile failed: "+e),S("falling back to ArrayBuffer instantiation"),o(n)}))}))).catch(r)}(),i.___wasm_call_ctors=function(){return(re=i.___wasm_call_ctors=i.asm.r).apply(null,arguments)}),ie=(i._getModelBufferMemoryOffset=function(){return(i._getModelBufferMemoryOffset=i.asm.s).apply(null,arguments)},i._getInputMemoryOffset=function(){return(i._getInputMemoryOffset=i.asm.t).apply(null,arguments)},i._getInputHeight=function(){return(i._getInputHeight=i.asm.u).apply(null,arguments)},i._getInputWidth=function(){return(i._getInputWidth=i.asm.v).apply(null,arguments)},i._getInputChannelCount=function(){return(i._getInputChannelCount=i.asm.w).apply(null,arguments)},i._getOutputMemoryOffset=function(){return(i._getOutputMemoryOffset=i.asm.x).apply(null,arguments)},i._getOutputHeight=function(){return(i._getOutputHeight=i.asm.y).apply(null,arguments)},i._getOutputWidth=function(){return(i._getOutputWidth=i.asm.z).apply(null,arguments)},i._getOutputChannelCount=function(){return(i._getOutputChannelCount=i.asm.A).apply(null,arguments)},i._loadModel=function(){return(i._loadModel=i.asm.B).apply(null,arguments)},i._runInference=function(){return(i._runInference=i.asm.C).apply(null,arguments)},i.___errno_location=function(){return(ie=i.___errno_location=i.asm.E).apply(null,arguments)});function oe(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function ae(e){function n(){ee||(ee=!0,i.calledRun=!0,A||(q(I),q(N),t(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),function(){if(i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)e=i.postRun.shift(),M.unshift(e);var e;q(M)}()))}e=e||l,x>0||(function(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)e=i.preRun.shift(),P.unshift(e);var e;q(P)}(),x>0||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),n()}),1)):n()))}if(F=function e(){ee||ae(),ee||(F=e)},i.run=ae,i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return _=!0,ae(),e.ready});"object"==o(t)&&"object"==o(r)?r.exports=s:void 0===(i=function(){return s}.apply(t,[]))||(r.exports=i)}).call(this,"/index.js",n(115),n(98)(e))},function(e,t,n){(function(e,n,r){var i;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a,s=(a=(a="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||e,function(e){var t,r,i=void 0!==(e=e||{})?e:{};i.ready=new Promise((function(e,n){t=e,r=n}));var s,c={};for(s in i)i.hasOwnProperty(s)&&(c[s]=i[s]);var u,l=[],d="./this.program",f=function(e,t){throw t},h=!1,p=!1;h="object"==("undefined"==typeof window?"undefined":o(window)),p="function"==typeof importScripts,u="object"==(void 0===n?"undefined":o(n))&&"object"==o(n.versions)&&"string"==typeof n.versions.node;var m,v,g="";h||u||p?(h||p)&&(p?g=self.location.href:"undefined"!=typeof document&&document.currentScript&&(g=document.currentScript.src),a&&(g=a),g=0!==g.indexOf("blob:")?g.substr(0,g.lastIndexOf("/")+1):"",p&&(v=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),m=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}):(v=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):("object"==o(t=read(e,"binary"))||B("Assertion failed: "+void 0),t)},"undefined"!=typeof scriptArgs?l=scriptArgs:void 0!==arguments&&(l=arguments),"function"==typeof quit&&(f=function(e){quit(e)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print));var y,_,b,E=i.print||console.log.bind(console),S=i.printErr||console.warn.bind(console);for(s in c)c.hasOwnProperty(s)&&(i[s]=c[s]);c=null,i.arguments&&(l=i.arguments),i.thisProgram&&(d=i.thisProgram),i.quit&&(f=i.quit),i.wasmBinary&&(y=i.wasmBinary),i.noExitRuntime&&(_=i.noExitRuntime),"object"!=("undefined"==typeof WebAssembly?"undefined":o(WebAssembly))&&B("no native wasm support detected");var C,w,T,D,A=!1,R="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function k(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.subarray&&R)return R.decode(e.subarray(t,i));for(var o="";t<i;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var c=63&e[t++];if((a=224==(240&a)?(15&a)<<12|s<<6|c:(7&a)<<18|s<<12|c<<6|63&e[t++])<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|s)}else o+=String.fromCharCode(a)}return o}function O(e){C=e,i.HEAP8=w=new Int8Array(e),i.HEAP16=new Int16Array(e),i.HEAP32=D=new Int32Array(e),i.HEAPU8=T=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAPU32=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=new Float64Array(e)}i.INITIAL_MEMORY;var j,P=[],I=[],N=[],M=[];I.push({func:function(){re()}});var x=0,L=null,F=null;function B(e){i.onAbort&&i.onAbort(e),S(e+=""),A=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw r(t),t}function U(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}i.preloadedImages={},i.preloadedAudios={};var V="data:application/octet-stream;base64,";function H(e){return U(e,V)}var G="file://";function J(e){return U(e,G)}var z,W="https://sdk.sariska.io/tflite-simd.wasm";function K(e){try{if(e==W&&y)return new Uint8Array(y);if(v)return v(e);throw"both async and sync fetching of the wasm failed"}catch(e){B(e)}}function q(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?j.get(n)():j.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(i)}}H(W)||(W=W),z=u?function(){var e=n.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof dateNow?dateNow:function(){return performance.now()};var $=!0;function X(e){return D[ie()>>2]=e,e}function Y(e){try{return b.grow(e-C.byteLength+65535>>>16),O(b.buffer),1}catch(e){}}var Q={};function Z(){if(!Z.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==("undefined"==typeof navigator?"undefined":o(navigator))&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:d||"./this.program"};for(var t in Q)e[t]=Q[t];var n=[];for(var t in e)n.push(t+"="+e[t]);Z.strings=n}return Z.strings}var ee,te={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=te.buffers[e];0===t||10===t?((1===e?E:S)(k(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return te.varargs+=4,D[te.varargs-4>>2]},getStr:function(e){return function(e,t){return e?k(T,e,void 0):""}(e)},get64:function(e,t){return e}},ne={a:function(){B()},n:function(e,t){var n;if(0===e)n=Date.now();else{if(1!==e&&4!==e||!$)return X(28),-1;n=z()}return D[t>>2]=n/1e3|0,D[t+4>>2]=n%1e3*1e3*1e3|0,0},i:function(e,t){B("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},e:function(e,t){B("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},l:function(e,t,n){T.copyWithin(e,t,t+n)},m:function(e){e>>>=0;var t=T.length;if(e>2147483648)return!1;for(var n,r=1;r<=4;r*=2){var i=t*(1+.2/r);if(i=Math.min(i,e+100663296),Y(Math.min(2147483648,((n=Math.max(16777216,e,i))%65536>0&&(n+=65536-n%65536),n))))return!0}return!1},o:function(e){for(var t=z();z()-t<e;);},p:function(e,t){var n=0;return Z().forEach((function(r,i){var o=t+n;D[e+4*i>>2]=o,function(e,t,n){for(var r=0;r<e.length;++r)w[t++>>0]=e.charCodeAt(r);w[t>>0]=0}(r,o),n+=r.length+1})),0},g:function(e,t){var n=Z();D[e>>2]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),D[t>>2]=r,0},j:function(e){!function(e,t){_||(i.onExit&&i.onExit(e),A=!0),f(e,new oe(e))}(e)},h:function(e){return 0},k:function(e,t,n,r,i){},c:function(e,t,n,r){for(var i=0,o=0;o<n;o++){for(var a=D[t+8*o>>2],s=D[t+(8*o+4)>>2],c=0;c<s;c++)te.printChar(e,T[a+c]);i+=s}return D[r>>2]=i,0},d:function(){return 6},f:function(){return 28},b:function(e){switch(e){case 30:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==("undefined"==typeof navigator?"undefined":o(navigator))&&navigator.hardwareConcurrency||1}return X(28),-1}},re=(function(){var e={a:ne};function t(e,t){var n=e.exports;i.asm=n,O((b=i.asm.q).buffer),j=i.asm.D,function(e){if(x--,i.monitorRunDependencies&&i.monitorRunDependencies(x),0==x&&(null!==L&&(clearInterval(L),L=null),F)){var t=F;F=null,t()}}()}function n(e){t(e.instance)}function o(t){return function(){if(!y&&(h||p)){if("function"==typeof fetch&&!J(W))return fetch(W,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+W+"'";return e.arrayBuffer()})).catch((function(){return K(W)}));if(m)return new Promise((function(e,t){m(W,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return K(W)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){S("failed to asynchronously prepare wasm: "+e),B(e)}))}if(x++,i.monitorRunDependencies&&i.monitorRunDependencies(x),i.instantiateWasm)try{return i.instantiateWasm(e,t)}catch(e){return S("Module.instantiateWasm callback failed with error: "+e),!1}(y||"function"!=typeof WebAssembly.instantiateStreaming||H(W)||J(W)||"function"!=typeof fetch?o(n):fetch(W,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return S("wasm streaming compile failed: "+e),S("falling back to ArrayBuffer instantiation"),o(n)}))}))).catch(r)}(),i.___wasm_call_ctors=function(){return(re=i.___wasm_call_ctors=i.asm.r).apply(null,arguments)}),ie=(i._getModelBufferMemoryOffset=function(){return(i._getModelBufferMemoryOffset=i.asm.s).apply(null,arguments)},i._getInputMemoryOffset=function(){return(i._getInputMemoryOffset=i.asm.t).apply(null,arguments)},i._getInputHeight=function(){return(i._getInputHeight=i.asm.u).apply(null,arguments)},i._getInputWidth=function(){return(i._getInputWidth=i.asm.v).apply(null,arguments)},i._getInputChannelCount=function(){return(i._getInputChannelCount=i.asm.w).apply(null,arguments)},i._getOutputMemoryOffset=function(){return(i._getOutputMemoryOffset=i.asm.x).apply(null,arguments)},i._getOutputHeight=function(){return(i._getOutputHeight=i.asm.y).apply(null,arguments)},i._getOutputWidth=function(){return(i._getOutputWidth=i.asm.z).apply(null,arguments)},i._getOutputChannelCount=function(){return(i._getOutputChannelCount=i.asm.A).apply(null,arguments)},i._loadModel=function(){return(i._loadModel=i.asm.B).apply(null,arguments)},i._runInference=function(){return(i._runInference=i.asm.C).apply(null,arguments)},i.___errno_location=function(){return(ie=i.___errno_location=i.asm.E).apply(null,arguments)});function oe(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function ae(e){function n(){ee||(ee=!0,i.calledRun=!0,A||(q(I),q(N),t(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),function(){if(i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)e=i.postRun.shift(),M.unshift(e);var e;q(M)}()))}e=e||l,x>0||(function(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)e=i.preRun.shift(),P.unshift(e);var e;q(P)}(),x>0||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),n()}),1)):n()))}if(F=function e(){ee||ae(),ee||(F=e)},i.run=ae,i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return _=!0,ae(),e.ready});"object"==o(t)&&"object"==o(r)?r.exports=s:void 0===(i=function(){return s}.apply(t,[]))||(r.exports=i)}).call(this,"/index.js",n(115),n(98)(e))},function(e,t,n){"use strict";function r(e){var t=e.isOnline,n=e.networkType,r=e.details,i={isOnline:t};return n&&(i.networkType=n),r&&(i.details=r),{action:"network.info",attributes:i}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var o=i((function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.blob=t,this.name=n,this.startTime=r,this.wordArray=i}));function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var c=s((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.track=t,this.recorder=null,this.data=null,this.name=null,this.startTime=null}));function u(e){if(void 0===e.recorder)throw new Error("Passed an object to startRecorder which is not a TrackRecorder object");e.recorder.start(),e.startTime=new Date}function l(e){if(void 0===e.recorder)throw new Error("Passed an object to stopRecorder which is not a TrackRecorder object");e.recorder.stop()}function d(){if(MediaRecorder.isTypeSupported("audio/webm"))return"audio/webm";if(MediaRecorder.isTypeSupported("audio/ogg"))return"audio/ogg";throw new Error("unable to create a MediaRecorder with the right mimetype!")}function f(e){this.recorders=[],this.fileType=d(),this.isRecording=!1,this.jitsiConference=e}f.determineCorrectFileType=d,f.prototype.addTrack=function(e){if(e.isAudioTrack()){var t=this.instantiateTrackRecorder(e);this.recorders.push(t),this.updateNames(),this.isRecording&&u(t)}},f.prototype.instantiateTrackRecorder=function(e){var t=new c(e),n=t.track.getOriginalStream(),r=new MediaStream;return n.getAudioTracks().forEach((function(e){return r.addTrack(e)})),t.recorder=new MediaRecorder(r,{mimeType:this.fileType}),t.data=[],t.recorder.ondataavailable=function(e){e.data.size>0&&t.data.push(e.data)},t},f.prototype.removeTrack=function(e){if(!e.isVideoTrack()){var t,n=this.recorders;for(t=0;t<n.length;t++)if(n[t].track.getParticipantId()===e.getParticipantId()){var r=n[t];this.isRecording?l(r):n.splice(t,1)}this.updateNames()}},f.prototype.updateNames=function(){var e=this.jitsiConference;this.recorders.forEach((function(t){if(t.track.isLocal())t.name="the transcriber";else{var n=t.track.getParticipantId(),r=e.getParticipantById(n).getDisplayName();"undefined"!==r&&(t.name=r)}}))},f.prototype.start=function(){if(this.isRecording)throw new Error("audiorecorder is already recording");this.isRecording=!0,this.recorders.forEach((function(e){return u(e)})),console.log("Started the recording of the audio. There are currently ".concat(this.recorders.length," recorders active."))},f.prototype.stop=function(){this.isRecording=!1,this.recorders.forEach((function(e){return l(e)})),console.log("stopped recording")},f.prototype.download=function(){var e=this;this.recorders.forEach((function(t){var n=new Blob(t.data,{type:e.fileType}),r=URL.createObjectURL(n),i=document.createElement("a");document.body.appendChild(i),i.style="display: none",i.href=r,i.download="test.".concat(e.fileType.split("/")[1]),i.click(),window.URL.revokeObjectURL(r)}))},f.prototype.getRecordingResults=function(){var e=this;if(this.isRecording)throw new Error("cannot get blobs because the AudioRecorder is still recording!");this.updateNames();var t=[];return this.recorders.forEach((function(n){return t.push(new o(new Blob(n.data,{type:e.fileType}),n.name,n.startTime))})),t},f.prototype.getFileType=function(){return this.fileType};var h=f;function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.word=t,this.begin=n,this.end=r}var t,n,r;return t=e,(n=[{key:"getWord",value:function(){return this.word}},{key:"getBeginTime",value:function(){return this.begin}},{key:"getEndTime",value:function(){return this.end}}])&&p(t.prototype,n),r&&p(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var i=S(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(o,e);var t,n,r,i=b(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this)).url=function(){var e="config does not contain an url to a Sphinx4 https server";if(void 0===config.sphinxURL)console.log(e);else{var t=config.sphinxURL;if(void 0!==t.includes&&t.includes("https://"))return t;console.log(e)}}(),e}return t=o,(n=[{key:"sendRequest",value:function(e,t){console.log("sending an audio file  to ".concat(this.url)),console.log("the audio file being sent: ".concat(e));var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE&&200===n.status)t(n.responseText);else if(n.readyState===XMLHttpRequest.DONE)throw new Error("unable to accept response from sphinx server. status: ".concat(n.status))},n.open("POST",this.url),n.setRequestHeader("Content-Type",h.determineCorrectFileType()),n.send(e),console.log("send ".concat(e))}},{key:"formatResponse",value:function(e){var t=JSON.parse(e).objects;t.shift();var n=[];return t.forEach((function(e){return e.filler||n.push(new m(e.word,e.start,e.end))})),n}},{key:"verify",value:function(e){if(console.log("response from server:".concat(e.toString())),"string"!=typeof e)return!1;var t;try{t=JSON.parse(e)}catch(e){return console.log(e),!1}if(void 0===t.objects)return!1;var n=t.objects;return!(!n[0]||!n[0]["session-id"])}}])&&y(t.prototype,n),r&&y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(function(){function e(){throw function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),new Error("TranscriptionService is abstract and cannot be created")}var t,n,r;return t=e,(n=[{key:"send",value:function(e,t){var n=this;this.sendRequest(e.blob,(function(r){n.verify(r)?e.wordArray=n.formatResponse(r):(console.log("the retrieved response from the server is not valid!"),e.wordArray=[]),t(e)}))}},{key:"sendRequest",value:function(e,t){throw new Error("TranscriptionService.sendRequest is abstract")}},{key:"formatResponse",value:function(e){throw new Error("TranscriptionService.format is abstract")}},{key:"verify",value:function(e){throw new Error("TranscriptionService.verify is abstract")}}])&&v(t.prototype,n),r&&v(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());function w(){this.audioRecorder=new h,this.transcriptionService=new C,this.counter=null,this.startTime=null,this.transcription=null,this.callback=null,this.results=[],this.state="before",this.lineLength=0}function T(e,t){if(console.log("retrieved an answer from the transcription service. The answer has an"+" array of length: ".concat(t.wordArray.length)),t.wordArray.length>0){var n=t.startTime.getUTCMilliseconds()-e.startTime.getUTCMilliseconds();n<0&&(n=0);var r="[";t.wordArray.forEach((function(e){e.begin+=n,e.end+=n,r+="".concat(e.word,",")})),r+="]",console.log(r),t.wordArray.name=t.name}e.results.push(t.wordArray),e.counter--,console.log("current counter: ".concat(e.counter)),e.maybeMerge()}function D(e){for(var t=0;t<e.length;t++)0===e[t].length&&e.splice(t,1);return e.length>0}w.prototype.start=function(){if("before"!==this.state)throw new Error("The transcription can only start when it's in the \"".concat("before",'" state. It\'s currently in the "').concat(this.state,'" state'));this.state="recording",this.audioRecorder.start(),this.startTime=new Date},w.prototype.stop=function(e){var t=this;if("recording"!==this.state)throw new Error("The transcription can only stop when it's in the \"".concat("recording",'" state. It\'s currently in the "').concat(this.state,'" state'));console.log("stopping recording and sending audio files"),this.audioRecorder.stop();var n=T.bind(null,this);this.audioRecorder.getRecordingResults().forEach((function(e){t.transcriptionService.send(e,n),t.counter++})),this.state="transcribing",this.callback=e},w.prototype.maybeMerge=function(){"transcribing"===this.state&&0===this.counter&&this.merge()},w.prototype.merge=function(){var e=this;console.log("starting merge process!\n The length of the array: ".concat(this.results.length)),this.transcription="";var t=this.results,n=[];D(t),t.forEach((function(e){return function(e,t){if(0===e.length)e.push(t);else{if(e[e.length-1].begin<=t.begin)return void e.push(t);for(var n=0;n<e.length;n++)if(t.begin<e[n].begin)return void e.splice(n,0,t);e.push(t)}}(n,e)}));for(var r=function(){var n=t[0];t.forEach((function(e){e[0].begin<n[0].begin&&(n=e)}));var r=n.shift();e.updateTranscription(r,n.name);for(var i=function(){var i=!1,o=n[0].begin;if(t.forEach((function(e){e[0].begin<o&&(i=!0)})),i)return"break";r=n.shift(),e.updateTranscription(r,null)};n.length>0;){if("break"===i())break}};D(t);)r();this.state="finished",this.callback&&this.callback(this.transcription)},w.prototype.updateTranscription=function(e,t){null!=t&&(this.transcription+="\n".concat(t,":"),this.lineLength=t.length+1),this.lineLength+e.word.length>80&&(this.transcription+="\n    ",this.lineLength=4),this.transcription+=" ".concat(e.word),this.lineLength+=e.word.length+1},w.prototype.addTrack=function(e){this.audioRecorder.addTrack(e)},w.prototype.removeTrack=function(e){this.audioRecorder.removeTrack(e)},w.prototype.getTranscription=function(){if("finished"!==this.state)throw new Error("The transcription can only be retrieved when it's in the \"".concat("finished",'" state. It\'s currently in the "').concat(this.state,'" state'));return this.transcription},w.prototype.getState=function(){return this.state},w.prototype.reset=function(){this.state="before",this.counter=null,this.transcription=null,this.startTime=null,this.callback=null,this.results=[],this.lineLength=0};t.a=w},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(80),i=n.n(r),o=n(226),a=n.n(o),s=function(e,t){return void 0!==e&&void 0!==e.media&&Array.isArray(e.media)&&e.media.forEach((function(e){e.sources&&e.sources.length&&(e.ssrcs=[],e.sources.forEach((function(t){Object.keys(t).forEach((function(n){"id"!==n&&e.ssrcs.push({id:t.id,attribute:n,value:t[n]})}))})),delete e.sources),e.ssrcGroups&&e.ssrcGroups.length&&e.ssrcGroups.forEach((function(e){void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&(e.ssrcs=e.ssrcs.join(" "))}))})),a.a.write(e,t)},c=function(e){var t=a.a.parse(e);return void 0!==t&&void 0!==t.media&&Array.isArray(t.media)&&t.media.forEach((function(e){void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&(e.sources=[],e.ssrcs.forEach((function(t){var n=e.sources.findIndex((function(e){return e.id===t.id}));if(n>-1)e.sources[n][t.attribute]=t.value;else{var r={id:t.id};r[t.attribute]=t.value,e.sources.push(r)}})),delete e.ssrcs),void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&e.ssrcGroups.forEach((function(e){"string"==typeof e.ssrcs&&(e.ssrcs=e.ssrcs.split(" "))}))})),t};function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=["audio","video","data"],d=function(e){return e.find((function(e){return"SIM"===e.semantics}))},f=function(e){return e.find((function(e){return"FID"===e.semantics}))};function h(e,t,n,r){if(e&&t){var i=function(e){return r.find((function(t){return t.id.toString()===e}))};t.ssrcs.forEach((function(t){e.sources.push(i(t));var r=n[parseInt(t,10)].find((function(e){return"FID"===e.semantics}));if(r){var o=r.ssrcs.find((function(e){return e!==t}));e.sources.push(i(o)),e.ssrcGroups.push(r)}})),e.ssrcGroups.push(t)}}function p(e,t,n,r){if(e&&t){if(e.sources=[],e.ssrcGroups=[],!n[t.id])return e.sources.push(t),void(e.msid=t.msid);var i=d(n[t.id]),o=f(n[t.id]);if(i)h(e,i,n,r);else if(o){var a=o.ssrcs.find((function(e){return e!==t})),s=d(n[a]);s?h(e,s,n,r):(o.ssrcs.forEach((function(t){e.sources.push(function(e){return r.find((function(t){return t.id.toString()===e}))}(t))})),e.ssrcGroups.push(o))}e.msid=e.sources[0].msid}}function m(e,t,n){if(!n.find((function(t){return!!t.sources&&t.sources.some((function(t){return t.id===e.id}))}))){if(!t[e.id])return!1;var r=d(t[e.id]),i=f(t[e.id]);return r?n.some((function(e){return e.sources&&e.sources.some((function(e){return e.id.toString()===r.ssrcs[0]}))})):!(!i||e.id.toString()===i.ssrcs[0])&&m({id:i.ssrcs[0]},t,n)}return!0}function v(e){var t={};return e&&Array.isArray(e)?(e.forEach((function(e){e.ssrcs&&Array.isArray(e.ssrcs)&&e.ssrcs.forEach((function(n){void 0===t[n]&&(t[n]=[]),t[n].push(e)}))})),t):t}function g(e,t){if(!e||!t||0===e.media.length||0===t.media.length)return!1;var n=e.media[0],r=t.media[0];return n.iceUfrag!==r.iceUfrag||n.icePwd!==r.icePwd}var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"toPlanB",value:function(e){if(!e||"string"!=typeof e.sdp)return console.warn("An empty description was passed as an argument."),e;var t=c(e.sdp);if(!t.media||!t.media.length)return console.warn("The description has no media."),e;if(t.media.every((function(e){return-1!==l.indexOf(e.mid)})))return console.warn("The description does not look like unified plan sdp"),e;var n={},r=t.media;t.media=[],r.forEach((function(e){var t=e.type;if("application"===t)return e.mid="data",void(n[e.mid]=e);if(void 0===n[t]){var r=i()(e);r.sources&&Array.isArray(r.sources)&&r.sources.forEach((function(t){e.msid?t.msid=e.msid:delete t.msid})),r.ssrcGroups&&e.msid||(r.ssrcGroups=[]),delete r.msid,r.mid=t,n[t]=r}else if(e.msid){var o=i()(e);o.sources&&Array.isArray(o.sources)&&(o.sources.forEach((function(t){t.msid=e.msid})),n[t].sources=(n[t].sources||[]).concat(o.sources)),void 0!==o.ssrcGroups&&Array.isArray(o.ssrcGroups)&&(n[t].ssrcGroups=(n[t].ssrcGroups||[]).concat(o.ssrcGroups))}})),t.media=Object.values(n);var o=[];Object.values(n).forEach((function(e){"inactive"!==e.direction&&o.push(e.mid)})),t.groups.forEach((function(e){"BUNDLE"===e.type&&(e.mids=o.join(" "))})),t.msidSemantic={semantic:"WMS",token:"*"};var a=s(t);return new RTCSessionDescription({type:e.type,sdp:a})}},{key:"toUnifiedPlan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e||"string"!=typeof e.sdp)return console.warn("An empty description was passed as an argument."),e;var n=c(e.sdp);if(!n.media||!n.media.length)return console.warn("The description has no media."),e;if(n.media.length>3||n.media.every((function(e){return-1===l.indexOf(e.mid)})))return console.warn("The description does not look like plan-b"),e;var r=t?c(t.sdp):null,o=g(n,r),a=n.media[0].iceUfrag,u=n.media[0].icePwd,d=n.media[0].fingerprint,f={};n.media.forEach((function(e){var t=e.type;if("application"!==t){var n=v(e.ssrcGroups);if(e.sources)e.sources.forEach((function(t,o){if(t.msid){if(!r||!r.media){if(m(t,n,Object.values(f)))return;var a=i()(e);return a.mid=Object.keys(f).length.toString(),a.direction=o||"sendonly"===e.direction?"sendonly":"sendrecv",a.bundleOnly=void 0,p(a,t,n,e.sources),void(f[a.mid]=a)}if(!m(t,n,r.media)){var s=i()(e);s.mid=r.media.length.toString(),s.direction="sendonly",p(s,t,n,e.sources),r.media.push(s)}}}));else if(!r){var o=i()(e);o.mid=Object.keys(f).length.toString(),f[e.mid]=o}}else{if(!r||!r.media){var a=i()(e);return a.mid=Object.keys(f).length.toString(),void(f[e.mid]=a)}var s=r.media.findIndex((function(e){return e.type===t}));s&&(r.media[s]=e,r.media[s].mid=s)}})),n.media=r?r.media:Object.values(f);var h=[];n.media.forEach((function(e){h.push(e.mid),o&&(e.iceUfrag=a,e.icePwd=u,e.fingerprint=d)})),n.groups.forEach((function(e){"BUNDLE"===e.type&&(e.mids=h.join(" "))})),n.msidSemantic={semantic:"WMS",token:"*"},n.origin.sessionVersion++;var y=s(n);return new RTCSessionDescription({type:e.type,sdp:y})}}])&&u(t.prototype,n),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(303),i=n(45),o=n(8),a=n(41),s=n(11),c=n(79),u=n(130),l=n.n(u),d=["__proto__","constructor","prototype"];function f(e){var t=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=location.search?location.search:location.hash,n={},r=t&&t.substr(1).split("&")||[];if(location.hash&&1===r.length){var i=r[0];if(i.startsWith("/")&&1===i.split("&").length)return n}return r.forEach((function(t){var r=t.split("="),i=r[0];if(i&&!d.includes(i.split(".")[0])){var o;try{if(o=r[1],!e){var a=decodeURIComponent(o).replace(/\\&/,"&");o="undefined"===a?void 0:l.a.parse(a)}}catch(e){return void console.log("Failed to parse URL parameter value: ".concat(String(o)))}n[i]=o}})),n}();return Object.keys(t).forEach((function(n){var r=n.replace("config.","");switch(r){case"analytics.disabled":e.analytics.disabled=t[n];break;case"startWithAudioMuted":e.startAudioMuted=t[n];break;case"startWithVideoMuted":e.startVideoMuted=t[n];break;case"p2p.enabled":e.p2p.enabled=t[n];break;default:e[r]=t[n]}})),console.log("conferenceConfig",e),e}var h=n(135);function p(e,t,n){var r,c=this.parseJwt(e);this.name=t,this.user=c.context.user,(r=n?Object.assign({},h.c):Object.assign({},h.b)).serviceUrl="".concat(r.serviceUrl,"?room=").concat(t),this.options=r,this.xmpp=new a.e(r,e),this.token=e,this.isDev=n,this.addEventListener(i.CONNECTION_FAILED,(function(e,t,n,r){o.a.sendAnalyticsAndLog(Object(s.B)(e,t,r))})),this.addEventListener(i.CONNECTION_DISCONNECTED,(function(e){e&&o.a.sendAnalytics(s.m,{message:e}),o.a.sendLog(JSON.stringify({id:s.m,msg:e}))}))}p.prototype.parseJwt=function(e){try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return null}},p.prototype.connect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=c.b.getItem("xmpp_username_override"),n=c.b.getItem("xmpp_password_override");t&&t.length>0&&(e.id=t),n&&n.length>0&&(e.password=n),this.xmpp.connect(e.id,e.password)},p.prototype.attach=function(e){this.xmpp.attach(e)},p.prototype.disconnect=function(){var e;return(e=this.xmpp).disconnect.apply(e,arguments)},p.prototype.getJid=function(){return this.xmpp.getJid()},p.prototype.setToken=function(e){this.token=e},p.prototype.initJitsiConference=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=f(e=Object.assign(Object.assign({},h.a),e));var t=this.name;return this.isDev&&(e=Object.assign(Object.assign({},e),{hiddenDomain:"recorder.dev.sariska.io"})),e.iAmRecorder&&this.addFeature("http://jitsi.org/protocol/jibri"),new r.a({name:t,config:e,connection:this,user:this.user})},p.prototype.addEventListener=function(e,t){this.xmpp.addListener(e,t)},p.prototype.removeEventListener=function(e,t){this.xmpp.removeListener(e,t)},p.prototype.getConnectionTimes=function(){return this.xmpp.connectionTimes},p.prototype.addFeature=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.xmpp.caps.addFeature(e,t,!0)},p.prototype.removeFeature=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.xmpp.caps.removeFeature(e,t,!0)},p.prototype.getLogs=function(){var e=this.xmpp.getJingleLog(),t={};t.time=new Date,t.url=window.location.href,t.ua=navigator.userAgent;var n=this.xmpp.getXmppLog();return n&&(t.xmpp=n),e.metadata=t,e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a}));var r=n(282)},function(e,t,n){e.exports=n(379)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),window.Colly={},n(380),n(582);var r=n(583).renderSync(),i=document.createElement("div");i.id="cb__toolbox_container",document.body&&document.body.appendChild(i),r.appendTo(i)},function(e,t,n){"use strict";(function(e){if(n(381),n(578),n(579),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;function t(e,t,n){e[t]||Object.defineProperty(e,t,{writable:!0,configurable:!0,value:n})}t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach((function(e){[][e]&&t(Array,e,Function.call.bind([][e]))}))}).call(this,n(53))},function(e,t,n){n(382),n(385),n(386),n(387),n(388),n(389),n(390),n(391),n(392),n(393),n(394),n(395),n(396),n(397),n(398),n(399),n(400),n(401),n(402),n(403),n(404),n(405),n(406),n(407),n(408),n(409),n(410),n(411),n(412),n(413),n(414),n(415),n(416),n(417),n(418),n(419),n(420),n(421),n(422),n(423),n(424),n(425),n(426),n(427),n(428),n(429),n(430),n(431),n(432),n(433),n(434),n(435),n(436),n(437),n(438),n(439),n(440),n(441),n(442),n(443),n(444),n(445),n(446),n(447),n(448),n(449),n(450),n(451),n(452),n(453),n(454),n(455),n(456),n(457),n(458),n(459),n(460),n(462),n(463),n(465),n(466),n(467),n(468),n(469),n(470),n(471),n(473),n(474),n(475),n(476),n(477),n(478),n(479),n(480),n(481),n(482),n(483),n(484),n(485),n(207),n(486),n(249),n(487),n(250),n(488),n(489),n(490),n(491),n(492),n(253),n(255),n(256),n(493),n(494),n(495),n(496),n(497),n(498),n(499),n(500),n(501),n(502),n(503),n(504),n(505),n(506),n(507),n(508),n(509),n(510),n(511),n(512),n(513),n(514),n(515),n(516),n(517),n(518),n(519),n(520),n(521),n(522),n(523),n(524),n(525),n(526),n(527),n(528),n(529),n(530),n(531),n(532),n(533),n(534),n(535),n(536),n(537),n(538),n(539),n(540),n(541),n(542),n(543),n(544),n(545),n(546),n(547),n(548),n(549),n(550),n(551),n(552),n(553),n(554),n(555),n(556),n(557),n(558),n(559),n(560),n(561),n(562),n(563),n(564),n(565),n(566),n(567),n(568),n(569),n(570),n(571),n(572),n(573),n(574),n(575),n(576),n(577),e.exports=n(73)},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(27),o=n(65),a=n(39),s=n(6),c=n(59),u=n(96).KEY,l=n(29),d=n(136),f=n(122),h=n(104),p=n(36),m=n(231),v=n(188),g=n(384),y=n(153),_=n(25),b=n(31),E=n(44),S=n(66),C=n(81),w=n(103),T=n(107),D=n(234),A=n(67),R=n(152),k=n(42),O=n(105),j=A.f,P=k.f,I=D.f,N=i.Symbol,M=i.JSON,x=M&&M.stringify,L=p("_hidden"),F=p("toPrimitive"),B={}.propertyIsEnumerable,U=d("symbol-registry"),V=d("symbols"),H=d("op-symbols"),G=Object.prototype,J="function"==typeof N&&!!R.f,z=i.QObject,W=!z||!z.prototype||!z.prototype.findChild,K=a&&l((function(){return 7!=T(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=j(G,t);r&&delete G[t],P(e,t,n),r&&e!==G&&P(G,t,r)}:P,q=function(e){var t=V[e]=T(N.prototype);return t._k=e,t},$=J&&"symbol"==r(N.iterator)?function(e){return"symbol"==r(e)}:function(e){return e instanceof N},X=function(e,t,n){return e===G&&X(H,t,n),_(e),t=C(t,!0),_(n),o(V,t)?(n.enumerable?(o(e,L)&&e[L][t]&&(e[L][t]=!1),n=T(n,{enumerable:w(0,!1)})):(o(e,L)||P(e,L,w(1,{})),e[L][t]=!0),K(e,t,n)):P(e,t,n)},Y=function(e,t){_(e);for(var n,r=g(t=S(t)),i=0,o=r.length;o>i;)X(e,n=r[i++],t[n]);return e},Q=function(e){var t=B.call(this,e=C(e,!0));return!(this===G&&o(V,e)&&!o(H,e))&&(!(t||!o(this,e)||!o(V,e)||o(this,L)&&this[L][e])||t)},Z=function(e,t){if(e=S(e),t=C(t,!0),e!==G||!o(V,t)||o(H,t)){var n=j(e,t);return!n||!o(V,t)||o(e,L)&&e[L][t]||(n.enumerable=!0),n}},ee=function(e){for(var t,n=I(S(e)),r=[],i=0;n.length>i;)o(V,t=n[i++])||t==L||t==u||r.push(t);return r},te=function(e){for(var t,n=e===G,r=I(n?H:S(e)),i=[],a=0;r.length>a;)!o(V,t=r[a++])||n&&!o(G,t)||i.push(V[t]);return i};J||(c((N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function t(n){this===G&&t.call(H,n),o(this,L)&&o(this[L],e)&&(this[L][e]=!1),K(this,e,w(1,n))};return a&&W&&K(G,e,{configurable:!0,set:t}),q(e)}).prototype,"toString",(function(){return this._k})),A.f=Z,k.f=X,n(108).f=D.f=ee,n(138).f=Q,R.f=te,a&&!n(95)&&c(G,"propertyIsEnumerable",Q,!0),m.f=function(e){return q(p(e))}),s(s.G+s.W+s.F*!J,{Symbol:N});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;ne.length>re;)p(ne[re++]);for(var ie=O(p.store),oe=0;ie.length>oe;)v(ie[oe++]);s(s.S+s.F*!J,"Symbol",{for:function(e){return o(U,e+="")?U[e]:U[e]=N(e)},keyFor:function(e){if(!$(e))throw TypeError(e+" is not a symbol!");for(var t in U)if(U[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),s(s.S+s.F*!J,"Object",{create:function(e,t){return void 0===t?T(e):Y(T(e),t)},defineProperty:X,defineProperties:Y,getOwnPropertyDescriptor:Z,getOwnPropertyNames:ee,getOwnPropertySymbols:te});var ae=l((function(){R.f(1)}));s(s.S+s.F*ae,"Object",{getOwnPropertySymbols:function(e){return R.f(E(e))}}),M&&s(s.S+s.F*(!J||l((function(){var e=N();return"[null]"!=x([e])||"{}"!=x({a:e})||"{}"!=x(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!$(e))return y(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!$(t))return t}),r[1]=t,x.apply(M,r)}}),N.prototype[F]||n(58)(N.prototype,F,N.prototype.valueOf),f(N,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},function(e,t,n){e.exports=n(136)("native-function-to-string",Function.toString)},function(e,t,n){var r=n(105),i=n(152),o=n(138);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),c=o.f,u=0;s.length>u;)c.call(e,a=s[u++])&&t.push(a);return t}},function(e,t,n){var r=n(6);r(r.S,"Object",{create:n(107)})},function(e,t,n){var r=n(6);r(r.S+r.F*!n(39),"Object",{defineProperty:n(42).f})},function(e,t,n){var r=n(6);r(r.S+r.F*!n(39),"Object",{defineProperties:n(233)})},function(e,t,n){var r=n(66),i=n(67).f;n(83)("getOwnPropertyDescriptor",(function(){return function(e,t){return i(r(e),t)}}))},function(e,t,n){var r=n(44),i=n(68);n(83)("getPrototypeOf",(function(){return function(e){return i(r(e))}}))},function(e,t,n){var r=n(44),i=n(105);n(83)("keys",(function(){return function(e){return i(r(e))}}))},function(e,t,n){n(83)("getOwnPropertyNames",(function(){return n(234).f}))},function(e,t,n){var r=n(31),i=n(96).onFreeze;n(83)("freeze",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(31),i=n(96).onFreeze;n(83)("seal",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(31),i=n(96).onFreeze;n(83)("preventExtensions",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(31);n(83)("isFrozen",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,n){var r=n(31);n(83)("isSealed",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,n){var r=n(31);n(83)("isExtensible",(function(e){return function(t){return!!r(t)&&(!e||e(t))}}))},function(e,t,n){var r=n(6);r(r.S+r.F,"Object",{assign:n(235)})},function(e,t,n){var r=n(6);r(r.S,"Object",{is:n(236)})},function(e,t,n){var r=n(6);r(r.S,"Object",{setPrototypeOf:n(192).set})},function(e,t,n){"use strict";var r=n(123),i={};i[n(36)("toStringTag")]="z",i+""!="[object z]"&&n(59)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},function(e,t,n){var r=n(6);r(r.P,"Function",{bind:n(237)})},function(e,t,n){var r=n(42).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n(39)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(31),i=n(68),o=n(36)("hasInstance"),a=Function.prototype;o in a||n(42).f(a,o,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var r=n(6),i=n(239);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(e,t,n){var r=n(6),i=n(240);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(e,t,n){"use strict";var r=n(27),i=n(65),o=n(75),a=n(194),s=n(81),c=n(29),u=n(108).f,l=n(67).f,d=n(42).f,f=n(124).trim,h=r.Number,p=h,m=h.prototype,v="Number"==o(n(107)(m)),g="trim"in String.prototype,y=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){var n,r,i,o=(t=g?t.trim():f(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var a,c=t.slice(2),u=0,l=c.length;u<l;u++)if((a=c.charCodeAt(u))<48||a>i)return NaN;return parseInt(c,r)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof h&&(v?c((function(){m.valueOf.call(n)})):"Number"!=o(n))?a(new p(y(t)),n,h):y(t)};for(var _,b=n(39)?u(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;b.length>E;E++)i(p,_=b[E])&&!i(h,_)&&d(h,_,l(p,_));h.prototype=m,m.constructor=h,n(59)(r,"Number",h)}},function(e,t,n){"use strict";var r=n(6),i=n(76),o=n(241),a=n(195),s=1..toFixed,c=Math.floor,u=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",d=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*u[n],u[n]=r%1e7,r=c(r/1e7)},f=function(e){for(var t=6,n=0;--t>=0;)n+=u[t],u[t]=c(n/e),n=n%e*1e7},h=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==u[e]){var n=String(u[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t},p=function e(t,n,r){return 0===n?r:n%2==1?e(t,n-1,r*t):e(t*t,n/2,r)};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(29)((function(){s.call({})}))),"Number",{toFixed:function(e){var t,n,r,s,c=o(this,l),u=i(e),m="",v="0";if(u<0||u>20)throw RangeError(l);if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(m="-",c=-c),c>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(c*p(2,69,1))-69)<0?c*p(2,-t,1):c/p(2,t,1),n*=4503599627370496,(t=52-t)>0){for(d(0,n),r=u;r>=7;)d(1e7,0),r-=7;for(d(p(10,r,1),0),r=t-1;r>=23;)f(1<<23),r-=23;f(1<<r),d(1,1),f(2),v=h()}else d(0,n),d(1<<-t,0),v=h()+a.call("0",u);return v=u>0?m+((s=v.length)<=u?"0."+a.call("0",u-s)+v:v.slice(0,s-u)+"."+v.slice(s-u)):m+v}})},function(e,t,n){"use strict";var r=n(6),i=n(29),o=n(241),a=1..toPrecision;r(r.P+r.F*(i((function(){return"1"!==a.call(1,void 0)}))||!i((function(){a.call({})}))),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},function(e,t,n){var r=n(6);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var r=n(6),i=n(27).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,n){var r=n(6);r(r.S,"Number",{isInteger:n(242)})},function(e,t,n){var r=n(6);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(6),i=n(242),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},function(e,t,n){var r=n(6);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var r=n(6);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(6),i=n(240);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(e,t,n){var r=n(6),i=n(239);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,n){var r=n(6),i=n(243),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+o(e-1)*o(e+1))}})},function(e,t,n){var r=n(6),i=Math.asinh;r(r.S+r.F*!(i&&1/i(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,n){var r=n(6),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var r=n(6),i=n(196);r(r.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,n){var r=n(6);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var r=n(6),i=Math.exp;r(r.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,n){var r=n(6),i=n(197);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t,n){var r=n(6);r(r.S,"Math",{fround:n(244)})},function(e,t,n){var r=n(6),i=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,o=0,a=0,s=arguments.length,c=0;a<s;)c<(n=i(arguments[a++]))?(o=o*(r=c/n)*r+1,c=n):o+=n>0?(r=n/c)*r:n;return c===1/0?1/0:c*Math.sqrt(o)}})},function(e,t,n){var r=n(6),i=Math.imul;r(r.S+r.F*n(29)((function(){return-5!=i(4294967295,5)||2!=i.length})),"Math",{imul:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},function(e,t,n){var r=n(6);r(r.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,n){var r=n(6);r(r.S,"Math",{log1p:n(243)})},function(e,t,n){var r=n(6);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var r=n(6);r(r.S,"Math",{sign:n(196)})},function(e,t,n){var r=n(6),i=n(197),o=Math.exp;r(r.S+r.F*n(29)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,n){var r=n(6),i=n(197),o=Math.exp;r(r.S,"Math",{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},function(e,t,n){var r=n(6);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){var r=n(6),i=n(106),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){var r=n(6),i=n(66),o=n(38);r(r.S,"String",{raw:function(e){for(var t=i(e.raw),n=o(t.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(t[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(e,t,n){"use strict";n(124)("trim",(function(e){return function(){return e(this,3)}}))},function(e,t,n){"use strict";var r=n(154)(!0);n(198)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var r=n(6),i=n(154)(!1);r(r.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(6),i=n(38),o=n(200),a="".endsWith;r(r.P+r.F*n(201)("endsWith"),"String",{endsWith:function(e){var t=o(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=i(t.length),s=void 0===n?r:Math.min(i(n),r),c=String(e);return a?a.call(t,c,s):t.slice(s-c.length,s)===c}})},function(e,t,n){"use strict";var r=n(6),i=n(200);r(r.P+r.F*n(201)("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(6);r(r.P,"String",{repeat:n(195)})},function(e,t,n){"use strict";var r=n(6),i=n(38),o=n(200),a="".startsWith;r(r.P+r.F*n(201)("startsWith"),"String",{startsWith:function(e){var t=o(this,e,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return a?a.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){"use strict";n(60)("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))},function(e,t,n){"use strict";n(60)("big",(function(e){return function(){return e(this,"big","","")}}))},function(e,t,n){"use strict";n(60)("blink",(function(e){return function(){return e(this,"blink","","")}}))},function(e,t,n){"use strict";n(60)("bold",(function(e){return function(){return e(this,"b","","")}}))},function(e,t,n){"use strict";n(60)("fixed",(function(e){return function(){return e(this,"tt","","")}}))},function(e,t,n){"use strict";n(60)("fontcolor",(function(e){return function(t){return e(this,"font","color",t)}}))},function(e,t,n){"use strict";n(60)("fontsize",(function(e){return function(t){return e(this,"font","size",t)}}))},function(e,t,n){"use strict";n(60)("italics",(function(e){return function(){return e(this,"i","","")}}))},function(e,t,n){"use strict";n(60)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},function(e,t,n){"use strict";n(60)("small",(function(e){return function(){return e(this,"small","","")}}))},function(e,t,n){"use strict";n(60)("strike",(function(e){return function(){return e(this,"strike","","")}}))},function(e,t,n){"use strict";n(60)("sub",(function(e){return function(){return e(this,"sub","","")}}))},function(e,t,n){"use strict";n(60)("sup",(function(e){return function(){return e(this,"sup","","")}}))},function(e,t,n){var r=n(6);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var r=n(6),i=n(44),o=n(81);r(r.P+r.F*n(29)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(e){var t=i(this),n=o(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var r=n(6),i=n(461);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(e,t,n){"use strict";var r=n(29),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(e){return e>9?e:"0"+e};e.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-50000000000001))}))||!r((function(){o.call(new Date(NaN))}))?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:o},function(e,t,n){var r=Date.prototype,i=r.toString,o=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(59)(r,"toString",(function(){var e=o.call(this);return e==e?i.call(this):"Invalid Date"}))},function(e,t,n){var r=n(36)("toPrimitive"),i=Date.prototype;r in i||n(58)(i,r,n(464))},function(e,t,n){"use strict";var r=n(25),i=n(81);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(r(this),"number"!=e)}},function(e,t,n){var r=n(6);r(r.S,"Array",{isArray:n(153)})},function(e,t,n){"use strict";var r=n(74),i=n(6),o=n(44),a=n(245),s=n(202),c=n(38),u=n(203),l=n(204);i(i.S+i.F*!n(156)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,i,d,f=o(e),h="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,v=void 0!==m,g=0,y=l(f);if(v&&(m=r(m,p>2?arguments[2]:void 0,2)),null==y||h==Array&&s(y))for(n=new h(t=c(f.length));t>g;g++)u(n,g,v?m(f[g],g):f[g]);else for(d=y.call(f),n=new h;!(i=d.next()).done;g++)u(n,g,v?a(d,m,[i.value,g],!0):i.value);return n.length=g,n}})},function(e,t,n){"use strict";var r=n(6),i=n(203);r(r.S+r.F*n(29)((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)i(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(6),i=n(66),o=[].join;r(r.P+r.F*(n(137)!=Object||!n(77)(o)),"Array",{join:function(e){return o.call(i(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(6),i=n(191),o=n(75),a=n(106),s=n(38),c=[].slice;r(r.P+r.F*n(29)((function(){i&&c.call(i)})),"Array",{slice:function(e,t){var n=s(this.length),r=o(this);if(t=void 0===t?n:t,"Array"==r)return c.call(this,e,t);for(var i=a(e,n),u=a(t,n),l=s(u-i),d=new Array(l),f=0;f<l;f++)d[f]="String"==r?this.charAt(i+f):this[i+f];return d}})},function(e,t,n){"use strict";var r=n(6),i=n(50),o=n(44),a=n(29),s=[].sort,c=[1,2,3];r(r.P+r.F*(a((function(){c.sort(void 0)}))||!a((function(){c.sort(null)}))||!n(77)(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),i(e))}})},function(e,t,n){"use strict";var r=n(6),i=n(84)(0),o=n(77)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var r=n(31),i=n(153),o=n(36)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var r=n(6),i=n(84)(1);r(r.P+r.F*!n(77)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(6),i=n(84)(2);r(r.P+r.F*!n(77)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(6),i=n(84)(3);r(r.P+r.F*!n(77)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(6),i=n(84)(4);r(r.P+r.F*!n(77)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(6),i=n(246);r(r.P+r.F*!n(77)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var r=n(6),i=n(246);r(r.P+r.F*!n(77)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var r=n(6),i=n(151)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(77)(o)),"Array",{indexOf:function(e){return a?o.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(6),i=n(66),o=n(76),a=n(38),s=[].lastIndexOf,c=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(c||!n(77)(s)),"Array",{lastIndexOf:function(e){if(c)return s.apply(this,arguments)||0;var t=i(this),n=a(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){var r=n(6);r(r.P,"Array",{copyWithin:n(247)}),n(97)("copyWithin")},function(e,t,n){var r=n(6);r(r.P,"Array",{fill:n(206)}),n(97)("fill")},function(e,t,n){"use strict";var r=n(6),i=n(84)(5),o=!0;"find"in[]&&Array(1).find((function(){o=!1})),r(r.P+r.F*o,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(97)("find")},function(e,t,n){"use strict";var r=n(6),i=n(84)(6),o="findIndex",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),r(r.P+r.F*a,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(97)(o)},function(e,t,n){n(109)("Array")},function(e,t,n){var r=n(27),i=n(194),o=n(42).f,a=n(108).f,s=n(155),c=n(139),u=r.RegExp,l=u,d=u.prototype,f=/a/g,h=/a/g,p=new u(f)!==f;if(n(39)&&(!p||n(29)((function(){return h[n(36)("match")]=!1,u(f)!=f||u(h)==h||"/a/i"!=u(f,"i")})))){u=function(e,t){var n=this instanceof u,r=s(e),o=void 0===t;return!n&&r&&e.constructor===u&&o?e:i(p?new l(r&&!o?e.source:e,t):l((r=e instanceof u)?e.source:e,r&&o?c.call(e):t),n?this:d,u)};for(var m=function(e){e in u||o(u,e,{configurable:!0,get:function(){return l[e]},set:function(t){l[e]=t}})},v=a(l),g=0;v.length>g;)m(v[g++]);d.constructor=u,u.prototype=d,n(59)(r,"RegExp",u)}n(109)("RegExp")},function(e,t,n){"use strict";n(250);var r=n(25),i=n(139),o=n(39),a=/./.toString,s=function(e){n(59)(RegExp.prototype,"toString",e,!0)};n(29)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?s((function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)})):"toString"!=a.name&&s((function(){return a.call(this)}))},function(e,t,n){"use strict";var r=n(25),i=n(38),o=n(209),a=n(157);n(158)("match",1,(function(e,t,n,s){return[function(n){var r=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=s(n,e,this);if(t.done)return t.value;var c=r(e),u=String(this);if(!c.global)return a(c,u);var l=c.unicode;c.lastIndex=0;for(var d,f=[],h=0;null!==(d=a(c,u));){var p=String(d[0]);f[h]=p,""===p&&(c.lastIndex=o(u,i(c.lastIndex),l)),h++}return 0===h?null:f}]}))},function(e,t,n){"use strict";var r=n(25),i=n(44),o=n(38),a=n(76),s=n(209),c=n(157),u=Math.max,l=Math.min,d=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g;n(158)("replace",2,(function(e,t,n,p){return[function(r,i){var o=e(this),a=null==r?void 0:r[t];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(e,t){var i=p(n,e,this,t);if(i.done)return i.value;var d=r(e),f=String(this),h="function"==typeof t;h||(t=String(t));var v=d.global;if(v){var g=d.unicode;d.lastIndex=0}for(var y=[];;){var _=c(d,f);if(null===_)break;if(y.push(_),!v)break;""===String(_[0])&&(d.lastIndex=s(f,o(d.lastIndex),g))}for(var b,E="",S=0,C=0;C<y.length;C++){_=y[C];for(var w=String(_[0]),T=u(l(a(_.index),f.length),0),D=[],A=1;A<_.length;A++)D.push(void 0===(b=_[A])?b:String(b));var R=_.groups;if(h){var k=[w].concat(D,T,f);void 0!==R&&k.push(R);var O=String(t.apply(void 0,k))}else O=m(w,f,T,D,R,t);T>=S&&(E+=f.slice(S,T)+O,S=T+w.length)}return E+f.slice(S)}];function m(e,t,r,o,a,s){var c=r+e.length,u=o.length,l=h;return void 0!==a&&(a=i(a),l=f),n.call(s,l,(function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(c);case"<":s=a[i.slice(1,-1)];break;default:var l=+i;if(0===l)return n;if(l>u){var f=d(l/10);return 0===f?n:f<=u?void 0===o[f-1]?i.charAt(1):o[f-1]+i.charAt(1):n}s=o[l-1]}return void 0===s?"":s}))}}))},function(e,t,n){"use strict";var r=n(25),i=n(236),o=n(157);n(158)("search",1,(function(e,t,n,a){return[function(n){var r=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=a(n,e,this);if(t.done)return t.value;var s=r(e),c=String(this),u=s.lastIndex;i(u,0)||(s.lastIndex=0);var l=o(s,c);return i(s.lastIndex,u)||(s.lastIndex=u),null===l?-1:l.index}]}))},function(e,t,n){"use strict";var r=n(155),i=n(25),o=n(140),a=n(209),s=n(38),c=n(157),u=n(208),l=n(29),d=Math.min,f=[].push,h="length",p=!l((function(){RegExp(4294967295,"y")}));n(158)("split",2,(function(e,t,n,l){var m;return m="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[h]||2!="ab".split(/(?:ab)*/)[h]||4!=".".split(/(.?)(.?)/)[h]||".".split(/()()/)[h]>1||"".split(/.?/)[h]?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!r(e))return n.call(i,e,t);for(var o,a,s,c=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,p=void 0===t?4294967295:t>>>0,m=new RegExp(e.source,l+"g");(o=u.call(m,i))&&!((a=m.lastIndex)>d&&(c.push(i.slice(d,o.index)),o[h]>1&&o.index<i[h]&&f.apply(c,o.slice(1)),s=o[0][h],d=a,c[h]>=p));)m.lastIndex===o.index&&m.lastIndex++;return d===i[h]?!s&&m.test("")||c.push(""):c.push(i.slice(d)),c[h]>p?c.slice(0,p):c}:"0".split(void 0,0)[h]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,r){var i=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):m.call(String(i),n,r)},function(e,t){var r=l(m,e,this,t,m!==n);if(r.done)return r.value;var u=i(e),f=String(this),h=o(u,RegExp),v=u.unicode,g=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(p?"y":"g"),y=new h(p?u:"^(?:"+u.source+")",g),_=void 0===t?4294967295:t>>>0;if(0===_)return[];if(0===f.length)return null===c(y,f)?[f]:[];for(var b=0,E=0,S=[];E<f.length;){y.lastIndex=p?E:0;var C,w=c(y,p?f:f.slice(E));if(null===w||(C=d(s(y.lastIndex+(p?0:E)),f.length))===b)E=a(f,E,v);else{if(S.push(f.slice(b,E)),S.length===_)return S;for(var T=1;T<=w.length-1;T++)if(S.push(w[T]),S.length===_)return S;E=b=C}}return S.push(f.slice(b)),S}]}))},function(e,t,n){"use strict";var r,i,o,a,s=n(95),c=n(27),u=n(74),l=n(123),d=n(6),f=n(31),h=n(50),p=n(110),m=n(111),v=n(140),g=n(210).set,y=n(211)(),_=n(212),b=n(251),E=n(159),S=n(252),C=c.TypeError,w=c.process,T=w&&w.versions,D=T&&T.v8||"",A=c.Promise,R="process"==l(w),k=function(){},O=i=_.f,j=!!function(){try{var e=A.resolve(1),t=(e.constructor={})[n(36)("species")]=function(e){e(k,k)};return(R||"function"==typeof PromiseRejectionEvent)&&e.then(k)instanceof t&&0!==D.indexOf("6.6")&&-1===E.indexOf("Chrome/66")}catch(e){}}(),P=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},I=function(e,t){if(!e._n){e._n=!0;var n=e._c;y((function(){for(var r=e._v,i=1==e._s,o=0,a=function(t){var n,o,a,s=i?t.ok:t.fail,c=t.resolve,u=t.reject,l=t.domain;try{s?(i||(2==e._h&&x(e),e._h=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),a=!0)),n===t.promise?u(C("Promise-chain cycle")):(o=P(n))?o.call(n,c,u):c(n)):u(r)}catch(e){l&&!a&&l.exit(),u(e)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&N(e)}))}},N=function(e){g.call(c,(function(){var t,n,r,i=e._v,o=M(e);if(o&&(t=b((function(){R?w.emit("unhandledRejection",i,e):(n=c.onunhandledrejection)?n({promise:e,reason:i}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",i)})),e._h=R||M(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},M=function(e){return 1!==e._h&&0===(e._a||e._c).length},x=function(e){g.call(c,(function(){var t;R?w.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})}))},L=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),I(t,!0))},F=function e(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw C("Promise can't be resolved itself");(n=P(t))?y((function(){var i={_w:r,_d:!1};try{n.call(t,u(e,i,1),u(L,i,1))}catch(e){L.call(i,e)}})):(r._v=t,r._s=1,I(r,!1))}catch(e){L.call({_w:r,_d:!1},e)}}};j||(A=function(e){p(this,A,"Promise","_h"),h(e),r.call(this);try{e(u(F,this,1),u(L,this,1))}catch(e){L.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(112)(A.prototype,{then:function(e,t){var n=O(v(this,A));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=R?w.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&I(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=u(F,e,1),this.reject=u(L,e,1)},_.f=O=function(e){return e===A||e===a?new o(e):i(e)}),d(d.G+d.W+d.F*!j,{Promise:A}),n(122)(A,"Promise"),n(109)("Promise"),a=n(73).Promise,d(d.S+d.F*!j,"Promise",{reject:function(e){var t=O(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(s||!j),"Promise",{resolve:function(e){return S(s&&this===a?A:this,e)}}),d(d.S+d.F*!(j&&n(156)((function(e){A.all(e).catch(k)}))),"Promise",{all:function(e){var t=this,n=O(t),r=n.resolve,i=n.reject,o=b((function(){var n=[],o=0,a=1;m(e,!1,(function(e){var s=o++,c=!1;n.push(void 0),a++,t.resolve(e).then((function(e){c||(c=!0,n[s]=e,--a||r(n))}),i)})),--a||r(n)}));return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=O(t),r=n.reject,i=b((function(){m(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},function(e,t,n){"use strict";var r=n(257),i=n(113);n(160)("WeakSet",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(i(this,"WeakSet"),e,!0)}},r,!1,!0)},function(e,t,n){"use strict";var r=n(6),i=n(161),o=n(213),a=n(25),s=n(106),c=n(38),u=n(31),l=n(27).ArrayBuffer,d=n(140),f=o.ArrayBuffer,h=o.DataView,p=i.ABV&&l.isView,m=f.prototype.slice,v=i.VIEW;r(r.G+r.W+r.F*(l!==f),{ArrayBuffer:f}),r(r.S+r.F*!i.CONSTR,"ArrayBuffer",{isView:function(e){return p&&p(e)||u(e)&&v in e}}),r(r.P+r.U+r.F*n(29)((function(){return!new f(2).slice(1,void 0).byteLength})),"ArrayBuffer",{slice:function(e,t){if(void 0!==m&&void 0===t)return m.call(a(this),e);for(var n=a(this).byteLength,r=s(e,n),i=s(void 0===t?n:t,n),o=new(d(this,f))(c(i-r)),u=new h(this),l=new h(o),p=0;r<i;)l.setUint8(p++,u.getUint8(r++));return o}}),n(109)("ArrayBuffer")},function(e,t,n){var r=n(6);r(r.G+r.W+r.F*!n(161).ABV,{DataView:n(213).DataView})},function(e,t,n){n(91)("Int8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(91)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(91)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},function(e,t,n){n(91)("Int16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(91)("Uint16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(91)("Int32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(91)("Uint32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(91)("Float32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(91)("Float64",8,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){var r=n(6),i=n(50),o=n(25),a=(n(27).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(29)((function(){a((function(){}))})),"Reflect",{apply:function(e,t,n){var r=i(e),c=o(n);return a?a(r,t,c):s.call(r,t,c)}})},function(e,t,n){var r=n(6),i=n(107),o=n(50),a=n(25),s=n(31),c=n(29),u=n(237),l=(n(27).Reflect||{}).construct,d=c((function(){function e(){}return!(l((function(){}),[],e)instanceof e)})),f=!c((function(){l((function(){}))}));r(r.S+r.F*(d||f),"Reflect",{construct:function(e,t){o(e),a(t);var n=arguments.length<3?e:o(arguments[2]);if(f&&!d)return l(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(u.apply(e,r))}var c=n.prototype,h=i(s(c)?c:Object.prototype),p=Function.apply.call(e,h,t);return s(p)?p:h}})},function(e,t,n){var r=n(42),i=n(6),o=n(25),a=n(81);i(i.S+i.F*n(29)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(e,t,n){o(e),t=a(t,!0),o(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var r=n(6),i=n(67).f,o=n(25);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=i(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";var r=n(6),i=n(25),o=function(e){this._t=i(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(199)(o,"Object",(function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}})),r(r.S,"Reflect",{enumerate:function(e){return new o(e)}})},function(e,t,n){var r=n(67),i=n(68),o=n(65),a=n(6),s=n(31),c=n(25);a(a.S,"Reflect",{get:function e(t,n){var a,u,l=arguments.length<3?t:arguments[2];return c(t)===l?t[n]:(a=r.f(t,n))?o(a,"value")?a.value:void 0!==a.get?a.get.call(l):void 0:s(u=i(t))?e(u,n,l):void 0}})},function(e,t,n){var r=n(67),i=n(6),o=n(25);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(o(e),t)}})},function(e,t,n){var r=n(6),i=n(68),o=n(25);r(r.S,"Reflect",{getPrototypeOf:function(e){return i(o(e))}})},function(e,t,n){var r=n(6);r(r.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var r=n(6),i=n(25),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return i(e),!o||o(e)}})},function(e,t,n){var r=n(6);r(r.S,"Reflect",{ownKeys:n(259)})},function(e,t,n){var r=n(6),i=n(25),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){i(e);try{return o&&o(e),!0}catch(e){return!1}}})},function(e,t,n){var r=n(42),i=n(67),o=n(68),a=n(65),s=n(6),c=n(103),u=n(25),l=n(31);s(s.S,"Reflect",{set:function e(t,n,s){var d,f,h=arguments.length<4?t:arguments[3],p=i.f(u(t),n);if(!p){if(l(f=o(t)))return e(f,n,s,h);p=c(0)}if(a(p,"value")){if(!1===p.writable||!l(h))return!1;if(d=i.f(h,n)){if(d.get||d.set||!1===d.writable)return!1;d.value=s,r.f(h,n,d)}else r.f(h,n,c(0,s));return!0}return void 0!==p.set&&(p.set.call(h,s),!0)}})},function(e,t,n){var r=n(6),i=n(192);i&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){"use strict";var r=n(6),i=n(151)(!0);r(r.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(97)("includes")},function(e,t,n){"use strict";var r=n(6),i=n(260),o=n(44),a=n(38),s=n(50),c=n(205);r(r.P,"Array",{flatMap:function(e){var t,n,r=o(this);return s(e),t=a(r.length),n=c(r,0),i(n,r,r,t,0,1,e,arguments[1]),n}}),n(97)("flatMap")},function(e,t,n){"use strict";var r=n(6),i=n(260),o=n(44),a=n(38),s=n(76),c=n(205);r(r.P,"Array",{flatten:function(){var e=arguments[0],t=o(this),n=a(t.length),r=c(t,0);return i(r,t,t,n,0,void 0===e?1:s(e)),r}}),n(97)("flatten")},function(e,t,n){"use strict";var r=n(6),i=n(154)(!0),o=n(29)((function(){return""!=="".at(0)}));r(r.P+r.F*o,"String",{at:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(6),i=n(261),o=n(159),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){"use strict";var r=n(6),i=n(261),o=n(159),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){"use strict";n(124)("trimLeft",(function(e){return function(){return e(this,1)}}),"trimStart")},function(e,t,n){"use strict";n(124)("trimRight",(function(e){return function(){return e(this,2)}}),"trimEnd")},function(e,t,n){"use strict";var r=n(6),i=n(82),o=n(38),a=n(155),s=n(139),c=RegExp.prototype,u=function(e,t){this._r=e,this._s=t};n(199)(u,"RegExp String",(function(){var e=this._r.exec(this._s);return{value:e,done:null===e}})),r(r.P,"String",{matchAll:function(e){if(i(this),!a(e))throw TypeError(e+" is not a regexp!");var t=String(this),n="flags"in c?String(e.flags):s.call(e),r=new RegExp(e.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=o(e.lastIndex),new u(r,t)}})},function(e,t,n){n(188)("asyncIterator")},function(e,t,n){n(188)("observable")},function(e,t,n){var r=n(6),i=n(259),o=n(66),a=n(67),s=n(203);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=o(e),c=a.f,u=i(r),l={},d=0;u.length>d;)void 0!==(n=c(r,t=u[d++]))&&s(l,t,n);return l}})},function(e,t,n){var r=n(6),i=n(262)(!1);r(r.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){var r=n(6),i=n(262)(!0);r(r.S,"Object",{entries:function(e){return i(e)}})},function(e,t,n){"use strict";var r=n(6),i=n(44),o=n(50),a=n(42);n(39)&&r(r.P+n(162),"Object",{__defineGetter__:function(e,t){a.f(i(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(6),i=n(44),o=n(50),a=n(42);n(39)&&r(r.P+n(162),"Object",{__defineSetter__:function(e,t){a.f(i(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(6),i=n(44),o=n(81),a=n(68),s=n(67).f;n(39)&&r(r.P+n(162),"Object",{__lookupGetter__:function(e){var t,n=i(this),r=o(e,!0);do{if(t=s(n,r))return t.get}while(n=a(n))}})},function(e,t,n){"use strict";var r=n(6),i=n(44),o=n(81),a=n(68),s=n(67).f;n(39)&&r(r.P+n(162),"Object",{__lookupSetter__:function(e){var t,n=i(this),r=o(e,!0);do{if(t=s(n,r))return t.set}while(n=a(n))}})},function(e,t,n){var r=n(6);r(r.P+r.R,"Map",{toJSON:n(263)("Map")})},function(e,t,n){var r=n(6);r(r.P+r.R,"Set",{toJSON:n(263)("Set")})},function(e,t,n){n(163)("Map")},function(e,t,n){n(163)("Set")},function(e,t,n){n(163)("WeakMap")},function(e,t,n){n(163)("WeakSet")},function(e,t,n){n(164)("Map")},function(e,t,n){n(164)("Set")},function(e,t,n){n(164)("WeakMap")},function(e,t,n){n(164)("WeakSet")},function(e,t,n){var r=n(6);r(r.G,{global:n(27)})},function(e,t,n){var r=n(6);r(r.S,"System",{global:n(27)})},function(e,t,n){var r=n(6),i=n(75);r(r.S,"Error",{isError:function(e){return"Error"===i(e)}})},function(e,t,n){var r=n(6);r(r.S,"Math",{clamp:function(e,t,n){return Math.min(n,Math.max(t,e))}})},function(e,t,n){var r=n(6);r(r.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(e,t,n){var r=n(6),i=180/Math.PI;r(r.S,"Math",{degrees:function(e){return e*i}})},function(e,t,n){var r=n(6),i=n(265),o=n(244);r(r.S,"Math",{fscale:function(e,t,n,r,a){return o(i(e,t,n,r,a))}})},function(e,t,n){var r=n(6);r(r.S,"Math",{iaddh:function(e,t,n,r){var i=e>>>0,o=n>>>0;return(t>>>0)+(r>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}})},function(e,t,n){var r=n(6);r(r.S,"Math",{isubh:function(e,t,n,r){var i=e>>>0,o=n>>>0;return(t>>>0)-(r>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}})},function(e,t,n){var r=n(6);r(r.S,"Math",{imulh:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r,a=n>>16,s=r>>16,c=(a*o>>>0)+(i*o>>>16);return a*s+(c>>16)+((i*s>>>0)+(65535&c)>>16)}})},function(e,t,n){var r=n(6);r(r.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(e,t,n){var r=n(6),i=Math.PI/180;r(r.S,"Math",{radians:function(e){return e*i}})},function(e,t,n){var r=n(6);r(r.S,"Math",{scale:n(265)})},function(e,t,n){var r=n(6);r(r.S,"Math",{umulh:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r,a=n>>>16,s=r>>>16,c=(a*o>>>0)+(i*o>>>16);return a*s+(c>>>16)+((i*s>>>0)+(65535&c)>>>16)}})},function(e,t,n){var r=n(6);r(r.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:e>0}})},function(e,t,n){"use strict";var r=n(6),i=n(73),o=n(27),a=n(140),s=n(252);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then((function(){return n}))}:e,n?function(n){return s(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){"use strict";var r=n(6),i=n(212),o=n(251);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){var r=n(92),i=n(25),o=r.key,a=r.set;r.exp({defineMetadata:function(e,t,n,r){a(e,t,i(n),o(r))}})},function(e,t,n){var r=n(92),i=n(25),o=r.key,a=r.map,s=r.store;r.exp({deleteMetadata:function(e,t){var n=arguments.length<3?void 0:o(arguments[2]),r=a(i(t),n,!1);if(void 0===r||!r.delete(e))return!1;if(r.size)return!0;var c=s.get(t);return c.delete(n),!!c.size||s.delete(t)}})},function(e,t,n){var r=n(92),i=n(25),o=n(68),a=r.has,s=r.get,c=r.key,u=function e(t,n,r){if(a(t,n,r))return s(t,n,r);var i=o(n);return null!==i?e(t,i,r):void 0};r.exp({getMetadata:function(e,t){return u(e,i(t),arguments.length<3?void 0:c(arguments[2]))}})},function(e,t,n){var r=n(255),i=n(264),o=n(92),a=n(25),s=n(68),c=o.keys,u=o.key,l=function e(t,n){var o=c(t,n),a=s(t);if(null===a)return o;var u=e(a,n);return u.length?o.length?i(new r(o.concat(u))):u:o};o.exp({getMetadataKeys:function(e){return l(a(e),arguments.length<2?void 0:u(arguments[1]))}})},function(e,t,n){var r=n(92),i=n(25),o=r.get,a=r.key;r.exp({getOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){var r=n(92),i=n(25),o=r.keys,a=r.key;r.exp({getOwnMetadataKeys:function(e){return o(i(e),arguments.length<2?void 0:a(arguments[1]))}})},function(e,t,n){var r=n(92),i=n(25),o=n(68),a=r.has,s=r.key,c=function e(t,n,r){if(a(t,n,r))return!0;var i=o(n);return null!==i&&e(t,i,r)};r.exp({hasMetadata:function(e,t){return c(e,i(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,n){var r=n(92),i=n(25),o=r.has,a=r.key;r.exp({hasOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){var r=n(92),i=n(25),o=n(50),a=r.key,s=r.set;r.exp({metadata:function(e,t){return function(n,r){s(e,t,(void 0!==r?i:o)(n),a(r))}}})},function(e,t,n){var r=n(6),i=n(211)(),o=n(27).process,a="process"==n(75)(o);r(r.G,{asap:function(e){var t=a&&o.domain;i(t?t.bind(e):e)}})},function(e,t,n){"use strict";var r=n(6),i=n(27),o=n(73),a=n(211)(),s=n(36)("observable"),c=n(50),u=n(25),l=n(110),d=n(112),f=n(58),h=n(111),p=h.RETURN,m=function(e){return null==e?void 0:c(e)},v=function(e){var t=e._c;t&&(e._c=void 0,t())},g=function(e){return void 0===e._o},y=function(e){g(e)||(e._o=void 0,v(e))},_=function(e,t){u(e),this._c=void 0,this._o=e,e=new b(this);try{var n=t(e),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:c(n),this._c=n)}catch(t){return void e.error(t)}g(this)&&v(this)};_.prototype=d({},{unsubscribe:function(){y(this)}});var b=function(e){this._s=e};b.prototype=d({},{next:function(e){var t=this._s;if(!g(t)){var n=t._o;try{var r=m(n.next);if(r)return r.call(n,e)}catch(e){try{y(t)}finally{throw e}}}},error:function(e){var t=this._s;if(g(t))throw e;var n=t._o;t._o=void 0;try{var r=m(n.error);if(!r)throw e;e=r.call(n,e)}catch(e){try{v(t)}finally{throw e}}return v(t),e},complete:function(e){var t=this._s;if(!g(t)){var n=t._o;t._o=void 0;try{var r=m(n.complete);e=r?r.call(n,e):void 0}catch(e){try{v(t)}finally{throw e}}return v(t),e}}});var E=function(e){l(this,E,"Observable","_f")._f=c(e)};d(E.prototype,{subscribe:function(e){return new _(e,this._f)},forEach:function(e){var t=this;return new(o.Promise||i.Promise)((function(n,r){c(e);var i=t.subscribe({next:function(t){try{return e(t)}catch(e){r(e),i.unsubscribe()}},error:r,complete:n})}))}}),d(E,{from:function(e){var t="function"==typeof this?this:E,n=m(u(e)[s]);if(n){var r=u(n.call(e));return r.constructor===t?r:new t((function(e){return r.subscribe(e)}))}return new t((function(t){var n=!1;return a((function(){if(!n){try{if(h(e,!1,(function(e){if(t.next(e),n)return p}))===p)return}catch(e){if(n)throw e;return void t.error(e)}t.complete()}})),function(){n=!0}}))},of:function(){for(var e=0,t=arguments.length,n=new Array(t);e<t;)n[e]=arguments[e++];return new("function"==typeof this?this:E)((function(e){var t=!1;return a((function(){if(!t){for(var r=0;r<n.length;++r)if(e.next(n[r]),t)return;e.complete()}})),function(){t=!0}}))}}),f(E.prototype,s,(function(){return this})),r(r.G,{Observable:E}),n(109)("Observable")},function(e,t,n){var r=n(27),i=n(6),o=n(159),a=[].slice,s=/MSIE .\./.test(o),c=function(e){return function(t,n){var r=arguments.length>2,i=!!r&&a.call(arguments,2);return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,n)}};i(i.G+i.B+i.F*s,{setTimeout:c(r.setTimeout),setInterval:c(r.setInterval)})},function(e,t,n){var r=n(6),i=n(210);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,n){for(var r=n(207),i=n(105),o=n(59),a=n(27),s=n(58),c=n(125),u=n(36),l=u("iterator"),d=u("toStringTag"),f=c.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(h),m=0;m<p.length;m++){var v,g=p[m],y=h[g],_=a[g],b=_&&_.prototype;if(b&&(b[l]||s(b,l,f),b[d]||s(b,d,g),c[g]=f,y))for(v in r)b[v]||o(b,v,r[v],!0)}},function(e,t,n){(function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){"use strict";var r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",u="object"===n(t),l=e.regeneratorRuntime;if(l)u&&(t.exports=l);else{(l=e.regeneratorRuntime=u?t.exports:{}).wrap=v;var d={},f={};f[a]=function(){return this};var h=Object.getPrototypeOf,p=h&&h(h(A([])));p&&p!==r&&i.call(p,a)&&(f=p);var m=b.prototype=y.prototype=Object.create(f);_.prototype=m.constructor=b,b.constructor=_,b[c]=_.displayName="GeneratorFunction",l.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},l.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(m),e},l.awrap=function(e){return{__await:e}},E(S.prototype),S.prototype[s]=function(){return this},l.AsyncIterator=S,l.async=function(e,t,n,r){var i=new S(v(e,t,n,r));return l.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(m),m[c]="Generator",m[a]=function(){return this},m.toString=function(){return"[object Generator]"},l.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=A,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}}}function v(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,o=Object.create(i.prototype),a=new D(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return R()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=C(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=g(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function g(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function y(){}function _(){}function b(){}function E(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function S(t){function r(e,o,a,s){var c=g(t[e],t,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"===n(l)&&i.call(l,"__await")?Promise.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):Promise.resolve(l).then((function(e){u.value=e,a(u)}),s)}s(c.arg)}var o;"object"===n(e.process)&&e.process.domain&&(r=e.process.domain.bind(r)),this._invoke=function(e,t){function n(){return new Promise((function(n,i){r(e,t,n,i)}))}return o=o?o.then(n,n):n()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=g(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function A(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:R}}function R(){return{value:void 0,done:!0}}}("object"===(void 0===e?"undefined":n(e))?e:"object"===("undefined"==typeof window?"undefined":n(window))?window:"object"===("undefined"==typeof self?"undefined":n(self))?self:this)}).call(this,n(53),n(98)(e))},function(e,t,n){n(580),e.exports=n(73).RegExp.escape},function(e,t,n){var r=n(6),i=n(581)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(e){return i(e)}})},function(e,t){e.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,n)}}},function(e,t,n){var r,i;r=document.getElementsByTagName("head")[0],(i=document.createElement("link")).rel="stylesheet",i.type="text/css",i.id="cb__stylesheet",i.href="https://sdk.sariska.io/main.colly.widget.487a3e55787c47dbb502.css",r&&r.appendChild(i)},function(e,t,n){n(584);var r=e.exports=n(16).t(),i={onCreate:function(e){const t=E("cb__toolboxOptions")||{},n=d({...t.sessionData}||{});this.state={token:null,socket:null,channel:null,widget:!1,widgetState:_.PRIMARY_BUTTON,isChat:t.isChat,loading:!1,recordingSession:null,sessionData:n,recordingLoader:!1,moderator:!1,coordinateShift:{},desktopTrack:null,archivedMessageCount:0,recording:!1,conference:null,screenSharing:!1,localTracks:[],usersList:[],prestartRecording:!1,primaryColor:"#123fbc",primaryBackgroundColor:"white",messages:[],isMouseDown:!1,name:"",iAmRecorder:window.location.hash.indexOf("iAmRecorder")>=0,widgetInitialized:!1,newChatMessage:!1,toast:!1,toastText:"Thank you for the feedback.",isMedia:t.isMedia,isPublisher:t.isPublisher,isDisconnected:t.isDisconnected,unreadMessage:t.unreadMessage,videoEnabled:void 0===t.videoEnabled||t.videoEnabled,audioEnabled:void 0===t.audioEnabled||t.audioEnabled,muteAll:void 0!==t.muteAll&&t.muteAll,videoWidget:void 0===t.videoWidget||t.videoWidget},this.documentClick=this.documentClick.bind(this),window.addEventListener("beforeunload",this.beforeReload.bind(this)),document.addEventListener("keydown",this.documentKeyDown.bind(this),!1),document.addEventListener("mouseup",this.mouseUp.bind(this),!1),document.addEventListener("click",this.documentClick,!1),this.mouseMoveRef=this.mouseMove.bind(this),window.addEventListener("popstate",()=>{n.name&&n.session_id?this.state.widget=!0:this.state.widget=!1});const r=async()=>{try{const e=window.location.pathname.split("/")[2];this.state.sessionData.session_id=e,this.state.sessionData.name="recorder";const t=await m(this.state.sessionData);this.state.token=t,this.state.widget=!0,this.state.widgetInitialized=!0,this.state.isDisconnected=!1,this.state.isMedia=!0}catch(e){}};this.state.iAmRecorder&&r();const i=window.Colly;i.setTheme=e=>{this.state.primaryColor=e.primaryColor,this.state.primarBackgroundColor=e.primarBackgroundColor},i.startCall=e=>{this.state.sessionData.name=e.name,this.state.sessionData.session_id=e.roomId,this.joinSession()},i.endCall=()=>{this.closeCurrentSession()},i.minimizeWidget=()=>{this.state.widgetState=_.PRIMARY_BUTTON},i.showWidget=()=>{this.state.widget=!0},i.setRole=e=>{this.setRole(e)},i.hideWidget=()=>{this.state.widget=!1},i.startRecording=()=>{this.startRecording()},i.stopRecording=()=>{this.stopRecording()}},showWidget:function(){this.state.widget=!0},hideWidget:function(){this.state.widget=!0},setRole:function(e){this.state.moderator=e},documentKeyDown:function(e){if(27==e.keyCode)switch(this.state.widgetState){case _.PRIMARY_BUTTON_WITH_INPUT:this.state.widgetState=_.PRIMARY_BUTTON;break;case _.REPORT_PROBLEM:this.dialogBoxAction(_.CANCEL_FEEDBACK_POPUP);break;case _.INPUT_WITH_OVERLAY:this.dialogBoxAction(_.CANCEL_POPUP)}},documentClick:function(e){this.skipMousemove=!0,this.state.widgetState!==_.PRIMARY_BUTTON_WITH_INPUT||p(e.target||e.srcElement)||(this.state.widgetState=_.PRIMARY_BUTTON)},userSelectedMediaOptions:function(e){this.state.isMedia=!0,this.state.audioEnabled=e.audioEnabled,this.state.videoEnabled=e.videoEnabled},inputBoxValue:function(e){this.state.sessionData.name=e},inputBoxAction:function(e){switch(e){case _.PRIMARY_BUTTON:break;case _.INPUT_WITH_OVERLAY:case _.PRIMARY_BUTTON_WITH_INPUT:this.joinSession(e)}},dialogBoxAction:function(e,t){e===_.JOIN_SESSION&&this.joinSession(e),e===_.CANCEL_POPUP&&(this.state.widgetState=_.PRIMARY_BUTTON),e===_.CANCEL_FEEDBACK_POPUP&&this.state.widgetInitialized?this.state.widgetState=_.PRIMARY_BUTTON_WITH_WIDGET_OPEN:e===_.CANCEL_FEEDBACK_POPUP&&(this.state.widgetState=_.PRIMARY_BUTTON),t&&(this.showToast("Thank you for feedback!"),this.hideToast(1500))},joinSession:async function(){if(!this.state.sessionData.name)return;this.state.loading=!0;const e=window.location.pathname.split("/")[2];this.state.sessionData.session_id=e,this.state.sessionData.moderator=this.state.moderator;const t=await m(this.state.sessionData);t||console.log("no token"),this.state.token=t;const n={token:t};let r=new w(_.MESSAGING_SERVICE_WEBSOCKET,{params:n});r.connect(),r.onClose(e=>{r.disconnect()}),r.onError(e=>{}),this.state.socket=r;const i=r.channel("chat:"+this.state.sessionData.session_id,{});i.join().receive("ok",e=>{console.log("on chat channel join")}).receive("error",e=>console.log(e)).receive("timeout",e=>console.log(e)),this.state.channel=i,this.state.channel.on("user_joined",e=>{const{user:t,room:n}=e;document.removeEventListener("click",this.documentClick,!1),this.state.loading=!1,this.state.isPublisher=t.id===n.created_by,this.state.isDisconnected=!1,this.state.sessionData.created_by=n.created_by,this.state.sessionData.id=t.id,this.state.sessionData.name=t.name,this.state.sessionData.email=t.email,this.state.sessionData.avatar=t.avatar,this.state.widgetState=_.PRIMARY_BUTTON_WITH_WIDGET_OPEN,this.state.widgetInitialized=!0,this.showToast("Connected"),this.state.isMedia=!0}),this.state.channel.on(A.PrivateMessage,e=>{this.state.messages.push(e),this.setStateDirty("messages"),this.state.isChat||(this.state.isChat=!0)}),this.state.channel.on(A.ArchivedMessage,e=>{console.log("payloadpayload",e);this.state.messages.unshift(e),this.setStateDirty("messages")}),this.state.channel.on(A.MessageCount,e=>{e.page&&(this.state.archivedMessageCount=e.page.count)});let o=new T(this.state.channel);o.onJoin((e,t,n)=>{this.state.usersList.find(t=>t.id===e)||this.state.usersList.push({...n.metas[0],id:e,color:v()}),this.setStateDirty("usersList")}),o.onLeave((e,t,n)=>{this.state.usersList=this.state.usersList.filter(t=>t.id!==e),this.setStateDirty("usersList")})},primaryButtonAction:function(e){if(!this.state.isMouseDown)switch(e){case _.PRIMARY_BUTTON_WITH_WIDGET_OPEN:case _.PRIMARY_BUTTON_WITH_WIDGET_CLOSE:this.state.widgetState=e;break;case _.AFTER_CLOSE_SESSION_PUBLISHER:case _.AFTER_CLOSE_SESSION_SUBSCRIBER:this.state.widgetState=_.PRIMARY_BUTTON;break;case _.PRIMARY_BUTTON:this.state.widgetState=_.PRIMARY_BUTTON_WITH_INPUT,this.state.isDisconnected&&(this.state.widgetState=this.state.isPublisher?_.AFTER_CLOSE_SESSION_PUBLISHER:_.AFTER_CLOSE_SESSION_SUBSCRIBER);break;case _.PRIMARY_BUTTON_WITH_INPUT:this.joinSession(e);break;case _.INVITE_PEOPLE:this.state.widgetState=_.PRIMARY_BUTTON_WITH_WIDGET_OPEN}},setPendingMessages:function(){this.state.unreadMessage=!0},closeCurrentSession:function(){this.state.socket.disconnect(),this.state.isDisconnected=!0,this.state.widgetState=_.PRIMARY_BUTTON_WITH_WIDGET_OPEN,this.state.isPublisher?this.state.widgetState=_.AFTER_CLOSE_SESSION_PUBLISHER:this.state.widgetState=_.AFTER_CLOSE_SESSION_SUBSCRIBER,this.state.widgetInitialized=!1},startNewSession:function(){if(this.state.isMouseDown)return;const e=this.state.sessionData;e.session_id=g(),this.state.sessionData=e,this.state.isDisconnected=!1,this.state.unreadMessage=!1,this.state.loading=!0,this.joinSession()},joinPastSession:function(){if(this.state.isMouseDown)return;this.state.sessionData;this.state.loading=!0,this.state.isDisconnected=!1,this.joinSession()},secondaryButtonAction:function(e){if(!this.state.isMouseDown)switch(e){case _.IS_CHAT:this.state.unreadMessage=!1,this.state[e]=!0;break;case _.INVITE_PEOPLE:this.state.widgetState=_.INVITE_PEOPLE;break;case _.IS_SCREEN_SHARING:this.state.screenSharing?this.stopScreenSharing():this.startScreenSharing();break;case _.IS_REOCRDING:this.state.recording?this.stopRecording():this.startRecording()}},closeChat:function(){this.state.isChat=!1},onMediaControlChange:function(e,t){this.state[e]=t},showToast:function(e){this.state.toastText=e,this.state.toast=!0,this.hideToast(4e3)},hideToast:function(e){setTimeout(()=>{this.state.toast=!1},e)},mouseUp:function(){setTimeout(()=>{this.state.isMouseDown=!1},!1),clearTimeout(this.timeout),this.skipMousemove=!0,document.removeEventListener("mousemove",this.mouseMoveRef)},mouseMove:function(e){if(this.skipMousemove)return;const t=this.getEl("uiWidget");t.getBoundingClientRect();t.style.bottom=this.state.coordinateShift.y-e.clientY+this.state.coordinateShift.bottom+"px",t.style.right=this.state.coordinateShift.x-e.clientX+this.state.coordinateShift.right+"px"},mouseDown:function(e){(e.target.closest("#cb--media-container")||e.target.closest("#cb--chat-container"))&&(this.skipMousemove=!0);const t=this.getEl("uiWidget");this.timeout=setTimeout(()=>{this.state.isMouseDown=!0},300);const n=t.getBoundingClientRect(),r=e.clientY-n.bottom,i=e.clientX-n.right,o=h();this.state.coordinateShift={x:o.x,y:o.y,bottom:r,right:i},document.addEventListener("mousemove",this.mouseMoveRef,!0)},conferenceInitialized:function(e){this.state.conference=e,e.on(u.events.conference.RECORDER_STATE_CHANGED,e=>{console.log("data",e),"on"===e._status&&"file"===e._mode&&(this.state.recordingLoader=!1,this.showToast("Recording Started"),this.state.recording=!0),"off"===e._status&&"file"===e._mode&&(this.state.recordingLoader=!1,this.showToast("Recording Stopped"),this.state.recording=!1)}),e.on(u.events.conference.CONFERENCE_JOINED,()=>{this.state.prestartRecording&&setTimeout(()=>{this.startRecording()},5e3)})},tracksInitialized:function(e){this.state.localTracks=e},startRecording:async function(){if(!this.state.moderator)return;this.state.recordingLoader=!0;const e={base_url:`${window.location.origin}${window.location.pathname}?name=recorder&type=candidate&color=C41E3A`,file_recording_metadata:{share:!0}},t=await this.state.conference.startRecording({mode:u.constants.recording.mode.FILE,appData:JSON.stringify(e)});this.state.recordingSession=t,this.state.conference.setLocalParticipantProperty("recording")},stopRecording:async function(){this.state.recordingSession&&(await this.state.conference.stopRecording(this.state.recordingSession._sessionID),this.state.conference.removeLocalParticipantProperty("recording"),this.state.recordingSession=null)},startScreenSharing:async function(){if(this.state.desktopTrack)return;const e=this.state.localTracks.find(e=>"camera"===e.videoType),[t]=await u.createLocalTracks({resolution:720,devices:["desktop"],desktopSharingFrameRate:{min:40,max:60},constraints:{video:{height:{ideal:720,max:720,min:720}}}});this.state.conference.replaceTrack(e,t),t.addEventListener(u.events.track.LOCAL_TRACK_STOPPED,async()=>{this.stopScreenSharing()}),this.state.conference.setLocalParticipantProperty("presenting","start"),this.state.desktopTrack=t,this.state.screenSharing=!0,this.showToast("Screen sharing is started")},stopScreenSharing:async function(){if(!this.state.desktopTrack)return;const e=this.state.localTracks.find(e=>"camera"===e.videoType);await this.state.conference.replaceTrack(this.state.desktopTrack,e),this.state.conference.setLocalParticipantProperty("presenting","stop"),await this.state.desktopTrack.dispose(),this.state.desktopTrack=null,this.state.screenSharing=!1,this.showToast("Screen sharing is stopped")},beforeReload:function(){const e={sessionData:this.state.sessionData,isPublisher:this.state.isPublisher,isDisconnected:this.state.isDisconnected,unreadMessage:this.state.unreadMessage,isChat:this.state.isChat,isMedia:this.state.isMedia,audioEnabled:this.state.audioEnabled,videoEnabled:this.state.videoEnabled,muteAll:this.state.muteAll,videoWidget:this.state.videoWidget};localStorage.setItem("cb__toolboxOptions",JSON.stringify(e))},onDestroy:function(){window.removeEventListener("beforeunload",this.beforeReload),document.removeEventListener("keydown",this.documentKeyDown)}},o=(0,n(13).r)("/client$2.26.6/src/components/Widget/index.marko",(function(){return e.exports})),a=n(17),s=n(14),c=n(87),u=c.default||c,l=n(86),d=(l.default,l.getQueryStringValue,l.syncWithParams),f=(l.syncMediaOptionsLocalStorage,l.syncWithLocalStorage,l.isMobile),h=l.getDimensions,p=l.skipToolbox,m=(l.getQueryParams,l.getToken),v=l.getRandomColor,g=l.getMeetingId,y=n(55),_=y.default||y,b=n(218),E=(b.default,b.setL,b.getL),S=(b.removeL,n(625)),C=(S.default,S.set,S.get,n(287)),w=(C.default,C.Socket),T=C.Presence,D=n(55),A=(D.default,D.ChannelMesssageEvents),R=n(288),k=n(69),O=k(R),j=k(n(627)),P=k(n(631)),I=k(n(638)),N=k(n(646)),M=k(n(648)),x=k(n(650)),L=k(n(665)),F=k(n(682)),B=k(n(687)),U=n(78);r._=a((function(e,t,n,r,i){const o=f();i.widget&&(t.be("div",{class:U(["cb__uiWidget",i.isMouseDown&&"cb__uiWidget--move",i.widgetState===_.PRIMARY_BUTTON_WITH_INPUT&&"cb__uiWidget--flexColumn"])},"@uiWidget",r,null,1,{onmouseup:n.d("mouseup","mouseUp",!1),onmousedown:n.d("mousedown","mouseDown",!1)}),i.widgetState===_.PRIMARY_BUTTON_WITH_INPUT?O({inputBoxValue:r.inputBoxValue.bind(r),widgetState:i.widgetState,inputBoxAction:r.inputBoxAction.bind(r)},t,n,"0"):i.widgetState===_.INPUT_WITH_OVERLAY?j({primaryBackgroundColor:i.primaryBackgroundColor,primaryColor:i.primaryColor,userSelectedMediaOptions:r.userSelectedMediaOptions.bind(r),dialogBoxAction:r.dialogBoxAction.bind(r),widgetState:i.widgetState,inputBoxAction:r.inputBoxAction.bind(r),guestName:i.sessionData.guestName,inputBoxValue:r.inputBoxValue.bind(r)},t,n,"1"):i.widgetState===_.PRIMARY_BUTTON_WITH_WIDGET_OPEN?P({isDisconnected:i.isDisconnected,unreadMessage:i.unreadMessage,recordingLoader:i.recordingLoader,primaryBackgroundColor:i.primaryBackgroundColor,primaryColor:i.primaryColor,recording:i.recording,screenSharing:i.screenSharing,mobile:o,createdBy:i.sessionData.created_by,isPublisher:i.isPublisher,closeCurrentSession:r.closeCurrentSession.bind(r),secondaryButtonAction:r.secondaryButtonAction.bind(r),loading:i.loading},t,n,"2"):i.widgetState===_.INVITE_PEOPLE?I({primaryBackgroundColor:i.primaryBackgroundColor,primaryColor:i.primaryColor,sessionData:i.sessionData,secondaryButtonAction:r.secondaryButtonAction.bind(r)},t,n,"3"):i.widgetState===_.AFTER_CLOSE_SESSION_PUBLISHER?N({primaryBackgroundColor:i.primaryBackgroundColor,primaryColor:i.primaryColor,joinPastSession:r.joinPastSession.bind(r)},t,n,"4"):i.widgetState===_.AFTER_CLOSE_SESSION_SUBSCRIBER&&M({primaryBackgroundColor:i.primaryBackgroundColor,primaryColor:i.primaryColor,joinPastSession:r.joinPastSession.bind(r)},t,n,"5"),i.isMedia&&i.widgetInitialized&&!i.isDisconnected&&x({usersList:i.usersList,primaryBackgroundColor:i.primaryBackgroundColor,primaryColor:i.primaryColor,tracksInitialized:r.tracksInitialized.bind(r),conferenceInitialized:r.conferenceInitialized.bind(r),isPublisher:i.isPublisher,showToast:r.showToast.bind(r),onMediaControlChange:r.onMediaControlChange.bind(r),closeCurrentSession:r.closeCurrentSession.bind(r),userSelectedMediaOptions:r.userSelectedMediaOptions.bind(r),audioEnabled:i.audioEnabled,videoEnabled:i.videoEnabled,muteAll:i.muteAll,videoWidget:i.videoWidget,token:i.token},t,n,"6"),i.widgetInitialized&&!i.isDisconnected&&L({archivedMessageCount:i.archivedMessageCount,primaryBackgroundColor:i.primaryBackgroundColor,primaryColor:i.primaryColor,usersList:i.usersList,messages:i.messages,mobile:o,isChat:i.isChat,setPendingMessages:r.setPendingMessages.bind(r),secondaryButtonAction:r.secondaryButtonAction.bind(r),closeChat:r.closeChat.bind(r),channel:i.channel,sessionData:i.sessionData},t,n,"7"),F({primaryBackgroundColor:i.primaryBackgroundColor,primaryColor:i.primaryColor,isDisconnected:i.isDisconnected,unreadMessage:i.unreadMessage,loading:i.loading,isMouseDown:i.isMouseDown,widgetState:i.widgetState,secondaryButtonAction:r.secondaryButtonAction.bind(r),primaryButtonAction:r.primaryButtonAction.bind(r)},t,n,"8"),i.toast&&B({text:i.toastText},t,n,"9"),t.ee())}),{e_:o},i),r.Component=s(i,r._)},function(e,t,n){},function(e,t,n){"use strict";n(586);var r=n(587),i=n(597);function o(e,t){this.path=e,this._=t,this.meta=void 0}function a(e,t,n){return new r(e,t,n)}t.t=function(e){return new o(e)},i(o.prototype={createOut:a}),t.Template=o,t.bo_=a,n(165).aY_(a)},function(e,t,n){"use strict";t.createOut=n(165),t.load=n(266)},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(267),o=n(214),a=o.bp_,s=o.bq_,c=o.br_,u=o.bs_,l=o.bt_,d=o.bu_,f=o.bv_,h=n(270),p=o.bw_,m=n(272),v=n(596);function g(e){this.bx_=new i,this.by_=e,this.bz_=!1}function y(e,t,n){var r;t||(t=new s),r=n?n.P_:new g(t),this.bA_=1,this.bB_=0,this.bC_=null,this.bD_=n,this.data={},this.P_=r,this.r_=t,this.global=e||{},this.bE_=[t],this.bF_=!1,this.bG_=void 0,this.h_=null,this.m_=null,this.o_=null,this.aQ_=null}var _=y.prototype={bh_:!0,_c_:p,bc:function(e,t,n){var r=new l(e,t,n);return this.bH_(r,0,!0)},aS_:function(e,t,n){var r=new l(e,t,n,!0);this.bH_(r,0)},bH_:function(e,t,n){return this.r_.bI_(e),!0===n&&(this.bE_.push(e),this.r_=e),0===t?this:e},element:function(e,t,n,r,i,o,s){var c=new a(e,t,n,r,i,o,s);return this.bH_(c,i)},bf_:function(e,t,n,r,i){return this.element(e,v(t),n,r.n_,0,0,i)},n:function(e,t){var n=e.__();return this.node(n),n.aU_=t,this},node:function(e){return this.r_.bI_(e),this},text:function(e,t){var n=r(e);if("string"!=n){if(null==e)return;if("object"===n&&e.toHTML)return this.h(e.toHTML(),t);e=e.toString()}return this.r_.bI_(new u(e,t)),this},comment:function(e,t){return this.node(new c(e,t))},html:function(e,t){if(null!=e){var n=f(e,this._c_||document,t);this.node(n)}return this},beginElement:function(e,t,n,r,i,o,s){var c=new a(e,t,n,r,i,o,s);return this.bH_(c,i,!0),this},bd_:function(e,t,n,r,i){return this.beginElement(e,v(t),n,r.n_,0,0,i)},bf:function(e,t,n){var r=new d(e,t,n);return this.bH_(r,null,!0),this},ef:function(){this.endElement()},endElement:function(){var e=this.bE_;e.pop(),this.r_=e[e.length-1]},end:function(){this.r_=void 0;var e=--this.bA_,t=this.bD_;return 0===e?t?t.bJ_():this.bK_():e-this.bB_==0&&this.bL_(),this},bJ_:function(){var e=--this.bA_;if(0===e){var t=this.bD_;t?t.bJ_():this.bK_()}else e-this.bB_==0&&this.bL_()},bK_:function(){var e=this.P_;e.bz_=!0,e.bx_.emit("finish",this.bi_())},bL_:function(){var e=this._last,t=0;!function n(){if(t!==e.length){var r=e[t++];r(n),r.length||n()}}()},error:function(e){try{this.emit("error",e)}finally{this.end()}return this},beginAsync:function(e){if(this.bF_)throw Error("Tried to render async while in sync mode. Note: Client side await is not currently supported in re-renders (Issue: #942).");var t=this.P_;e&&e.last&&this.bB_++,this.bA_++;var n=this.r_.bM_(),r=new y(this.global,n,this);return t.bx_.emit("beginAsync",{out:r,parentOut:this}),r},createOut:function(){return new y(this.global)},flush:function(){var e=this.P_.bx_;e.listenerCount("update")&&e.emit("update",new h(this))},H_:function(){return this.P_.by_},bi_:function(){return this.bN_||(this.bN_=new h(this))},on:function(e,t){var n=this.P_;return"finish"===e&&n.bz_?t(this.bi_()):"last"===e?this.onLast(t):n.bx_.on(e,t),this},once:function(e,t){var n=this.P_;return"finish"===e&&n.bz_?t(this.bi_()):"last"===e?this.onLast(t):n.bx_.once(e,t),this},emit:function(e,t){var n=this.P_.bx_;switch(arguments.length){case 1:n.emit(e);break;case 2:n.emit(e,t);break;default:n.emit.apply(n,arguments)}return this},removeListener:function(){var e=this.P_.bx_;return e.removeListener.apply(e,arguments),this},sync:function(){this.bF_=!0},isSync:function(){return this.bF_},onLast:function(e){var t=this._last;return void 0===t?this._last=[e]:t.push(e),this},G_:function(e){var t=this.bG_;if(!t){var n=this.H_();e=e||this._c_||document,this.bG_=t=n.bO_(e,null),m(t,n,e,this.h_)}return t},toString:function(e){for(var t=this.G_(e),n="",r=t.firstChild;r;){var i=r.nextSibling;if(1!=r.nodeType){var o=t.ownerDocument.createElement("div");o.appendChild(r.cloneNode()),n+=o.innerHTML}else n+=r.outerHTML;r=i}return n},then:function(e,t){var n=this,r=new Promise((function(e,t){n.on("error",t).on("finish",(function(t){e(t)}))}));return Promise.resolve(r).then(e,t)},catch:function(e){return this.then(void 0,e)},isVDOM:!0,c:function(e,t,n){this.m_=e,this.o_=t,this.aQ_=n}};_.e=_.element,_.be=_.beginElement,_.ee=_.be_=_.endElement,_.t=_.text,_.h=_.w=_.write=_.html,e.exports=y},function(e,t,n){var r=n(114),i=n(99);function o(e,t){this.bP_(-1,t),this.bQ_=e}o.prototype={bR_:8,bO_:function(e){var t=this.bQ_;return e.createComment(t)},__:function(){return new o(this.bQ_)}},i(o,r),e.exports=o},function(e,t,n){var r=n(114),i=n(99),o=n(141);function a(e){o(this,e),this.bT_=null,this.bU_=null}function s(e){this.bP_(null),this.E_=e}s.prototype={bR_:11,bV_:!0,__:function(){return new a(this)},bO_:function(e){return e.createDocumentFragment()}},i(s,r),a.prototype=s.prototype,e.exports=s},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(126),o=n(85),a=i.aj_,s=n(114),c=n(99),u=/^xmlns(:|$)/,l="http://www.w3.org/1999/xlink",d="http://www.w3.org/1999/xhtml",f={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},h=Object.defineProperty,p=Object.freeze({});function m(e,t){if(!0===t)return"";if("object"==e)switch(t.toString){case Object.prototype.toString:case Array.prototype.toString:return JSON.stringify(t);case RegExp.prototype.toString:return t.source}return t+""}function v(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function g(e,t,n,r){null===t?e.setAttribute(n,r):e.setAttributeNS(t,n,r)}function y(e,t,n){null===t?e.removeAttribute(n):e.removeAttributeNS(t,n)}function _(e){this.bW_=e.bW_,this.bT_=null,this.bU_=null,this.bS_=e.bS_,this.bX_=e.bX_,this.aV_=e.aV_,this.bY_=e.bY_,this._N_=e._N_,this.bZ_=e.bZ_,this.c__=e.c__}function b(e,t,n,r,i,o,a){var s;this.bP_(i,r),a&&(s=a.i),this.bS_=n,this._N_=o||0,this.bX_=t||p,this.aV_=a||p,this.bY_=e,this.bZ_=null,this.c__=s,this.t_=!1,this.s_=!1}b.prototype={bR_:1,__:function(){return new _(this)},e:function(e,t,n,r,i,o,a){var s=this.bI_(new b(e,t,n,r,i,o,a));return 0===i?this.ca_():s},n:function(e,t){return(e=e.__()).aU_=t,this.bI_(e),this.ca_()},bO_:function(e,t){var n=this.bY_,i=this.bX_,o=f[n]||t||d,s=this._N_,c=e.createElementNS(o,n);if(2&s)v(c,i);else{for(var u in i){var h=i[u];if(!1!==h&&null!=h){var p=r(h);"string"!==p&&(h=m(p,h)),"xlink:href"==u?g(c,l,"href",h):c.setAttribute(u,h)}}"textarea"===n&&(c.defaultValue=c.value=this.w_)}return a.set(c,this),c},cb_:function(e){var t=this.bX_[e];return null!=t&&!1!==t}},c(b,s);var E=_.prototype=b.prototype;["checked","selected","disabled"].forEach((function(e){h(E,e,{get:function(){var t=this.bX_[e];return!1!==t&&null!=t}})})),h(E,"w_",{get:function(){var e=this.bZ_;return null==e&&(e=this.bX_.value),null!=e&&!1!==e?e+"":"checkbox"===this.bX_.type||"radio"===this.bX_.type?"on":""}}),b.cc_=function(e){return e},b.cd_=function(e,t,n){var r=e.attributes,i=r.length,a=null,s=null;if(i){a={};for(var c=0;c<i;c++){var f=r[c],h=f.name;u.test(h)||("data-marko"===h?s=o.an_(e):f.namespaceURI===l?a["xlink:href"]=f.value:a[h]=f.value)}}var p=e.nodeName;e.namespaceURI===d&&(p=p.toLowerCase());var m=new b(p,a,null,n,0,0,s);return"textarea"===m.bY_?m.bZ_=e.value:t&&t(e,m,n),m},b.ce_=function(e,t,n){var i=b.cc_,o=t._N_,s=n._N_;a.set(e,n);var c,u=n.bX_,d=n.aV_;if(2&s)return v(e,u);var f,h,p=t.bX_;if(p){if(p===u)return;p=i(p,d)}if(1&s&&1&o)return p.class!==(f=u.class)&&(e.className=f),p.id!==(f=u.id)&&(e.id=f),void(p.style!==(f=u.style)&&(e.style.cssText=f));for(c in u=i(u,d,!0))if(f=u[c],h=null,"xlink:href"===c&&(h=l,c="href"),null==f||!1===f)y(e,h,c);else if(p[c]!==f){var _=r(f);"string"!==_&&(f=m(_,f)),g(e,h,c,f)}if(null===n.bS_||4&o)for(c in p)c in u||("xlink:href"===c?e.removeAttributeNS("xlink:href","href"):e.removeAttribute(c))},e.exports=b},function(e,t,n){(function(t){var n=0,r="M"+Math.random().toFixed(5);e.exports=t.WeakMap||function(){var e=r+n++;return{get:function(t){return t[e]},set:function(t,n){t[e]=n}}}}).call(this,n(53))},function(e,t,n){var r=n(114),i=n(99);function o(e,t){this.bP_(-1,t),this.bQ_=e}o.prototype={ci_:!0,bR_:3,bO_:function(e){return e.createTextNode(this.bQ_)},__:function(){return new o(this.bQ_)}},i(o,r),e.exports=o},function(e,t,n){var r=n(114),i=n(99);function o(e,t,n,r){this.bP_(null,n),this.bS_=t,this.n_=e,this.t_=r}o.prototype={bR_:2},i(o,r),e.exports=o},function(e,t,n){var r=n(126),i=r.al_,o=r.aj_,a=n(114),s=n(99),c=n(215).au_;function u(e,t,n){this.bP_(null,t),this.bS_=e,this.t_=n}u.prototype={bR_:12,bO_:function(){var e=c();return i.set(e,this.bS_),o.set(e,this),e}},s(u,a),e.exports=u},function(e,t){function n(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,""):e.removeAttribute(n,""))}function r(){}r.prototype={option:function(e,t){n(e,t,"selected")},button:function(e,t){n(e,t,"disabled")},input:function(e,t){n(e,t,"checked"),n(e,t,"disabled"),e.value!=t.w_&&(e.value=t.w_),e.hasAttribute("value")&&!t.cb_("value")&&e.removeAttribute("value")},textarea:function(e,t){if(!t.cj_){var n=t.w_;e.value!=n&&(e.value=n);var r=e.firstChild;if(r){var i=r.nodeValue;if(i==n||!n&&i==e.placeholder)return;r.nodeValue=n}}},select:function(e,t){if(!t.cb_("multiple")){var n=0;!function e(t,n,r){for(var i=t.a_;i;)"option"===i.bY_?n(i,++r):r=e(i,n,r),i=i.b_;return r}(t,(function(e,t){e.cb_("selected")&&(n=t)}),-1),e.selectedIndex!==n&&(e.selectedIndex=n)}}},e.exports=new r},function(e,t,n){"use strict";var r=n(78),i=n(54),o=n(269);e.exports=function(e){if("string"==typeof e)return function(e){if(""===e)return{};for(var t,n=o("<a "+e+">").attributes,r={},i=n.length,a=0;a<i;a++)t=n[a],r[t.name]=t.value;return r}(e);if(e){var t={};for(var n in e){var a=e[n];"renderBody"!==n&&("class"===n?a=r(a):"style"===n&&(a=i(a)),t[n]=a)}return t}return e}},function(e,t,n){var r=n(165),i=n(275),o=n(141);function a(e,t,n,r){try{e(t,n),r&&n.end()}catch(e){var o=n.end;n.end=function(){},i((function(){n.end=o,n.error(e)}))}return n}e.exports=function(e,t){var n=t&&(t.renderer||t.render||t),i=e.createOut||t.createOut||r;return o(e,{createOut:i,renderToString:function(e,t){var r=e||{},o=n||this._,s=r.$global,c=i(s);return c.global.template=this,s&&(r.$global=void 0),t?(c.on("finish",(function(){t(null,c.toString(),c)})).once("error",t),a(o,r,c,!0)):(c.sync(),o(r,c),c.toString())},renderSync:function(e){var t=e||{},r=n||this._,o=t.$global,a=i(o);return a.sync(),a.global.template=this,o&&(t.$global=void 0),r(t,a),a.bi_()},render:function(e,t){var r,s,c,u,l=n||this._,d=this.bk_,f=!0;return e?(c=e,(u=e.$global)&&(c.$global=void 0)):c={},t&&t.bh_?(s=t,f=!1,o(t.global,u)):"function"==typeof t?(s=i(u),r=t):s=i(u,t,void 0,d),r&&s.on("finish",(function(){r(null,s.bi_(),s)})).once("error",r),(u=s.global).template=u.template||this,a(l,c,s,f)}})}},function(e,t,n){var r=n(141);function i(e){this.n_=e,this._z_={},this._a_=!1,this._r_=null,this._q_=null,this.ac_=null,Object.seal(this)}i.prototype={O_:function(){this._a_=!1,this._r_=null,this._q_=null,this.ac_=null},_j_:function(e){var t,n=this._z_;for(t in n)t in e||this._l_(t,void 0,!1,!1);for(t in e)this._l_(t,e[t],!0,!1)},_l_:function(e,t,n,i){var o,a,s=this._z_;if(n&&(o=e,a=this.constructor.prototype,o in a||Object.defineProperty(a,o,{get:function(){return this._z_[o]},set:function(e){this._l_(o,e,!1)}})),i)(this.ac_||(this.ac_={}))[e]=!0;else if(s[e]===t)return;this._a_||(this._a_=!0,this._r_=s,this._z_=s=r({},s),this._q_={},this.n_._k_()),this._q_[e]=t,void 0===t?delete s[e]:s[e]=t},toJSON:function(){return this._z_}},e.exports=i},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i,o=n(271),a=n(165),s=n(167).u_,c=n(85),u=c.I_,l=c.J_,d=n(267),f=n(270),h=n(601),p=n(99),m=n(602),v=n(272),g=n(166),y=n(126),_=y.K_,b=y.L_,E=Array.prototype.slice,S={addDestroyListener:!1},C=d.prototype.emit;function w(e){e()}function T(e){for(var t;e&&(t=e.firstChild);)e=t.fragment;return t}function D(e,t,n,r){n.push(e),r&&(n=r.concat(n));var i=u[e.M_],o="function"==typeof t?t:i[t];if(!o)throw Error("Method not found: "+t);o.apply(i,n)}function A(e,t){return t?e+"_"+t:e}function R(e){d.call(this),this.id=e,this.P_=null,this.Q_=null,this.R_=null,this.S_=null,this.T_=null,this.U_=null,this.M_=null,this.V_=null,this.W_=void 0,this.X_=!1,this.Y_=void 0,this.Z_=!1,this.___=!1,this._a_=!1,this._b_=!1,this._c_=void 0;var t=b[e];t?(this.q_=t,delete b[e]):this.q_={}}R.prototype=i={_d_:!0,subscribeTo:function(e){if(!e)throw TypeError();var t=this.R_||(this.R_=new h),n=e._d_?void 0:S;return t.subscribeTo(e,n)},emit:function(e){var t,n=this.U_;if(n&&(t=n[e])){var r=t[0],i=t[1],o=t[2],a=E.call(arguments,1);D(this,r,a,o),i&&delete n[e]}return C.apply(this,arguments)},getElId:function(e,t){return e?function(e,t,n){return e.id+"-"+A(t,n)}(this,e,t):this.id},getEl:function(e,t){if(e){var n=A(e,t),r=this.q_["@"+n];if(!r){var i=this.q_[n];if(i)return 1===i.nodeType?i:T(i)}return r}return this.el},getEls:function(e){e+="[]";for(var t,n=[],r=0;t=this.getEl(e,r);)n.push(t),r++;return n},getComponent:function(e,t){var n=this.q_[A(e,t)];return/\[\]$/.test(e)&&(n=n&&n[Object.keys(n)[0]]),n&&_.get(n)},getComponents:function(e){var t=this.q_[e+"[]"];return t?Object.keys(t).map((function(e){return _.get(t[e])})).filter(Boolean):[]},destroy:function(){if(!this.Z_){var e=this.Q_;this._e_(),e.nodes.forEach((function(e){l(e),!1!==g._f_(e)&&e.parentNode.removeChild(e)})),e.detached=!0,delete u[this.id],this.q_={}}},_e_:function(){if(!this.Z_){this._g_(),this.Z_=!0,_.set(this.Q_,void 0),this.Q_=null,this._h_();var e=this.R_;e&&(e.removeAllListeners(),this.R_=null)}},isDestroyed:function(){return this.Z_},get state(){return this.P_},set state(e){var t=this.P_;(t||e)&&(t||(t=this.P_=new this._i_(this)),t._j_(e||{}),t._a_&&this._k_(),e||(this.P_=null))},setState:function(e,t){var n=this.P_;if(n||(n=this.P_=new this._i_(this)),"object"==r(e)){var i=e;for(var o in i)i.hasOwnProperty(o)&&n._l_(o,i[o],!0)}else n._l_(e,t,!0)},setStateDirty:function(e,t){var n=this.P_;1==arguments.length&&(t=n[e]),n._l_(e,t,!0,!0)},replaceState:function(e){this.P_._j_(e)},get input(){return this.W_},set input(e){this._b_?this.W_=e:this._m_(e)},_m_:function(e,t,n){var r;t=t||this.onInput;var i=this.W_;return this.W_=void 0,this._n_=n&&n.__subtree_context__||this._n_,t&&(this._b_=!0,r=t.call(this,e||{},n),this._b_=!1),e=this.V_=r||e,(this._a_=function(e,t,n){if(t!=n){if(null==t||null==n)return!0;var r=Object.keys(t),i=Object.keys(n),o=r.length;if(o!==i.length)return!0;for(var a=o;a--;){var s=r[a];if(!(s in n)||t[s]!==n[s])return!0}}return!1}(0,i,e))&&this._k_(),void 0===this.W_&&(this.W_=e,e&&e.$global&&(this.Y_=e.$global)),e},forceUpdate:function(){this._a_=!0,this._k_()},_k_:function(){this.___||(this.___=!0,m._o_(this))},update:function(){if(!0!==this.Z_&&!1!==this._p_){var e=this.W_,t=this.P_;!1===this._a_&&null!==t&&!0===t._a_&&function(e,t,n){var r,i;for(var o in t)if(t.hasOwnProperty(o)){if(!(r=e["update_"+o]))return;(i||(i=[])).push([o,r])}return i&&(i.forEach((function(i){var o=i[0];r=i[1];var a=t[o],s=n[o];r.call(e,a,s)})),e.N_(),e.O_()),!0}(this,t._q_,t._r_)&&(t._a_=!1),!0===this._p_&&!1!==this.shouldUpdate(e,t)&&this._s_(),this.O_()}},get _p_(){return!0===this._a_||null!==this.P_&&!0===this.P_._a_},O_:function(){this._a_=!1,this.___=!1,this.V_=null;var e=this.P_;e&&e.O_()},shouldUpdate:function(){return!0},_s_:function(){var e=this;if(!e._t_)throw TypeError();var t=this.V_||this.W_;m._u_((function(){e._v_(t,!1).afterInsert(e._c_)})),this.O_()},_v_:function(e,t){var n=this._c_,r=this.Y_,i=this.Q_,o=this._t_,c=(o.createOut||a)(r);c.sync(),c._c_=this._c_,c.__subtree_context__=this._n_;var u=s(c),l=u.k_;l._w_=this,l.l_=t,o(e,c);var d=new f(c),h=c.H_().a_;return v(i,h,n,u),d},_x_:function(){var e=this.Q_;return e.remove(),e},_h_:function(){var e=this.S_;e&&(e.forEach(w),this.S_=null)},get _y_(){var e=this.P_;return e&&e._z_},_A_:function(e,t){var n=this.U_={};this.M_=t,e.forEach((function(e){var t=e[0],r=e[1],i=e[2],o=e[3];n[t]=[r,i,o]}))},get el(){return T(this.Q_)},get els(){return(this.Q_?this.Q_.nodes:[]).filter((function(e){return 1===e.nodeType}))},_B_:C,_C_:function(e,t){this.onCreate&&this.onCreate(e,t),this._B_("create",e,t)},_D_:function(e){this.onRender&&this.onRender(e),this._B_("render",e)},N_:function(){this.onUpdate&&this.onUpdate(),this._B_("update")},_E_:function(){this.onMount&&this.onMount(),this._B_("mount")},_g_:function(){this.onDestroy&&this.onDestroy(),this._B_("destroy")}},i.elId=i.getElId,i._F_=i.update,i._G_=i.destroy,o(i,(function(e){return e._x_()}),(function(e){return e})),p(R,d),e.exports=R},function(e,t,n){var r=n(85)._Y_;e.exports=function(e){this._Z_={},this._w_=void 0,this._R_=r(e)}},function(e,t){function n(e){return!e.once}function r(e){this.$__target=e,this.$__listeners=[],this.$__subscribeTo=null}function i(e){this.$__target=e}function o(){this.$__subscribeToList=[]}r.prototype={$__remove:function(e,t){var n=this.$__target,r=this.$__listeners;this.$__listeners=r.filter((function(r){var i=r[0],o=r[1],a=r[2];if(t){if(a&&e(i,a))return n.removeListener(i,a),!1}else if(e(i,o))return n.removeListener(i,a||o),!1;return!0}));var i=this.$__subscribeTo;if(!this.$__listeners.length&&i){var o=this,a=i.$__subscribeToList;i.$__subscribeToList=a.filter((function(e){return e!==o}))}},on:function(e,t){return this.$__target.on(e,t),this.$__listeners.push([e,t]),this},once:function(e,t){var n=this,r=function e(){n.$__remove((function(t,n){return e===n}),!0),t.apply(this,arguments)};return this.$__target.once(e,r),this.$__listeners.push([e,t,r]),this},removeListener:function(e,t){return"function"==typeof e&&(t=e,e=null),t&&e?this.$__remove((function(n,r){return e===n&&t===r})):t?this.$__remove((function(e,n){return t===n})):e&&this.removeAllListeners(e),this},removeAllListeners:function(e){var t=this.$__listeners,n=this.$__target;if(e)this.$__remove((function(t,n){return e===t}));else{for(var r=t.length-1;r>=0;r--){var i=t[r];n.removeListener(i[0],i[1])}this.$__listeners.length=0}return this}},i.prototype={on:function(e,t){return this.$__target.addEventListener(e,t),this},once:function(e,t){var n=this;return this.$__target.addEventListener(e,(function r(){n.$__target.removeEventListener(e,r),t()})),this},removeListener:function(e,t){return this.$__target.removeEventListener(e,t),this}},o.prototype={subscribeTo:function(e,t){for(var o,a,s=!t||!1!==t.addDestroyListener,c=this.$__subscribeToList,u=0,l=c.length;u<l;u++){var d=c[u];if(d.$__target===e){o=d;break}}return o||(n(e)&&(a=new i(e)),o=new r(a||e),s&&!a&&o.once("destroy",(function(){o.removeAllListeners();for(var t=c.length-1;t>=0;t--)if(c[t].$__target===e){c.splice(t,1);break}})),o.$__subscribeTo=this,c.push(o)),o},removeAllListeners:function(e,t){var n,r=this.$__subscribeToList;if(e)for(n=r.length-1;n>=0;n--){var i=r[n];if(i.$__target===e){i.removeAllListeners(t),i.$__listeners.length||r.splice(n,1);break}}else{for(n=r.length-1;n>=0;n--)r[n].removeAllListeners();r.length=0}}},(t=e.exports=o).wrap=function(e){var t,o;return n(e)&&(t=new i(e)),o=new r(t||e),t||e.once("destroy",(function(){o.$__listeners.length=0})),o},t.createTracker=function(){return new o}},function(e,t,n){"use strict";var r=!1,i=[],o=[],a=n(275);function s(){if(o.length)try{c(o)}finally{r=!1}}function c(e){for(var t=0;t<e.length;t++){e[t]._F_()}e.length=0}t._o_=function(e){var t=i.length;if(t){var n=i[t-1];n.aT_?n.aT_.push(e):n.aT_=[e]}else r||(r=!0,a(s)),o.push(e)},t._u_=function(e){var t={aT_:null};i.push(t);try{e()}finally{try{t.aT_&&c(t.aT_)}finally{i.length--}}}},function(e,t,n){var r=n(85),i=n(604),o=n(13);n(167)._W_=i._W_,t.getComponentForEl=r.ap_,t.init=window.$initComponents=i.aq_,t.register=function(e,t){o.r(e,(function(){return t}))}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(605),o=n(166),a=window,s=document,c=n(215).au_,u=n(85),l=u.I_,d=u.av_,f=n(217),h=n(13),p=n(126),m=p.L_,v=p.K_,g={},y={};function _(e,t,n){var r,i,a,s,f,h=t.length;for(n=n||[],e=e.firstChild;e;){if(f=e.nextSibling,8===e.nodeType){var p=e.nodeValue;if(p.slice(0,h)===t){var v=p[h];if("^"===v||"#"===v)n.push(e);else if("/"===v){var y,b=e,E=n.pop();if(y=E.parentNode===b.parentNode?c(E.nextSibling,b):c(b.parentNode.firstChild,b),r=E.nodeValue.substring(h+1),"^"===(v=E.nodeValue[h])){var S=r.split(/ /g),C=S[2];i=S[1],r=S[0],s=(a=l[i])?a.q_:m[i]||(m[i]={}),d(s,C,y,r)}g[r]=y,E.parentNode.removeChild(E),b.parentNode.removeChild(b)}}}else if(1===e.nodeType){var w=e.getAttribute("data-marko-key"),T=u.an_(e);if(w){var D=w.indexOf(" ");i=w.substring(D+1),w=w.substring(0,D),(s=(a=l[i])?a.q_:m[i]||(m[i]={}))[w]=e}T&&Object.keys(T).forEach((function(e){"on"===e.slice(0,2)&&o._I_(e.slice(2))})),_(e,t,n)}e=f}}function b(e,t,n,r,i,o,a){var s=function(e,t,n,r){var i=r;return n&&(i=function(n){r(n),e.removeEventListener(t,i)}),e.addEventListener(t,i,!1),function(){e.removeEventListener(t,i)}}(t,n,i,(function(n){var i=[n,t];o&&(i=o.concat(i)),function(e,t,n){var r=e[t];if(!r)throw Error("Method not found: "+t);r.apply(e,n)}(e,r,i)}));a.push(s)}function E(e,t){var n=e.n_;if(n&&n._d_){n.O_(),n._c_=t,e._L_&&n._h_();var r=e._K_;if(r){var i=[];r.forEach((function(e){var t=e[0],r=e[1],o=n.q_[e[2]],a=e[3],s=e[4];b(n,o,t,r,a,s,i)})),i.length&&(n.S_=i)}n.X_?n.N_():(n.X_=!0,n._E_())}}function S(e,t){var n,r=e.id,i=e.n_,o=g[r];if(o)return delete g[r],i.Q_=o,v.set(o,i),1&e._N_?(i._c_=t,n=i._v_(i.W_,!0),C(e),function(){n.afterInsert(t)}):(C(e),function(){E(e,t)})}function C(e){var t=e.n_;t&&(l[t.id]=t)}function w(e){e&&e()}t._W_=function(e,t){o.ao_(t),t=t||s;var n,r=e.length;for(n=r;n--;)C(e[n]);for(n=r;n--;)E(e[n],t)},t.aq_=function e(t,n){var c,u=r(t),l="$";if("object"!==u){l+="string"===u?(c=t)+"_C":(c="M")+"C",t=a[l];var d=a[l]={r:c,concat:e};return t&&t.forEach&&t.forEach((function(e){d.concat(e)})),d}var p=this.concat===e;t=i(t),p?(c=this.r,n=s):(c=t.r||"M",n=n||s);var m,v=t.p||"",g=y[v],b=t.l;return g?b&&delete y[v]:(g={},b||(y[v]=g)),_(n,c),o.ao_(n),t.g&&(g.aw_=t.g),t.t&&(g.ax_=g.ax_?g.ax_.concat(t.t):t.t),(t.w||[]).map((function(e){var t=S(e=f._S_(e,g.ax_,g.aw_,h),n);return t||(m?m.push(e):(m=[e],n.addEventListener("DOMContentLoaded",(function(){_(n,c),m.map((function(e){return S(e,n)})).reverse().forEach(w)})))),t})).reverse().forEach(w),this}},function(e,t,n){e.exports=n(606)},function(e,t,n){var r=n(276),i=Array.isArray;function o(e,t,n){for(var r=e,i=0;i<n;i++)r=r[t[i]];return r}function a(e){if("Date"===e.type)return new Date(e.value);if("NOOP"===e.type)return r.NOOP;throw new Error("Bad type")}e.exports=function(e){if(!e)return e;var t=e.$$;if(t){var n,r=e.o;if(t&&(n=t.length))for(var s=0;s<n;s++){var c,u=t[s],l=u.r;c=i(l)?o(r,l,l.length):a(l);var d=u.l,f=d.length-1;if(-1===f){r=e.o=c;break}o(r,d,f)[d[f]]=c}return t.length=0,null==r?null:r}return e}},function(e,t,n){var r=n(217);e.exports=function(e,t,n,i){var o=t.id,a=e.p_=new r(t,o,e);return e.k_._Z_[o]=!0,e.h_.push(a),e.E_.bc(t,n,i&&i.n_),a}},function(e,t,n){"use strict";e.exports=function(e){e.ee()}},function(e,t,n){"use strict";(function(e){var t=n(7);!function(e){void 0===e.$&&(e.$=t.a)}(e||window||void 0)}).call(this,n(53))},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(278);function o(e,t){this.logStorage=e,this.stringifyObjects=!(!t||!t.stringifyObjects)&&t.stringifyObjects,this.storeInterval=t&&t.storeInterval?t.storeInterval:3e4,this.maxEntryLength=t&&t.maxEntryLength?t.maxEntryLength:1e4,Object.keys(i.levels).forEach(function(e){this[i.levels[e]]=function(){this._log.apply(this,arguments)}.bind(this,e)}.bind(this)),this.storeLogsIntervalID=null,this.queue=[],this.totalLen=0,this.outputCache=[]}o.prototype.stringify=function(e){try{return JSON.stringify(e)}catch(e){return"[object with circular refs?]"}},o.prototype.formatLogMessage=function(e){for(var t="",n=1,o=arguments.length;n<o;n++){var a=arguments[n];!this.stringifyObjects&&e!==i.levels.ERROR||"object"!==r(a)||(a=this.stringify(a)),t+=a,n!==o-1&&(t+=" ")}return t.length?t:null},o.prototype._log=function(){var e=arguments[1],t=this.formatLogMessage.apply(this,arguments);if(t){var n=this.queue[this.queue.length-1],r=n&&n.text;r===t?n.count+=1:(this.queue.push({text:t,timestamp:e,count:1}),this.totalLen+=t.length)}this.totalLen>=this.maxEntryLength&&this._flush(!0,!0)},o.prototype.start=function(){this._reschedulePublishInterval()},o.prototype._reschedulePublishInterval=function(){this.storeLogsIntervalID&&(window.clearTimeout(this.storeLogsIntervalID),this.storeLogsIntervalID=null),this.storeLogsIntervalID=window.setTimeout(this._flush.bind(this,!1,!0),this.storeInterval)},o.prototype.flush=function(){this._flush(!1,!0)},o.prototype._flush=function(e,t){this.totalLen>0&&(this.logStorage.isReady()||e)&&(this.logStorage.isReady()?(this.outputCache.length&&(this.outputCache.forEach(function(e){this.logStorage.storeLogs(e)}.bind(this)),this.outputCache=[]),this.logStorage.storeLogs(this.queue)):this.outputCache.push(this.queue),this.queue=[],this.totalLen=0),t&&this._reschedulePublishInterval()},o.prototype.stop=function(){this._flush(!1,!1)},e.exports=o},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){var r,i,o;this||window,i=[],void 0===(o="function"==typeof(r=function(){var e=/^(interactive|loaded|complete)$/,t=window.location?window.location.href:null,n=t&&t.replace(/#.*$/,"").replace(/\?.*$/,"")||null,r=document.getElementsByTagName("script"),i="readyState"in(r[0]||document.createElement("script")),o=!window.opera||"[object Opera]"!==window.opera.toString(),a="currentScript"in document;"stackTraceLimit"in Error&&Error.stackTraceLimit!==1/0&&(Error.stackTraceLimit,Error.stackTraceLimit=1/0);var s=!1,c=!1;function u(){if(0===r.length)return null;var t,l,d,f,h,p=[],m=u.skipStackDepth||1;for(t=0;t<r.length;t++)o&&i?e.test(r[t].readyState)&&p.push(r[t]):p.push(r[t]);if(l=new Error,s&&(d=l.stack),!d&&c)try{throw l}catch(e){d=e.stack}if(d&&!(h=function(e,t){var n,i=null;if(t=t||r,"string"==typeof e&&e)for(n=t.length;n--;)if(t[n].src===e){i=t[n];break}return i}(f=function e(t,n){var r,i=null,o="number"==typeof n;return n=o?Math.round(n):0,"string"==typeof t&&t&&(o?r=t.match(/(data:text\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/):(r=t.match(/^(?:|[^:@]*@|.+\)@(?=data:text\/javascript|blob|http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)(data:text\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/))&&r[1]||(r=t.match(/\)@(data:text\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/)),r&&r[1]&&(i=n>0?e(t.slice(t.indexOf(r[0])+r[0].length),n-1):r[1])),i}(d,m),p))&&n&&f===n&&(h=function(e){var t,n,i=null;for(t=0,n=(e=e||r).length;t<n;t++)if(!e[t].hasAttribute("src")){if(i){i=null;break}i=e[t]}return i}(p)),h||1===p.length&&(h=p[0]),h||a&&(h=document.currentScript),!h&&o&&i)for(t=p.length;t--;)if("interactive"===p[t].readyState){h=p[t];break}return h||(h=p[p.length-1]||null),h}(function(){try{var e=new Error;throw s="string"==typeof e.stack&&!!e.stack,e}catch(e){c="string"==typeof e.stack&&!!e.stack}})(),u.skipStackDepth=1;var l=u;return l.near=u,l.far=function(){return null},l.origin=function(){return null},l})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){"use strict";n.r(t),n.d(t,"LOCAL_JID",(function(){return r}));var r="local"},function(e,t,n){var r,i,o,a;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}a=function(e){"use strict";e.Strophe.addConnectionPlugin("disco",{_connection:null,_identities:[],_features:[],_items:[],init:function(t){this._connection=t,this._identities=[],this._features=[],this._items=[],t.addHandler(this._onDiscoInfo.bind(this),e.Strophe.NS.DISCO_INFO,"iq","get",null,null),t.addHandler(this._onDiscoItems.bind(this),e.Strophe.NS.DISCO_ITEMS,"iq","get",null,null)},addIdentity:function(e,t,n,r){for(var i=0;i<this._identities.length;i++)if(this._identities[i].category==e&&this._identities[i].type==t&&this._identities[i].name==n&&this._identities[i].lang==r)return!1;return this._identities.push({category:e,type:t,name:n,lang:r}),!0},addFeature:function(e){for(var t=0;t<this._features.length;t++)if(this._features[t]==e)return!1;return this._features.push(e),!0},removeFeature:function(e){for(var t=0;t<this._features.length;t++)if(this._features[t]===e)return this._features.splice(t,1),!0;return!1},addItem:function(e,t,n,r){return!(n&&!r||(this._items.push({jid:e,name:t,node:n,call_back:r}),0))},info:function(t,n,r,i,o){var a={xmlns:e.Strophe.NS.DISCO_INFO};n&&(a.node=n);var s=e.$iq({from:this._connection.jid,to:t,type:"get"}).c("query",a);this._connection.sendIQ(s,r,i,o)},items:function(t,n,r,i,o){var a={xmlns:e.Strophe.NS.DISCO_ITEMS};n&&(a.node=n);var s=e.$iq({from:this._connection.jid,to:t,type:"get"}).c("query",a);this._connection.sendIQ(s,r,i,o)},_buildIQResult:function(t,n){var r=t.getAttribute("id"),i=t.getAttribute("from"),o=e.$iq({type:"result",id:r});return null!==i&&o.attrs({to:i}),o.c("query",n)},_onDiscoInfo:function(t){var n,r=t.getElementsByTagName("query")[0].getAttribute("node"),i={xmlns:e.Strophe.NS.DISCO_INFO};r&&(i.node=r);var o=this._buildIQResult(t,i);for(n=0;n<this._identities.length;n++)i={category:this._identities[n].category,type:this._identities[n].type},this._identities[n].name&&(i.name=this._identities[n].name),this._identities[n].lang&&(i["xml:lang"]=this._identities[n].lang),o.c("identity",i).up();for(n=0;n<this._features.length;n++)o.c("feature",{var:this._features[n]}).up();return this._connection.send(o.tree()),!0},_onDiscoItems:function(t){var n,r,i={xmlns:e.Strophe.NS.DISCO_ITEMS},o=t.getElementsByTagName("query")[0].getAttribute("node");if(o){for(i.node=o,n=[],r=0;r<this._items.length;r++)if(this._items[r].node==o){n=this._items[r].call_back(t);break}}else n=this._items;var a=this._buildIQResult(t,i);for(r=0;r<n.length;r++){var s={jid:n[r].jid};n[r].name&&(s.name=n[r].name),n[r].node&&(s.node=n[r].node),a.c("item",s).up()}return this._connection.send(a.tree()),!0}})},"object"===s(t)&&void 0!==e?a(n(2)):(i=[n(2)],void 0===(o="function"==typeof(r=a)?r.apply(t,i):r)||(e.exports=o))},function(e,t,n){var r,i,o,a;function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}a=function(e){"use strict";e.Strophe.addConnectionPlugin("streamManagement",{logging:!1,autoSendCountOnEveryIncomingStanza:!1,requestResponseInterval:5,_c:null,_NS:"urn:xmpp:sm:3",_isStreamManagementEnabled:!1,_serverProcesssedStanzasCounter:null,_clientProcessedStanzasCounter:null,_clientSentStanzasCounter:null,_originalXMLOutput:null,_requestHandler:null,_incomingHandler:null,_requestResponseIntervalCount:0,_isSupported:!1,_unacknowledgedStanzas:[],_acknowledgedStanzaListeners:[],addAcknowledgedStanzaListener:function(e){this._acknowledgedStanzaListeners.push(e)},enable:function(t){if(!this._isSupported)throw new Error("The server doesn't support urn:xmpp:sm:3 namespace");if(this._connectionStatus!==e.Strophe.Status.CONNECTED)throw new Error("enable() can only be called in the CONNECTED state");this._c.send(e.$build("enable",{xmlns:this._NS,resume:t})),this._c.flush(),this._c.pause()},getResumeToken:function(){return this._resumeToken},isSupported:function(){return this._isSupported},resume:function(){if(!this.getResumeToken())throw new Error("No resume token");if(this._connectionStatus!==e.Strophe.Status.DISCONNECTED)throw new Error("resume() can only be called in the DISCONNECTED state");this._c.options.explicitResourceBinding=!0,this._resuming=!0,this._originalConnect.apply(this._c,this._connectArgs)},requestAcknowledgement:function(){if(this._connectionStatus!==e.Strophe.Status.CONNECTED)throw new Error("requestAcknowledgement() can only be called in the CONNECTED state");this._requestResponseIntervalCount=0,this._c.send(e.$build("r",{xmlns:this._NS}))},getOutgoingCounter:function(){return this._clientSentStanzasCounter},getIncomingCounter:function(){return this._clientProcessedStanzasCounter},init:function(t){this._c=t,e.Strophe.addNamespace("SM",this._NS),this._originalXMLOutput=this._c.xmlOutput,this._c.xmlOutput=this.xmlOutput.bind(this),this._originalConnect=this._c.connect,this._c.connect=this._interceptConnectArgs.bind(this),this._originalOnStreamFeaturesAfterSASL=this._c._onStreamFeaturesAfterSASL,this._c._onStreamFeaturesAfterSASL=this._onStreamFeaturesAfterSASL.bind(this),this._originalDoDisconnect=this._c._doDisconnect,this._c._doDisconnect=this._interceptDoDisconnect.bind(this),this._originalDisconnect=this._c.disconnect,this._c.disconnect=this._interceptDisconnect.bind(this)},_interceptDisconnect:function(){this._resumeToken=void 0,this._originalDisconnect.apply(this._c,arguments)},_interceptDoDisconnect:function(){this.getResumeToken()&&!this._resuming&&this._c.connected&&!this._c.disconnecting&&(this._resumeState={handlers:this._c.handlers,timedHandlers:this._c.timedHandlers,removeTimeds:this._c.removeTimeds,removeHandlers:this._c.removeHandlers,addTimeds:this._c.addTimeds,addHandlers:this._c.addHandlers},this._storedJid=this._c.jid,this.logging&&e.Strophe.debug("SM stored resume state, handler count: "+this._resumeState.handlers.length)),this._c._data=[],this._originalDoDisconnect.apply(this._c,arguments)},_interceptConnectArgs:function(){this._connectArgs=arguments,this._originalConnect.apply(this._c,arguments)},_onStreamFeaturesAfterSASL:function(e){return this._isSupported=e.getElementsByTagNameNS(this._NS,"sm").length>0,this._originalOnStreamFeaturesAfterSASL.apply(this._c,arguments)},statusChanged:function(t){if(this._connectionStatus=t,this.getResumeToken()||t!==e.Strophe.Status.CONNECTED&&t!==e.Strophe.Status.DISCONNECTED)if(t===e.Strophe.Status.BINDREQUIRED){for(var n in this._c.jid=this._storedJid,this._resumeState)this._c[n]=this._resumeState[n];this._c.send(e.$build("resume",{xmlns:this._NS,h:this._clientProcessedStanzasCounter,previd:this._resumeToken})),this._c.flush()}else t===e.Strophe.Status.ERROR&&(this.logging&&e.Strophe.debug("SM cleared resume token on error"),this._resumeToken=void 0);else this.logging&&e.Strophe.debug("SM reset state"),this._serverProcesssedStanzasCounter=0,this._clientProcessedStanzasCounter=0,this._clientSentStanzasCounter=0,this._isStreamManagementEnabled=!1,this._requestResponseIntervalCount=0,this._resuming=!1,t===e.Strophe.Status.DISCONNECTED&&(this._isSupported=!1),this._unacknowledgedStanzas=[],this._requestHandler&&this._c.deleteHandler(this._requestHandler),this._incomingHandler&&this._c.deleteHandler(this._incomingHandler),this._requestHandler=this._c.addHandler(this._handleServerRequestHandler.bind(this),this._NS,"r"),this._ackHandler=this._c.addHandler(this._handleServerAck.bind(this),this._NS,"a"),this._incomingHandler=this._c.addHandler(this._incomingStanzaHandler.bind(this)),this._enabledHandler=this._c._addSysHandler(this._handleEnabled.bind(this),this._NS,"enabled"),this._resumeFailedHandler=this._c._addSysHandler(this._handleResumeFailed.bind(this),this._NS,"failed"),this._resumedHandler=this._c._addSysHandler(this._handleResumed.bind(this),this._NS,"resumed")},xmlOutput:function(t){return(e.Strophe.isTagEqual(t,"iq")||e.Strophe.isTagEqual(t,"presence")||e.Strophe.isTagEqual(t,"message"))&&this._increaseSentStanzasCounter(t),this._originalXMLOutput.call(this._c,t)},_handleEnabled:function(e){return this._isStreamManagementEnabled=!0,this._resumeToken="true"===e.getAttribute("resume")&&e.getAttribute("id"),this._c.resume(),!0},_handleResumeFailed:function(t){var n=t&&t.firstElementChild&&t.firstElementChild.tagName;return this._c._changeConnectStatus(e.Strophe.Status.ERROR,n,t),this._c._doDisconnect(),!0},_handleResumed:function(t){var n=parseInt(t.getAttribute("h"));if(this._handleAcknowledgedStanzas(n,this._serverProcesssedStanzasCounter),this._resuming=!1,this._c.do_bind=!1,this._c.authenticated=!0,this._c.restored=!0,this._unacknowledgedStanzas.length>0){this.logging&&e.Strophe.debug("SM Sending unacknowledged stanzas",this._unacknowledgedStanzas);var r,i=s(this._unacknowledgedStanzas);try{for(i.s();!(r=i.n()).done;){var o=r.value;this._c.send(o)}}catch(e){i.e(e)}finally{i.f()}}else this.logging&&e.Strophe.debug("SM No unacknowledged stanzas",this._unacknowledgedStanzas);return this._c._changeConnectStatus(e.Strophe.Status.CONNECTED,null),!0},_incomingStanzaHandler:function(t){return(e.Strophe.isTagEqual(t,"iq")||e.Strophe.isTagEqual(t,"presence")||e.Strophe.isTagEqual(t,"message"))&&(this._increaseReceivedStanzasCounter(),this.autoSendCountOnEveryIncomingStanza&&this._answerProcessedStanzas()),!0},_handleAcknowledgedStanzas:function(t,n){var r=t-n;r<0&&this._throwError("New reported stanza count lower than previous. New: "+t+" - Previous: "+n),r>this._unacknowledgedStanzas.length&&this._throwError("Higher reported acknowledge count than unacknowledged stanzas. Reported Acknowledge Count: "+r+" - Unacknowledge Stanza Count: "+this._unacknowledgedStanzas.length+" - New: "+t+" - Previous: "+n);for(var i=0;i<r;i++)for(var o=this._unacknowledgedStanzas.shift(),a=0;a<this._acknowledgedStanzaListeners.length;a++)this._acknowledgedStanzaListeners[a](o);this.logging&&this._unacknowledgedStanzas.length>0&&e.Strophe.warn("SM Unacknowledged stanzas",this._unacknowledgedStanzas),this._serverProcesssedStanzasCounter=t,this.requestResponseInterval>0&&(this._requestResponseIntervalCount=0)},_handleServerRequestHandler:function(){return this._answerProcessedStanzas(),!0},_handleServerAck:function(e){var t=parseInt(e.getAttribute("h"));return this._handleAcknowledgedStanzas(t,this._serverProcesssedStanzasCounter),!0},_answerProcessedStanzas:function(){this._isStreamManagementEnabled&&this._c.send(e.$build("a",{xmlns:this._NS,h:this._clientProcessedStanzasCounter}))},_increaseSentStanzasCounter:function(t){var n=this;if(this._isStreamManagementEnabled){if(-1!==this._unacknowledgedStanzas.indexOf(t))return;this._unacknowledgedStanzas.push(t),this._clientSentStanzasCounter++,this.requestResponseInterval>0&&(this._requestResponseIntervalCount++,this._requestResponseIntervalCount===this.requestResponseInterval&&setTimeout((function(){n._connectionStatus===e.Strophe.Status.CONNECTED&&n.requestAcknowledgement()}),1))}},_increaseReceivedStanzasCounter:function(){this._isStreamManagementEnabled&&this._clientProcessedStanzasCounter++},_throwError:function(t){throw e.Strophe.error(t),new Error(t)}})},"object"===u(t)&&void 0!==e?a(n(2)):(i=[n(2)],void 0===(o="function"==typeof(r=a)?r.apply(t,i):r)||(e.exports=o))},function(e,t,n){var r=function(e){return String(Number(e))===e?Number(e):e},i=function(e,t,n){var i=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:i&&!t[e.name]&&(t[e.name]={});var o=e.push?{}:i?t[e.name]:t;!function(e,t,n,i){if(i&&!n)t[i]=r(e[1]);else for(var o=0;o<n.length;o+=1)null!=e[o+1]&&(t[n[o]]=r(e[o+1]))}(n.match(e.reg),o,e.names,e.name),e.push&&t[e.push].push(o)},o=n(279),a=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],r=t;return e.split(/(\r\n|\r|\n)/).filter(a).forEach((function(e){var t=e[0],a=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var s=0;s<(o[t]||[]).length;s+=1){var c=o[t][s];if(c.reg.test(a))return i(c,r,a)}})),t.media=n,t};var s=function(e,t){var n=t.split(/=(.+)/,2);return 2===n.length&&(e[n[0]]=r(n[1])),e};t.parseParams=function(e){return e.split(/\;\s?/).reduce(s,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(r),i=0;i<n.length;i+=3)t.push({component:n[i],ip:n[i+1],port:n[i+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(s,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t,n=!1;return"~"!==e[0]?t=r(e):(t=r(e.substring(1,e.length)),n=!0),{scid:t,paused:n}}))}))}},function(e,t,n){var r=n(279),i=/%[sdv%]/g,o=function(e){var t=1,n=arguments,r=n.length;return e.replace(i,(function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}}))},a=function(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var a=t.names[i];t.name?r.push(n[t.name][a]):r.push(n[t.names[i]])}else r.push(n[t.name]);return o.apply(null,r)},s=["v","o","s","i","u","e","p","c","b","t","r","z","a"],c=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var n=t.outerOrder||s,i=t.innerOrder||c,o=[];return n.forEach((function(t){r[t].forEach((function(n){n.name in e&&null!=e[n.name]?o.push(a(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){o.push(a(t,n,e))}))}))})),e.media.forEach((function(e){o.push(a("m",r.m[0],e)),i.forEach((function(t){r[t].forEach((function(n){n.name in e&&null!=e[n.name]?o.push(a(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){o.push(a(t,n,e))}))}))}))})),o.join("\r\n")+"\r\n"}},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,a,s,c=1,u={},l=!1,d=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){p(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){o.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(i=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(p,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&p(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[c]=i,r(c),c++},f.clearImmediate=h}function h(e){delete u[e]}function p(e){if(l)setTimeout(p,0,e);else{var t=u[e];if(t){l=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{h(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(53),n(115))},function(e,t,n){var r=function(e){return String(Number(e))===e?Number(e):e},i=function(e,t,n){var i=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:i&&!t[e.name]&&(t[e.name]={});var o=e.push?{}:i?t[e.name]:t;!function(e,t,n,i){if(i&&!n)t[i]=r(e[1]);else for(var o=0;o<n.length;o+=1)null!=e[o+1]&&(t[n[o]]=r(e[o+1]))}(n.match(e.reg),o,e.names,e.name),e.push&&t[e.push].push(o)},o=n(281),a=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],r=t;return e.split(/(\r\n|\r|\n)/).filter(a).forEach((function(e){var t=e[0],a=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var s=0;s<(o[t]||[]).length;s+=1){var c=o[t][s];if(c.reg.test(a))return i(c,r,a)}})),t.media=n,t};var s=function(e,t){var n=t.split(/=(.+)/,2);return 2===n.length?e[n[0]]=r(n[1]):1===n.length&&t.length>1&&(e[n[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\s?/).reduce(s,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(r),i=0;i<n.length;i+=3)t.push({component:n[i],ip:n[i+1],port:n[i+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(s,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t,n=!1;return"~"!==e[0]?t=r(e):(t=r(e.substring(1,e.length)),n=!0),{scid:t,paused:n}}))}))}},function(e,t,n){var r=n(281),i=/%[sdv%]/g,o=function(e){var t=1,n=arguments,r=n.length;return e.replace(i,(function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}}))},a=function(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var a=t.names[i];t.name?r.push(n[t.name][a]):r.push(n[t.names[i]])}else r.push(n[t.name]);return o.apply(null,r)},s=["v","o","s","i","u","e","p","c","b","t","r","z","a"],c=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var n=t.outerOrder||s,i=t.innerOrder||c,o=[];return n.forEach((function(t){r[t].forEach((function(n){n.name in e&&null!=e[n.name]?o.push(a(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){o.push(a(t,n,e))}))}))})),e.media.forEach((function(e){o.push(a("m",r.m[0],e)),i.forEach((function(t){r[t].forEach((function(n){n.name in e&&null!=e[n.name]?o.push(a(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){o.push(a(t,n,e))}))}))}))})),o.join("\r\n")+"\r\n"}},function(e,t,n){var r=n(32),i=n(622),o=i.parseSsrcs,a=i.writeSsrcs;function s(e,t,n){return e.ssrcs.filter((function(e){return e.id===t})).filter((function(e){return e.attribute===n})).map((function(e){return e.value}))[0]}function c(e){this.options=e||{},this.options.numOfLayers||(this.options.numOfLayers=3),console.log("SdpSimulcast: using "+this.options.numOfLayers+" layers"),this.ssrcCache=[]}function u(e,t){null!=e&&Array.isArray(e.media)&&e.media.forEach((function(e){"video"===e.type&&t(e)}))}function l(e){return e&&null!=e&&e.type&&""!=e.type&&e.sdp&&""!=e.sdp}c.prototype.clearSsrcCache=function(){this.ssrcCache=[]},c.prototype.setSsrcCache=function(e){this.ssrcCache=e},c.prototype._parseSimLayers=function(e){var t=e.ssrcGroups&&e.ssrcGroups.find((function(e){return"SIM"===e.semantics}));return t?t.ssrcs.split(" ").map((function(e){return parseInt(e)})):[e.ssrcs[0].id]},c.prototype._buildNewToOldSsrcMap=function(e,t){for(var n={},r=0;r<e.length;++r){var i=e[r],o=t[r]||null;n[i]=o}return n},c.prototype._fillInSourceDataFromCache=function(e){console.log("SdpSimulcast restoring from cache: ",this.ssrcCache);var t=this._parseSimLayers(e);console.log("SdpSimulcast Parsed new sim ssrcs: ",t);var n=s(e,t[0],"msid"),r=s(e,t[0],"cname"),i=this._buildNewToOldSsrcMap(t,this.ssrcCache);console.log("SdpSimulcast built replacement map: ",i);var o=this.ssrcCache.filter((function(e){return-1===Object.values(i).indexOf(e)}));return console.log("SdpSimulcast built ssrcs to add: ",o),e.ssrcs.forEach((function(e){i[e.id]&&(e.id=i[e.id])})),o.forEach((function(t){e.ssrcs.push({id:t,attribute:"msid",value:n}),e.ssrcs.push({id:t,attribute:"cname",value:r})})),e.ssrcGroups=e.ssrcGroups||[],e.ssrcGroups.push({semantics:"SIM",ssrcs:this.ssrcCache.join(" ")}),e},c.prototype._generateSourceData=function(e,t){var n=function(e,t){e.ssrcs.push({id:t,attribute:"cname",value:i}),e.ssrcs.push({id:t,attribute:"msid",value:r})},r=s(e,t,"msid"),i=s(e,t,"cname");this.options.usesUnifiedPlan&&!r&&(r=e.msid,e.ssrcs.forEach((function(t){e.ssrcs.push({id:t.id,attribute:"msid",value:r})})));for(var o=[],a=0;a<this.options.numOfLayers-1;++a){var c=Math.floor(4294967295*Math.random())+0;n(e,c),o.push(c)}return e.ssrcGroups=e.ssrcGroups||[],e.ssrcGroups.push({semantics:"SIM",ssrcs:t+" "+o.join(" ")}),e},c.prototype._restoreSimulcast=function(e){var t,n=e.ssrcs&&e.ssrcs.map((function(e){return e.id})).filter((function(e,t,n){return n.indexOf(e)===t})).length||0,r=e.ssrcGroups&&e.ssrcGroups.length||0;if(0===n||n>2)return e;if(2==n&&0===r)return e;if(1===n)t=e.ssrcs[0].id;else{var i=e.ssrcGroups.filter((function(e){return"FID"===e.semantics}))[0];if(!i)return e;t=parseInt(i.ssrcs.split(" ")[0])}return console.log("SdpSimulcast: current ssrc cache: ",this.ssrcCache),console.log("SdpSimulcast: parsed primary ssrc "+t),-1!==this.ssrcCache.indexOf(t)?(console.log("SdpSimulcast: Have seen primary ssrc before, filling in data from cache"),e=this._fillInSourceDataFromCache(e)):(console.log("SdpSimulcast: Have not seen primary ssrc before, generating source data"),e=this._generateSourceData(e,t)),this.ssrcCache=this._parseSimLayers(e),e},c.prototype.mungeRemoteDescription=function(e,t){if(!l(e))return e;var n=r.parse(e.sdp),i=this;return u(n,(function(e){i.options.explodeRemoteSimulcast?function(e){if(e&&Array.isArray(e.ssrcGroups))for(var t=o(e),n=[],r=e.ssrcGroups.length;r--;)if("SIM"===e.ssrcGroups[r].semantics){for(var i=e.ssrcGroups[r].ssrcs.split(" "),s=0;s<i.length;s++){var c=i[s];n.push(c);var u=t[c].msid.split(" ");t[c].msid=[u[0],"/",s," ",u[1],"/",s].join(""),t[c].cname=[t[c].cname,"/",s].join(""),e.ssrcGroups.forEach((function(e){if("SIM"!==e.semantics){var r=e.ssrcs.split(" ");-1!==r.indexOf(c)&&r.forEach((function(e){t[e].msid=t[c].msid,t[e].cname=t[c].cname,e!==c&&n.push(e)}))}}))}e.ssrcs=a(t,n),e.ssrcGroups.splice(r,1)}}(e):function(e){if(e&&Array.isArray(e.ssrcGroups)){var t=o(e);e.ssrcGroups.forEach((function(n){if("SIM"===n.semantics){console.info("Imploding SIM group: "+n.ssrcs),n.nuke=!0;for(var r=n.ssrcs.split(" "),i=1;i<r.length;i++){var o=r[i];delete t[o],e.ssrcGroups.forEach((function(e){if("SIM"!==e.semantics){var n=e.ssrcs.split(" ");-1!==n.indexOf(o)&&(n.forEach((function(e){delete t[e]})),e.nuke=!0)}}))}}})),e.ssrcs=a(t);for(var n=e.ssrcGroups.length;n--;)e.ssrcGroups[n].nuke&&e.ssrcGroups.splice(n,1)}else console.info("Halt: There are no SSRC groups in the remote description.")}(e),!i.options.usesUnifiedPlan&&t?function(e){e&&(Array.isArray(e.invalid)||(e.invalid=[]),e.invalid.some((function(e){return"x-google-flag:conference"===e.value}))||e.invalid.push({value:"x-google-flag:conference"}))}(e):function(e){e&&void 0!==e.xGoogleFlag&&(e.xGoogleFlag=void 0)}(e)})),new RTCSessionDescription({type:e.type,sdp:r.write(n)})},c.prototype.mungeLocalDescription=function(e){if(!l(e))return e;var t=r.parse(e.sdp),n=this;return u(t,(function(e){"recvonly"!=e.direction&&"inactive"!=e.direction&&n._restoreSimulcast(e)})),new RTCSessionDescription({type:e.type,sdp:r.write(t)})},e.exports=c},function(e,t){t.writeSsrcs=function(e,t){var n=[];if(void 0!==e&&0!==Object.keys(e).length){Array.isArray(t)||(t=[]);for(var r=0;r<t.length;r++){var i=t[r],o=e[i];Object.keys(o).forEach((function(e){n.push({id:i,attribute:e,value:o[e]})}))}Object.keys(e).forEach((function(r){if(r=parseInt(r),!(t.indexOf(r)>=0)){var i=e[r];Object.keys(i).forEach((function(e){n.push({id:r,attribute:e,value:i[e]})}))}}))}return n},t.parseSsrcs=function(e){var t={};return void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&e.ssrcs.forEach((function(e){t[e.id]||(t[e.id]={}),t[e.id][e.attribute]=e.value})),t}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!f)return!1;var n=e.buffer,r=p.get(n);if(null==r){if((r=o.validate(n))&&t)try{new o.Instance(new o.Module(n)).exports[0]()}catch(e){r=!1}p.set(n,r)}return r}var o=WebAssembly,a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Uint8Array.of.apply(Uint8Array,[0,97,115,109,1,0,0,0].concat(t))},s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Uint32Array.of.apply(Uint32Array,[1836278016,1].concat(t))},c=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.apply(void 0,[1610679297,33751040].concat(t,[40239360,259]))},u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.apply(void 0,[1,4,1,96,0,0,3,2,1,0].concat(t,[11,0,10,4,110,97,109,101,2,3,1,0,0]))},l=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Uint16Array.of.apply(Uint16Array,[24832,28019,1,0,1025,24577,0,515,1].concat(t))},d=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.apply(void 0,t.concat([2842,4096,28164,28001,357,260,256,560,259,0]))},f="object"==r(o),h=function(e){return f&&"function"==typeof e},p=new WeakMap,m=s(1610679553,58589440,117440770,805372165,101318656,1107297281,268438272,1835101700,17039717,36700416,259),v=l(773,1,2561,269,11,65,65,65,3068,2816,2560,28164,28001,613,259,0),g=s(1610679297,33751040,134873089,100664833,185276736),y=a(2,8,1,1,97,1,98,3,127,1,6,6,1,127,1,65,0,11,7,5,1,1,97,3,1,0,8,4,110,97,109,101,2,1,0),_=Uint16Array.of(24832,28019,1,0,1537,24577,512,32639,515,1,2058,1537,16640,16640,2816,2560,28164,28001,613,259,0),b=d(3082,2561,17152,0,0,252),E=d(2058,1537,16640,49152),S=c(101318657,301990913,268438272,1835101700,17039717),C=u(5,4,1,3,1,1,10,7,1,5,0,254,3,0),w=c(84344833,6357249,17369600,4259847,186257917,1845758464),T=u(10,7,1,5,0,208,112,26);e.exports={support:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return f&&i(Uint32Array.of(1836278016,e))},get supportStreaming(){return h(o.instantiateStreaming)},feature:{get bigInt(){return i(m,!0)},get bulk(){return i(v)},get exceptions(){return i(g)},get mutableGlobal(){return i(y)},get multiValue(){return i(_)},get saturateConversions(){return i(b)},get signExtensions(){return i(E)},get tailCall(){return i(S)},get threads(){return i(C)},get simd(){return i(w)},get references(){return i(T)},get typeReflection(){return h(o.Memory.type)},get funcReferences(){return h(o.Function)}}}},function(e,t,n){var r,i,o;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
 * Compressor.js v1.1.1
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-10-05T02:32:40.212Z
 */o=function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?e(Object(i),!0).forEach((function(e){r(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o={exports:{}};!function(e){"undefined"!=typeof window&&function(t){var n=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,r=t.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),i=r&&t.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),o=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,a=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,s=(r||o)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(e){var t,n,s,c,u,l,d,f,h;if(!(t=e.match(a)))throw new Error("invalid data URI");for(n=t[2]?t[1]:"text/plain"+(t[3]||";charset=US-ASCII"),s=!!t[4],c=e.slice(t[0].length),u=s?atob(c):decodeURIComponent(c),l=new ArrayBuffer(u.length),d=new Uint8Array(l),f=0;f<u.length;f+=1)d[f]=u.charCodeAt(f);return r?new Blob([i?d:l],{type:n}):((h=new o).append(l),h.getBlob(n))};t.HTMLCanvasElement&&!n.toBlob&&(n.mozGetAsFile?n.toBlob=function(e,t,r){var i=this;setTimeout((function(){r&&n.toDataURL&&s?e(s(i.toDataURL(t,r))):e(i.mozGetAsFile("blob",t))}))}:n.toDataURL&&s&&(n.msToBlob?n.toBlob=function(e,t,r){var i=this;setTimeout((function(){(t&&"image/png"!==t||r)&&n.toDataURL&&s?e(s(i.toDataURL(t,r))):e(i.msToBlob(t))}))}:n.toBlob=function(e,t,n){var r=this;setTimeout((function(){e(s(r.toDataURL(t,n)))}))})),e.exports?e.exports=s:t.dataURLtoBlob=s}(window)}(o);var a=o.exports,s={strict:!0,checkOrientation:!0,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},c="undefined"!=typeof window&&void 0!==window.document?window:{},u=function(e){return e>0&&e<1/0},l=Array.prototype.slice,d=/^image\/.+$/;function f(e){return d.test(e)}var h=String.fromCharCode,p=c.btoa;function m(e){var t,n=new DataView(e);try{var r,i,o;if(255===n.getUint8(0)&&216===n.getUint8(1))for(var a=n.byteLength,s=2;s+1<a;){if(255===n.getUint8(s)&&225===n.getUint8(s+1)){i=s;break}s+=1}if(i){var c=i+10;if("Exif"===function(e,t,n){var r,i="";for(n+=t,r=t;r<n;r+=1)i+=h(e.getUint8(r));return i}(n,i+4,4)){var u=n.getUint16(c);if(((r=18761===u)||19789===u)&&42===n.getUint16(c+2,r)){var l=n.getUint32(c+4,r);l>=8&&(o=c+l)}}}if(o){var d,f,p=n.getUint16(o,r);for(f=0;f<p;f+=1)if(d=o+12*f+2,274===n.getUint16(d,r)){d+=8,t=n.getUint16(d,r),n.setUint16(d,1,r);break}}}catch(e){t=1}return t}var v=/\.\d*(?:0|9){12}\d*$/;function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return v.test(e)?Math.round(e*t)/t:e}function y(e){var t=e.aspectRatio,n=e.height,r=e.width,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",o=u(r),a=u(n);if(o&&a){var s=n*t;("contain"===i||"none"===i)&&s>r||"cover"===i&&s<r?n=r/t:r=n*t}else o?n=r/t:a&&(r=n*t);return{width:r,height:n}}var _=c.ArrayBuffer,b=c.FileReader,E=c.URL||c.webkitURL,S=/\.\w+$/,C=c.Compressor;return function(){function e(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.file=n,this.image=new Image,this.options=t(t({},s),r),this.aborted=!1,this.result=null,this.init()}var r,o,d;return r=e,d=[{key:"noConflict",value:function(){return window.Compressor=C,e}},{key:"setDefaults",value:function(e){i(s,e)}}],(o=[{key:"init",value:function(){var e=this,t=this.file,n=this.options;if(r=t,"undefined"!=typeof Blob&&(r instanceof Blob||"[object Blob]"===Object.prototype.toString.call(r))){var r,o=t.type;if(f(o))if(E&&b)if(_||(n.checkOrientation=!1),E&&!n.checkOrientation)this.load({url:E.createObjectURL(t)});else{var a=new b,s=n.checkOrientation&&"image/jpeg"===o;this.reader=a,a.onload=function(n){var r=n.target.result,a={};if(s){var c=m(r);c>1||!E?(a.url=function(e,t){for(var n,r=[],i=new Uint8Array(e);i.length>0;)r.push(h.apply(null,(n=i.subarray(0,8192),Array.from?Array.from(n):l.call(n)))),i=i.subarray(8192);return"data:".concat(t,";base64,").concat(p(r.join("")))}(r,o),c>1&&i(a,function(e){var t=0,n=1,r=1;switch(e){case 2:n=-1;break;case 3:t=-180;break;case 4:r=-1;break;case 5:t=90,r=-1;break;case 6:t=90;break;case 7:t=90,n=-1;break;case 8:t=-90}return{rotate:t,scaleX:n,scaleY:r}}(c))):a.url=E.createObjectURL(t)}else a.url=r;e.load(a)},a.onabort=function(){e.fail(new Error("Aborted to read the image with FileReader."))},a.onerror=function(){e.fail(new Error("Failed to read the image with FileReader."))},a.onloadend=function(){e.reader=null},s?a.readAsArrayBuffer(t):a.readAsDataURL(t)}else this.fail(new Error("The current browser does not support image compression."));else this.fail(new Error("The first argument must be an image File or Blob object."))}else this.fail(new Error("The first argument must be a File or Blob object."))}},{key:"load",value:function(e){var n=this,r=this.file,i=this.image;i.onload=function(){n.draw(t(t({},e),{},{naturalWidth:i.naturalWidth,naturalHeight:i.naturalHeight}))},i.onabort=function(){n.fail(new Error("Aborted to load the image."))},i.onerror=function(){n.fail(new Error("Failed to load the image."))},c.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(c.navigator.userAgent)&&(i.crossOrigin="anonymous"),i.alt=r.name,i.src=e.url}},{key:"draw",value:function(e){var t=this,n=e.naturalWidth,r=e.naturalHeight,i=e.rotate,o=void 0===i?0:i,s=e.scaleX,c=void 0===s?1:s,l=e.scaleY,d=void 0===l?1:l,h=this.file,p=this.image,m=this.options,v=document.createElement("canvas"),_=v.getContext("2d"),b=Math.abs(o)%180==90,E=("contain"===m.resize||"cover"===m.resize)&&u(m.width)&&u(m.height),S=Math.max(m.maxWidth,0)||1/0,C=Math.max(m.maxHeight,0)||1/0,w=Math.max(m.minWidth,0)||0,T=Math.max(m.minHeight,0)||0,D=n/r,A=m.width,R=m.height;if(b){var k=[C,S];S=k[0],C=k[1];var O=[T,w];w=O[0],T=O[1];var j=[R,A];A=j[0],R=j[1]}E&&(D=A/R);var P=y({aspectRatio:D,width:S,height:C},"contain");S=P.width,C=P.height;var I=y({aspectRatio:D,width:w,height:T},"cover");if(w=I.width,T=I.height,E){var N=y({aspectRatio:D,width:A,height:R},m.resize);A=N.width,R=N.height}else{var M=y({aspectRatio:D,width:A,height:R}),x=M.width;A=void 0===x?n:x;var L=M.height;R=void 0===L?r:L}var F=-(A=Math.floor(g(Math.min(Math.max(A,w),S))))/2,B=-(R=Math.floor(g(Math.min(Math.max(R,T),C))))/2,U=A,V=R,H=[];if(E){var G,J,z,W,K=y({aspectRatio:D,width:n,height:r},{contain:"cover",cover:"contain"}[m.resize]);z=K.width,W=K.height,G=(n-z)/2,J=(r-W)/2,H.push(G,J,z,W)}if(H.push(F,B,U,V),b){var q=[R,A];A=q[0],R=q[1]}v.width=A,v.height=R,f(m.mimeType)||(m.mimeType=h.type);var $="transparent";if(h.size>m.convertSize&&m.convertTypes.indexOf(m.mimeType)>=0&&(m.mimeType="image/jpeg"),"image/jpeg"===m.mimeType&&($="#fff"),_.fillStyle=$,_.fillRect(0,0,A,R),m.beforeDraw&&m.beforeDraw.call(this,_,v),!this.aborted&&(_.save(),_.translate(A/2,R/2),_.rotate(o*Math.PI/180),_.scale(c,d),_.drawImage.apply(_,[p].concat(H)),_.restore(),m.drew&&m.drew.call(this,_,v),!this.aborted)){var X=function(e){t.aborted||t.done({naturalWidth:n,naturalHeight:r,result:e})};v.toBlob?v.toBlob(X,m.mimeType,m.quality):X(a(v.toDataURL(m.mimeType,m.quality)))}}},{key:"done",value:function(e){var t,n,r=e.naturalWidth,i=e.naturalHeight,o=e.result,a=this.file,s=this.image,c=this.options;if(E&&!c.checkOrientation&&E.revokeObjectURL(s.src),o)if(c.strict&&o.size>a.size&&c.mimeType===a.type&&!(c.width>r||c.height>i||c.minWidth>r||c.minHeight>i||c.maxWidth<r||c.maxHeight<i))o=a;else{var u=new Date;o.lastModified=u.getTime(),o.lastModifiedDate=u,o.name=a.name,o.name&&o.type!==a.type&&(o.name=o.name.replace(S,(t=o.type,"jpeg"===(n=f(t)?t.substr(6):"")&&(n="jpg"),".".concat(n))))}else o=a;this.result=o,c.success&&c.success.call(this,o)}},{key:"fail",value:function(e){var t=this.options;if(!t.error)throw e;t.error.call(this,e)}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}])&&n(r.prototype,o),d&&n(r,d),e}()},"object"===a(t)&&void 0!==e?e.exports=o():void 0===(i="function"==typeof(r=o)?r.call(t,n,t,e):r)||(e.exports=i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=!0;try{void 0===window.sessionStorage&&(console.log("session storage not supported"),r=!1)}catch(e){console.log(e)}t.get=function(e){if(r){var t=window.sessionStorage.getItem(e);try{t=JSON.parse(t)}catch(e){}return t}},t.set=function(e,t){if(r)try{window.sessionStorage.setItem(e,JSON.stringify(t))}catch(e){}},t.remove=function(e){if(r)try{window.sessionStorage.removeItem(e)}catch(e){}}},function(e,t,n){},function(e,t,n){n(628);var r=e.exports=n(16).t(),i={onCreate:function(e){this.state={audio:!0,video:!0},this.userSelectedMediaOptions=e.userSelectedMediaOptions,this.dialogBoxAction=e.dialogBoxAction,this.userSelectedMediaOptions({audioEnabled:this.state.audio,videoEnabled:this.state.video})},onSwitchClick:function(e,t){this.state[e]=t,this.userSelectedMediaOptions({audioEnabled:this.state.audio,videoEnabled:this.state.video})},joinSession:function(){this.dialogBoxAction(l)}},o=(0,n(13).r)("/client$2.26.6/src/components/DialogPopup/index.marko",(function(){return e.exports})),a=n(17),s=n(14),c=n(55),u=(c.default,c.CANCEL_POPUP),l=c.JOIN_SESSION,d=n(168),f=n(169),h=n(219),p=n(220),m=n(61),v=n(78),g=n(629),y=n(69),_=y(g),b=y(n(288)),E={class:"cb__dialogPopup mdc-dialog","aria-modal":"true","aria-labelledby":"my-dialog-title","aria-describedby":"my-dialog-content"},S={class:"mdc-dialog__container cb__dialogPopup__container"},C={class:"mdc-dialog__surface cb__dialogPopup__surface"},w={class:"mdc-dialog__title cb__dialogPopup__title",id:"my-dialog-title"},T={class:"mdc-dialog__content cb__dialogPopup__content",id:"my-dialog-content"},D=n(19),A=n(20)("a93492"),R=D("div",{class:"cb__dialogPopup__controls"},"6",null,1,0,{i:A()}).e("div",{class:"cb__dialogPopup__iconLeft"},null,null,2).e("div",{class:"material-icons mdc-fab__icon"},null,null,0).e("label",{class:"cb__dialogPopup__iconLeftHeading"},null,null,1).t("Allow microphone and camera"),k={class:"cb__dialogPopup__controls"},O={class:"cb__dialogPopup__iconLeft"},j={class:"material-icons mdc-fab__icon"},P=D("label",{class:"cb__dialogPopup__iconLeftLabel"},"17",null,1,0,{i:A()}).t("Allow Camera"),I={class:"cb__dialogPopup__controls"},N={class:"cb__dialogPopup__iconLeft"},M={class:"material-icons mdc-fab__icon"},x=D("label",{class:"cb__dialogPopup__iconLeftLabel"},"26",null,1,0,{i:A()}).t("Allow Microphone"),L=D("hr",null,"28",null,0,0,{i:A()}),F=D("div",{class:"cb__dialogPopup__controls"},"29",null,1,0,{i:A()}).e("div",{class:"cb__dialogPopup__iconLeft"},null,null,2).e("div",{class:"material-icons mdc-fab__icon"},null,null,0).e("label",{class:"cb__dialogPopup__iconLeftHeading"},null,null,1).t("Name"),B={class:"mdc-dialog__actions cb__dialogPopup__footer"},U=D("div",{class:"mdc-dialog__scrim cb__dialogPopup__opacity"},"41",null,0,0,{i:A()}),V={class:"cb__dialogPopup__iconLeft"},H={class:"cb__dialogPopup__iconLeft"},G={class:"mdc-button cb__dialogPopup__button cb__dialogPopup__cancel"},J={class:"mdc-button cb__dialogPopup__button"},z=D("div",{class:"mdc-button__ripple"},"36",null,0,0,{i:A()}),W=D("span",{class:"mdc-button__label"},"37",null,1,0,{i:A()}).t("Cancel"),K=D("div",{class:"mdc-button__ripple"},"39",null,0,0,{i:A()}),q=D("span",{class:"mdc-button__label"},"40",null,1,0,{i:A()}).t("Join");r._=a((function(e,t,n,r,i){t.be("div",E,"0",r),t.be("div",S,"1",r),t.be("div",C,"2",r),t.e("h2",w,"3",r,2).e("b",null,"4",r,1).t(r.input.guestName.charAt(0).toUpperCase()+r.input.guestName.slice(1),r).t(" has invited you to join collaborative session ?"),t.be("div",T,"5",r),t.n(R,r),t.be("div",k,"10",r),t.be("div",O,"11",r),t.be("div",j,"12",r),i.video?(t.be("span",{class:v(["cb__dialogPopup__iconLeft",i.video&&"cb__dialogPopup__iconLeft--enabledVideo"])},"13",r,null,1),m(t,d,null,null,null,null,n,"14"),t.ee()):(t.be("span",V,"15",r),m(t,f,null,null,null,null,n,"16"),t.ee()),t.ee(),t.n(P,r),t.ee(),_({controlType:"video",onSwitchClick:r.onSwitchClick.bind(r)},t,n,"18"),t.ee(),t.be("div",I,"19",r),t.be("div",N,"20",r),t.be("div",M,"21",r),i.audio?(t.be("span",{class:v(["cb__dialogPopup__iconLeft",i.audio&&"cb__dialogPopup__iconLeft--enabledAudio"])},"22",r,null,1),m(t,h,null,null,null,null,n,"23"),t.ee()):(t.be("span",H,"24",r),m(t,p,null,null,null,null,n,"25"),t.ee()),t.ee(),t.n(x,r),t.ee(),_({controlType:"audio",onSwitchClick:r.onSwitchClick.bind(r)},t,n,"27"),t.ee(),t.n(L,r),t.n(F,r),b({dialog:!0,widgetState:r.input.widgetState,inputBoxAction:r.input.inputBoxAction,inputBoxValue:r.input.inputBoxValue},t,n,"33"),t.ee(),t.e("footer",B,"34",r,2).e("button",G,"35",r,2,0,{onclick:n.d("click",()=>{r.input.dialogBoxAction(u)},!1)}).n(z,r).n(W,r).e("button",J,"38",r,2,0,{onclick:n.d("click","joinSession",!1)}).n(K,r).n(q,r),t.ee(),t.ee(),t.n(U,r),t.ee()}),{e_:o},i),r.Component=s(i,r._)},function(e,t,n){},function(e,t,n){n(630);var r=e.exports=n(16).t(),i={onCreate:function(e){this.state={enabled:!0}},onClick:function(e){this.state.enabled=!this.state.enabled,this.input.onSwitchClick(e,this.state.enabled)}},o=(0,n(13).r)("/client$2.26.6/src/components/ToggleSwitch/index.marko",(function(){return e.exports})),a=n(17),s=n(14),c=n(78),u={class:"mdc-switch__thumb-underlay cb__toggleSwitch__underlay"},l=n(19)("input",{type:"checkbox",id:"basic-switch",class:"mdc-switch__native-control",role:"switch"},"4",null,0,0,{i:n(20)("30b10c")()});r._=a((function(e,t,n,r,i){t.e("div",{class:c(["mdc-switch","cb__toggleSwitch",i.enabled&&"mdc-switch--checked"])},"0",r,2,1,{onclick:n.d("click","onClick",!1,[r.input.controlType])}).e("div",{class:c(["mdc-switch__track","cb__toggleSwitch__track",i.enabled&&"cb__toggleSwitch__track--enabled"])},"1",r,0,1).e("div",u,"2",r,1).e("div",{class:c(["mdc-switch__thumb","cb__toggleSwitch__thumb",i.enabled&&"cb__toggleSwitch__thumb--enabled"])},"3",r,1,1).n(l,r)}),{e_:o},i),r.Component=s(i,r._)},function(e,t,n){},function(e,t,n){n(632);var r=e.exports=n(16).t(),i={invitePeople:function(e){this.input.secondaryButtonAction(u)}},o=(0,n(13).r)("/client$2.26.6/src/components/Controls/index.marko",(function(){return e.exports})),a=n(17),s=n(14),c=n(55),u=(c.default,c.INVITE_PEOPLE),l=c.IS_CHAT,d=(c.REPORT_PROBLEM,c.SYNC_WITH_CURRENT_URL,c.IS_SCREEN_SHARING),f=c.IS_REOCRDING,h=n(633),p=(n(289),n(634)),m=n(168),v=(m.default,n(169)),g=(v.default,n(290)),y=(g.default,n(635),n(291)),_=n(636),b=n(292),E=n(293),S=n(61),C=n(54),w=n(294),T=n(69)(w),D=n(78),A={class:"cb__widgetControls__menu"},R=n(19),k=n(20)("0ff00b"),O=R("label",{class:"mdc-elevation--z6 mdc-typography"},"2",null,1,0,{i:k()}).t("Invite People"),j=R("div",{class:"mdc-fab__ripple"},"4",null,0,0,{i:k()}),P={class:"material-icons mdc-fab__icon"},I={class:"cb__widgetControls__menu"},N=R("label",{class:"mdc-elevation--z6 mdc-typography"},"8",null,1,0,{i:k()}).t("Chat"),M=R("div",{class:"mdc-fab__ripple"},"10",null,0,0,{i:k()}),x={class:"material-icons mdc-fab__icon"},L={class:"cb__widgetControls__menu"},F=R("div",{class:"mdc-fab__ripple"},"18",null,0,0,{i:k()}),B={class:"cb__widgetControls__menu"},U=R("div",{class:"mdc-fab__ripple"},"27",null,0,0,{i:k()}),V=R("span",{class:"cb__widgetControls__notification"},"13",null,1,0,{i:k()}).t("1"),H=R("label",{class:"mdc-elevation--z6 mdc-typography"},"15",null,1,0,{i:k()}).t("Stop Sharing"),G=R("label",{class:"mdc-elevation--z6 mdc-typography"},"16",null,1,0,{i:k()}).t("Start Sharing"),J={class:"material-icons mdc-fab__icon"},z={class:"material-icons mdc-fab__icon"},W=R("label",{class:"mdc-elevation--z6 mdc-typography"},"24",null,1,0,{i:k()}).t("Stop Recording"),K=R("label",{class:"mdc-elevation--z6 mdc-typography"},"25",null,1,0,{i:k()}).t("Start Recording"),q={class:"material-icons mdc-fab__icon"},$={class:"material-icons mdc-fab__icon"};r._=a((function(e,t,n,r,i){t.be("div",{class:D(["cb__widgetControls",r.input.isWidgetHidden&&"cb__widgetControls--hidden"])},"0",r,null,1),r.input.loading||(t.be("div",A,"1",r),t.n(O,r),t.be("div",{style:C({color:r.input.primaryColor,backgroundColor:r.input.primaryBackgroundColor}),class:"mdc-fab mdc-fab--mini cb__widgetControls__button"},"3",r,null,1,{onclick:n.d("click","invitePeople",!1)}),t.n(j,r),t.be("span",P,"5",r),S(t,h,null,null,null,null,n,"6"),t.ee(),t.ee(),t.ee(),t.be("div",I,"7",r),t.n(N,r),t.be("div",{style:C({color:r.input.primaryColor,backgroundColor:r.input.primaryBackgroundColor}),class:"mdc-fab mdc-fab--mini cb__widgetControls__button"},"9",r,null,1,{onclick:n.d("click",()=>{r.input.secondaryButtonAction(l)},!1)}),t.n(M,r),t.be("span",x,"11",r),S(t,p,null,null,null,null,n,"12"),t.ee(),r.input.unreadMessage&&!r.input.isDisconnected&&t.n(V,r),t.ee(),t.ee(),t.be("div",L,"14",r),r.input.screenSharing?(t.t(" "),t.n(H,r)):t.n(G,r),t.be("div",{style:C({color:r.input.primaryColor,backgroundColor:r.input.primaryBackgroundColor}),class:"mdc-fab mdc-fab--mini cb__widgetControls__button"},"17",r,null,1,{onclick:n.d("click",()=>{r.input.secondaryButtonAction(d)},!1)}),t.n(F,r),r.input.screenSharing?(t.t(" "),t.be("span",J,"19",r),S(t,_,null,null,null,null,n,"20"),t.ee()):(t.be("span",z,"21",r),S(t,y,null,null,null,null,n,"22"),t.ee()),t.ee(),t.ee(),t.be("div",B,"23",r),r.input.recording?(t.t(" "),t.n(W,r)):(t.n(K,r),t.t(" ")),t.be("div",{style:C({color:r.input.primaryColor,backgroundColor:r.input.primaryBackgroundColor}),class:"mdc-fab mdc-fab--mini cb__widgetControls__button"},"26",r,null,1,{onclick:n.d("click",()=>{r.input.secondaryButtonAction(f)},!1)}),t.n(U,r),r.input.recordingLoader?(t.be("span",{style:C({width:"inherit"}),class:"material-icons mdc-fab__icon"},"28",r,null,1),T({style:{color:r.input.primaryColor}},t,n,"29"),t.ee(),t.t(" ")):r.input.recording?(t.t(" "),t.be("span",q,"30",r),S(t,E,null,null,null,null,n,"31"),t.ee()):(t.be("span",$,"32",r),S(t,b,null,null,null,null,n,"33"),t.ee()),t.t(" "),t.ee(),t.ee()),t.ee()}),{e_:o},i),r.Component=s(i,r._)},function(e,t,n){},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/person_add.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("25a379")()}).e("path",{d:"M0 0h24v24H0z",fill:"none"},null,null,0).e("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/chat.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("b1473b")()}).e("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"},null,null,0).e("path",{d:"M0 0h24v24H0z",fill:"none"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/sync.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},"0",null,1,0,{i:n(20)("28090b")()}).e("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/screen_sharing_off.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,1,0,{i:n(20)("53794e")()}).e("path",{d:"M21.22 18.02l2 2H24v-2h-2.78zm.77-2l.01-10c0-1.11-.9-2-2-2H7.22l5.23 5.23c.18-.04.36-.07.55-.1V7.02l4 3.73-1.58 1.47 5.54 5.54c.61-.33 1.03-.99 1.03-1.74zM2.39 1.73L1.11 3l1.54 1.54c-.4.36-.65.89-.65 1.48v10c0 1.1.89 2 2 2H0v2h18.13l2.71 2.71 1.27-1.27L2.39 1.73zM7 15.02c.31-1.48.92-2.95 2.07-4.06l1.59 1.59c-1.54.38-2.7 1.18-3.66 2.47z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){},function(e,t,n){n(639);var r=e.exports=n(16).t(),i={onCreate:function(e){this.state={url:`https://code.interviewvector.com/login/${e.sessionData.session_id}?user=guest`,tooltip:!1}},startTooltip:function(){this.state.tooltip=!0,setTimeout(()=>{this.state.tooltip=!1},500)},openNativeDrawer:function(e){navigator.share&&navigator.share({title:"Share",url:this.state.url}).then(()=>{}).catch(e=>{})},copyURL:function(e){const t=this.el.querySelector("#cb__clipboard");t.setAttribute("value",this.state.url),t.select(),document.execCommand("copy"),this.startTooltip()},startMedia:function(){this.input.secondaryButtonAction(u)}},o=(0,n(13).r)("/client$2.26.6/src/components/SharingDrawer/index.marko",(function(){return e.exports})),a=n(17),s=n(14),c=n(55),u=(c.default,c.INVITE_PEOPLE,c.IS_MEDIA),l=(c.SECRET_SALT,n(640)),d=n(641),f=(n(642),n(643),n(644)),h=n(86),p=(h.default,h.getURL,h.updateQueryStringParameter,n(61)),m=n(221),v=n(69)(m),g=n(54),y={class:"cb__sharableOption"},_={class:"cb__sharableOption__menu"},b=n(19),E=n(20)("1d195e"),S=b("label",{class:"mdc-elevation--z6"},"2",null,1,0,{i:E()}).t("Copy and share URL"),C=b("input",{id:"cb__clipboard",type:"text",class:"cb__sharableOption__clipboard"},"3",null,0,0,{i:E()}),w=b("div",{class:"mdc-fab__ripple"},"5",null,0,0,{i:E()}),T={class:"material-icons mdc-fab__icon"},D={class:"cb__sharableOption__menu"},A=b("label",{class:"mdc-elevation--z6 mdc-typography"},"10",null,1,0,{i:E()}).t("Share"),R=b("div",{class:"mdc-fab__ripple"},"12",null,0,0,{i:E()}),k={class:"material-icons mdc-fab__icon"},O={class:"cb__sharableOption__menu"},j=b("label",{class:"mdc-elevation--z6 mdc-typography"},"16",null,1,0,{i:E()}).t("Share on Email"),P=b("div",{class:"mdc-fab__ripple"},"18",null,0,0,{i:E()}),I={class:"material-icons mdc-fab__icon"};r._=a((function(e,t,n,r,i){t.be("div",y,"0",r),t.be("div",_,"1",r),t.n(S,r),t.n(C,r),t.be("div",{style:g({color:r.input.primaryColor,backgroundColor:r.input.primaryBackgroundColor}),class:"mdc-fab mdc-fab--mini cb__sharableOption__button"},"4",r,null,1,{onclick:n.d("click","copyURL",!1,[r.input.sessionData])}),t.n(w,r),t.be("span",T,"6",r),p(t,l,null,null,null,null,n,"7"),t.ee(),i.tooltip&&v({style:{top:"-31px"},text:"Copied!"},t,n,"8"),t.ee(),t.ee(),navigator.share?(t.be("div",D,"9",r),t.n(A,r),t.be("a",{style:g({color:r.input.primaryColor,backgroundColor:r.input.primaryBackgroundColor}),target:"_blank",class:"mdc-fab mdc-fab--mini cb__sharableOption__button"},"11",r,null,0,{onclick:n.d("click","openNativeDrawer",!1,[r.input.url])}),t.n(R,r),t.be("span",k,"13",r),p(t,f,null,null,null,null,n,"14"),t.ee(),t.ee(),t.ee()):(t.be("div",O,"15",r),t.n(j,r),t.be("a",{style:g({color:r.input.primaryColor,backgroundColor:r.input.primaryBackgroundColor}),href:"https://mail.google.com/mail/?view=cm&fs=1&to=&body="+i.url,target:"_blank",class:"mdc-fab mdc-fab--mini cb__sharableOption__button"},"17",r,null,0,{onclick:n.d("click","startMedia",!1)}),t.n(P,r),t.be("span",I,"19",r),p(t,d,null,null,null,null,n,"20"),t.ee(),t.ee(),t.ee()),t.ee()}),{e_:o},i),r.Component=s(i,r._)},function(e,t,n){},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/copy.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("a4d971")()}).e("path",{d:"M0 0h24v24H0z",fill:"none"},null,null,0).e("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4l6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2h7zm-1 7h5.5L14 6.5V12z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/email.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("3f857a")()}).e("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"},null,null,0).e("path",{d:"M0 0h24v24H0z",fill:"none"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/whatsapp.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24px",height:"24px"},"0",null,2,0,{i:n(20)("a87299")()}).t(" ").e("path",{d:"M19.077,4.928C17.191,3.041,14.683,2.001,12.011,2c-5.506,0-9.987,4.479-9.989,9.985 c-0.001,1.76,0.459,3.478,1.333,4.992L2,22l5.233-1.237c1.459,0.796,3.101,1.215,4.773,1.216h0.004 c5.505,0,9.986-4.48,9.989-9.985C22.001,9.325,20.963,6.816,19.077,4.928z M16.898,15.554c-0.208,0.583-1.227,1.145-1.685,1.186 c-0.458,0.042-0.887,0.207-2.995-0.624c-2.537-1-4.139-3.601-4.263-3.767c-0.125-0.167-1.019-1.353-1.019-2.581 S7.581,7.936,7.81,7.687c0.229-0.25,0.499-0.312,0.666-0.312c0.166,0,0.333,0,0.478,0.006c0.178,0.007,0.375,0.016,0.562,0.431 c0.222,0.494,0.707,1.728,0.769,1.853s0.104,0.271,0.021,0.437s-0.125,0.27-0.249,0.416c-0.125,0.146-0.262,0.325-0.374,0.437 c-0.125,0.124-0.255,0.26-0.11,0.509c0.146,0.25,0.646,1.067,1.388,1.728c0.954,0.85,1.757,1.113,2.007,1.239 c0.25,0.125,0.395,0.104,0.541-0.063c0.146-0.166,0.624-0.728,0.79-0.978s0.333-0.208,0.562-0.125s1.456,0.687,1.705,0.812 c0.25,0.125,0.416,0.187,0.478,0.291C17.106,14.471,17.106,14.971,16.898,15.554z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/facebook.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24px",height:"24px"},"0",null,2,0,{i:n(20)("b42e09")()}).t(" ").e("path",{d:"M12,2C6.477,2,2,6.477,2,12c0,5.013,3.693,9.153,8.505,9.876V14.65H8.031v-2.629h2.474v-1.749 c0-2.896,1.411-4.167,3.818-4.167c1.153,0,1.762,0.085,2.051,0.124v2.294h-1.642c-1.022,0-1.379,0.969-1.379,2.061v1.437h2.995 l-0.406,2.629h-2.588v7.247C18.235,21.236,22,17.062,22,12C22,6.477,17.523,2,12,2z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/share.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("24626e")()}).e("path",{d:"M0 0h24v24H0z",fill:"none"},null,null,0).e("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){},function(e,t,n){n(647);var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Publisher/index.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(295),c=n(61),u={class:"cb__publisher"},l={class:"cb__publisher__menu"},d=n(19),f=n(20)("a35c22"),h=d("label",{class:"mdc-elevation--z6 mdc-typography"},"2",null,1,0,{i:f()}).t("Join again"),p={class:"mdc-fab mdc-fab--mini cb__publisher__button"},m=d("div",{class:"mdc-fab__ripple"},"4",null,0,0,{i:f()}),v={class:"material-icons mdc-fab__icon"};r._=o((function(e,t,n,r,i){t.be("div",u,"0",r),t.be("div",l,"1",r),t.n(h,r),t.be("div",p,"3",r,null,0,{onclick:n.d("click",r.input.joinPastSession,!1)}),t.n(m,r),t.be("span",v,"5",r),c(t,s,null,null,null,null,n,"6"),t.ee(),t.ee(),t.ee(),t.ee()}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){},function(e,t,n){n(649);var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Subscriber/index.marko",(function(){return e.exports})),o=n(17),a=n(14),s=(n(295),n(296)),c=n(61),u={class:"cb__subscriber"},l={class:"cb__subscriber__menu"},d=n(19),f=n(20)("d2b9df"),h=d("label",{class:"mdc-elevation--z6 mdc-typography"},"2",null,1,0,{i:f()}).t("Join again"),p={class:"mdc-fab mdc-fab--mini cb__subscriber__button"},m=d("div",{class:"mdc-fab__ripple"},"4",null,0,0,{i:f()}),v={class:"material-icons mdc-fab__icon"};r._=o((function(e,t,n,r,i){t.be("div",u,"0",r),t.be("div",l,"1",r),t.n(h,r),t.be("div",p,"3",r,null,0,{onclick:n.d("click",r.input.joinPastSession,!1)}),t.n(m,r),t.be("span",v,"5",r),c(t,s,null,null,null,null,n,"6"),t.ee(),t.ee(),t.ee(),t.ee()}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i={onCreate:function(e){this.state={connection:null},u.initialize(),u.setLogLevel(u.logLevels.ERROR),this.updateNetwork=this.updateNetwork.bind(this),window.addEventListener("offline",this.updateNetwork),window.addEventListener("online",this.updateNetwork),this.createConnection(e.token,e.sessionData)},createConnection:function(e,t){const n=new u.JitsiConnection(e,t.room.session_id);function r(){this.state.connection=n}function i(){}n.addEventListener(u.events.connection.CONNECTION_ESTABLISHED,r.bind(this)),n.addEventListener(u.events.connection.CONNECTION_FAILED,i.bind(this)),n.addEventListener(u.events.connection.CONNECTION_DISCONNECTED,function e(t){if(!this.state.connection)return;n.removeEventListener(u.events.connection.CONNECTION_ESTABLISHED,r),n.removeEventListener(u.events.connection.CONNECTION_FAILED,i),n.removeEventListener(u.events.connection.CONNECTION_DISCONNECTED,e)}.bind(this)),n.connect()},updateNetwork:function(){u.setNetworkInfo({isOnline:window.navigator.onLine})},onDestroy:function(){window.removeEventListener("offline",this.updateNetwork),window.removeEventListener("online",this.updateNetwork)}},o=(0,n(13).r)("/client$2.26.6/src/components/MediaConnection/index.marko",(function(){return e.exports})),a=n(17),s=n(14),c=n(87),u=c.default||c,l=n(218),d=(l.default,l.getL,n(86)),f=(d.default,d.getToken,n(651)),h=n(69)(f);r._=a((function(e,t,n,r,i){i.connection&&h({usersList:r.input.usersList,primaryColor:r.input.primaryColor,primaryBackgroundColor:r.input.primaryBackgroundColor,tracksInitialized:r.input.tracksInitialized,conferenceInitialized:r.input.conferenceInitialized,showToast:r.input.showToast,onMediaControlChange:r.input.onMediaControlChange,muteAll:r.input.muteAll,videoEnabled:r.input.videoEnabled,audioEnabled:r.input.audioEnabled,videoWidget:r.input.videoWidget,isPublisher:r.input.isPublisher,closeCurrentSession:r.input.closeCurrentSession,connection:i.connection},t,n,"0")}),{e_:o},i),r.Component=s(i,r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i={onCreate:function(e){const{connection:t}=e;this.state={conference:null,recordingSession:null,presenterId:null,remoteTracks:{},audioLevel:{},zoomIn:!0,isMouseDown:!1,coordinateShift:{},recordingEnabled:!1,localTracks:[]},this.mouseMoveRef=this.mouseMove.bind(this);const n=t.initJitsiConference();n.on(u.events.conference.TRACK_ADDED,function(e){if(!e||e.isLocal())return;const t=e.getParticipantId();this.state.remoteTracks[t]||(this.state.remoteTracks[t]=[]);this.state.remoteTracks[t].push(e),this.setStateDirty("remoteTracks")}.bind(this)),n.on(u.events.conference.TRACK_REMOVED,function(e){const t=e.getParticipantId();t&&(this.state.remoteTracks[t]=this.state.remoteTracks[t].filter(t=>t.getId()!==e.getId()));this.state.remoteTracks[t]&&0===this.state.remoteTracks[t].length&&delete this.state.remoteTracks[t];this.setStateDirty("remoteTracks")}.bind(this)),n.on(u.events.conference.TRACK_MUTE_CHANGED,function(){this.setStateDirty("remoteTracks")}.bind(this)),n.on(u.events.conference.TRACK_AUDIO_LEVEL_CHANGED,(e,t)=>{this.state.audioLevel[e]=t,this.setStateDirty("audioLevel")}),n.on(u.events.conference.CONFERENCE_JOINED,()=>{n.getParticipants().forEach(e=>{e._properties&&e._properties.hasOwnProperty("recording")&&(this.state.recordingEnabled=!0),"start"===e._properties.presenting&&(this.state.presenterId=participant._id)})}),n.on(u.events.conference.PARTICIPANT_PROPERTY_CHANGED,(e,t,r,i)=>{"presenting"===t&&"start"===i&&(this.state.presenterId=e._id,n.selectParticipant(e._id)),"presenting"===t&&"stop"===i&&(this.state.presenterId=null,this.setStateDirty("remoteTracks"))}),n.join(),this.state.conference=n,e.conferenceInitialized(n);(async()=>{const t=await u.createLocalTracks({devices:["audio","video"],resolution:"180"});this.state.localTracks=t;const[r,i]=t;await n.addTrack(r),await n.addTrack(i),e.audioEnabled||await r.mute(),e.videoEnabled||await i.mute(),e.tracksInitialized(t),this.setStateDirty("localTracks")})(),window.addEventListener("beforeunload",this.leaveConference.bind(this))},videoControlAction:async function(e,t){this.input.onMediaControlChange(e,t);const[n,r]=this.state.localTracks;switch(e){case d:r.isMuted()?r.unmute():r.mute();break;case f:n.isMuted()?n.unmute():n.mute();break;case h:this.state.zoomIn=!this.state.zoomIn;break;default:console.log("hi")}this.setStateDirty("localTracks")},mouseUp:function(){setTimeout(()=>{this.state.isMouseDown=!1},!1),clearTimeout(this.timeout),this.skipMousemove=!1,document.removeEventListener("mousemove",this.mouseMoveRef,!0)},mouseMove:function(e){const t=this.getEl("mediaWidget");t.getBoundingClientRect();t.style.bottom=this.state.coordinateShift.y-e.clientY+this.state.coordinateShift.bottom+"px",t.style.left=e.clientX-this.state.coordinateShift.left+"px"},mouseDown:function(e){const t=this.getEl("mediaWidget");this.timeout=setTimeout(()=>{this.state.isMouseDown=!0},300);const n=t.getBoundingClientRect(),r=e.clientY-n.bottom,i=e.clientX-n.left,o=m();this.state.coordinateShift={x:o.x,y:o.y,bottom:r,left:i},document.addEventListener("mousemove",this.mouseMoveRef,!0)},closeSession:function(e,t){this.leaveConference(),this.input.closeCurrentSession()},leaveConference:function(e){this.state.conference&&this.state.conference.isJoined()&&this.state.conference.leave().then(()=>this.input.connection.disconnect(e)),this.state.localTracks.forEach(e=>e.dispose())},onDestroy:function(){this.leaveConference()}},o=(0,n(13).r)("/client$2.26.6/src/components/Conference/index.marko",(function(){return e.exports})),a=n(17),s=n(14),c=n(87),u=c.default||c,l=n(55),d=(l.default,l.MUTE_ALL_TOGGLE,l.VIDEO_TOGGLE),f=(l.WIDGET_TOGGLE,l.CALL_END,l.MIC_TOGGLE),h=(l.RECORDING_TOGGLE,l.FULL_SCREEN_TOGGLE),p=n(86),m=(p.default,p.getDimensions),v=n(652),g=n(69),y=g(v),_=g(n(656)),b=g(n(659)),E=n(142),S=g(n(661)),C=g(n(662)),w=n(78);n(664),r._=a((function(e,t,n,r,i){t.be("div",{id:"cb--media-container",class:w(["cb__mediaContainer","mdc-elevation--z6"])},"@mediaWidget",r,null,1,{onmouseup:n.d("mouseup","mouseUp",!1),onmousedown:n.d("mousedown","mouseDown",!1)}),y({isPresenting:i.presenterId,primaryColor:r.input.primaryColor,primaryBackgroundColor:r.input.primaryBackgroundColor,recordingEnabled:i.recordingEnabled,isPublisher:r.input.isPublisher,closeSession:r.closeSession.bind(r),videoControlAction:r.videoControlAction.bind(r),widgetToggle:r.input.widgetToggle,videoEnabled:r.input.videoEnabled,muteAll:r.input.muteAll,videoWidget:r.input.videoWidget,zoomIn:i.zoomIn},t,n,"0"),t.be("div",{class:w(["cb__mediaContainer__widget"])},"1",r,null,1),r.input.videoWidget&&(_({audioLevel:i.audioLevel,usersList:r.input.usersList,primaryBackgroundColor:r.input.primaryBackgroundColor,primaryColor:r.input.primaryColor,videoEnabled:r.input.videoEnabled,videoWidget:r.input.videoWidget,audioEnabled:r.input.audioEnabled,videoControlAction:r.videoControlAction.bind(r),localTracks:i.localTracks,conference:i.conference},t,n,"2"),b({audioLevel:i.audioLevel,usersList:r.input.usersList,zoomIn:i.zoomIn,primaryBackgroundColor:r.input.primaryBackgroundColor,primaryColor:r.input.primaryColor,presenterId:i.presenterId,videoWidget:r.input.videoWidget,remoteTracks:i.remoteTracks,videoControlAction:r.videoControlAction.bind(r),conference:i.conference},t,n,"3")),E(Object.keys(i.remoteTracks),(function(e,r){i.remoteTracks[e][0]&&S({track:i.remoteTracks[e][0]},t,n,i.remoteTracks[e][0].track.id)})),i.zoomIn&&E(Object.keys(i.remoteTracks),(function(e,r){e===i.presenterId&&"video"===i.remoteTracks[e][1].getType()&&C({isSharing:!0,user:{},track:i.remoteTracks[e][1]},t,n,i.remoteTracks[e][1].track.id)})),t.ee(),t.ee()}),{e_:o},i),r.Component=s(i,r._)},function(e,t,n){n(653);var r=e.exports=n(16).t(),i={onCreate:function(e){this.state={volumeTT:!1,webcamTT:!1,minimizeTT:!1,callTT:!1,call:!1,screenShareTT:!1,recordingTT:!1}},mouseEnter:function(e){this.state[e]=!0},mouseOut:function(e){this.state[e]=!1},onClick:function(e,t){this.state.minimizeTT=!1,this.input.videoControlAction(e,!t)},closeSession:function(){this.input.closeSession()}},o=(0,n(13).r)("/client$2.26.6/src/components/VideoControls/index.marko",(function(){return e.exports})),a=n(17),s=n(14),c=n(55),u=(c.default,c.MUTE_ALL_TOGGLE,c.VIDEO_TOGGLE,c.WIDGET_TOGGLE),l=(c.CALL_END,c.RECORDING_TOGGLE,c.FULL_SCREEN_TOGGLE),d=(n(654),n(655),n(168),n(169),n(297)),f=n(298),h=(n(289),n(292),n(293),n(299)),p=n(300),m=n(61),v=n(54),g=n(221),y=n(69)(g),_={class:"cb__videoControls mdc-elevation--z6"};r._=a((function(e,t,n,r,i){t.be("div",_,"0",r),t.be("div",{style:v({backgroundColor:r.input.primaryBackgroundColor}),class:"cb__videoControls__icon"},"1",r,null,1,{onclick:n.d("click","onClick",!1,[u,r.input.videoWidget]),onmouseout:n.d("mouseout","mouseOut",!1,["minimizeTT"]),onmouseenter:n.d("mouseenter","mouseEnter",!1,["minimizeTT"])}),t.be("div",{style:v({color:r.input.primaryColor,backgroundColor:r.input.primaryBackgroundColor}),class:"material-icons mdc-fab__icon"},"2",r,null,1),r.input.videoWidget?m(t,d,null,null,null,null,n,"3"):m(t,f,null,null,null,null,n,"4"),t.ee(),i.minimizeTT&&y({style:{top:"-31px"},text:r.input.videoWidget?"Minimize":"Maximize"},t,n,"5"),t.ee(),r.input.isPresenting&&(t.be("div",{style:v({backgroundColor:r.input.primaryBackgroundColor}),class:"cb__videoControls__icon"},"6",r,null,1,{onclick:n.d("click","onClick",!1,[l]),onmouseout:n.d("mouseout","mouseOut",!1,["screenShareTT"]),onmouseenter:n.d("mouseenter","mouseEnter",!1,["screenShareTT"])}),t.be("div",{style:v({color:r.input.primaryColor,backgroundColor:r.input.primaryBackgroundColor}),class:"material-icons mdc-fab__icon"},"7",r,null,1),r.input.zoomIn?m(t,p,null,null,null,null,n,"8"):m(t,h,null,null,null,null,n,"9"),t.ee(),i.screenShareTT&&(r.input.zoomIn?y({style:{top:"-31px",width:"165px"},text:"Minimize Screen sharing"},t,n,"10"):y({style:{top:"-31px",width:"168px"},text:"Maximize Screen sharing"},t,n,"11")),t.ee()),t.ee()}),{e_:o},i),r.Component=s(i,r._)},function(e,t,n){},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/volume_up.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("96e211")()}).e("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"},null,null,0).e("path",{d:"M0 0h24v24H0z",fill:"none"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/volume_off.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("fc60ce")()}).e("path",{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"},null,null,0).e("path",{d:"M0 0h24v24H0z",fill:"none"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){n(657);var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/LocalStream/index.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(142),c=n(301),u=n(69)(c),l=n(54);r._=o((function(e,t,n,r,i){t.be("div",{style:l({borderBottom:r.input.conference.getParticipantCount()>1?"2px solid white;":""}),class:"cb__mediaContainer__local"},"0",r,null,1),s(r.input.localTracks,(function(e,i){e.isVideoTrack()&&u({audioLevel:r.input.audioLevel[r.input.conference.myUserId()],color:(r.input.usersList.find(e=>e.id===r.input.conference.myUserId())||{}).color,primaryBackgroundColor:r.input.primaryBackgroundColor,primaryColor:r.input.primaryColor,videoEnabled:r.input.videoEnabled,videoControlAction:r.input.videoControlAction,audioEnabled:r.input.audioEnabled,user:r.input.conference.getLocalUser(),tracks:r.input.localTracks},t,n,e.track.id)})),t.ee()}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){},function(e,t,n){},function(e,t,n){n(660);var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/RemoteStream/index.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(86),c=(s.default,s.getUser),u=n(142),l=n(301),d=n(69)(l),f={class:"cb__mediaContainer__remote"};r._=o((function(e,t,n,r,i){var o=0;u(Object.keys(r.input.remoteTracks),(function(e,i){var a="["+o+++"]";t.be("div",f,"0"+a,r),r.input.remoteTracks[e][1]&&d({audioLevel:r.input.audioLevel[e],color:(r.input.usersList.find(t=>t.id===e)||{}).color,zoomIn:r.input.zoomIn,primaryColor:r.input.primaryColor,primaryBackgroundColor:r.input.primaryBackgroundColor,isPresenting:r.input.presenterId===e,videoControlAction:r.input.videoControlAction,user:c(r.input.remoteTracks[e][1],r.input.conference),tracks:r.input.remoteTracks[e]},t,n,e),t.t(" "),t.ee()}))}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i={onMount:function(){this.input.track.attach(this.getEl("audio"))}},o=(0,n(13).r)("/client$2.26.6/src/components/Audio/index.marko",(function(){return e.exports})),a=n(17),s=n(14),c=n(87),u=(c.default,n(19)("audio",{playsInline:"1",autoPlay:"1",class:"cb__audio"},"@audio",null,0,0,{i:n(20)("6f87b8")()}));r._=a((function(e,t,n,r,i){t.n(u,r)}),{e_:o},i),r.Component=s(i,r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i={onMount:function(){this.input.track.attach(this.getEl("video"))},onDestroy:function(){this.input.track.detach(this.getEl("video"))},getEditorDimension:function(){const e=document.getElementsByClassName("screen-share-container");return{height:e[0]&&e[0].clientHeight||678,width:e[0]&&e[0].clientWidth||1107}}},o=(0,n(13).r)("/client$2.26.6/src/components/LargeVideo/index.marko",(function(){return e.exports})),a=n(17),s=n(14),c=n(87),u=(c.default,n(219),n(220),n(55)),l=(u.default,u.MIC_TOGGLE,n(54)),d=n(19)("video",{playsInline:"1",autoPlay:"1"},"@video",null,0,0,{i:n(20)("0e7159")()});n(663),r._=a((function(e,t,n,r,i){t.e("div",{style:l({height:r.getEditorDimension().height+"px",width:r.getEditorDimension().width+"px"}),class:"cb__largeVideo"},"0",r,1,1).n(d,r)}),{e_:o},i),r.Component=s(i,r._)},function(e,t,n){},function(e,t,n){},function(e,t,n){n(666);var r=e.exports=n(16).t(),i={onCreate:function(e){this.offset=v,this.state={text:"",sessionInfo:e.sessionData,scrolling:!1,count:0,nameTT:!1,isChat:!1,minimizeTT:!1,closeTT:!1,isZoomed:!0,minimize:!1,usersList:[],messages:[],channel:e.channel,fileAttached:[]}},sendMessage:function(){this.state.fileAttached.find(e=>"loading"===e.status)||(this.state.text&&this.pushMessage({created_by:this.state.sessionInfo.id,created_by_name:this.state.sessionInfo.name,content:p(this.state.text),content_type:h(this.state.text.trim())?"emoji":"text"}),this.state.fileAttached.length&&(this.state.fileAttached.forEach(e=>{"done"===e.status&&this.pushMessage({created_by:this.state.sessionInfo.id,created_by_name:this.state.sessionInfo.name,content:p(e.url),content_type:e.type})}),this.state.fileAttached=[],this.setStateDirty("fileAttached")))},pushMessage:function(e){this.state.messages.push(e),this.state.channel.push(g.PrivateMessage,e),this.state.text="",this.scrollToBottom()},onUpdate:function(){if(this.state.scrolling){const e=this.offset/20,t=this.count/20;index=e<=t?20:this.count%20;const n=this.getEl("cb--chat_body").children[index];n.parentNode.scrollTop=n.offsetTop,this.state.scrolling=!1}},onBodyScroll:function(){0===this.getEl("cb--chat_body").scrollTop&&this.offset/20<this.count/20&&(this.fetchMore(),this.state.scrolling=!0)},fetchMore:function(){this.state.channel.push(g.ArchivedMessage,{page:{offset:this.offset,size:v}}),this.offset=this.offset+v},scrollToBottom:function(e){setTimeout(()=>{const e=this.getEl("cb--chat_body");e&&(e.scrollTop=e.scrollHeight)},0)},mouseEnter:function(e){this.state[e]=!0},onInput:function(e){e.isChat!==this.state.isChat&&this.scrollToBottom(),this.count=e.archivedMessageCount,this.state.isChat=e.isChat,this.state.usersList=e.usersList,this.setStateDirty("usersList"),this.state.messages=e.messages,this.setStateDirty("messages"),this.scrollToBottom()},mouseOut:function(e){this.state[e]=!1},keyDown:function(e){13!=e.which&&13!=e.keyCode||(e.preventDefault(),this.sendMessage())},zoomIn:function(){this.state.isZoomed=!this.state.isZoomed,this.state.minimize=!this.state.minimize,this.state.minimizeTT=!1,this.state.isZoomed&&this.scrollToBottom()},getColor:function(e){const t=this.state.usersList.find(t=>t.id==e);return t?t.color:"black"},onInputValue:function(e){this.state.text=e.target.value},closeChat:function(){this.state.closeTT=!1,this.input.closeChat()},setEmoji:function(e){this.state.text=this.state.text+e,setTimeout(()=>this.getEl("cb--chat_input").focus(),0)},startFileUpload:function(e){const t=this.state.fileAttached.findIndex(t=>e.id===t.id);if(t>=0){const n=this.state.fileAttached[t];n.status=e.status,n.url=e.url,this.state.fileAttached[t]=n}else this.state.fileAttached.push(e);this.setStateDirty("fileAttached")},removeAttachment:function(e){this.state.fileAttached=this.state.fileAttached.filter(t=>t.id!==e),this.setStateDirty("fileAttached")}},o=(0,n(13).r)("/client$2.26.6/src/components/Chat/index.marko",(function(){return e.exports})),a=n(17),s=n(14),c=n(86),u=(c.default,c.getTime),l=c.getTimeLocal,d=c.getTop,f=c.getText,h=c.isOnlyEmojis,p=c.encodeHTML,m=n(55),v=(m.default,m.pageSize),g=m.ChannelMesssageEvents,y=n(297),_=n(298),b=n(667),E=n(170),S=n(668),C=n(287),w=(C.default,C.Presence,n(61)),T=n(142),D=n(78),A=n(54),R=n(221),k=n(69),O=k(R),j=k(n(669)),P=k(n(672)),I=k(n(674)),N={class:"cb__chatWrapper__leftControl"},M={class:"cb__chatWrapper__headerName"},x=n(19),L=n(20)("cd5595"),F=x("div",{class:"cb__chatWrapper__active"},"10",null,1,0,{i:L()}).t("Active now"),B={class:"cb__chatWrapper__headerIcons"},U={class:"cb__chatWrapper__headerBack"},V={class:"cb__chatWrapper__headerIcons"},H={class:"cb__chatWrapper__rightControl"},G={class:"cb__chatWrapper__mixMaxBtn material-icons"},J={class:"cb__chatWrapper__sendContainer"},z={class:"mdc-fab mdc-fab--mini cb__chatWrapper__send"},W=x("div",{class:"mdc-fab__ripple"},"32",null,0,0,{i:L()}),K={class:"cb__chatWrapper__name"},q={class:"cb__chatWrapper__meta"},$={class:"cb__chatWrapper__name"},X={class:"cb__chatWrapper__time"},Y={class:"cb__chatWrapper__meta"},Q={class:"cb__chatWrapper__name"},Z={class:"cb__chatWrapper__time"},ee={class:"cb__chatWrapper__attachements"};r._=a((function(e,t,n,r,i){if(t.be("div",{id:"cb--chat-container",class:D(["cb__chatWrapper mdc-elevation--z6",r.input.mobile&&"cb__chatWrapper--mobile",!i.isZoomed&&"cb__chatWrapper--collasped"])},"0",r,null,1),r.input.isChat){if(t.be("div",{class:D(["cb__chatWrapper__header",r.input.mobile&&"cb__chatWrapper__header--mobile"])},"1",r,null,1),t.be("div",N,"2",r,null,0,{onclick:n.d("click",!r.input.mobile&&"zoomIn",!1)}),r.input.mobile)t.be("div",B,"3",r,null,0,{onclick:n.d("click","closeChat",!1)}),t.be("div",U,"4",r),w(t,b,null,null,null,null,n,"5"),t.ee(),t.ee();else{t.be("div",V,"6",r);var o=0;T(i.usersList,(function(e,n){var a="["+o+++"]";n<=1&&t.e("div",{class:D(["cb__chatWrapper__headerIcons__"+n,1===i.usersList.length&&"cb__chatWrapper__headerIcons--one"]),style:A({"background-color":e.color})},"7"+a,r,1,1).t(e.name[0].toUpperCase(),r)})),t.ee()}if(t.be("span",M,"8",r,null,0,{onmouseout:n.d("mouseout","mouseOut",!1,["nameTT"]),onmouseover:n.d("mouseover","mouseEnter",!1,["nameTT"])}),1===i.usersList.length?(t.t(""),t.t(i.usersList[0].name,r)):T(i.usersList,(function(e,n){t.t(e.name,r),t.t(" "),n!==i.usersList.length-1&&t.t(",")})),t.ee(),i.nameTT&&O({style:{top:d(i.usersList),left:"35px"},text:i.usersList},t,n,"9"),t.n(F,r),t.ee(),r.input.mobile||(t.be("div",H,"11",r),t.be("div",{style:A({color:r.input.primaryColor}),class:"cb__chatWrapper__zoom material-icons mdc-fab__icon"},"12",r,null,1,{onclick:n.d("click","zoomIn",!1)}),t.be("span",G,"13",r,null,0,{onmouseout:n.d("mouseout","mouseOut",!1,["minimizeTT"]),onmouseover:n.d("mouseover","mouseEnter",!1,["minimizeTT"])}),w(t,i.minimize?_:y,null,null,null,null,n,"14"),t.ee(),t.ee(),i.minimizeTT&&O({text:f(i.isZoomed),style:{top:"-31px",left:"-16px"}},t,n,"15"),t.be("div",{style:A({color:r.input.primaryColor}),class:"cb__chatWrapper__close material-icons mdc-fab__icon"},"16",r,null,1,{onclick:n.d("click","closeChat",!1)}),t.be("span",null,"17",r,null,0,{onmouseout:n.d("mouseout","mouseOut",!1,["closeTT"]),onmouseover:n.d("mouseover","mouseEnter",!1,["closeTT"])}),w(t,E,null,null,null,null,n,"18"),t.ee(),t.ee(),i.closeTT&&O({style:{top:"-31px",left:"36px"},text:"Close"},t,n,"19"),t.ee()),t.ee(),i.isZoomed){t.be("div",{class:D(["cb__chatWrapper__body",r.input.mobile&&"cb__chatWrapper__body--mobile"])},"@cb--chat_body",r,null,1,{onscroll:n.d("scroll","onBodyScroll",!1)});var a=0;T(i.messages,(function(e,o){void 0!==i.messages[o-1]&&i.messages[o-1].created_by===i.messages[o].created_by||(t.be("div",K,"@"+o,r),t.e("div",{style:A({"background-color":r.getColor(e.created_by)}),class:"cb__chatWrapper__thumbnail"},"20"+s,r,1,1).t(e.created_by_name[0].toUpperCase(),r),e.created_by===i.sessionInfo.id?t.e("div",q,"21"+s,r,2).e("span",$,"22"+s,r,1).t(i.sessionInfo.name,r).e("span",X,"23"+s,r,1).t(l(),r):t.e("div",Y,"24"+s,r,2).e("span",Q,"25"+s,r,1).t(e.created_by_name,r).e("span",Z,"26"+s,r,1).t(u(e.inserted_at),r),t.ee());var s="["+a+++"]";j({messageItem:i.messages[o]},t,n,"27"+s)})),t.ee(),i.fileAttached.length&&(t.be("div",ee,"28",r),T(i.fileAttached,(function(e,i){P({fileData:e,removeAttachment:r.removeAttachment.bind(r)},t,n,e.created_by)})),t.ee()),t.be("div",{class:D(["cb__chatWrapper__footer",r.input.mobile&&"cb__chatWrapper__footer--mobile"])},"29",r,null,1),t.e("textarea",{placeholder:"Type a message...",type:"text",value:i.text,class:"cb__chatWrapper__textarea"},"@cb--chat_input",r,0,0,{onkeydown:n.d("keydown","keyDown",!1),oninput:n.d("input","onInputValue",!1)}),t.be("div",J,"30",r),t.be("div",z,"31",r,null,0,{onclick:n.d("click","sendMessage",!1)}),t.n(W,r),t.be("span",{style:A({color:r.input.primaryColor}),class:"material-icons mdc-fab__icon"},"33",r,null,1),w(t,S,null,null,null,null,n,"34"),t.ee(),t.ee(),t.ee(),t.ee(),I({primaryColor:r.input.primaryColor,primaryBackgroundColor:r.input.primaryBackgroundColor,startFileUpload:r.startFileUpload.bind(r),setEmoji:r.setEmoji.bind(r),sessionInfo:i.sessionInfo},t,n,"35")}}t.ee()}),{e_:o},i),r.Component=s(i,r._)},function(e,t,n){},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/arrow_back.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("c6e047")()}).e("path",{d:"M0 0h24v24H0z",fill:"none"},null,null,0).e("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/send.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("9704ff")()}).e("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"},null,null,0).e("path",{d:"M0 0h24v24H0z",fill:"none"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){n(670);var r=e.exports=n(16).t(),i={onCreate:function(e){this.state={documentOverlay:!1,imageOverlay:!1}},mouseEnter:function(e){this.state.documentOverlay=!0},mouseOut:function(e){this.state.documentOverlay=!1},showImageOverlay:function(){window.document.addEventListener("keydown",this.keyDown.bind(this)),this.state.imageOverlay=!0},keyDown:function(e){27===e.keyCode&&(window.document.removeEventListener("keydown",this.keyDown),this.state.imageOverlay=!1)},hideImageOverlay:function(){this.state.imageOverlay=!1},onDestroy:function(){window.document.removeEventListener("keydown",this.keyDown)}},o=(0,n(13).r)("/client$2.26.6/src/components/MessageItem/index.marko",(function(){return e.exports})),a=n(17),s=n(14),c=n(302),u=n(671),l=n(86),d=(l.default,l.formatBytes,l.getFileNameFromUrl),f=l.urlify,h=n(170),p=n(61),m=n(78),v={class:"cb__messageItem__imageOverlay"},g={class:"cb__messageItem__closeButton"},y={class:"cb__messageItem__text"},_={class:"cb__messageItem__emoji"},b={class:"cb__messageItem__file"},E={class:"cb__messageItem__name"},S=n(19)("div",{class:"cb__messageItem__download"},"14",null,1,0,{i:n(20)("827e3e")()}).t("Download");r._=a((function(e,t,n,r,i){t.be("div",{class:m(["cb__messageItem",("attachment"===r.input.messageItem.content_type||"photos"===r.input.messageItem.content_type)&&"cb__messageItem--padding"])},"0",r,null,1),"photos"===r.input.messageItem.content_type?(t.e("img",{src:r.input.messageItem.content,class:"cb__messageItem__photos"},"1",r,0,0,{onclick:n.d("click","showImageOverlay",!1)}),i.imageOverlay&&(t.be("div",v,"2",r),t.e("img",{src:r.input.messageItem.content},"3",r,0),t.be("div",g,"4",r,null,0,{onclick:n.d("click","hideImageOverlay",!1)}),p(t,h,null,null,null,null,n,"5"),t.ee(),t.ee())):"text"===r.input.messageItem.content_type?(t.be("p",y,"6",r),t.h(f(r.input.messageItem.content),r),t.ee()):"emoji"===r.input.messageItem.content_type?t.e("p",_,"7",r,1).t(r.input.messageItem.content,r):"attachment"===r.input.messageItem.content_type&&(t.be("a",{download:!0,target:"_blank",href:r.input.messageItem.content,class:"cb__messageItem__attachment"},"8",r,null,0,{onmouseout:n.d("mouseout","mouseOut",!1),onmouseover:n.d("mouseover","mouseEnter",!1)}),t.be("div",b,"9",r),p(t,c,null,null,null,null,n,"10"),t.ee(),t.e("div",E,"11",r,1).t(d(r.input.messageItem.content),r),i.documentOverlay&&(t.be("div",{title:d(r.input.messageItem.content),class:"cb__messageItem__overlay"},"12",r),p(t,u,null,null,null,null,n,"13"),t.n(S,r),t.ee()),t.ee()),t.ee()}),{e_:o},i),r.Component=s(i,r._)},function(e,t,n){},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/download.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("7e3140")()}).e("path",{d:"M0 0h24v24H0z",fill:"none"},null,null,0).e("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){n(673);var r=e.exports=n(16).t(),i={onCreate:function(e){this.state={id:e.fileData.id,type:e.fileData.type,size:e.fileData.size,name:e.fileData.name,status:e.fileData.status,url:""},this.removeAttachment=e.removeAttachment},onInput:function(e){this.state.status=e.fileData.status,this.state.url=e.fileData.url},onClick:function(){this.removeAttachment(this.state.id)}},o=(0,n(13).r)("/client$2.26.6/src/components/FileAttached/index.marko",(function(){return e.exports})),a=n(17),s=n(14),c=n(302),u=n(170),l=n(86),d=(l.default,l.formatBytes),f=n(54),h=n(61),p={class:"cb__attached"},m={class:"cb__attached__filename"},v=n(19),g=n(20)("4c8e14"),y=v("div",{class:"cb__attached__fileAttached"},"7",null,1,0,{i:g()}).t("Attached"),_=v("div",null,"8",null,1,0,{i:g()}).t("Failed"),b=v("div",{class:"cb__attached__uploading"},"9",null,1,0,{i:g()}).t("Uploading...");r._=a((function(e,t,n,r,i){t.be("div",p,"0",r),"photos"===i.type?t.e("div",{style:f({color:r.input.primaryColor}),class:"cb__attached__thumbnail"},"1",r,1,1).e("img",{src:i.url},"2",r,0):(t.be("div",{style:f({color:r.input.primaryColor}),class:"cb__attached__thumbnail"},"3",r,null,1),h(t,c,null,null,null,null,n,"4"),t.ee()),t.be("div",m,"5",r),t.e("div",null,"6",r,3).t(i.name,r).t("").t(d(i.size),r),"done"===i.status?t.n(y,r):"failed"===i.status?t.n(_,r):"loading"===i.status&&t.n(b,r),t.ee(),t.be("div",{style:f({color:r.input.primaryColor}),class:"cb__attached__close"},"10",r,null,1,{onclick:n.d("click","onClick",!1)}),h(t,u,null,null,null,null,n,"11"),t.ee(),t.ee()}),{e_:o},i),r.Component=s(i,r._)},function(e,t,n){},function(e,t,n){n(675);var r=e.exports=n(16).t(),i={onCreate:function(e){this.setEmoji=e.setEmoji,this.state={picker:null}},onMount:function(){this.state.picker=new u({zIndex:99999999999999,position:"top",rootElement:document.getElementById(f)}),this.state.picker.on("emoji",e=>{this.setEmoji(e)})},onClick:function(){const e=this.getEl("button");this.state.picker.togglePicker(e)}},o=(0,n(13).r)("/client$2.26.6/src/components/MediaPickerChat/index.marko",(function(){return e.exports})),a=n(17),s=n(14),c=n(676),u=c.default||c,l=n(677),d=n(55),f=(d.default,d.CB__TOOLBOX_CONTAINER),h=n(678),p=n(69)(h),m=n(61),v=n(54),g={class:"cb__picker"};r._=a((function(e,t,n,r,i){t.be("div",g,"0",r),p({color:r.input.primaryColor,primaryBackgroundColor:r.input.primaryBackgroundColor,startFileUpload:r.input.startFileUpload,type:"photos",title:"Add Photos",sessionInfo:r.input.sessionInfo},t,n,"uploadFile"),t.be("div",{style:v({color:r.input.primaryColor}),title:"Choose an emoji",class:"cb__picker__emoji"},"@button",r,null,0,{onclick:n.d("click","onClick",!1)}),m(t,l,null,null,null,null,n,"1"),t.ee(),p({color:r.input.primaryColor,primaryBackgroundColor:r.input.primaryBackgroundColor,startFileUpload:r.input.startFileUpload,type:"attachment",title:"Add Files",sessionInfo:r.input.sessionInfo},t,n,"uploadPhoto"),t.ee()}),{e_:o},i),r.Component=s(i,r._)},function(e,t,n){},function(e,t,n){(function(r,i){var o,a;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(r,i){"object"==s(t)&&void 0!==e?e.exports=i():void 0===(a="function"==typeof(o=i)?o.call(t,n,t,e):o)||(e.exports=a)}(0,(function(){"use strict";
/*! *****************************************************************************
      Copyright (c) Microsoft Corporation.
  
      Permission to use, copy, modify, and/or distribute this software for any
      purpose with or without fee is hereby granted.
  
      THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
      REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
      AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
      INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
      LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
      OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
      PERFORMANCE OF THIS SOFTWARE.
      ***************************************************************************** */var e=function(){return(e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function t(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}('@keyframes show {\n  0% {\n    opacity: 0;\n    transform: scale3d(0.8, 0.8, 0.8);\n  }\n\n  50% {\n    transform: scale3d(1.05, 1.05, 1.05);\n  }\n\n  100% {\n    transform: scale3d(1, 1, 1);\n  }\n}\n\n@keyframes hide {\n  0% {\n    opacity: 1;\n    transform: scale3d(1, 1, 1);\n  }\n\n  100% {\n    opacity: 0;\n    transform: scale3d(0.8, 0.8, 0.8);\n  }\n}\n\n@keyframes grow {\n  0% {\n    opacity: 0;\n    transform: scale3d(0.8, 0.8, 0.8); \n  }\n\n  100% { \n    opacity: 1;\n    transform: scale3d(1, 1, 1); \n  }\n}\n\n@keyframes shrink {\n  0% { \n    opacity: 1;\n    transform: scale3d(1, 1, 1);\n  }\n\n  100% { \n    opacity: 0;\n    transform: scale3d(0.8, 0.8, 0.8); \n  }\n}\n\n@keyframes fade-in {\n  0% { opacity: 0; }\n  100% { opacity: 1; }\n}\n\n@keyframes fade-out {\n  0% { opacity: 1; }\n  100% { opacity: 0; }\n}\n\n.emoji-picker {\n  --animation-duration: 0.2s;\n  --animation-easing: ease-in-out;\n\n  --emoji-size: 1.8em;\n  --emoji-size-multiplier: 1.5;\n  --emoji-preview-size: 2em;\n  --emoji-per-row: 8;\n  --row-count: 6;\n  --category-name-size: 0.85em;\n\n  --category-button-height: 2em;\n  --category-button-size: 1.1em;\n  --category-border-bottom-size: 4px;\n\n  --focus-indicator-color: #999999;\n\n  --search-height: 2em;\n\n  --blue-color: #4F81E5;\n\n  --border-color: #CCCCCC;\n  --background-color: #FFFFFF;\n  --text-color: #000000;\n  --secondary-text-color: #666666;\n  --hover-color: #E8F4F9;\n  --search-focus-border-color: var(--blue-color);\n  --search-icon-color: #CCCCCC;\n  --overlay-background-color: rgba(0, 0, 0, 0.8);\n  --popup-background-color: #FFFFFF;\n  --category-button-color: #666666;\n  --category-button-active-color: var(--blue-color);\n\n  --dark-border-color: #666666;\n  --dark-background-color: #333333;\n  --dark-text-color: #FFFFFF;\n  --dark-secondary-text-color: #999999;\n  --dark-hover-color: #666666;\n  --dark-search-background-color: #666666;\n  --dark-search-border-color: #999999;\n  --dark-search-placeholder-color: #999999;\n  --dark-search-focus-border-color: #DBE5F9;\n  --dark-popup-background-color: #333333;\n  --dark-category-button-color: #FFFFFF;\n}\n\n.emoji-picker {\n  font-size: 16px;\n\n  border: 1px solid var(--border-color);\n  border-radius: 5px;\n  background: var(--background-color);\n  width: calc(var(--emoji-per-row) * var(--emoji-size) * var(--emoji-size-multiplier) + 1em + 2px);\n  font-family: Arial, Helvetica, sans-serif;\n  overflow: hidden;\n  animation: show var(--animation-duration) var(--animation-easing);\n}\n\n.emoji-picker.hiding {\n  animation: hide var(--animation-duration) var(--animation-easing);\n}\n\n.emoji-picker.dark {\n  background: var(--dark-background-color);\n  color: var(--dark-text-color);\n  border-color: var(--dark-border-color);\n}\n\n.emoji-picker__content {\n  padding: 0.5em;\n  height: var(--content-height);\n  position: relative;\n}\n\n.emoji-picker__preview {\n  height: var(--emoji-preview-size);\n  padding: 20px;\n  border-top: 1px solid var(--border-color);\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.emoji-picker.dark .emoji-picker__preview {\n  border-top-color: var(--dark-border-color);\n}\n\n.emoji-picker__preview-emoji {\n  font-size: var(--emoji-preview-size);\n  margin-right: 0.25em;\n  font-family: "Segoe UI Emoji", "Segoe UI Symbol", "Segoe UI", "Apple Color Emoji", "Twemoji Mozilla", "Noto Color Emoji", "EmojiOne Color", "Android Emoji";\n}\n\n.emoji-picker__preview-emoji img.emoji {\n  height: 1em;\n  width: 1em;\n  margin: 0 .05em 0 .1em;\n  vertical-align: -0.1em;\n}\n\n.emoji-picker__preview-name {\n  color: var(--text-color);\n  font-size: 0.85em;\n  overflow-wrap: break-word;\n  word-break: break-all;\n}\n\n.emoji-picker.dark .emoji-picker__preview-name {\n  color: var(--dark-text-color);\n}\n\n.emoji-picker__container {\n  display: grid;\n  grid-template-columns: repeat(var(--emoji-per-row), 1fr);\n  grid-auto-rows: calc(var(--emoji-size) * var(--emoji-size-multiplier));\n}\n\n.emoji-picker__container.search-results {\n  height: var(--content-height);\n  overflow-y: scroll;\n}\n\n.emoji-picker__emoji {\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  font-size: var(--emoji-size);\n  width: 1.5em;\n  height: 1.5em;\n  padding: 0;\n  margin: 0;\n  outline: none;\n  font-family: "Segoe UI Emoji", "Segoe UI Symbol", "Segoe UI", "Apple Color Emoji", "Twemoji Mozilla", "Noto Color Emoji", "EmojiOne Color", "Android Emoji";\n}\n\n.emoji-picker__emoji img.emoji {\n  height: 1em;\n  width: 1em;\n  margin: 0 .05em 0 .1em;\n  vertical-align: -0.1em;\n}\n\n.emoji-picker__emoji:focus, .emoji-picker__emoji:hover {\n  background: var(--hover-color);\n}\n\n.emoji-picker__emoji:focus {\n  outline: 1px dotted var(--focus-indicator-color);\n}\n\n.emoji-picker.dark .emoji-picker__emoji:focus, .emoji-picker.dark .emoji-picker__emoji:hover {\n  background: var(--dark-hover-color);\n}\n\n.emoji-picker__search-container {\n  margin: 0.5em;\n  position: relative;\n  height: var(--search-height);\n  display: flex;\n}\n\n.emoji-picker__search {\n  box-sizing: border-box;\n  width: 100%;\n  border-radius: 3px;\n  border: 1px solid var(--border-color);\n  padding-right: 2em;\n  padding: 0.5em 2.25em 0.5em 0.5em;\n  font-size: 0.85em;\n  outline: none;\n}\n\n.emoji-picker.dark .emoji-picker__search {\n  background: var(--dark-search-background-color);\n  color: var(--dark-text-color);\n  border-color: var(--dark-search-border-color);\n}\n\n.emoji-picker.dark .emoji-picker__search::placeholder {\n  color: var(--dark-search-placeholder-color);\n}\n\n.emoji-picker__search:focus {\n  border: 1px solid var(--search-focus-border-color);\n}\n\n.emoji-picker.dark .emoji-picker__search:focus {\n  border-color: var(--dark-search-focus-border-color);\n}\n\n.emoji-picker__search-icon {\n  position: absolute;\n  color: var(--search-icon-color);\n  width: 1em;\n  height: 1em;\n  right: 0.75em;\n  top: calc(50% - 0.5em);\n}\n\n.emoji-picker__search-not-found {\n  color: var(--secondary-text-color);\n  text-align: center;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.emoji-picker__search-not-found h2 {\n  color: var(--secondary-text-color);\n}\n\n.emoji-picker.dark .emoji-picker__search-not-found {\n  color: var(--dark-secondary-text-color);\n}\n\n.emoji-picker.dark .emoji-picker__search-not-found h2 {\n  color: var(--dark-secondary-text-color);\n}\n\n.emoji-picker__search-not-found-icon {\n  font-size: 3em;\n}\n\n.emoji-picker__search-not-found h2 {\n  margin: 0.5em 0;\n  font-size: 1em;\n}\n\n.emoji-picker__variant-overlay {\n  background: var(--overlay-background-color);\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  border-radius: 5px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  animation: fade-in var(--animation-duration) var(--animation-easing);\n}\n\n.emoji-picker__variant-overlay.hiding {\n  animation: fade-out var(--animation-duration) var(--animation-easing);\n}\n\n.emoji-picker__variant-popup {\n  background: var(--popup-background-color);\n  margin: 0.5em;\n  padding: 0.5em;\n  text-align: center;\n  border-radius: 5px;\n  animation: grow var(--animation-duration) var(--animation-easing);\n  user-select: none;\n}\n\n.emoji-picker__variant-overlay.hiding .emoji-picker__variant-popup {\n  animation: shrink var(--animation-duration) var(--animation-easing);\n}\n\n.emoji-picker.dark .emoji-picker__variant-popup {\n  background: var(--dark-popup-background-color);\n}\n\n.emoji-picker__emojis {\n  overflow-y: scroll;\n  position: relative;\n  height: calc((var(--emoji-size) * var(--emoji-size-multiplier)) * var(--row-count) + var(--category-name-size));\n  padding-left: 1px;\n  padding-right: 1px;\n}\n\n.emoji-picker__emojis.hiding {\n  animation: fade-out 0.05s var(--animation-easing);\n}\n\n.emoji-picker__emojis h2.emoji-picker__category-name {\n  font-size: 0.85em;\n  color: var(--secondary-text-color);\n  text-transform: uppercase;\n  margin: 0.25em 0;\n  text-align: left;\n}\n\n.emoji-picker.dark h2.emoji-picker__category-name {\n  color: var(--dark-secondary-text-color);\n}\n\n.emoji-picker__category-buttons {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  height: var(--category-button-height);\n  margin-bottom: 0.5em;\n}\n\nbutton.emoji-picker__category-button {\n  flex-grow: 1;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  font-size: var(--category-button-size);\n  vertical-align: middle;\n  color: var(--category-button-color);\n  border-bottom: var(--category-border-bottom-size) solid transparent;\n  outline: none;\n}\n\n.emoji-picker.keyboard button.emoji-picker__category-button:focus {\n  outline: 1px dotted var(--focus-indicator-color);\n}\n\n.emoji-picker.dark button.emoji-picker__category-button.active {\n  color: var(--category-button-active-color);\n}\n\n.emoji-picker.dark button.emoji-picker__category-button {\n  color: var(--dark-category-button-color);\n}\n\nbutton.emoji-picker__category-button.active {\n  color: var(--category-button-active-color);\n  border-bottom: var(--category-border-bottom-size) solid var(--category-button-active-color);\n}\n\n@media (prefers-color-scheme: dark) {\n  .emoji-picker.auto {\n    background: var(--dark-background-color);\n    color: var(--dark-text-color);\n    border-color: var(--dark-border-color);\n  }\n\n  .emoji-picker.auto .emoji-picker__preview {\n    border-top-color: var(--dark-border-color);\n  }\n\n  .emoji-picker.auto .emoji-picker__preview-name {\n    color: var(--dark-text-color);\n  }\n\n  .emoji-picker.auto button.emoji-picker__category-button {\n    color: var(--dark-category-button-color);\n  }\n\n  .emoji-picker.auto button.emoji-picker__category-button.active {\n    color: var(--category-button-active-color);\n  }\n\n  .emoji-picker.auto .emoji-picker__emoji:focus, .emoji-picker.auto .emoji-picker__emoji:hover {\n    background: var(--dark-hover-color);\n  }\n\n  .emoji-picker.auto .emoji-picker__search {\n    background: var(--dark-search-background-color);\n    color: var(--dark-text-color);\n    border-color: var(--dark-search-border-color);\n  }\n \n  .emoji-picker.auto h2.emoji-picker__category-name {\n    color: var(--dark-secondary-text-color);\n  }\n\n  .emoji-picker.auto .emoji-picker__search::placeholder {\n    color: var(--dark-search-placeholder-color);\n  }\n\n  .emoji-picker.auto .emoji-picker__search:focus {\n    border-color: var(--dark-search-focus-border-color);\n  }\n\n  .emoji-picker.auto .emoji-picker__search-not-found {\n    color: var(--dark-secondary-text-color);\n  }\n\n  .emoji-picker.auto .emoji-picker__search-not-found h2 {\n    color: var(--dark-secondary-text-color);\n  }\n\n  .emoji-picker.auto .emoji-picker__variant-popup {\n    background: var(--dark-popup-background-color);\n  }\n}');var n=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'],o=n.join(","),a="undefined"==typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;function s(e,t){t=t||{};var n,r,i,s=[],u=[],l=e.querySelectorAll(o);for(t.includeContainer&&a.call(e,o)&&(l=Array.prototype.slice.apply(l)).unshift(e),n=0;n<l.length;n++)c(r=l[n])&&(0===(i=d(r))?s.push(r):u.push({documentOrder:n,tabIndex:i,node:r}));return u.sort(f).map((function(e){return e.node})).concat(s)}function c(e){return!(!u(e)||function(e){return function(e){return h(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t=function(e){for(var t=0;t<e.length;t++)if(e[t].checked)return e[t]}(e.ownerDocument.querySelectorAll('input[type="radio"][name="'+e.name+'"]'));return!t||t===e}(e)}(e)||d(e)<0)}function u(e){return!(e.disabled||function(e){return h(e)&&"hidden"===e.type}(e)||function(e){return null===e.offsetParent||"hidden"===getComputedStyle(e).visibility}(e))}s.isTabbable=function(e){if(!e)throw new Error("No node provided");return!1!==a.call(e,o)&&c(e)},s.isFocusable=function(e){if(!e)throw new Error("No node provided");return!1!==a.call(e,l)&&u(e)};var l=n.concat("iframe").join(",");function d(e){var t=parseInt(e.getAttribute("tabindex"),10);return isNaN(t)?function(e){return"true"===e.contentEditable}(e)?0:e.tabIndex:t}function f(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex}function h(e){return"INPUT"===e.tagName}var p,m,v=s,g=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)y.call(n,r)&&(e[r]=n[r])}return e},y=Object.prototype.hasOwnProperty,_=(m=[],{activateTrap:function(e){if(m.length>0){var t=m[m.length-1];t!==e&&t.pause()}var n=m.indexOf(e);-1===n||m.splice(n,1),m.push(e)},deactivateTrap:function(e){var t=m.indexOf(e);-1!==t&&m.splice(t,1),m.length>0&&m[m.length-1].unpause()}});function b(e){return setTimeout(e,0)}function E(){}E.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function i(){r.off(e,i),t.apply(n,arguments)}return i._=t,this.on(e,i,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var o=0,a=r.length;o<a;o++)r[o].fn!==t&&r[o].fn._!==t&&i.push(r[o]);return i.length?n[e]=i:delete n[e],this}};var S=E;function C(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}function w(e){if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t?t.defaultView:window}return e}function T(e){var t=w(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function D(e){return e instanceof w(e).Element||e instanceof Element}function A(e){return e instanceof w(e).HTMLElement||e instanceof HTMLElement}function R(e){return e?(e.nodeName||"").toLowerCase():null}function k(e){return(D(e)?e.ownerDocument:e.document).documentElement}function O(e){return C(k(e)).left+T(e).scrollLeft}function j(e){return w(e).getComputedStyle(e)}function P(e){var t=j(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function I(e,t,n){void 0===n&&(n=!1);var r,i,o=k(t),a=C(e),s={scrollLeft:0,scrollTop:0},c={x:0,y:0};return n||(("body"!==R(t)||P(o))&&(s=(r=t)!==w(r)&&A(r)?{scrollLeft:(i=r).scrollLeft,scrollTop:i.scrollTop}:T(r)),A(t)?((c=C(t)).x+=t.clientLeft,c.y+=t.clientTop):o&&(c.x=O(o))),{x:a.left+s.scrollLeft-c.x,y:a.top+s.scrollTop-c.y,width:a.width,height:a.height}}function N(e){return{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}}function M(e){return"html"===R(e)?e:e.assignedSlot||e.parentNode||e.host||k(e)}function x(e,t){void 0===t&&(t=[]);var n=function e(t){return["html","body","#document"].indexOf(R(t))>=0?t.ownerDocument.body:A(t)&&P(t)?t:e(M(t))}(e),r="body"===R(n),i=w(n),o=r?[i].concat(i.visualViewport||[],P(n)?n:[]):n,a=t.concat(o);return r?a:a.concat(x(M(o)))}function L(e){return["table","td","th"].indexOf(R(e))>=0}function F(e){return A(e)&&"fixed"!==j(e).position?e.offsetParent:null}function B(e){for(var t=w(e),n=F(e);n&&L(n);)n=F(n);return n&&"body"===R(n)&&"static"===j(n).position?t:n||t}E.TinyEmitter=S;var U="top",V="bottom",H="right",G="left",J=[U,V,H,G],z=J.reduce((function(e,t){return e.concat([t+"-start",t+"-end"])}),[]),W=[].concat(J,["auto"]).reduce((function(e,t){return e.concat([t,t+"-start",t+"-end"])}),[]),K=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function q(e){return e.split("-")[0]}var $={placement:"bottom",modifiers:[],strategy:"absolute"};function X(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}var Y={passive:!0};function Q(e){return e.split("-")[1]}function Z(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function ee(e){var t,n=e.reference,r=e.element,i=e.placement,o=i?q(i):null,a=i?Q(i):null,s=n.x+n.width/2-r.width/2,c=n.y+n.height/2-r.height/2;switch(o){case U:t={x:s,y:n.y-r.height};break;case V:t={x:s,y:n.y+n.height};break;case H:t={x:n.x+n.width,y:c};break;case G:t={x:n.x-r.width,y:c};break;default:t={x:n.x,y:n.y}}var u=o?Z(o):null;if(null!=u){var l="y"===u?"height":"width";switch(a){case"start":t[u]=Math.floor(t[u])-Math.floor(n[l]/2-r[l]/2);break;case"end":t[u]=Math.floor(t[u])+Math.ceil(n[l]/2-r[l]/2)}}return t}var te={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ne(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.offsets,a=e.position,s=e.gpuAcceleration,c=e.adaptive,u=function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:Math.round(t*r)/r||0,y:Math.round(n*r)/r||0}}(o),l=u.x,d=u.y,f=o.hasOwnProperty("x"),h=o.hasOwnProperty("y"),p=G,m=U,v=window;if(c){var g=B(n);g===w(n)&&(g=k(n)),i===U&&(m=V,d-=g.clientHeight-r.height,d*=s?1:-1),i===G&&(p=H,l-=g.clientWidth-r.width,l*=s?1:-1)}var y,_=Object.assign({position:a},c&&te);return s?Object.assign({},_,((y={})[m]=h?"0":"",y[p]=f?"0":"",y.transform=(v.devicePixelRatio||1)<2?"translate("+l+"px, "+d+"px)":"translate3d("+l+"px, "+d+"px, 0)",y)):Object.assign({},_,((t={})[m]=h?d+"px":"",t[p]=f?l+"px":"",t.transform="",t))}var re={left:"right",right:"left",bottom:"top",top:"bottom"};function ie(e){return e.replace(/left|right|bottom|top/g,(function(e){return re[e]}))}var oe={start:"end",end:"start"};function ae(e){return e.replace(/start|end/g,(function(e){return oe[e]}))}function se(e){return parseFloat(e)||0}function ce(e,t){var n=Boolean(t.getRootNode&&t.getRootNode().host);if(e.contains(t))return!0;if(n){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ue(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function le(e,t){return"viewport"===t?ue(function(e){var t=w(e),n=t.visualViewport,r=t.innerWidth,i=t.innerHeight;return n&&/iPhone|iPod|iPad/.test(navigator.platform)&&(r=n.width,i=n.height),{width:r,height:i,x:0,y:0}}(e)):A(t)?C(t):ue(function(e){var t=w(e),n=T(e),r=I(k(e),t);return r.height=Math.max(r.height,t.innerHeight),r.width=Math.max(r.width,t.innerWidth),r.x=-n.scrollLeft,r.y=-n.scrollTop,r}(k(e)))}function de(e,t,n){var r="clippingParents"===t?function(e){var t=x(e),n=["absolute","fixed"].indexOf(j(e).position)>=0&&A(e)?B(e):e;return D(n)?t.filter((function(e){return D(e)&&ce(e,n)})):[]}(e):[].concat(t),i=[].concat(r,[n]),o=i[0],a=i.reduce((function(t,n){var r=le(e,n),i=function(e){var t=w(e),n=function(e){var t=A(e)?j(e):{};return{top:se(t.borderTopWidth),right:se(t.borderRightWidth),bottom:se(t.borderBottomWidth),left:se(t.borderLeftWidth)}}(e),r="html"===R(e),i=O(e),o=e.clientWidth+n.right,a=e.clientHeight+n.bottom;return r&&t.innerHeight-e.clientHeight>50&&(a=t.innerHeight-n.bottom),{top:r?0:e.clientTop,right:e.clientLeft>n.left?n.right:r?t.innerWidth-o-i:e.offsetWidth-o,bottom:r?t.innerHeight-a:e.offsetHeight-a,left:r?i:e.clientLeft}}(A(n)?n:k(e));return t.top=Math.max(r.top+i.top,t.top),t.right=Math.min(r.right-i.right,t.right),t.bottom=Math.min(r.bottom-i.bottom,t.bottom),t.left=Math.max(r.left+i.left,t.left),t}),le(e,o));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function fe(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},{},e)}function he(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function pe(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,o=n.boundary,a=void 0===o?"clippingParents":o,s=n.rootBoundary,c=void 0===s?"viewport":s,u=n.elementContext,l=void 0===u?"popper":u,d=n.altBoundary,f=void 0!==d&&d,h=n.padding,p=void 0===h?0:h,m=fe("number"!=typeof p?p:he(p,J)),v="popper"===l?"reference":"popper",g=e.elements.reference,y=e.rects.popper,_=e.elements[f?v:l],b=de(D(_)?_:_.contextElement||k(e.elements.popper),a,c),E=C(g),S=ee({reference:E,element:y,strategy:"absolute",placement:i}),w=ue(Object.assign({},y,{},S)),T="popper"===l?w:E,A={top:b.top-T.top+m.top,bottom:T.bottom-b.bottom+m.bottom,left:b.left-T.left+m.left,right:T.right-b.right+m.right},R=e.modifiersData.offset;if("popper"===l&&R){var O=R[i];Object.keys(A).forEach((function(e){var t=[H,V].indexOf(e)>=0?1:-1,n=[U,V].indexOf(e)>=0?"y":"x";A[e]+=O[n]*t}))}return A}function me(e,t,n){return Math.max(e,Math.min(t,n))}function ve(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function ge(e){return[U,H,V,G].some((function(t){return e[t]>=0}))}var ye=function(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?$:i;return function(e,t,n){void 0===n&&(n=o);var i,a,s={placement:"bottom",orderedModifiers:[],options:Object.assign({},$,{},o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},c=[],u=!1,l={state:s,setOptions:function(n){d(),s.options=Object.assign({},o,{},s.options,{},n),s.scrollParents={reference:D(e)?x(e):e.contextElement?x(e.contextElement):[],popper:x(t)};var i,a,u=function(e){var t=function(e){var t=new Map,n=new Set,r=[];return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||function e(i){n.add(i.name),[].concat(i.requires||[],i.requiresIfExists||[]).forEach((function(r){if(!n.has(r)){var i=t.get(r);i&&e(i)}})),r.push(i)}(e)})),r}(e);return K.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}((i=[].concat(r,s.options.modifiers),a=i.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,{},t,{options:Object.assign({},n.options,{},t.options),data:Object.assign({},n.data,{},t.data)}):t,e}),{}),Object.keys(a).map((function(e){return a[e]}))));return s.orderedModifiers=u.filter((function(e){return e.enabled})),s.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,i=e.effect;if("function"==typeof i){var o=i({state:s,name:t,instance:l,options:r});c.push(o||function(){})}})),l.update()},forceUpdate:function(){if(!u){var e=s.elements,t=e.reference,n=e.popper;if(X(t,n)){s.rects={reference:I(t,B(n),"fixed"===s.options.strategy),popper:N(n)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(e){return s.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<s.orderedModifiers.length;r++)if(!0!==s.reset){var i=s.orderedModifiers[r],o=i.fn,a=i.options,c=void 0===a?{}:a,d=i.name;"function"==typeof o&&(s=o({state:s,options:c,name:d,instance:l})||s)}else s.reset=!1,r=-1}}},update:(i=function(){return new Promise((function(e){l.forceUpdate(),e(s)}))},function(){return a||(a=new Promise((function(e){Promise.resolve().then((function(){a=void 0,e(i())}))}))),a}),destroy:function(){d(),u=!0}};if(!X(e,t))return l;function d(){c.forEach((function(e){return e()})),c=[]}return l.setOptions(n).then((function(e){!u&&n.onFirstUpdate&&n.onFirstUpdate(e)})),l}}({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,a=r.resize,s=void 0===a||a,c=w(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&u.forEach((function(e){e.addEventListener("scroll",n.update,Y)})),s&&c.addEventListener("resize",n.update,Y),function(){o&&u.forEach((function(e){e.removeEventListener("scroll",n.update,Y)})),s&&c.removeEventListener("resize",n.update,Y)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=ee({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,a=void 0===o||o,s={placement:q(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,{},ne(Object.assign({},s,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,{},ne(Object.assign({},s,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];A(i)&&R(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});A(r)&&R(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=void 0===i?[0,0]:i,a=W.reduce((function(e,n){return e[n]=function(e,t,n){var r=q(e),i=[G,U].indexOf(r)>=0?-1:1,o="function"==typeof n?n(Object.assign({},t,{placement:e})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[G,H].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}(n,t.rects,o),e}),{}),s=a[t.placement],c=s.x,u=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=u),t.modifiersData[r]=a}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0===a||a,c=n.fallbackPlacements,u=n.padding,l=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,p=void 0===h||h,m=n.allowedAutoPlacements,v=t.options.placement,g=q(v),y=c||(g!==v&&p?function(e){if("auto"===q(e))return[];var t=ie(e);return[ae(e),t,ae(t)]}(v):[ie(v)]),_=[v].concat(y).reduce((function(e,n){return e.concat("auto"===q(n)?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,c=n.allowedAutoPlacements,u=void 0===c?W:c,l=Q(r),d=(l?s?z:z.filter((function(e){return Q(e)===l})):J).filter((function(e){return u.indexOf(e)>=0})).reduce((function(t,n){return t[n]=pe(e,{placement:n,boundary:i,rootBoundary:o,padding:a})[q(n)],t}),{});return Object.keys(d).sort((function(e,t){return d[e]-d[t]}))}(t,{placement:n,boundary:l,rootBoundary:d,padding:u,flipVariations:p,allowedAutoPlacements:m}):n)}),[]),b=t.rects.reference,E=t.rects.popper,S=new Map,C=!0,w=_[0],T=0;T<_.length;T++){var D=_[T],A=q(D),R="start"===Q(D),k=[U,V].indexOf(A)>=0,O=k?"width":"height",j=pe(t,{placement:D,boundary:l,rootBoundary:d,altBoundary:f,padding:u}),P=k?R?H:G:R?V:U;b[O]>E[O]&&(P=ie(P));var I=ie(P),N=[];if(o&&N.push(j[A]<=0),s&&N.push(j[P]<=0,j[I]<=0),N.every((function(e){return e}))){w=D,C=!1;break}S.set(D,N)}if(C)for(var M=function(e){var t=_.find((function(t){var n=S.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return w=t,"break"},x=p?3:1;x>0&&"break"!==M(x);x--);t.placement!==w&&(t.modifiersData[r]._skip=!0,t.placement=w,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0!==a&&a,c=n.boundary,u=n.rootBoundary,l=n.altBoundary,d=n.padding,f=n.tether,h=void 0===f||f,p=n.tetherOffset,m=void 0===p?0:p,v=pe(t,{boundary:c,rootBoundary:u,padding:d,altBoundary:l}),g=q(t.placement),y=Q(t.placement),_=!y,b=Z(g),E="x"===b?"y":"x",S=t.modifiersData.popperOffsets,C=t.rects.reference,w=t.rects.popper,T="function"==typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,D={x:0,y:0};if(S){if(o){var A="y"===b?U:G,R="y"===b?V:H,k="y"===b?"height":"width",O=S[b],j=S[b]+v[A],P=S[b]-v[R],I=h?-w[k]/2:0,M="start"===y?C[k]:w[k],x="start"===y?-w[k]:-C[k],L=t.elements.arrow,F=h&&L?N(L):{width:0,height:0},J=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},z=J[A],W=J[R],K=me(0,C[k],F[k]),$=_?C[k]/2-I-K-z-T:M-K-z-T,X=_?-C[k]/2+I+K+W+T:x+K+W+T,Y=t.elements.arrow&&B(t.elements.arrow),ee=Y?"y"===b?Y.clientTop||0:Y.clientLeft||0:0,te=t.modifiersData.offset?t.modifiersData.offset[t.placement][b]:0,ne=S[b]+$-te-ee,re=S[b]+X-te,ie=me(h?Math.min(j,ne):j,O,h?Math.max(P,re):P);S[b]=ie,D[b]=ie-O}if(s){var oe="x"===b?U:G,ae="x"===b?V:H,se=S[E],ce=me(se+v[oe],se,se-v[ae]);S[E]=ce,D[E]=ce-se}t.modifiersData[r]=D}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=n.elements.arrow,o=n.modifiersData.popperOffsets,a=q(n.placement),s=Z(a),c=[G,H].indexOf(a)>=0?"height":"width";if(i&&o){var u=n.modifiersData[r+"#persistent"].padding,l=N(i),d="y"===s?U:G,f="y"===s?V:H,h=n.rects.reference[c]+n.rects.reference[s]-o[s]-n.rects.popper[c],p=o[s]-n.rects.reference[s],m=B(i),v=m?"y"===s?m.clientHeight||0:m.clientWidth||0:0,g=h/2-p/2,y=u[d],_=v-l[c]-u[f],b=v/2-l[c]/2+g,E=me(y,b,_),S=s;n.modifiersData[r]=((t={})[S]=E,t.centerOffset=E-b,t)}},effect:function(e){var t=e.state,n=e.options,r=e.name,i=n.element,o=void 0===i?"[data-popper-arrow]":i,a=n.padding,s=void 0===a?0:a;null!=o&&("string"!=typeof o||(o=t.elements.popper.querySelector(o)))&&ce(t.elements.popper,o)&&(t.elements.arrow=o,t.modifiersData[r+"#persistent"]={padding:fe("number"!=typeof s?s:he(s,J))})},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,a=pe(t,{elementContext:"reference"}),s=pe(t,{altBoundary:!0}),c=ve(a,r),u=ve(s,i,o),l=ge(c),d=ge(u);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:l,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":d})}}]}),_e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:{}).location||{},be=function(){var e={base:"https://twemoji.maxcdn.com/v/12.1.6/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(e){var t="string"==typeof e?parseInt(e,16):e;return t<65536?s(t):s(55296+((t-=65536)>>10),56320+(1023&t))},toCodePoint:v},onerror:function(){this.parentNode&&this.parentNode.replaceChild(c(this.alt,!1),this)},parse:function(t,n){return n&&"function"!=typeof n||(n={callback:n}),("string"==typeof t?f:d)(t,{callback:n.callback||u,attributes:"function"==typeof n.attributes?n.attributes:p,base:"string"==typeof n.base?n.base:e.base,ext:n.ext||e.ext,size:n.folder||(r=n.size||e.size,"number"==typeof r?r+"x"+r:r),className:n.className||e.className,onerror:n.onerror||e.onerror});var r},replace:m,test:function(e){n.lastIndex=0;var t=n.test(e);return n.lastIndex=0,t}},t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},n=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,r=/\uFE0F/g,i=String.fromCharCode(8205),o=/[&<>'"]/g,a=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,s=String.fromCharCode;return e;function c(e,t){return document.createTextNode(t?e.replace(r,""):e)}function u(e,t){return"".concat(t.base,t.size,"/",e,t.ext)}function l(e){return v(e.indexOf(i)<0?e.replace(r,""):e)}function d(e,t){for(var r,i,o,s,u,d,f,h,p,m,v,g,y,_=function e(t,n){for(var r,i,o=t.childNodes,s=o.length;s--;)3===(i=(r=o[s]).nodeType)?n.push(r):1!==i||"ownerSVGElement"in r||a.test(r.nodeName.toLowerCase())||e(r,n);return n}(e,[]),b=_.length;b--;){for(o=!1,s=document.createDocumentFragment(),d=(u=_[b]).nodeValue,h=0;f=n.exec(d);){if((p=f.index)!==h&&s.appendChild(c(d.slice(h,p),!0)),g=l(v=f[0]),h=p+v.length,y=t.callback(g,t),g&&y){for(i in(m=new Image).onerror=t.onerror,m.setAttribute("draggable","false"),r=t.attributes(v,g))r.hasOwnProperty(i)&&0!==i.indexOf("on")&&!m.hasAttribute(i)&&m.setAttribute(i,r[i]);m.className=t.className,m.alt=v,m.src=y,o=!0,s.appendChild(m)}m||s.appendChild(c(v,!1)),m=null}o&&(h<d.length&&s.appendChild(c(d.slice(h),!0)),u.parentNode.replaceChild(s,u))}return e}function f(e,t){return m(e,(function(e){var n,r,i=e,a=l(e),s=t.callback(a,t);if(a&&s){for(r in i="<img ".concat('class="',t.className,'" ','draggable="false" ','alt="',e,'"',' src="',s,'"'),n=t.attributes(e,a))n.hasOwnProperty(r)&&0!==r.indexOf("on")&&-1===i.indexOf(" "+r+"=")&&(i=i.concat(" ",r,'="',n[r].replace(o,h),'"'));i=i.concat("/>")}return i}))}function h(e){return t[e]}function p(){return null}function m(e,t){return String(e).replace(n,t)}function v(e,t){for(var n=[],r=0,i=0,o=0;o<e.length;)r=e.charCodeAt(o++),i?(n.push((65536+(i-55296<<10)+(r-56320)).toString(16)),i=0):55296<=r&&r<=56319?i=r:n.push(r.toString(16));return n.join(t||"-")}}();_e.protocol||(be.base=be.base.replace(/^http:/,""));var Ee=be,Se={categories:["smileys","people","animals","food","travel","activities","objects","symbols","flags"],emoji:[{emoji:"",category:0,name:"grinning face",version:"1.0"},{emoji:"",category:0,name:"grinning face with big eyes",version:"1.0"},{emoji:"",category:0,name:"grinning face with smiling eyes",version:"1.0"},{emoji:"",category:0,name:"beaming face with smiling eyes",version:"1.0"},{emoji:"",category:0,name:"grinning squinting face",version:"1.0"},{emoji:"",category:0,name:"grinning face with sweat",version:"1.0"},{emoji:"",category:0,name:"rolling on the floor laughing",version:"3.0"},{emoji:"",category:0,name:"face with tears of joy",version:"1.0"},{emoji:"",category:0,name:"slightly smiling face",version:"1.0"},{emoji:"",category:0,name:"upside-down face",version:"1.0"},{emoji:"",category:0,name:"winking face",version:"1.0"},{emoji:"",category:0,name:"smiling face with smiling eyes",version:"1.0"},{emoji:"",category:0,name:"smiling face with halo",version:"1.0"},{emoji:"",category:0,name:"smiling face with hearts",version:"11.0"},{emoji:"",category:0,name:"smiling face with heart-eyes",version:"1.0"},{emoji:"",category:0,name:"star-struck",version:"5.0"},{emoji:"",category:0,name:"face blowing a kiss",version:"1.0"},{emoji:"",category:0,name:"kissing face",version:"1.0"},{emoji:"",category:0,name:"kissing face with closed eyes",version:"1.0"},{emoji:"",category:0,name:"kissing face with smiling eyes",version:"1.0"},{emoji:"",category:0,name:"smiling face with tear",version:"13.0"},{emoji:"",category:0,name:"face savoring food",version:"1.0"},{emoji:"",category:0,name:"face with tongue",version:"1.0"},{emoji:"",category:0,name:"winking face with tongue",version:"1.0"},{emoji:"",category:0,name:"zany face",version:"5.0"},{emoji:"",category:0,name:"squinting face with tongue",version:"1.0"},{emoji:"",category:0,name:"money-mouth face",version:"1.0"},{emoji:"",category:0,name:"hugging face",version:"1.0"},{emoji:"",category:0,name:"face with hand over mouth",version:"5.0"},{emoji:"",category:0,name:"shushing face",version:"5.0"},{emoji:"",category:0,name:"thinking face",version:"1.0"},{emoji:"",category:0,name:"zipper-mouth face",version:"1.0"},{emoji:"",category:0,name:"face with raised eyebrow",version:"5.0"},{emoji:"",category:0,name:"neutral face",version:"1.0"},{emoji:"",category:0,name:"expressionless face",version:"1.0"},{emoji:"",category:0,name:"face without mouth",version:"1.0"},{emoji:"",category:0,name:"smirking face",version:"1.0"},{emoji:"",category:0,name:"unamused face",version:"1.0"},{emoji:"",category:0,name:"face with rolling eyes",version:"1.0"},{emoji:"",category:0,name:"grimacing face",version:"1.0"},{emoji:"",category:0,name:"lying face",version:"3.0"},{emoji:"",category:0,name:"relieved face",version:"1.0"},{emoji:"",category:0,name:"pensive face",version:"1.0"},{emoji:"",category:0,name:"sleepy face",version:"1.0"},{emoji:"",category:0,name:"drooling face",version:"3.0"},{emoji:"",category:0,name:"sleeping face",version:"1.0"},{emoji:"",category:0,name:"face with medical mask",version:"1.0"},{emoji:"",category:0,name:"face with thermometer",version:"1.0"},{emoji:"",category:0,name:"face with head-bandage",version:"1.0"},{emoji:"",category:0,name:"nauseated face",version:"3.0"},{emoji:"",category:0,name:"face vomiting",version:"5.0"},{emoji:"",category:0,name:"sneezing face",version:"3.0"},{emoji:"",category:0,name:"hot face",version:"11.0"},{emoji:"",category:0,name:"cold face",version:"11.0"},{emoji:"",category:0,name:"woozy face",version:"11.0"},{emoji:"",category:0,name:"dizzy face",version:"1.0"},{emoji:"",category:0,name:"exploding head",version:"5.0"},{emoji:"",category:0,name:"cowboy hat face",version:"3.0"},{emoji:"",category:0,name:"partying face",version:"11.0"},{emoji:"",category:0,name:"disguised face",version:"13.0"},{emoji:"",category:0,name:"smiling face with sunglasses",version:"1.0"},{emoji:"",category:0,name:"nerd face",version:"1.0"},{emoji:"",category:0,name:"face with monocle",version:"5.0"},{emoji:"",category:0,name:"confused face",version:"1.0"},{emoji:"",category:0,name:"worried face",version:"1.0"},{emoji:"",category:0,name:"slightly frowning face",version:"1.0"},{emoji:"",category:0,name:"frowning face",version:"1.0"},{emoji:"",category:0,name:"face with open mouth",version:"1.0"},{emoji:"",category:0,name:"hushed face",version:"1.0"},{emoji:"",category:0,name:"astonished face",version:"1.0"},{emoji:"",category:0,name:"flushed face",version:"1.0"},{emoji:"",category:0,name:"pleading face",version:"11.0"},{emoji:"",category:0,name:"frowning face with open mouth",version:"1.0"},{emoji:"",category:0,name:"anguished face",version:"1.0"},{emoji:"",category:0,name:"fearful face",version:"1.0"},{emoji:"",category:0,name:"anxious face with sweat",version:"1.0"},{emoji:"",category:0,name:"sad but relieved face",version:"1.0"},{emoji:"",category:0,name:"crying face",version:"1.0"},{emoji:"",category:0,name:"loudly crying face",version:"1.0"},{emoji:"",category:0,name:"face screaming in fear",version:"1.0"},{emoji:"",category:0,name:"confounded face",version:"1.0"},{emoji:"",category:0,name:"persevering face",version:"1.0"},{emoji:"",category:0,name:"disappointed face",version:"1.0"},{emoji:"",category:0,name:"downcast face with sweat",version:"1.0"},{emoji:"",category:0,name:"weary face",version:"1.0"},{emoji:"",category:0,name:"tired face",version:"1.0"},{emoji:"",category:0,name:"yawning face",version:"12.0"},{emoji:"",category:0,name:"face with steam from nose",version:"1.0"},{emoji:"",category:0,name:"pouting face",version:"1.0"},{emoji:"",category:0,name:"angry face",version:"1.0"},{emoji:"",category:0,name:"face with symbols on mouth",version:"5.0"},{emoji:"",category:0,name:"smiling face with horns",version:"1.0"},{emoji:"",category:0,name:"angry face with horns",version:"1.0"},{emoji:"",category:0,name:"skull",version:"1.0"},{emoji:"",category:0,name:"skull and crossbones",version:"1.0"},{emoji:"",category:0,name:"pile of poo",version:"1.0"},{emoji:"",category:0,name:"clown face",version:"3.0"},{emoji:"",category:0,name:"ogre",version:"1.0"},{emoji:"",category:0,name:"goblin",version:"1.0"},{emoji:"",category:0,name:"ghost",version:"1.0"},{emoji:"",category:0,name:"alien",version:"1.0"},{emoji:"",category:0,name:"alien monster",version:"1.0"},{emoji:"",category:0,name:"robot",version:"1.0"},{emoji:"",category:0,name:"grinning cat",version:"1.0"},{emoji:"",category:0,name:"grinning cat with smiling eyes",version:"1.0"},{emoji:"",category:0,name:"cat with tears of joy",version:"1.0"},{emoji:"",category:0,name:"smiling cat with heart-eyes",version:"1.0"},{emoji:"",category:0,name:"cat with wry smile",version:"1.0"},{emoji:"",category:0,name:"kissing cat",version:"1.0"},{emoji:"",category:0,name:"weary cat",version:"1.0"},{emoji:"",category:0,name:"crying cat",version:"1.0"},{emoji:"",category:0,name:"pouting cat",version:"1.0"},{emoji:"",category:0,name:"see-no-evil monkey",version:"1.0"},{emoji:"",category:0,name:"hear-no-evil monkey",version:"1.0"},{emoji:"",category:0,name:"speak-no-evil monkey",version:"1.0"},{emoji:"",category:0,name:"kiss mark",version:"1.0"},{emoji:"",category:0,name:"love letter",version:"1.0"},{emoji:"",category:0,name:"heart with arrow",version:"1.0"},{emoji:"",category:0,name:"heart with ribbon",version:"1.0"},{emoji:"",category:0,name:"sparkling heart",version:"1.0"},{emoji:"",category:0,name:"growing heart",version:"1.0"},{emoji:"",category:0,name:"beating heart",version:"1.0"},{emoji:"",category:0,name:"revolving hearts",version:"1.0"},{emoji:"",category:0,name:"two hearts",version:"1.0"},{emoji:"",category:0,name:"heart decoration",version:"1.0"},{emoji:"",category:0,name:"heart exclamation",version:"1.0"},{emoji:"",category:0,name:"broken heart",version:"1.0"},{emoji:"",category:0,name:"red heart",version:"1.0"},{emoji:"",category:0,name:"orange heart",version:"5.0"},{emoji:"",category:0,name:"yellow heart",version:"1.0"},{emoji:"",category:0,name:"green heart",version:"1.0"},{emoji:"",category:0,name:"blue heart",version:"1.0"},{emoji:"",category:0,name:"purple heart",version:"1.0"},{emoji:"",category:0,name:"brown heart",version:"12.0"},{emoji:"",category:0,name:"black heart",version:"3.0"},{emoji:"",category:0,name:"white heart",version:"12.0"},{emoji:"",category:0,name:"hundred points",version:"1.0"},{emoji:"",category:0,name:"anger symbol",version:"1.0"},{emoji:"",category:0,name:"collision",version:"1.0"},{emoji:"",category:0,name:"dizzy",version:"1.0"},{emoji:"",category:0,name:"sweat droplets",version:"1.0"},{emoji:"",category:0,name:"dashing away",version:"1.0"},{emoji:"",category:0,name:"hole",version:"1.0"},{emoji:"",category:0,name:"bomb",version:"1.0"},{emoji:"",category:0,name:"speech balloon",version:"1.0"},{emoji:"",category:0,name:"eye in speech bubble",version:"2.0"},{emoji:"",category:0,name:"left speech bubble",version:"2.0"},{emoji:"",category:0,name:"right anger bubble",version:"1.0"},{emoji:"",category:0,name:"thought balloon",version:"1.0"},{emoji:"",category:0,name:"zzz",version:"1.0"},{emoji:"",category:1,name:"waving hand",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"raised back of hand",variations:["","","","",""],version:"3.0"},{emoji:"",category:1,name:"hand with fingers splayed",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"raised hand",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"vulcan salute",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"OK hand",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"pinched fingers",variations:["","","","",""],version:"13.0"},{emoji:"",category:1,name:"pinching hand",variations:["","","","",""],version:"12.0"},{emoji:"",category:1,name:"victory hand",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"crossed fingers",variations:["","","","",""],version:"3.0"},{emoji:"",category:1,name:"love-you gesture",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"sign of the horns",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"call me hand",variations:["","","","",""],version:"3.0"},{emoji:"",category:1,name:"backhand index pointing left",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"backhand index pointing right",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"backhand index pointing up",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"middle finger",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"backhand index pointing down",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"index pointing up",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"thumbs up",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"thumbs down",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"raised fist",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"oncoming fist",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"left-facing fist",variations:["","","","",""],version:"3.0"},{emoji:"",category:1,name:"right-facing fist",variations:["","","","",""],version:"3.0"},{emoji:"",category:1,name:"clapping hands",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"raising hands",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"open hands",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"palms up together",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"handshake",version:"3.0"},{emoji:"",category:1,name:"folded hands",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"writing hand",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"nail polish",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"selfie",variations:["","","","",""],version:"3.0"},{emoji:"",category:1,name:"flexed biceps",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"mechanical arm",version:"12.0"},{emoji:"",category:1,name:"mechanical leg",version:"12.0"},{emoji:"",category:1,name:"leg",variations:["","","","",""],version:"11.0"},{emoji:"",category:1,name:"foot",variations:["","","","",""],version:"11.0"},{emoji:"",category:1,name:"ear",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"ear with hearing aid",variations:["","","","",""],version:"12.0"},{emoji:"",category:1,name:"nose",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"brain",version:"5.0"},{emoji:"",category:1,name:"anatomical heart",version:"13.0"},{emoji:"",category:1,name:"lungs",version:"13.0"},{emoji:"",category:1,name:"tooth",version:"11.0"},{emoji:"",category:1,name:"bone",version:"11.0"},{emoji:"",category:1,name:"eyes",version:"1.0"},{emoji:"",category:1,name:"eye",version:"1.0"},{emoji:"",category:1,name:"tongue",version:"1.0"},{emoji:"",category:1,name:"mouth",version:"1.0"},{emoji:"",category:1,name:"baby",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"child",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"boy",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"girl",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"person",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"person with blond hair",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man with beard",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"man with red hair",variations:["","","","",""],version:"11.0"},{emoji:"",category:1,name:"man with curly hair",variations:["","","","",""],version:"11.0"},{emoji:"",category:1,name:"man with white hair",variations:["","","","",""],version:"11.0"},{emoji:"",category:1,name:"man with no hair",variations:["","","","",""],version:"11.0"},{emoji:"",category:1,name:"woman",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"woman with red hair",variations:["","","","",""],version:"11.0"},{emoji:"",category:1,name:"person with red hair",variations:["","","","",""],version:"12.1"},{emoji:"",category:1,name:"woman with curly hair",variations:["","","","",""],version:"11.0"},{emoji:"",category:1,name:"person with curly hair",variations:["","","","",""],version:"12.1"},{emoji:"",category:1,name:"woman with white hair",variations:["","","","",""],version:"11.0"},{emoji:"",category:1,name:"person with white hair",variations:["","","","",""],version:"12.1"},{emoji:"",category:1,name:"woman with no hair",variations:["","","","",""],version:"11.0"},{emoji:"",category:1,name:"person with no hair",variations:["","","","",""],version:"12.1"},{emoji:"",category:1,name:"woman with blond hair",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"man with blond hair",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"older person",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"old man",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"old woman",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"person frowning",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man frowning",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman frowning",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"person pouting",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man pouting",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman pouting",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"person gesturing NO",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man gesturing NO",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman gesturing NO",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"person gesturing OK",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man gesturing OK",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman gesturing OK",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"person tipping hand",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man tipping hand",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman tipping hand",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"person raising hand",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man raising hand",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman raising hand",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"deaf person",variations:["","","","",""],version:"12.0"},{emoji:"",category:1,name:"deaf man",variations:["","","","",""],version:"12.0"},{emoji:"",category:1,name:"deaf woman",variations:["","","","",""],version:"12.0"},{emoji:"",category:1,name:"person bowing",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man bowing",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman bowing",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"person facepalming",variations:["","","","",""],version:"3.0"},{emoji:"",category:1,name:"man facepalming",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman facepalming",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"person shrugging",variations:["","","","",""],version:"3.0"},{emoji:"",category:1,name:"man shrugging",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman shrugging",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"health worker",variations:["","","","",""],version:"12.1"},{emoji:"",category:1,name:"man health worker",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman health worker",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"student",variations:["","","","",""],version:"12.1"},{emoji:"",category:1,name:"man student",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman student",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"teacher",variations:["","","","",""],version:"12.1"},{emoji:"",category:1,name:"man teacher",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman teacher",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"judge",variations:["","","","",""],version:"12.1"},{emoji:"",category:1,name:"man judge",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman judge",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"farmer",variations:["","","","",""],version:"12.1"},{emoji:"",category:1,name:"man farmer",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman farmer",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"cook",variations:["","","","",""],version:"12.1"},{emoji:"",category:1,name:"man cook",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman cook",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"mechanic",variations:["","","","",""],version:"12.1"},{emoji:"",category:1,name:"man mechanic",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman mechanic",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"factory worker",variations:["","","","",""],version:"12.1"},{emoji:"",category:1,name:"man factory worker",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman factory worker",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"office worker",variations:["","","","",""],version:"12.1"},{emoji:"",category:1,name:"man office worker",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman office worker",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"scientist",variations:["","","","",""],version:"12.1"},{emoji:"",category:1,name:"man scientist",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman scientist",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"technologist",variations:["","","","",""],version:"12.1"},{emoji:"",category:1,name:"man technologist",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman technologist",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"singer",variations:["","","","",""],version:"12.1"},{emoji:"",category:1,name:"man singer",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman singer",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"artist",variations:["","","","",""],version:"12.1"},{emoji:"",category:1,name:"man artist",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman artist",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"pilot",variations:["","","","",""],version:"12.1"},{emoji:"",category:1,name:"man pilot",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman pilot",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"astronaut",variations:["","","","",""],version:"12.1"},{emoji:"",category:1,name:"man astronaut",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman astronaut",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"firefighter",variations:["","","","",""],version:"12.1"},{emoji:"",category:1,name:"man firefighter",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman firefighter",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"police officer",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man police officer",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman police officer",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"detective",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man detective",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman detective",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"guard",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man guard",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman guard",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"ninja",variations:["","","","",""],version:"13.0"},{emoji:"",category:1,name:"construction worker",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man construction worker",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman construction worker",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"prince",variations:["","","","",""],version:"3.0"},{emoji:"",category:1,name:"princess",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"person wearing turban",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man wearing turban",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman wearing turban",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"person with skullcap",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"woman with headscarf",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"person in tuxedo",variations:["","","","",""],version:"3.0"},{emoji:"",category:1,name:"man in tuxedo",variations:["","","","",""],version:"13.0"},{emoji:"",category:1,name:"woman in tuxedo",variations:["","","","",""],version:"13.0"},{emoji:"",category:1,name:"person with veil",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man with veil",variations:["","","","",""],version:"13.0"},{emoji:"",category:1,name:"woman with veil",variations:["","","","",""],version:"13.0"},{emoji:"",category:1,name:"pregnant woman",variations:["","","","",""],version:"3.0"},{emoji:"",category:1,name:"breast-feeding",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"woman feeding baby",variations:["","","","",""],version:"13.0"},{emoji:"",category:1,name:"man feeding baby",variations:["","","","",""],version:"13.0"},{emoji:"",category:1,name:"person feeding baby",variations:["","","","",""],version:"13.0"},{emoji:"",category:1,name:"baby angel",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"Santa Claus",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"Mrs. Claus",variations:["","","","",""],version:"3.0"},{emoji:"",category:1,name:"mx claus",variations:["","","","",""],version:"13.0"},{emoji:"",category:1,name:"superhero",variations:["","","","",""],version:"11.0"},{emoji:"",category:1,name:"man superhero",variations:["","","","",""],version:"11.0"},{emoji:"",category:1,name:"woman superhero",variations:["","","","",""],version:"11.0"},{emoji:"",category:1,name:"supervillain",variations:["","","","",""],version:"11.0"},{emoji:"",category:1,name:"man supervillain",variations:["","","","",""],version:"11.0"},{emoji:"",category:1,name:"woman supervillain",variations:["","","","",""],version:"11.0"},{emoji:"",category:1,name:"mage",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"man mage",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"woman mage",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"fairy",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"man fairy",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"woman fairy",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"vampire",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"man vampire",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"woman vampire",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"merperson",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"merman",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"mermaid",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"elf",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"man elf",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"woman elf",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"genie",version:"5.0"},{emoji:"",category:1,name:"man genie",version:"5.0"},{emoji:"",category:1,name:"woman genie",version:"5.0"},{emoji:"",category:1,name:"zombie",version:"5.0"},{emoji:"",category:1,name:"man zombie",version:"5.0"},{emoji:"",category:1,name:"woman zombie",version:"5.0"},{emoji:"",category:1,name:"person getting massage",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man getting massage",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman getting massage",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"person getting haircut",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man getting haircut",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman getting haircut",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"person walking",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man walking",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman walking",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"person standing",variations:["","","","",""],version:"12.0"},{emoji:"",category:1,name:"man standing",variations:["","","","",""],version:"12.0"},{emoji:"",category:1,name:"woman standing",variations:["","","","",""],version:"12.0"},{emoji:"",category:1,name:"person kneeling",variations:["","","","",""],version:"12.0"},{emoji:"",category:1,name:"man kneeling",variations:["","","","",""],version:"12.0"},{emoji:"",category:1,name:"woman kneeling",variations:["","","","",""],version:"12.0"},{emoji:"",category:1,name:"person with white cane",variations:["","","","",""],version:"12.1"},{emoji:"",category:1,name:"man with white cane",variations:["","","","",""],version:"12.0"},{emoji:"",category:1,name:"woman with white cane",variations:["","","","",""],version:"12.0"},{emoji:"",category:1,name:"person in motorized wheelchair",variations:["","","","",""],version:"12.1"},{emoji:"",category:1,name:"man in motorized wheelchair",variations:["","","","",""],version:"12.0"},{emoji:"",category:1,name:"woman in motorized wheelchair",variations:["","","","",""],version:"12.0"},{emoji:"",category:1,name:"person in manual wheelchair",variations:["","","","",""],version:"12.1"},{emoji:"",category:1,name:"man in manual wheelchair",variations:["","","","",""],version:"12.0"},{emoji:"",category:1,name:"woman in manual wheelchair",variations:["","","","",""],version:"12.0"},{emoji:"",category:1,name:"person running",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man running",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman running",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman dancing",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man dancing",variations:["","","","",""],version:"3.0"},{emoji:"",category:1,name:"person in suit levitating",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"people with bunny ears",version:"1.0"},{emoji:"",category:1,name:"men with bunny ears",version:"4.0"},{emoji:"",category:1,name:"women with bunny ears",version:"4.0"},{emoji:"",category:1,name:"person in steamy room",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"man in steamy room",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"woman in steamy room",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"person climbing",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"man climbing",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"woman climbing",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"person fencing",version:"3.0"},{emoji:"",category:1,name:"horse racing",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"skier",version:"1.0"},{emoji:"",category:1,name:"snowboarder",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"person golfing",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man golfing",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman golfing",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"person surfing",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man surfing",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman surfing",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"person rowing boat",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man rowing boat",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman rowing boat",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"person swimming",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man swimming",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman swimming",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"person bouncing ball",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man bouncing ball",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman bouncing ball",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"person lifting weights",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man lifting weights",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman lifting weights",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"person biking",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man biking",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman biking",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"person mountain biking",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"man mountain biking",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman mountain biking",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"person cartwheeling",variations:["","","","",""],version:"3.0"},{emoji:"",category:1,name:"man cartwheeling",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman cartwheeling",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"people wrestling",version:"3.0"},{emoji:"",category:1,name:"men wrestling",version:"4.0"},{emoji:"",category:1,name:"women wrestling",version:"4.0"},{emoji:"",category:1,name:"person playing water polo",variations:["","","","",""],version:"3.0"},{emoji:"",category:1,name:"man playing water polo",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman playing water polo",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"person playing handball",variations:["","","","",""],version:"3.0"},{emoji:"",category:1,name:"man playing handball",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman playing handball",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"person juggling",variations:["","","","",""],version:"3.0"},{emoji:"",category:1,name:"man juggling",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"woman juggling",variations:["","","","",""],version:"4.0"},{emoji:"",category:1,name:"person in lotus position",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"man in lotus position",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"woman in lotus position",variations:["","","","",""],version:"5.0"},{emoji:"",category:1,name:"person taking bath",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"person in bed",variations:["","","","",""],version:"1.0"},{emoji:"",category:1,name:"people holding hands",variations:["","","","","","","","","","","","","","","","","","","","","","","","",""],version:"12.0"},{emoji:"",category:1,name:"women holding hands",variations:["","","","","","","","","","","","","","","","","","","","","","","","",""],version:"1.0"},{emoji:"",category:1,name:"woman and man holding hands",variations:["","","","","","","","","","","","","","","","","","","","","","","","",""],version:"1.0"},{emoji:"",category:1,name:"men holding hands",variations:["","","","","","","","","","","","","","","","","","","","","","","","",""],version:"1.0"},{emoji:"",category:1,name:"kiss",variations:["","",""],version:"1.0"},{emoji:"",category:1,name:"couple with heart",variations:["","",""],version:"1.0"},{emoji:"",category:1,name:"family",version:"1.0"},{emoji:"",category:1,name:"family: man, woman, boy",version:"2.0"},{emoji:"",category:1,name:"family: man, woman, girl",version:"2.0"},{emoji:"",category:1,name:"family: man, woman, girl, boy",version:"2.0"},{emoji:"",category:1,name:"family: man, woman, boy, boy",version:"2.0"},{emoji:"",category:1,name:"family: man, woman, girl, girl",version:"2.0"},{emoji:"",category:1,name:"family: man, man, boy",version:"2.0"},{emoji:"",category:1,name:"family: man, man, girl",version:"2.0"},{emoji:"",category:1,name:"family: man, man, girl, boy",version:"2.0"},{emoji:"",category:1,name:"family: man, man, boy, boy",version:"2.0"},{emoji:"",category:1,name:"family: man, man, girl, girl",version:"2.0"},{emoji:"",category:1,name:"family: woman, woman, boy",version:"2.0"},{emoji:"",category:1,name:"family: woman, woman, girl",version:"2.0"},{emoji:"",category:1,name:"family: woman, woman, girl, boy",version:"2.0"},{emoji:"",category:1,name:"family: woman, woman, boy, boy",version:"2.0"},{emoji:"",category:1,name:"family: woman, woman, girl, girl",version:"2.0"},{emoji:"",category:1,name:"family: man, boy",version:"4.0"},{emoji:"",category:1,name:"family: man, boy, boy",version:"4.0"},{emoji:"",category:1,name:"family: man, girl",version:"4.0"},{emoji:"",category:1,name:"family: man, girl, boy",version:"4.0"},{emoji:"",category:1,name:"family: man, girl, girl",version:"4.0"},{emoji:"",category:1,name:"family: woman, boy",version:"4.0"},{emoji:"",category:1,name:"family: woman, boy, boy",version:"4.0"},{emoji:"",category:1,name:"family: woman, girl",version:"4.0"},{emoji:"",category:1,name:"family: woman, girl, boy",version:"4.0"},{emoji:"",category:1,name:"family: woman, girl, girl",version:"4.0"},{emoji:"",category:1,name:"speaking head",version:"1.0"},{emoji:"",category:1,name:"bust in silhouette",version:"1.0"},{emoji:"",category:1,name:"busts in silhouette",version:"1.0"},{emoji:"",category:1,name:"people hugging",version:"13.0"},{emoji:"",category:1,name:"footprints",version:"1.0"},{emoji:"",category:2,name:"monkey face",version:"1.0"},{emoji:"",category:2,name:"monkey",version:"1.0"},{emoji:"",category:2,name:"gorilla",version:"3.0"},{emoji:"",category:2,name:"orangutan",version:"12.0"},{emoji:"",category:2,name:"dog face",version:"1.0"},{emoji:"",category:2,name:"dog",version:"1.0"},{emoji:"",category:2,name:"guide dog",version:"12.0"},{emoji:"",category:2,name:"service dog",version:"12.0"},{emoji:"",category:2,name:"poodle",version:"1.0"},{emoji:"",category:2,name:"wolf",version:"1.0"},{emoji:"",category:2,name:"fox",version:"3.0"},{emoji:"",category:2,name:"raccoon",version:"11.0"},{emoji:"",category:2,name:"cat face",version:"1.0"},{emoji:"",category:2,name:"cat",version:"1.0"},{emoji:"",category:2,name:"black cat",version:"13.0"},{emoji:"",category:2,name:"lion",version:"1.0"},{emoji:"",category:2,name:"tiger face",version:"1.0"},{emoji:"",category:2,name:"tiger",version:"1.0"},{emoji:"",category:2,name:"leopard",version:"1.0"},{emoji:"",category:2,name:"horse face",version:"1.0"},{emoji:"",category:2,name:"horse",version:"1.0"},{emoji:"",category:2,name:"unicorn",version:"1.0"},{emoji:"",category:2,name:"zebra",version:"5.0"},{emoji:"",category:2,name:"deer",version:"3.0"},{emoji:"",category:2,name:"bison",version:"13.0"},{emoji:"",category:2,name:"cow face",version:"1.0"},{emoji:"",category:2,name:"ox",version:"1.0"},{emoji:"",category:2,name:"water buffalo",version:"1.0"},{emoji:"",category:2,name:"cow",version:"1.0"},{emoji:"",category:2,name:"pig face",version:"1.0"},{emoji:"",category:2,name:"pig",version:"1.0"},{emoji:"",category:2,name:"boar",version:"1.0"},{emoji:"",category:2,name:"pig nose",version:"1.0"},{emoji:"",category:2,name:"ram",version:"1.0"},{emoji:"",category:2,name:"ewe",version:"1.0"},{emoji:"",category:2,name:"goat",version:"1.0"},{emoji:"",category:2,name:"camel",version:"1.0"},{emoji:"",category:2,name:"two-hump camel",version:"1.0"},{emoji:"",category:2,name:"llama",version:"11.0"},{emoji:"",category:2,name:"giraffe",version:"5.0"},{emoji:"",category:2,name:"elephant",version:"1.0"},{emoji:"",category:2,name:"mammoth",version:"13.0"},{emoji:"",category:2,name:"rhinoceros",version:"3.0"},{emoji:"",category:2,name:"hippopotamus",version:"11.0"},{emoji:"",category:2,name:"mouse face",version:"1.0"},{emoji:"",category:2,name:"mouse",version:"1.0"},{emoji:"",category:2,name:"rat",version:"1.0"},{emoji:"",category:2,name:"hamster",version:"1.0"},{emoji:"",category:2,name:"rabbit face",version:"1.0"},{emoji:"",category:2,name:"rabbit",version:"1.0"},{emoji:"",category:2,name:"chipmunk",version:"1.0"},{emoji:"",category:2,name:"beaver",version:"13.0"},{emoji:"",category:2,name:"hedgehog",version:"5.0"},{emoji:"",category:2,name:"bat",version:"3.0"},{emoji:"",category:2,name:"bear",version:"1.0"},{emoji:"",category:2,name:"polar bear",version:"13.0"},{emoji:"",category:2,name:"koala",version:"1.0"},{emoji:"",category:2,name:"panda",version:"1.0"},{emoji:"",category:2,name:"sloth",version:"12.0"},{emoji:"",category:2,name:"otter",version:"12.0"},{emoji:"",category:2,name:"skunk",version:"12.0"},{emoji:"",category:2,name:"kangaroo",version:"11.0"},{emoji:"",category:2,name:"badger",version:"11.0"},{emoji:"",category:2,name:"paw prints",version:"1.0"},{emoji:"",category:2,name:"turkey",version:"1.0"},{emoji:"",category:2,name:"chicken",version:"1.0"},{emoji:"",category:2,name:"rooster",version:"1.0"},{emoji:"",category:2,name:"hatching chick",version:"1.0"},{emoji:"",category:2,name:"baby chick",version:"1.0"},{emoji:"",category:2,name:"front-facing baby chick",version:"1.0"},{emoji:"",category:2,name:"bird",version:"1.0"},{emoji:"",category:2,name:"penguin",version:"1.0"},{emoji:"",category:2,name:"dove",version:"1.0"},{emoji:"",category:2,name:"eagle",version:"3.0"},{emoji:"",category:2,name:"duck",version:"3.0"},{emoji:"",category:2,name:"swan",version:"11.0"},{emoji:"",category:2,name:"owl",version:"3.0"},{emoji:"",category:2,name:"dodo",version:"13.0"},{emoji:"",category:2,name:"feather",version:"13.0"},{emoji:"",category:2,name:"flamingo",version:"12.0"},{emoji:"",category:2,name:"peacock",version:"11.0"},{emoji:"",category:2,name:"parrot",version:"11.0"},{emoji:"",category:2,name:"frog",version:"1.0"},{emoji:"",category:2,name:"crocodile",version:"1.0"},{emoji:"",category:2,name:"turtle",version:"1.0"},{emoji:"",category:2,name:"lizard",version:"3.0"},{emoji:"",category:2,name:"snake",version:"1.0"},{emoji:"",category:2,name:"dragon face",version:"1.0"},{emoji:"",category:2,name:"dragon",version:"1.0"},{emoji:"",category:2,name:"sauropod",version:"5.0"},{emoji:"",category:2,name:"T-Rex",version:"5.0"},{emoji:"",category:2,name:"spouting whale",version:"1.0"},{emoji:"",category:2,name:"whale",version:"1.0"},{emoji:"",category:2,name:"dolphin",version:"1.0"},{emoji:"",category:2,name:"seal",version:"13.0"},{emoji:"",category:2,name:"fish",version:"1.0"},{emoji:"",category:2,name:"tropical fish",version:"1.0"},{emoji:"",category:2,name:"blowfish",version:"1.0"},{emoji:"",category:2,name:"shark",version:"3.0"},{emoji:"",category:2,name:"octopus",version:"1.0"},{emoji:"",category:2,name:"spiral shell",version:"1.0"},{emoji:"",category:2,name:"snail",version:"1.0"},{emoji:"",category:2,name:"butterfly",version:"3.0"},{emoji:"",category:2,name:"bug",version:"1.0"},{emoji:"",category:2,name:"ant",version:"1.0"},{emoji:"",category:2,name:"honeybee",version:"1.0"},{emoji:"",category:2,name:"beetle",version:"13.0"},{emoji:"",category:2,name:"lady beetle",version:"1.0"},{emoji:"",category:2,name:"cricket",version:"5.0"},{emoji:"",category:2,name:"cockroach",version:"13.0"},{emoji:"",category:2,name:"spider",version:"1.0"},{emoji:"",category:2,name:"spider web",version:"1.0"},{emoji:"",category:2,name:"scorpion",version:"1.0"},{emoji:"",category:2,name:"mosquito",version:"11.0"},{emoji:"",category:2,name:"fly",version:"13.0"},{emoji:"",category:2,name:"worm",version:"13.0"},{emoji:"",category:2,name:"microbe",version:"11.0"},{emoji:"",category:2,name:"bouquet",version:"1.0"},{emoji:"",category:2,name:"cherry blossom",version:"1.0"},{emoji:"",category:2,name:"white flower",version:"1.0"},{emoji:"",category:2,name:"rosette",version:"1.0"},{emoji:"",category:2,name:"rose",version:"1.0"},{emoji:"",category:2,name:"wilted flower",version:"3.0"},{emoji:"",category:2,name:"hibiscus",version:"1.0"},{emoji:"",category:2,name:"sunflower",version:"1.0"},{emoji:"",category:2,name:"blossom",version:"1.0"},{emoji:"",category:2,name:"tulip",version:"1.0"},{emoji:"",category:2,name:"seedling",version:"1.0"},{emoji:"",category:2,name:"potted plant",version:"13.0"},{emoji:"",category:2,name:"evergreen tree",version:"1.0"},{emoji:"",category:2,name:"deciduous tree",version:"1.0"},{emoji:"",category:2,name:"palm tree",version:"1.0"},{emoji:"",category:2,name:"cactus",version:"1.0"},{emoji:"",category:2,name:"sheaf of rice",version:"1.0"},{emoji:"",category:2,name:"herb",version:"1.0"},{emoji:"",category:2,name:"shamrock",version:"1.0"},{emoji:"",category:2,name:"four leaf clover",version:"1.0"},{emoji:"",category:2,name:"maple leaf",version:"1.0"},{emoji:"",category:2,name:"fallen leaf",version:"1.0"},{emoji:"",category:2,name:"leaf fluttering in wind",version:"1.0"},{emoji:"",category:3,name:"grapes",version:"1.0"},{emoji:"",category:3,name:"melon",version:"1.0"},{emoji:"",category:3,name:"watermelon",version:"1.0"},{emoji:"",category:3,name:"tangerine",version:"1.0"},{emoji:"",category:3,name:"lemon",version:"1.0"},{emoji:"",category:3,name:"banana",version:"1.0"},{emoji:"",category:3,name:"pineapple",version:"1.0"},{emoji:"",category:3,name:"mango",version:"11.0"},{emoji:"",category:3,name:"red apple",version:"1.0"},{emoji:"",category:3,name:"green apple",version:"1.0"},{emoji:"",category:3,name:"pear",version:"1.0"},{emoji:"",category:3,name:"peach",version:"1.0"},{emoji:"",category:3,name:"cherries",version:"1.0"},{emoji:"",category:3,name:"strawberry",version:"1.0"},{emoji:"",category:3,name:"blueberries",version:"13.0"},{emoji:"",category:3,name:"kiwi fruit",version:"3.0"},{emoji:"",category:3,name:"tomato",version:"1.0"},{emoji:"",category:3,name:"olive",version:"13.0"},{emoji:"",category:3,name:"coconut",version:"5.0"},{emoji:"",category:3,name:"avocado",version:"3.0"},{emoji:"",category:3,name:"eggplant",version:"1.0"},{emoji:"",category:3,name:"potato",version:"3.0"},{emoji:"",category:3,name:"carrot",version:"3.0"},{emoji:"",category:3,name:"ear of corn",version:"1.0"},{emoji:"",category:3,name:"hot pepper",version:"1.0"},{emoji:"",category:3,name:"bell pepper",version:"13.0"},{emoji:"",category:3,name:"cucumber",version:"3.0"},{emoji:"",category:3,name:"leafy green",version:"11.0"},{emoji:"",category:3,name:"broccoli",version:"5.0"},{emoji:"",category:3,name:"garlic",version:"12.0"},{emoji:"",category:3,name:"onion",version:"12.0"},{emoji:"",category:3,name:"mushroom",version:"1.0"},{emoji:"",category:3,name:"peanuts",version:"3.0"},{emoji:"",category:3,name:"chestnut",version:"1.0"},{emoji:"",category:3,name:"bread",version:"1.0"},{emoji:"",category:3,name:"croissant",version:"3.0"},{emoji:"",category:3,name:"baguette bread",version:"3.0"},{emoji:"",category:3,name:"flatbread",version:"13.0"},{emoji:"",category:3,name:"pretzel",version:"5.0"},{emoji:"",category:3,name:"bagel",version:"11.0"},{emoji:"",category:3,name:"pancakes",version:"3.0"},{emoji:"",category:3,name:"waffle",version:"12.0"},{emoji:"",category:3,name:"cheese wedge",version:"1.0"},{emoji:"",category:3,name:"meat on bone",version:"1.0"},{emoji:"",category:3,name:"poultry leg",version:"1.0"},{emoji:"",category:3,name:"cut of meat",version:"5.0"},{emoji:"",category:3,name:"bacon",version:"3.0"},{emoji:"",category:3,name:"hamburger",version:"1.0"},{emoji:"",category:3,name:"french fries",version:"1.0"},{emoji:"",category:3,name:"pizza",version:"1.0"},{emoji:"",category:3,name:"hot dog",version:"1.0"},{emoji:"",category:3,name:"sandwich",version:"5.0"},{emoji:"",category:3,name:"taco",version:"1.0"},{emoji:"",category:3,name:"burrito",version:"1.0"},{emoji:"",category:3,name:"tamale",version:"13.0"},{emoji:"",category:3,name:"stuffed flatbread",version:"3.0"},{emoji:"",category:3,name:"falafel",version:"12.0"},{emoji:"",category:3,name:"egg",version:"3.0"},{emoji:"",category:3,name:"cooking",version:"1.0"},{emoji:"",category:3,name:"shallow pan of food",version:"3.0"},{emoji:"",category:3,name:"pot of food",version:"1.0"},{emoji:"",category:3,name:"fondue",version:"13.0"},{emoji:"",category:3,name:"bowl with spoon",version:"5.0"},{emoji:"",category:3,name:"green salad",version:"3.0"},{emoji:"",category:3,name:"popcorn",version:"1.0"},{emoji:"",category:3,name:"butter",version:"12.0"},{emoji:"",category:3,name:"salt",version:"11.0"},{emoji:"",category:3,name:"canned food",version:"5.0"},{emoji:"",category:3,name:"bento box",version:"1.0"},{emoji:"",category:3,name:"rice cracker",version:"1.0"},{emoji:"",category:3,name:"rice ball",version:"1.0"},{emoji:"",category:3,name:"cooked rice",version:"1.0"},{emoji:"",category:3,name:"curry rice",version:"1.0"},{emoji:"",category:3,name:"steaming bowl",version:"1.0"},{emoji:"",category:3,name:"spaghetti",version:"1.0"},{emoji:"",category:3,name:"roasted sweet potato",version:"1.0"},{emoji:"",category:3,name:"oden",version:"1.0"},{emoji:"",category:3,name:"sushi",version:"1.0"},{emoji:"",category:3,name:"fried shrimp",version:"1.0"},{emoji:"",category:3,name:"fish cake with swirl",version:"1.0"},{emoji:"",category:3,name:"moon cake",version:"11.0"},{emoji:"",category:3,name:"dango",version:"1.0"},{emoji:"",category:3,name:"dumpling",version:"5.0"},{emoji:"",category:3,name:"fortune cookie",version:"5.0"},{emoji:"",category:3,name:"takeout box",version:"5.0"},{emoji:"",category:3,name:"crab",version:"1.0"},{emoji:"",category:3,name:"lobster",version:"11.0"},{emoji:"",category:3,name:"shrimp",version:"3.0"},{emoji:"",category:3,name:"squid",version:"3.0"},{emoji:"",category:3,name:"oyster",version:"12.0"},{emoji:"",category:3,name:"soft ice cream",version:"1.0"},{emoji:"",category:3,name:"shaved ice",version:"1.0"},{emoji:"",category:3,name:"ice cream",version:"1.0"},{emoji:"",category:3,name:"doughnut",version:"1.0"},{emoji:"",category:3,name:"cookie",version:"1.0"},{emoji:"",category:3,name:"birthday cake",version:"1.0"},{emoji:"",category:3,name:"shortcake",version:"1.0"},{emoji:"",category:3,name:"cupcake",version:"11.0"},{emoji:"",category:3,name:"pie",version:"5.0"},{emoji:"",category:3,name:"chocolate bar",version:"1.0"},{emoji:"",category:3,name:"candy",version:"1.0"},{emoji:"",category:3,name:"lollipop",version:"1.0"},{emoji:"",category:3,name:"custard",version:"1.0"},{emoji:"",category:3,name:"honey pot",version:"1.0"},{emoji:"",category:3,name:"baby bottle",version:"1.0"},{emoji:"",category:3,name:"glass of milk",version:"3.0"},{emoji:"",category:3,name:"hot beverage",version:"1.0"},{emoji:"",category:3,name:"teapot",version:"13.0"},{emoji:"",category:3,name:"teacup without handle",version:"1.0"},{emoji:"",category:3,name:"sake",version:"1.0"},{emoji:"",category:3,name:"bottle with popping cork",version:"1.0"},{emoji:"",category:3,name:"wine glass",version:"1.0"},{emoji:"",category:3,name:"cocktail glass",version:"1.0"},{emoji:"",category:3,name:"tropical drink",version:"1.0"},{emoji:"",category:3,name:"beer mug",version:"1.0"},{emoji:"",category:3,name:"clinking beer mugs",version:"1.0"},{emoji:"",category:3,name:"clinking glasses",version:"3.0"},{emoji:"",category:3,name:"tumbler glass",version:"3.0"},{emoji:"",category:3,name:"cup with straw",version:"5.0"},{emoji:"",category:3,name:"bubble tea",version:"13.0"},{emoji:"",category:3,name:"beverage box",version:"12.0"},{emoji:"",category:3,name:"mate",version:"12.0"},{emoji:"",category:3,name:"ice",version:"12.0"},{emoji:"",category:3,name:"chopsticks",version:"5.0"},{emoji:"",category:3,name:"fork and knife with plate",version:"1.0"},{emoji:"",category:3,name:"fork and knife",version:"1.0"},{emoji:"",category:3,name:"spoon",version:"3.0"},{emoji:"",category:3,name:"kitchen knife",version:"1.0"},{emoji:"",category:3,name:"amphora",version:"1.0"},{emoji:"",category:4,name:"globe showing Europe-Africa",version:"1.0"},{emoji:"",category:4,name:"globe showing Americas",version:"1.0"},{emoji:"",category:4,name:"globe showing Asia-Australia",version:"1.0"},{emoji:"",category:4,name:"globe with meridians",version:"1.0"},{emoji:"",category:4,name:"world map",version:"1.0"},{emoji:"",category:4,name:"map of Japan",version:"1.0"},{emoji:"",category:4,name:"compass",version:"11.0"},{emoji:"",category:4,name:"snow-capped mountain",version:"1.0"},{emoji:"",category:4,name:"mountain",version:"1.0"},{emoji:"",category:4,name:"volcano",version:"1.0"},{emoji:"",category:4,name:"mount fuji",version:"1.0"},{emoji:"",category:4,name:"camping",version:"1.0"},{emoji:"",category:4,name:"beach with umbrella",version:"1.0"},{emoji:"",category:4,name:"desert",version:"1.0"},{emoji:"",category:4,name:"desert island",version:"1.0"},{emoji:"",category:4,name:"national park",version:"1.0"},{emoji:"",category:4,name:"stadium",version:"1.0"},{emoji:"",category:4,name:"classical building",version:"1.0"},{emoji:"",category:4,name:"building construction",version:"1.0"},{emoji:"",category:4,name:"brick",version:"11.0"},{emoji:"",category:4,name:"rock",version:"13.0"},{emoji:"",category:4,name:"wood",version:"13.0"},{emoji:"",category:4,name:"hut",version:"13.0"},{emoji:"",category:4,name:"houses",version:"1.0"},{emoji:"",category:4,name:"derelict house",version:"1.0"},{emoji:"",category:4,name:"house",version:"1.0"},{emoji:"",category:4,name:"house with garden",version:"1.0"},{emoji:"",category:4,name:"office building",version:"1.0"},{emoji:"",category:4,name:"Japanese post office",version:"1.0"},{emoji:"",category:4,name:"post office",version:"1.0"},{emoji:"",category:4,name:"hospital",version:"1.0"},{emoji:"",category:4,name:"bank",version:"1.0"},{emoji:"",category:4,name:"hotel",version:"1.0"},{emoji:"",category:4,name:"love hotel",version:"1.0"},{emoji:"",category:4,name:"convenience store",version:"1.0"},{emoji:"",category:4,name:"school",version:"1.0"},{emoji:"",category:4,name:"department store",version:"1.0"},{emoji:"",category:4,name:"factory",version:"1.0"},{emoji:"",category:4,name:"Japanese castle",version:"1.0"},{emoji:"",category:4,name:"castle",version:"1.0"},{emoji:"",category:4,name:"wedding",version:"1.0"},{emoji:"",category:4,name:"Tokyo tower",version:"1.0"},{emoji:"",category:4,name:"Statue of Liberty",version:"1.0"},{emoji:"",category:4,name:"church",version:"1.0"},{emoji:"",category:4,name:"mosque",version:"1.0"},{emoji:"",category:4,name:"hindu temple",version:"12.0"},{emoji:"",category:4,name:"synagogue",version:"1.0"},{emoji:"",category:4,name:"shinto shrine",version:"1.0"},{emoji:"",category:4,name:"kaaba",version:"1.0"},{emoji:"",category:4,name:"fountain",version:"1.0"},{emoji:"",category:4,name:"tent",version:"1.0"},{emoji:"",category:4,name:"foggy",version:"1.0"},{emoji:"",category:4,name:"night with stars",version:"1.0"},{emoji:"",category:4,name:"cityscape",version:"1.0"},{emoji:"",category:4,name:"sunrise over mountains",version:"1.0"},{emoji:"",category:4,name:"sunrise",version:"1.0"},{emoji:"",category:4,name:"cityscape at dusk",version:"1.0"},{emoji:"",category:4,name:"sunset",version:"1.0"},{emoji:"",category:4,name:"bridge at night",version:"1.0"},{emoji:"",category:4,name:"hot springs",version:"1.0"},{emoji:"",category:4,name:"carousel horse",version:"1.0"},{emoji:"",category:4,name:"ferris wheel",version:"1.0"},{emoji:"",category:4,name:"roller coaster",version:"1.0"},{emoji:"",category:4,name:"barber pole",version:"1.0"},{emoji:"",category:4,name:"circus tent",version:"1.0"},{emoji:"",category:4,name:"locomotive",version:"1.0"},{emoji:"",category:4,name:"railway car",version:"1.0"},{emoji:"",category:4,name:"high-speed train",version:"1.0"},{emoji:"",category:4,name:"bullet train",version:"1.0"},{emoji:"",category:4,name:"train",version:"1.0"},{emoji:"",category:4,name:"metro",version:"1.0"},{emoji:"",category:4,name:"light rail",version:"1.0"},{emoji:"",category:4,name:"station",version:"1.0"},{emoji:"",category:4,name:"tram",version:"1.0"},{emoji:"",category:4,name:"monorail",version:"1.0"},{emoji:"",category:4,name:"mountain railway",version:"1.0"},{emoji:"",category:4,name:"tram car",version:"1.0"},{emoji:"",category:4,name:"bus",version:"1.0"},{emoji:"",category:4,name:"oncoming bus",version:"1.0"},{emoji:"",category:4,name:"trolleybus",version:"1.0"},{emoji:"",category:4,name:"minibus",version:"1.0"},{emoji:"",category:4,name:"ambulance",version:"1.0"},{emoji:"",category:4,name:"fire engine",version:"1.0"},{emoji:"",category:4,name:"police car",version:"1.0"},{emoji:"",category:4,name:"oncoming police car",version:"1.0"},{emoji:"",category:4,name:"taxi",version:"1.0"},{emoji:"",category:4,name:"oncoming taxi",version:"1.0"},{emoji:"",category:4,name:"automobile",version:"1.0"},{emoji:"",category:4,name:"oncoming automobile",version:"1.0"},{emoji:"",category:4,name:"sport utility vehicle",version:"1.0"},{emoji:"",category:4,name:"pickup truck",version:"13.0"},{emoji:"",category:4,name:"delivery truck",version:"1.0"},{emoji:"",category:4,name:"articulated lorry",version:"1.0"},{emoji:"",category:4,name:"tractor",version:"1.0"},{emoji:"",category:4,name:"racing car",version:"1.0"},{emoji:"",category:4,name:"motorcycle",version:"1.0"},{emoji:"",category:4,name:"motor scooter",version:"3.0"},{emoji:"",category:4,name:"manual wheelchair",version:"12.0"},{emoji:"",category:4,name:"motorized wheelchair",version:"12.0"},{emoji:"",category:4,name:"auto rickshaw",version:"12.0"},{emoji:"",category:4,name:"bicycle",version:"1.0"},{emoji:"",category:4,name:"kick scooter",version:"3.0"},{emoji:"",category:4,name:"skateboard",version:"11.0"},{emoji:"",category:4,name:"roller skate",version:"13.0"},{emoji:"",category:4,name:"bus stop",version:"1.0"},{emoji:"",category:4,name:"motorway",version:"1.0"},{emoji:"",category:4,name:"railway track",version:"1.0"},{emoji:"",category:4,name:"oil drum",version:"1.0"},{emoji:"",category:4,name:"fuel pump",version:"1.0"},{emoji:"",category:4,name:"police car light",version:"1.0"},{emoji:"",category:4,name:"horizontal traffic light",version:"1.0"},{emoji:"",category:4,name:"vertical traffic light",version:"1.0"},{emoji:"",category:4,name:"stop sign",version:"3.0"},{emoji:"",category:4,name:"construction",version:"1.0"},{emoji:"",category:4,name:"anchor",version:"1.0"},{emoji:"",category:4,name:"sailboat",version:"1.0"},{emoji:"",category:4,name:"canoe",version:"3.0"},{emoji:"",category:4,name:"speedboat",version:"1.0"},{emoji:"",category:4,name:"passenger ship",version:"1.0"},{emoji:"",category:4,name:"ferry",version:"1.0"},{emoji:"",category:4,name:"motor boat",version:"1.0"},{emoji:"",category:4,name:"ship",version:"1.0"},{emoji:"",category:4,name:"airplane",version:"1.0"},{emoji:"",category:4,name:"small airplane",version:"1.0"},{emoji:"",category:4,name:"airplane departure",version:"1.0"},{emoji:"",category:4,name:"airplane arrival",version:"1.0"},{emoji:"",category:4,name:"parachute",version:"12.0"},{emoji:"",category:4,name:"seat",version:"1.0"},{emoji:"",category:4,name:"helicopter",version:"1.0"},{emoji:"",category:4,name:"suspension railway",version:"1.0"},{emoji:"",category:4,name:"mountain cableway",version:"1.0"},{emoji:"",category:4,name:"aerial tramway",version:"1.0"},{emoji:"",category:4,name:"satellite",version:"1.0"},{emoji:"",category:4,name:"rocket",version:"1.0"},{emoji:"",category:4,name:"flying saucer",version:"5.0"},{emoji:"",category:4,name:"bellhop bell",version:"1.0"},{emoji:"",category:4,name:"luggage",version:"11.0"},{emoji:"",category:4,name:"hourglass done",version:"1.0"},{emoji:"",category:4,name:"hourglass not done",version:"1.0"},{emoji:"",category:4,name:"watch",version:"1.0"},{emoji:"",category:4,name:"alarm clock",version:"1.0"},{emoji:"",category:4,name:"stopwatch",version:"1.0"},{emoji:"",category:4,name:"timer clock",version:"1.0"},{emoji:"",category:4,name:"mantelpiece clock",version:"1.0"},{emoji:"",category:4,name:"twelve oclock",version:"1.0"},{emoji:"",category:4,name:"twelve-thirty",version:"1.0"},{emoji:"",category:4,name:"one oclock",version:"1.0"},{emoji:"",category:4,name:"one-thirty",version:"1.0"},{emoji:"",category:4,name:"two oclock",version:"1.0"},{emoji:"",category:4,name:"two-thirty",version:"1.0"},{emoji:"",category:4,name:"three oclock",version:"1.0"},{emoji:"",category:4,name:"three-thirty",version:"1.0"},{emoji:"",category:4,name:"four oclock",version:"1.0"},{emoji:"",category:4,name:"four-thirty",version:"1.0"},{emoji:"",category:4,name:"five oclock",version:"1.0"},{emoji:"",category:4,name:"five-thirty",version:"1.0"},{emoji:"",category:4,name:"six oclock",version:"1.0"},{emoji:"",category:4,name:"six-thirty",version:"1.0"},{emoji:"",category:4,name:"seven oclock",version:"1.0"},{emoji:"",category:4,name:"seven-thirty",version:"1.0"},{emoji:"",category:4,name:"eight oclock",version:"1.0"},{emoji:"",category:4,name:"eight-thirty",version:"1.0"},{emoji:"",category:4,name:"nine oclock",version:"1.0"},{emoji:"",category:4,name:"nine-thirty",version:"1.0"},{emoji:"",category:4,name:"ten oclock",version:"1.0"},{emoji:"",category:4,name:"ten-thirty",version:"1.0"},{emoji:"",category:4,name:"eleven oclock",version:"1.0"},{emoji:"",category:4,name:"eleven-thirty",version:"1.0"},{emoji:"",category:4,name:"new moon",version:"1.0"},{emoji:"",category:4,name:"waxing crescent moon",version:"1.0"},{emoji:"",category:4,name:"first quarter moon",version:"1.0"},{emoji:"",category:4,name:"waxing gibbous moon",version:"1.0"},{emoji:"",category:4,name:"full moon",version:"1.0"},{emoji:"",category:4,name:"waning gibbous moon",version:"1.0"},{emoji:"",category:4,name:"last quarter moon",version:"1.0"},{emoji:"",category:4,name:"waning crescent moon",version:"1.0"},{emoji:"",category:4,name:"crescent moon",version:"1.0"},{emoji:"",category:4,name:"new moon face",version:"1.0"},{emoji:"",category:4,name:"first quarter moon face",version:"1.0"},{emoji:"",category:4,name:"last quarter moon face",version:"1.0"},{emoji:"",category:4,name:"thermometer",version:"1.0"},{emoji:"",category:4,name:"sun",version:"1.0"},{emoji:"",category:4,name:"full moon face",version:"1.0"},{emoji:"",category:4,name:"sun with face",version:"1.0"},{emoji:"",category:4,name:"ringed planet",version:"12.0"},{emoji:"",category:4,name:"star",version:"1.0"},{emoji:"",category:4,name:"glowing star",version:"1.0"},{emoji:"",category:4,name:"shooting star",version:"1.0"},{emoji:"",category:4,name:"milky way",version:"1.0"},{emoji:"",category:4,name:"cloud",version:"1.0"},{emoji:"",category:4,name:"sun behind cloud",version:"1.0"},{emoji:"",category:4,name:"cloud with lightning and rain",version:"1.0"},{emoji:"",category:4,name:"sun behind small cloud",version:"1.0"},{emoji:"",category:4,name:"sun behind large cloud",version:"1.0"},{emoji:"",category:4,name:"sun behind rain cloud",version:"1.0"},{emoji:"",category:4,name:"cloud with rain",version:"1.0"},{emoji:"",category:4,name:"cloud with snow",version:"1.0"},{emoji:"",category:4,name:"cloud with lightning",version:"1.0"},{emoji:"",category:4,name:"tornado",version:"1.0"},{emoji:"",category:4,name:"fog",version:"1.0"},{emoji:"",category:4,name:"wind face",version:"1.0"},{emoji:"",category:4,name:"cyclone",version:"1.0"},{emoji:"",category:4,name:"rainbow",version:"1.0"},{emoji:"",category:4,name:"closed umbrella",version:"1.0"},{emoji:"",category:4,name:"umbrella",version:"1.0"},{emoji:"",category:4,name:"umbrella with rain drops",version:"1.0"},{emoji:"",category:4,name:"umbrella on ground",version:"1.0"},{emoji:"",category:4,name:"high voltage",version:"1.0"},{emoji:"",category:4,name:"snowflake",version:"1.0"},{emoji:"",category:4,name:"snowman",version:"1.0"},{emoji:"",category:4,name:"snowman without snow",version:"1.0"},{emoji:"",category:4,name:"comet",version:"1.0"},{emoji:"",category:4,name:"fire",version:"1.0"},{emoji:"",category:4,name:"droplet",version:"1.0"},{emoji:"",category:4,name:"water wave",version:"1.0"},{emoji:"",category:5,name:"jack-o-lantern",version:"1.0"},{emoji:"",category:5,name:"Christmas tree",version:"1.0"},{emoji:"",category:5,name:"fireworks",version:"1.0"},{emoji:"",category:5,name:"sparkler",version:"1.0"},{emoji:"",category:5,name:"firecracker",version:"11.0"},{emoji:"",category:5,name:"sparkles",version:"1.0"},{emoji:"",category:5,name:"balloon",version:"1.0"},{emoji:"",category:5,name:"party popper",version:"1.0"},{emoji:"",category:5,name:"confetti ball",version:"1.0"},{emoji:"",category:5,name:"tanabata tree",version:"1.0"},{emoji:"",category:5,name:"pine decoration",version:"1.0"},{emoji:"",category:5,name:"Japanese dolls",version:"1.0"},{emoji:"",category:5,name:"carp streamer",version:"1.0"},{emoji:"",category:5,name:"wind chime",version:"1.0"},{emoji:"",category:5,name:"moon viewing ceremony",version:"1.0"},{emoji:"",category:5,name:"red envelope",version:"11.0"},{emoji:"",category:5,name:"ribbon",version:"1.0"},{emoji:"",category:5,name:"wrapped gift",version:"1.0"},{emoji:"",category:5,name:"reminder ribbon",version:"1.0"},{emoji:"",category:5,name:"admission tickets",version:"1.0"},{emoji:"",category:5,name:"ticket",version:"1.0"},{emoji:"",category:5,name:"military medal",version:"1.0"},{emoji:"",category:5,name:"trophy",version:"1.0"},{emoji:"",category:5,name:"sports medal",version:"1.0"},{emoji:"",category:5,name:"1st place medal",version:"3.0"},{emoji:"",category:5,name:"2nd place medal",version:"3.0"},{emoji:"",category:5,name:"3rd place medal",version:"3.0"},{emoji:"",category:5,name:"soccer ball",version:"1.0"},{emoji:"",category:5,name:"baseball",version:"1.0"},{emoji:"",category:5,name:"softball",version:"11.0"},{emoji:"",category:5,name:"basketball",version:"1.0"},{emoji:"",category:5,name:"volleyball",version:"1.0"},{emoji:"",category:5,name:"american football",version:"1.0"},{emoji:"",category:5,name:"rugby football",version:"1.0"},{emoji:"",category:5,name:"tennis",version:"1.0"},{emoji:"",category:5,name:"flying disc",version:"11.0"},{emoji:"",category:5,name:"bowling",version:"1.0"},{emoji:"",category:5,name:"cricket game",version:"1.0"},{emoji:"",category:5,name:"field hockey",version:"1.0"},{emoji:"",category:5,name:"ice hockey",version:"1.0"},{emoji:"",category:5,name:"lacrosse",version:"11.0"},{emoji:"",category:5,name:"ping pong",version:"1.0"},{emoji:"",category:5,name:"badminton",version:"1.0"},{emoji:"",category:5,name:"boxing glove",version:"3.0"},{emoji:"",category:5,name:"martial arts uniform",version:"3.0"},{emoji:"",category:5,name:"goal net",version:"3.0"},{emoji:"",category:5,name:"flag in hole",version:"1.0"},{emoji:"",category:5,name:"ice skate",version:"1.0"},{emoji:"",category:5,name:"fishing pole",version:"1.0"},{emoji:"",category:5,name:"diving mask",version:"12.0"},{emoji:"",category:5,name:"running shirt",version:"1.0"},{emoji:"",category:5,name:"skis",version:"1.0"},{emoji:"",category:5,name:"sled",version:"5.0"},{emoji:"",category:5,name:"curling stone",version:"5.0"},{emoji:"",category:5,name:"direct hit",version:"1.0"},{emoji:"",category:5,name:"yo-yo",version:"12.0"},{emoji:"",category:5,name:"kite",version:"12.0"},{emoji:"",category:5,name:"pool 8 ball",version:"1.0"},{emoji:"",category:5,name:"crystal ball",version:"1.0"},{emoji:"",category:5,name:"magic wand",version:"13.0"},{emoji:"",category:5,name:"nazar amulet",version:"11.0"},{emoji:"",category:5,name:"video game",version:"1.0"},{emoji:"",category:5,name:"joystick",version:"1.0"},{emoji:"",category:5,name:"slot machine",version:"1.0"},{emoji:"",category:5,name:"game die",version:"1.0"},{emoji:"",category:5,name:"puzzle piece",version:"11.0"},{emoji:"",category:5,name:"teddy bear",version:"11.0"},{emoji:"",category:5,name:"piata",version:"13.0"},{emoji:"",category:5,name:"nesting dolls",version:"13.0"},{emoji:"",category:5,name:"spade suit",version:"1.0"},{emoji:"",category:5,name:"heart suit",version:"1.0"},{emoji:"",category:5,name:"diamond suit",version:"1.0"},{emoji:"",category:5,name:"club suit",version:"1.0"},{emoji:"",category:5,name:"chess pawn",version:"11.0"},{emoji:"",category:5,name:"joker",version:"1.0"},{emoji:"",category:5,name:"mahjong red dragon",version:"1.0"},{emoji:"",category:5,name:"flower playing cards",version:"1.0"},{emoji:"",category:5,name:"performing arts",version:"1.0"},{emoji:"",category:5,name:"framed picture",version:"1.0"},{emoji:"",category:5,name:"artist palette",version:"1.0"},{emoji:"",category:5,name:"thread",version:"11.0"},{emoji:"",category:5,name:"sewing needle",version:"13.0"},{emoji:"",category:5,name:"yarn",version:"11.0"},{emoji:"",category:5,name:"knot",version:"13.0"},{emoji:"",category:6,name:"glasses",version:"1.0"},{emoji:"",category:6,name:"sunglasses",version:"1.0"},{emoji:"",category:6,name:"goggles",version:"11.0"},{emoji:"",category:6,name:"lab coat",version:"11.0"},{emoji:"",category:6,name:"safety vest",version:"12.0"},{emoji:"",category:6,name:"necktie",version:"1.0"},{emoji:"",category:6,name:"t-shirt",version:"1.0"},{emoji:"",category:6,name:"jeans",version:"1.0"},{emoji:"",category:6,name:"scarf",version:"5.0"},{emoji:"",category:6,name:"gloves",version:"5.0"},{emoji:"",category:6,name:"coat",version:"5.0"},{emoji:"",category:6,name:"socks",version:"5.0"},{emoji:"",category:6,name:"dress",version:"1.0"},{emoji:"",category:6,name:"kimono",version:"1.0"},{emoji:"",category:6,name:"sari",version:"12.0"},{emoji:"",category:6,name:"one-piece swimsuit",version:"12.0"},{emoji:"",category:6,name:"briefs",version:"12.0"},{emoji:"",category:6,name:"shorts",version:"12.0"},{emoji:"",category:6,name:"bikini",version:"1.0"},{emoji:"",category:6,name:"womans clothes",version:"1.0"},{emoji:"",category:6,name:"purse",version:"1.0"},{emoji:"",category:6,name:"handbag",version:"1.0"},{emoji:"",category:6,name:"clutch bag",version:"1.0"},{emoji:"",category:6,name:"shopping bags",version:"1.0"},{emoji:"",category:6,name:"backpack",version:"1.0"},{emoji:"",category:6,name:"thong sandal",version:"13.0"},{emoji:"",category:6,name:"mans shoe",version:"1.0"},{emoji:"",category:6,name:"running shoe",version:"1.0"},{emoji:"",category:6,name:"hiking boot",version:"11.0"},{emoji:"",category:6,name:"flat shoe",version:"11.0"},{emoji:"",category:6,name:"high-heeled shoe",version:"1.0"},{emoji:"",category:6,name:"womans sandal",version:"1.0"},{emoji:"",category:6,name:"ballet shoes",version:"12.0"},{emoji:"",category:6,name:"womans boot",version:"1.0"},{emoji:"",category:6,name:"crown",version:"1.0"},{emoji:"",category:6,name:"womans hat",version:"1.0"},{emoji:"",category:6,name:"top hat",version:"1.0"},{emoji:"",category:6,name:"graduation cap",version:"1.0"},{emoji:"",category:6,name:"billed cap",version:"5.0"},{emoji:"",category:6,name:"military helmet",version:"13.0"},{emoji:"",category:6,name:"rescue workers helmet",version:"1.0"},{emoji:"",category:6,name:"prayer beads",version:"1.0"},{emoji:"",category:6,name:"lipstick",version:"1.0"},{emoji:"",category:6,name:"ring",version:"1.0"},{emoji:"",category:6,name:"gem stone",version:"1.0"},{emoji:"",category:6,name:"muted speaker",version:"1.0"},{emoji:"",category:6,name:"speaker low volume",version:"1.0"},{emoji:"",category:6,name:"speaker medium volume",version:"1.0"},{emoji:"",category:6,name:"speaker high volume",version:"1.0"},{emoji:"",category:6,name:"loudspeaker",version:"1.0"},{emoji:"",category:6,name:"megaphone",version:"1.0"},{emoji:"",category:6,name:"postal horn",version:"1.0"},{emoji:"",category:6,name:"bell",version:"1.0"},{emoji:"",category:6,name:"bell with slash",version:"1.0"},{emoji:"",category:6,name:"musical score",version:"1.0"},{emoji:"",category:6,name:"musical note",version:"1.0"},{emoji:"",category:6,name:"musical notes",version:"1.0"},{emoji:"",category:6,name:"studio microphone",version:"1.0"},{emoji:"",category:6,name:"level slider",version:"1.0"},{emoji:"",category:6,name:"control knobs",version:"1.0"},{emoji:"",category:6,name:"microphone",version:"1.0"},{emoji:"",category:6,name:"headphone",version:"1.0"},{emoji:"",category:6,name:"radio",version:"1.0"},{emoji:"",category:6,name:"saxophone",version:"1.0"},{emoji:"",category:6,name:"accordion",version:"13.0"},{emoji:"",category:6,name:"guitar",version:"1.0"},{emoji:"",category:6,name:"musical keyboard",version:"1.0"},{emoji:"",category:6,name:"trumpet",version:"1.0"},{emoji:"",category:6,name:"violin",version:"1.0"},{emoji:"",category:6,name:"banjo",version:"12.0"},{emoji:"",category:6,name:"drum",version:"3.0"},{emoji:"",category:6,name:"long drum",version:"13.0"},{emoji:"",category:6,name:"mobile phone",version:"1.0"},{emoji:"",category:6,name:"mobile phone with arrow",version:"1.0"},{emoji:"",category:6,name:"telephone",version:"1.0"},{emoji:"",category:6,name:"telephone receiver",version:"1.0"},{emoji:"",category:6,name:"pager",version:"1.0"},{emoji:"",category:6,name:"fax machine",version:"1.0"},{emoji:"",category:6,name:"battery",version:"1.0"},{emoji:"",category:6,name:"electric plug",version:"1.0"},{emoji:"",category:6,name:"laptop",version:"1.0"},{emoji:"",category:6,name:"desktop computer",version:"1.0"},{emoji:"",category:6,name:"printer",version:"1.0"},{emoji:"",category:6,name:"keyboard",version:"1.0"},{emoji:"",category:6,name:"computer mouse",version:"1.0"},{emoji:"",category:6,name:"trackball",version:"1.0"},{emoji:"",category:6,name:"computer disk",version:"1.0"},{emoji:"",category:6,name:"floppy disk",version:"1.0"},{emoji:"",category:6,name:"optical disk",version:"1.0"},{emoji:"",category:6,name:"dvd",version:"1.0"},{emoji:"",category:6,name:"abacus",version:"11.0"},{emoji:"",category:6,name:"movie camera",version:"1.0"},{emoji:"",category:6,name:"film frames",version:"1.0"},{emoji:"",category:6,name:"film projector",version:"1.0"},{emoji:"",category:6,name:"clapper board",version:"1.0"},{emoji:"",category:6,name:"television",version:"1.0"},{emoji:"",category:6,name:"camera",version:"1.0"},{emoji:"",category:6,name:"camera with flash",version:"1.0"},{emoji:"",category:6,name:"video camera",version:"1.0"},{emoji:"",category:6,name:"videocassette",version:"1.0"},{emoji:"",category:6,name:"magnifying glass tilted left",version:"1.0"},{emoji:"",category:6,name:"magnifying glass tilted right",version:"1.0"},{emoji:"",category:6,name:"candle",version:"1.0"},{emoji:"",category:6,name:"light bulb",version:"1.0"},{emoji:"",category:6,name:"flashlight",version:"1.0"},{emoji:"",category:6,name:"red paper lantern",version:"1.0"},{emoji:"",category:6,name:"diya lamp",version:"12.0"},{emoji:"",category:6,name:"notebook with decorative cover",version:"1.0"},{emoji:"",category:6,name:"closed book",version:"1.0"},{emoji:"",category:6,name:"open book",version:"1.0"},{emoji:"",category:6,name:"green book",version:"1.0"},{emoji:"",category:6,name:"blue book",version:"1.0"},{emoji:"",category:6,name:"orange book",version:"1.0"},{emoji:"",category:6,name:"books",version:"1.0"},{emoji:"",category:6,name:"notebook",version:"1.0"},{emoji:"",category:6,name:"ledger",version:"1.0"},{emoji:"",category:6,name:"page with curl",version:"1.0"},{emoji:"",category:6,name:"scroll",version:"1.0"},{emoji:"",category:6,name:"page facing up",version:"1.0"},{emoji:"",category:6,name:"newspaper",version:"1.0"},{emoji:"",category:6,name:"rolled-up newspaper",version:"1.0"},{emoji:"",category:6,name:"bookmark tabs",version:"1.0"},{emoji:"",category:6,name:"bookmark",version:"1.0"},{emoji:"",category:6,name:"label",version:"1.0"},{emoji:"",category:6,name:"money bag",version:"1.0"},{emoji:"",category:6,name:"coin",version:"13.0"},{emoji:"",category:6,name:"yen banknote",version:"1.0"},{emoji:"",category:6,name:"dollar banknote",version:"1.0"},{emoji:"",category:6,name:"euro banknote",version:"1.0"},{emoji:"",category:6,name:"pound banknote",version:"1.0"},{emoji:"",category:6,name:"money with wings",version:"1.0"},{emoji:"",category:6,name:"credit card",version:"1.0"},{emoji:"",category:6,name:"receipt",version:"11.0"},{emoji:"",category:6,name:"chart increasing with yen",version:"1.0"},{emoji:"",category:6,name:"envelope",version:"1.0"},{emoji:"",category:6,name:"e-mail",version:"1.0"},{emoji:"",category:6,name:"incoming envelope",version:"1.0"},{emoji:"",category:6,name:"envelope with arrow",version:"1.0"},{emoji:"",category:6,name:"outbox tray",version:"1.0"},{emoji:"",category:6,name:"inbox tray",version:"1.0"},{emoji:"",category:6,name:"package",version:"1.0"},{emoji:"",category:6,name:"closed mailbox with raised flag",version:"1.0"},{emoji:"",category:6,name:"closed mailbox with lowered flag",version:"1.0"},{emoji:"",category:6,name:"open mailbox with raised flag",version:"1.0"},{emoji:"",category:6,name:"open mailbox with lowered flag",version:"1.0"},{emoji:"",category:6,name:"postbox",version:"1.0"},{emoji:"",category:6,name:"ballot box with ballot",version:"1.0"},{emoji:"",category:6,name:"pencil",version:"1.0"},{emoji:"",category:6,name:"black nib",version:"1.0"},{emoji:"",category:6,name:"fountain pen",version:"1.0"},{emoji:"",category:6,name:"pen",version:"1.0"},{emoji:"",category:6,name:"paintbrush",version:"1.0"},{emoji:"",category:6,name:"crayon",version:"1.0"},{emoji:"",category:6,name:"memo",version:"1.0"},{emoji:"",category:6,name:"briefcase",version:"1.0"},{emoji:"",category:6,name:"file folder",version:"1.0"},{emoji:"",category:6,name:"open file folder",version:"1.0"},{emoji:"",category:6,name:"card index dividers",version:"1.0"},{emoji:"",category:6,name:"calendar",version:"1.0"},{emoji:"",category:6,name:"tear-off calendar",version:"1.0"},{emoji:"",category:6,name:"spiral notepad",version:"1.0"},{emoji:"",category:6,name:"spiral calendar",version:"1.0"},{emoji:"",category:6,name:"card index",version:"1.0"},{emoji:"",category:6,name:"chart increasing",version:"1.0"},{emoji:"",category:6,name:"chart decreasing",version:"1.0"},{emoji:"",category:6,name:"bar chart",version:"1.0"},{emoji:"",category:6,name:"clipboard",version:"1.0"},{emoji:"",category:6,name:"pushpin",version:"1.0"},{emoji:"",category:6,name:"round pushpin",version:"1.0"},{emoji:"",category:6,name:"paperclip",version:"1.0"},{emoji:"",category:6,name:"linked paperclips",version:"1.0"},{emoji:"",category:6,name:"straight ruler",version:"1.0"},{emoji:"",category:6,name:"triangular ruler",version:"1.0"},{emoji:"",category:6,name:"scissors",version:"1.0"},{emoji:"",category:6,name:"card file box",version:"1.0"},{emoji:"",category:6,name:"file cabinet",version:"1.0"},{emoji:"",category:6,name:"wastebasket",version:"1.0"},{emoji:"",category:6,name:"locked",version:"1.0"},{emoji:"",category:6,name:"unlocked",version:"1.0"},{emoji:"",category:6,name:"locked with pen",version:"1.0"},{emoji:"",category:6,name:"locked with key",version:"1.0"},{emoji:"",category:6,name:"key",version:"1.0"},{emoji:"",category:6,name:"old key",version:"1.0"},{emoji:"",category:6,name:"hammer",version:"1.0"},{emoji:"",category:6,name:"axe",version:"12.0"},{emoji:"",category:6,name:"pick",version:"1.0"},{emoji:"",category:6,name:"hammer and pick",version:"1.0"},{emoji:"",category:6,name:"hammer and wrench",version:"1.0"},{emoji:"",category:6,name:"dagger",version:"1.0"},{emoji:"",category:6,name:"crossed swords",version:"1.0"},{emoji:"",category:6,name:"pistol",version:"1.0"},{emoji:"",category:6,name:"boomerang",version:"13.0"},{emoji:"",category:6,name:"bow and arrow",version:"1.0"},{emoji:"",category:6,name:"shield",version:"1.0"},{emoji:"",category:6,name:"carpentry saw",version:"13.0"},{emoji:"",category:6,name:"wrench",version:"1.0"},{emoji:"",category:6,name:"screwdriver",version:"13.0"},{emoji:"",category:6,name:"nut and bolt",version:"1.0"},{emoji:"",category:6,name:"gear",version:"1.0"},{emoji:"",category:6,name:"clamp",version:"1.0"},{emoji:"",category:6,name:"balance scale",version:"1.0"},{emoji:"",category:6,name:"white cane",version:"12.0"},{emoji:"",category:6,name:"link",version:"1.0"},{emoji:"",category:6,name:"chains",version:"1.0"},{emoji:"",category:6,name:"hook",version:"13.0"},{emoji:"",category:6,name:"toolbox",version:"11.0"},{emoji:"",category:6,name:"magnet",version:"11.0"},{emoji:"",category:6,name:"ladder",version:"13.0"},{emoji:"",category:6,name:"alembic",version:"1.0"},{emoji:"",category:6,name:"test tube",version:"11.0"},{emoji:"",category:6,name:"petri dish",version:"11.0"},{emoji:"",category:6,name:"dna",version:"11.0"},{emoji:"",category:6,name:"microscope",version:"1.0"},{emoji:"",category:6,name:"telescope",version:"1.0"},{emoji:"",category:6,name:"satellite antenna",version:"1.0"},{emoji:"",category:6,name:"syringe",version:"1.0"},{emoji:"",category:6,name:"drop of blood",version:"12.0"},{emoji:"",category:6,name:"pill",version:"1.0"},{emoji:"",category:6,name:"adhesive bandage",version:"12.0"},{emoji:"",category:6,name:"stethoscope",version:"12.0"},{emoji:"",category:6,name:"door",version:"1.0"},{emoji:"",category:6,name:"elevator",version:"13.0"},{emoji:"",category:6,name:"mirror",version:"13.0"},{emoji:"",category:6,name:"window",version:"13.0"},{emoji:"",category:6,name:"bed",version:"1.0"},{emoji:"",category:6,name:"couch and lamp",version:"1.0"},{emoji:"",category:6,name:"chair",version:"12.0"},{emoji:"",category:6,name:"toilet",version:"1.0"},{emoji:"",category:6,name:"plunger",version:"13.0"},{emoji:"",category:6,name:"shower",version:"1.0"},{emoji:"",category:6,name:"bathtub",version:"1.0"},{emoji:"",category:6,name:"mouse trap",version:"13.0"},{emoji:"",category:6,name:"razor",version:"12.0"},{emoji:"",category:6,name:"lotion bottle",version:"11.0"},{emoji:"",category:6,name:"safety pin",version:"11.0"},{emoji:"",category:6,name:"broom",version:"11.0"},{emoji:"",category:6,name:"basket",version:"11.0"},{emoji:"",category:6,name:"roll of paper",version:"11.0"},{emoji:"",category:6,name:"bucket",version:"13.0"},{emoji:"",category:6,name:"soap",version:"11.0"},{emoji:"",category:6,name:"toothbrush",version:"13.0"},{emoji:"",category:6,name:"sponge",version:"11.0"},{emoji:"",category:6,name:"fire extinguisher",version:"11.0"},{emoji:"",category:6,name:"shopping cart",version:"3.0"},{emoji:"",category:6,name:"cigarette",version:"1.0"},{emoji:"",category:6,name:"coffin",version:"1.0"},{emoji:"",category:6,name:"headstone",version:"13.0"},{emoji:"",category:6,name:"funeral urn",version:"1.0"},{emoji:"",category:6,name:"moai",version:"1.0"},{emoji:"",category:6,name:"placard",version:"13.0"},{emoji:"",category:7,name:"ATM sign",version:"1.0"},{emoji:"",category:7,name:"litter in bin sign",version:"1.0"},{emoji:"",category:7,name:"potable water",version:"1.0"},{emoji:"",category:7,name:"wheelchair symbol",version:"1.0"},{emoji:"",category:7,name:"mens room",version:"1.0"},{emoji:"",category:7,name:"womens room",version:"1.0"},{emoji:"",category:7,name:"restroom",version:"1.0"},{emoji:"",category:7,name:"baby symbol",version:"1.0"},{emoji:"",category:7,name:"water closet",version:"1.0"},{emoji:"",category:7,name:"passport control",version:"1.0"},{emoji:"",category:7,name:"customs",version:"1.0"},{emoji:"",category:7,name:"baggage claim",version:"1.0"},{emoji:"",category:7,name:"left luggage",version:"1.0"},{emoji:"",category:7,name:"warning",version:"1.0"},{emoji:"",category:7,name:"children crossing",version:"1.0"},{emoji:"",category:7,name:"no entry",version:"1.0"},{emoji:"",category:7,name:"prohibited",version:"1.0"},{emoji:"",category:7,name:"no bicycles",version:"1.0"},{emoji:"",category:7,name:"no smoking",version:"1.0"},{emoji:"",category:7,name:"no littering",version:"1.0"},{emoji:"",category:7,name:"non-potable water",version:"1.0"},{emoji:"",category:7,name:"no pedestrians",version:"1.0"},{emoji:"",category:7,name:"no mobile phones",version:"1.0"},{emoji:"",category:7,name:"no one under eighteen",version:"1.0"},{emoji:"",category:7,name:"radioactive",version:"1.0"},{emoji:"",category:7,name:"biohazard",version:"1.0"},{emoji:"",category:7,name:"up arrow",version:"1.0"},{emoji:"",category:7,name:"up-right arrow",version:"1.0"},{emoji:"",category:7,name:"right arrow",version:"1.0"},{emoji:"",category:7,name:"down-right arrow",version:"1.0"},{emoji:"",category:7,name:"down arrow",version:"1.0"},{emoji:"",category:7,name:"down-left arrow",version:"1.0"},{emoji:"",category:7,name:"left arrow",version:"1.0"},{emoji:"",category:7,name:"up-left arrow",version:"1.0"},{emoji:"",category:7,name:"up-down arrow",version:"1.0"},{emoji:"",category:7,name:"left-right arrow",version:"1.0"},{emoji:"",category:7,name:"right arrow curving left",version:"1.0"},{emoji:"",category:7,name:"left arrow curving right",version:"1.0"},{emoji:"",category:7,name:"right arrow curving up",version:"1.0"},{emoji:"",category:7,name:"right arrow curving down",version:"1.0"},{emoji:"",category:7,name:"clockwise vertical arrows",version:"1.0"},{emoji:"",category:7,name:"counterclockwise arrows button",version:"1.0"},{emoji:"",category:7,name:"BACK arrow",version:"1.0"},{emoji:"",category:7,name:"END arrow",version:"1.0"},{emoji:"",category:7,name:"ON! arrow",version:"1.0"},{emoji:"",category:7,name:"SOON arrow",version:"1.0"},{emoji:"",category:7,name:"TOP arrow",version:"1.0"},{emoji:"",category:7,name:"place of worship",version:"1.0"},{emoji:"",category:7,name:"atom symbol",version:"1.0"},{emoji:"",category:7,name:"om",version:"1.0"},{emoji:"",category:7,name:"star of David",version:"1.0"},{emoji:"",category:7,name:"wheel of dharma",version:"1.0"},{emoji:"",category:7,name:"yin yang",version:"1.0"},{emoji:"",category:7,name:"latin cross",version:"1.0"},{emoji:"",category:7,name:"orthodox cross",version:"1.0"},{emoji:"",category:7,name:"star and crescent",version:"1.0"},{emoji:"",category:7,name:"peace symbol",version:"1.0"},{emoji:"",category:7,name:"menorah",version:"1.0"},{emoji:"",category:7,name:"dotted six-pointed star",version:"1.0"},{emoji:"",category:7,name:"Aries",version:"1.0"},{emoji:"",category:7,name:"Taurus",version:"1.0"},{emoji:"",category:7,name:"Gemini",version:"1.0"},{emoji:"",category:7,name:"Cancer",version:"1.0"},{emoji:"",category:7,name:"Leo",version:"1.0"},{emoji:"",category:7,name:"Virgo",version:"1.0"},{emoji:"",category:7,name:"Libra",version:"1.0"},{emoji:"",category:7,name:"Scorpio",version:"1.0"},{emoji:"",category:7,name:"Sagittarius",version:"1.0"},{emoji:"",category:7,name:"Capricorn",version:"1.0"},{emoji:"",category:7,name:"Aquarius",version:"1.0"},{emoji:"",category:7,name:"Pisces",version:"1.0"},{emoji:"",category:7,name:"Ophiuchus",version:"1.0"},{emoji:"",category:7,name:"shuffle tracks button",version:"1.0"},{emoji:"",category:7,name:"repeat button",version:"1.0"},{emoji:"",category:7,name:"repeat single button",version:"1.0"},{emoji:"",category:7,name:"play button",version:"1.0"},{emoji:"",category:7,name:"fast-forward button",version:"1.0"},{emoji:"",category:7,name:"next track button",version:"1.0"},{emoji:"",category:7,name:"play or pause button",version:"1.0"},{emoji:"",category:7,name:"reverse button",version:"1.0"},{emoji:"",category:7,name:"fast reverse button",version:"1.0"},{emoji:"",category:7,name:"last track button",version:"1.0"},{emoji:"",category:7,name:"upwards button",version:"1.0"},{emoji:"",category:7,name:"fast up button",version:"1.0"},{emoji:"",category:7,name:"downwards button",version:"1.0"},{emoji:"",category:7,name:"fast down button",version:"1.0"},{emoji:"",category:7,name:"pause button",version:"1.0"},{emoji:"",category:7,name:"stop button",version:"1.0"},{emoji:"",category:7,name:"record button",version:"1.0"},{emoji:"",category:7,name:"eject button",version:"1.0"},{emoji:"",category:7,name:"cinema",version:"1.0"},{emoji:"",category:7,name:"dim button",version:"1.0"},{emoji:"",category:7,name:"bright button",version:"1.0"},{emoji:"",category:7,name:"antenna bars",version:"1.0"},{emoji:"",category:7,name:"vibration mode",version:"1.0"},{emoji:"",category:7,name:"mobile phone off",version:"1.0"},{emoji:"",category:7,name:"female sign",version:"4.0"},{emoji:"",category:7,name:"male sign",version:"4.0"},{emoji:"",category:7,name:"transgender symbol",version:"13.0"},{emoji:"",category:7,name:"multiply",version:"1.0"},{emoji:"",category:7,name:"plus",version:"1.0"},{emoji:"",category:7,name:"minus",version:"1.0"},{emoji:"",category:7,name:"divide",version:"1.0"},{emoji:"",category:7,name:"infinity",version:"11.0"},{emoji:"",category:7,name:"double exclamation mark",version:"1.0"},{emoji:"",category:7,name:"exclamation question mark",version:"1.0"},{emoji:"",category:7,name:"question mark",version:"1.0"},{emoji:"",category:7,name:"white question mark",version:"1.0"},{emoji:"",category:7,name:"white exclamation mark",version:"1.0"},{emoji:"",category:7,name:"exclamation mark",version:"1.0"},{emoji:"",category:7,name:"wavy dash",version:"1.0"},{emoji:"",category:7,name:"currency exchange",version:"1.0"},{emoji:"",category:7,name:"heavy dollar sign",version:"1.0"},{emoji:"",category:7,name:"medical symbol",version:"4.0"},{emoji:"",category:7,name:"recycling symbol",version:"1.0"},{emoji:"",category:7,name:"fleur-de-lis",version:"1.0"},{emoji:"",category:7,name:"trident emblem",version:"1.0"},{emoji:"",category:7,name:"name badge",version:"1.0"},{emoji:"",category:7,name:"Japanese symbol for beginner",version:"1.0"},{emoji:"",category:7,name:"hollow red circle",version:"1.0"},{emoji:"",category:7,name:"check mark button",version:"1.0"},{emoji:"",category:7,name:"check box with check",version:"1.0"},{emoji:"",category:7,name:"check mark",version:"1.0"},{emoji:"",category:7,name:"cross mark",version:"1.0"},{emoji:"",category:7,name:"cross mark button",version:"1.0"},{emoji:"",category:7,name:"curly loop",version:"1.0"},{emoji:"",category:7,name:"double curly loop",version:"1.0"},{emoji:"",category:7,name:"part alternation mark",version:"1.0"},{emoji:"",category:7,name:"eight-spoked asterisk",version:"1.0"},{emoji:"",category:7,name:"eight-pointed star",version:"1.0"},{emoji:"",category:7,name:"sparkle",version:"1.0"},{emoji:"",category:7,name:"copyright",version:"1.0"},{emoji:"",category:7,name:"registered",version:"1.0"},{emoji:"",category:7,name:"trade mark",version:"1.0"},{emoji:"#",category:7,name:"keycap: #",version:"1.0"},{emoji:"*",category:7,name:"keycap: *",version:"2.0"},{emoji:"0",category:7,name:"keycap: 0",version:"1.0"},{emoji:"1",category:7,name:"keycap: 1",version:"1.0"},{emoji:"2",category:7,name:"keycap: 2",version:"1.0"},{emoji:"3",category:7,name:"keycap: 3",version:"1.0"},{emoji:"4",category:7,name:"keycap: 4",version:"1.0"},{emoji:"5",category:7,name:"keycap: 5",version:"1.0"},{emoji:"6",category:7,name:"keycap: 6",version:"1.0"},{emoji:"7",category:7,name:"keycap: 7",version:"1.0"},{emoji:"8",category:7,name:"keycap: 8",version:"1.0"},{emoji:"9",category:7,name:"keycap: 9",version:"1.0"},{emoji:"",category:7,name:"keycap: 10",version:"1.0"},{emoji:"",category:7,name:"input latin uppercase",version:"1.0"},{emoji:"",category:7,name:"input latin lowercase",version:"1.0"},{emoji:"",category:7,name:"input numbers",version:"1.0"},{emoji:"",category:7,name:"input symbols",version:"1.0"},{emoji:"",category:7,name:"input latin letters",version:"1.0"},{emoji:"",category:7,name:"A button (blood type)",version:"1.0"},{emoji:"",category:7,name:"AB button (blood type)",version:"1.0"},{emoji:"",category:7,name:"B button (blood type)",version:"1.0"},{emoji:"",category:7,name:"CL button",version:"1.0"},{emoji:"",category:7,name:"COOL button",version:"1.0"},{emoji:"",category:7,name:"FREE button",version:"1.0"},{emoji:"",category:7,name:"information",version:"1.0"},{emoji:"",category:7,name:"ID button",version:"1.0"},{emoji:"",category:7,name:"circled M",version:"1.0"},{emoji:"",category:7,name:"NEW button",version:"1.0"},{emoji:"",category:7,name:"NG button",version:"1.0"},{emoji:"",category:7,name:"O button (blood type)",version:"1.0"},{emoji:"",category:7,name:"OK button",version:"1.0"},{emoji:"",category:7,name:"P button",version:"1.0"},{emoji:"",category:7,name:"SOS button",version:"1.0"},{emoji:"",category:7,name:"UP! button",version:"1.0"},{emoji:"",category:7,name:"VS button",version:"1.0"},{emoji:"",category:7,name:"Japanese here button",version:"1.0"},{emoji:"",category:7,name:"Japanese service charge button",version:"1.0"},{emoji:"",category:7,name:"Japanese monthly amount button",version:"1.0"},{emoji:"",category:7,name:"Japanese not free of charge button",version:"1.0"},{emoji:"",category:7,name:"Japanese reserved button",version:"1.0"},{emoji:"",category:7,name:"Japanese bargain button",version:"1.0"},{emoji:"",category:7,name:"Japanese discount button",version:"1.0"},{emoji:"",category:7,name:"Japanese free of charge button",version:"1.0"},{emoji:"",category:7,name:"Japanese prohibited button",version:"1.0"},{emoji:"",category:7,name:"Japanese acceptable button",version:"1.0"},{emoji:"",category:7,name:"Japanese application button",version:"1.0"},{emoji:"",category:7,name:"Japanese passing grade button",version:"1.0"},{emoji:"",category:7,name:"Japanese vacancy button",version:"1.0"},{emoji:"",category:7,name:"Japanese congratulations button",version:"1.0"},{emoji:"",category:7,name:"Japanese secret button",version:"1.0"},{emoji:"",category:7,name:"Japanese open for business button",version:"1.0"},{emoji:"",category:7,name:"Japanese no vacancy button",version:"1.0"},{emoji:"",category:7,name:"red circle",version:"1.0"},{emoji:"",category:7,name:"orange circle",version:"12.0"},{emoji:"",category:7,name:"yellow circle",version:"12.0"},{emoji:"",category:7,name:"green circle",version:"12.0"},{emoji:"",category:7,name:"blue circle",version:"1.0"},{emoji:"",category:7,name:"purple circle",version:"12.0"},{emoji:"",category:7,name:"brown circle",version:"12.0"},{emoji:"",category:7,name:"black circle",version:"1.0"},{emoji:"",category:7,name:"white circle",version:"1.0"},{emoji:"",category:7,name:"red square",version:"12.0"},{emoji:"",category:7,name:"orange square",version:"12.0"},{emoji:"",category:7,name:"yellow square",version:"12.0"},{emoji:"",category:7,name:"green square",version:"12.0"},{emoji:"",category:7,name:"blue square",version:"12.0"},{emoji:"",category:7,name:"purple square",version:"12.0"},{emoji:"",category:7,name:"brown square",version:"12.0"},{emoji:"",category:7,name:"black large square",version:"1.0"},{emoji:"",category:7,name:"white large square",version:"1.0"},{emoji:"",category:7,name:"black medium square",version:"1.0"},{emoji:"",category:7,name:"white medium square",version:"1.0"},{emoji:"",category:7,name:"black medium-small square",version:"1.0"},{emoji:"",category:7,name:"white medium-small square",version:"1.0"},{emoji:"",category:7,name:"black small square",version:"1.0"},{emoji:"",category:7,name:"white small square",version:"1.0"},{emoji:"",category:7,name:"large orange diamond",version:"1.0"},{emoji:"",category:7,name:"large blue diamond",version:"1.0"},{emoji:"",category:7,name:"small orange diamond",version:"1.0"},{emoji:"",category:7,name:"small blue diamond",version:"1.0"},{emoji:"",category:7,name:"red triangle pointed up",version:"1.0"},{emoji:"",category:7,name:"red triangle pointed down",version:"1.0"},{emoji:"",category:7,name:"diamond with a dot",version:"1.0"},{emoji:"",category:7,name:"radio button",version:"1.0"},{emoji:"",category:7,name:"white square button",version:"1.0"},{emoji:"",category:7,name:"black square button",version:"1.0"},{emoji:"",category:8,name:"chequered flag",version:"1.0"},{emoji:"",category:8,name:"triangular flag",version:"1.0"},{emoji:"",category:8,name:"crossed flags",version:"1.0"},{emoji:"",category:8,name:"black flag",version:"1.0"},{emoji:"",category:8,name:"white flag",version:"1.0"},{emoji:"",category:8,name:"rainbow flag",version:"4.0"},{emoji:"",category:8,name:"transgender flag",version:"13.0"},{emoji:"",category:8,name:"pirate flag",version:"11.0"},{emoji:"",category:8,name:"flag: Ascension Island",version:"2.0"},{emoji:"",category:8,name:"flag: Andorra",version:"2.0"},{emoji:"",category:8,name:"flag: United Arab Emirates",version:"2.0"},{emoji:"",category:8,name:"flag: Afghanistan",version:"2.0"},{emoji:"",category:8,name:"flag: Antigua & Barbuda",version:"2.0"},{emoji:"",category:8,name:"flag: Anguilla",version:"2.0"},{emoji:"",category:8,name:"flag: Albania",version:"2.0"},{emoji:"",category:8,name:"flag: Armenia",version:"2.0"},{emoji:"",category:8,name:"flag: Angola",version:"2.0"},{emoji:"",category:8,name:"flag: Antarctica",version:"2.0"},{emoji:"",category:8,name:"flag: Argentina",version:"2.0"},{emoji:"",category:8,name:"flag: American Samoa",version:"2.0"},{emoji:"",category:8,name:"flag: Austria",version:"2.0"},{emoji:"",category:8,name:"flag: Australia",version:"2.0"},{emoji:"",category:8,name:"flag: Aruba",version:"2.0"},{emoji:"",category:8,name:"flag: land Islands",version:"2.0"},{emoji:"",category:8,name:"flag: Azerbaijan",version:"2.0"},{emoji:"",category:8,name:"flag: Bosnia & Herzegovina",version:"2.0"},{emoji:"",category:8,name:"flag: Barbados",version:"2.0"},{emoji:"",category:8,name:"flag: Bangladesh",version:"2.0"},{emoji:"",category:8,name:"flag: Belgium",version:"2.0"},{emoji:"",category:8,name:"flag: Burkina Faso",version:"2.0"},{emoji:"",category:8,name:"flag: Bulgaria",version:"2.0"},{emoji:"",category:8,name:"flag: Bahrain",version:"2.0"},{emoji:"",category:8,name:"flag: Burundi",version:"2.0"},{emoji:"",category:8,name:"flag: Benin",version:"2.0"},{emoji:"",category:8,name:"flag: St. Barthlemy",version:"2.0"},{emoji:"",category:8,name:"flag: Bermuda",version:"2.0"},{emoji:"",category:8,name:"flag: Brunei",version:"2.0"},{emoji:"",category:8,name:"flag: Bolivia",version:"2.0"},{emoji:"",category:8,name:"flag: Caribbean Netherlands",version:"2.0"},{emoji:"",category:8,name:"flag: Brazil",version:"2.0"},{emoji:"",category:8,name:"flag: Bahamas",version:"2.0"},{emoji:"",category:8,name:"flag: Bhutan",version:"2.0"},{emoji:"",category:8,name:"flag: Bouvet Island",version:"2.0"},{emoji:"",category:8,name:"flag: Botswana",version:"2.0"},{emoji:"",category:8,name:"flag: Belarus",version:"2.0"},{emoji:"",category:8,name:"flag: Belize",version:"2.0"},{emoji:"",category:8,name:"flag: Canada",version:"2.0"},{emoji:"",category:8,name:"flag: Cocos (Keeling) Islands",version:"2.0"},{emoji:"",category:8,name:"flag: Congo - Kinshasa",version:"2.0"},{emoji:"",category:8,name:"flag: Central African Republic",version:"2.0"},{emoji:"",category:8,name:"flag: Congo - Brazzaville",version:"2.0"},{emoji:"",category:8,name:"flag: Switzerland",version:"2.0"},{emoji:"",category:8,name:"flag: Cte dIvoire",version:"2.0"},{emoji:"",category:8,name:"flag: Cook Islands",version:"2.0"},{emoji:"",category:8,name:"flag: Chile",version:"2.0"},{emoji:"",category:8,name:"flag: Cameroon",version:"2.0"},{emoji:"",category:8,name:"flag: China",version:"1.0"},{emoji:"",category:8,name:"flag: Colombia",version:"2.0"},{emoji:"",category:8,name:"flag: Clipperton Island",version:"2.0"},{emoji:"",category:8,name:"flag: Costa Rica",version:"2.0"},{emoji:"",category:8,name:"flag: Cuba",version:"2.0"},{emoji:"",category:8,name:"flag: Cape Verde",version:"2.0"},{emoji:"",category:8,name:"flag: Curaao",version:"2.0"},{emoji:"",category:8,name:"flag: Christmas Island",version:"2.0"},{emoji:"",category:8,name:"flag: Cyprus",version:"2.0"},{emoji:"",category:8,name:"flag: Czechia",version:"2.0"},{emoji:"",category:8,name:"flag: Germany",version:"1.0"},{emoji:"",category:8,name:"flag: Diego Garcia",version:"2.0"},{emoji:"",category:8,name:"flag: Djibouti",version:"2.0"},{emoji:"",category:8,name:"flag: Denmark",version:"2.0"},{emoji:"",category:8,name:"flag: Dominica",version:"2.0"},{emoji:"",category:8,name:"flag: Dominican Republic",version:"2.0"},{emoji:"",category:8,name:"flag: Algeria",version:"2.0"},{emoji:"",category:8,name:"flag: Ceuta & Melilla",version:"2.0"},{emoji:"",category:8,name:"flag: Ecuador",version:"2.0"},{emoji:"",category:8,name:"flag: Estonia",version:"2.0"},{emoji:"",category:8,name:"flag: Egypt",version:"2.0"},{emoji:"",category:8,name:"flag: Western Sahara",version:"2.0"},{emoji:"",category:8,name:"flag: Eritrea",version:"2.0"},{emoji:"",category:8,name:"flag: Spain",version:"1.0"},{emoji:"",category:8,name:"flag: Ethiopia",version:"2.0"},{emoji:"",category:8,name:"flag: European Union",version:"2.0"},{emoji:"",category:8,name:"flag: Finland",version:"2.0"},{emoji:"",category:8,name:"flag: Fiji",version:"2.0"},{emoji:"",category:8,name:"flag: Falkland Islands",version:"2.0"},{emoji:"",category:8,name:"flag: Micronesia",version:"2.0"},{emoji:"",category:8,name:"flag: Faroe Islands",version:"2.0"},{emoji:"",category:8,name:"flag: France",version:"1.0"},{emoji:"",category:8,name:"flag: Gabon",version:"2.0"},{emoji:"",category:8,name:"flag: United Kingdom",version:"1.0"},{emoji:"",category:8,name:"flag: Grenada",version:"2.0"},{emoji:"",category:8,name:"flag: Georgia",version:"2.0"},{emoji:"",category:8,name:"flag: French Guiana",version:"2.0"},{emoji:"",category:8,name:"flag: Guernsey",version:"2.0"},{emoji:"",category:8,name:"flag: Ghana",version:"2.0"},{emoji:"",category:8,name:"flag: Gibraltar",version:"2.0"},{emoji:"",category:8,name:"flag: Greenland",version:"2.0"},{emoji:"",category:8,name:"flag: Gambia",version:"2.0"},{emoji:"",category:8,name:"flag: Guinea",version:"2.0"},{emoji:"",category:8,name:"flag: Guadeloupe",version:"2.0"},{emoji:"",category:8,name:"flag: Equatorial Guinea",version:"2.0"},{emoji:"",category:8,name:"flag: Greece",version:"2.0"},{emoji:"",category:8,name:"flag: South Georgia & South Sandwich Islands",version:"2.0"},{emoji:"",category:8,name:"flag: Guatemala",version:"2.0"},{emoji:"",category:8,name:"flag: Guam",version:"2.0"},{emoji:"",category:8,name:"flag: Guinea-Bissau",version:"2.0"},{emoji:"",category:8,name:"flag: Guyana",version:"2.0"},{emoji:"",category:8,name:"flag: Hong Kong SAR China",version:"2.0"},{emoji:"",category:8,name:"flag: Heard & McDonald Islands",version:"2.0"},{emoji:"",category:8,name:"flag: Honduras",version:"2.0"},{emoji:"",category:8,name:"flag: Croatia",version:"2.0"},{emoji:"",category:8,name:"flag: Haiti",version:"2.0"},{emoji:"",category:8,name:"flag: Hungary",version:"2.0"},{emoji:"",category:8,name:"flag: Canary Islands",version:"2.0"},{emoji:"",category:8,name:"flag: Indonesia",version:"2.0"},{emoji:"",category:8,name:"flag: Ireland",version:"2.0"},{emoji:"",category:8,name:"flag: Israel",version:"2.0"},{emoji:"",category:8,name:"flag: Isle of Man",version:"2.0"},{emoji:"",category:8,name:"flag: India",version:"2.0"},{emoji:"",category:8,name:"flag: British Indian Ocean Territory",version:"2.0"},{emoji:"",category:8,name:"flag: Iraq",version:"2.0"},{emoji:"",category:8,name:"flag: Iran",version:"2.0"},{emoji:"",category:8,name:"flag: Iceland",version:"2.0"},{emoji:"",category:8,name:"flag: Italy",version:"1.0"},{emoji:"",category:8,name:"flag: Jersey",version:"2.0"},{emoji:"",category:8,name:"flag: Jamaica",version:"2.0"},{emoji:"",category:8,name:"flag: Jordan",version:"2.0"},{emoji:"",category:8,name:"flag: Japan",version:"1.0"},{emoji:"",category:8,name:"flag: Kenya",version:"2.0"},{emoji:"",category:8,name:"flag: Kyrgyzstan",version:"2.0"},{emoji:"",category:8,name:"flag: Cambodia",version:"2.0"},{emoji:"",category:8,name:"flag: Kiribati",version:"2.0"},{emoji:"",category:8,name:"flag: Comoros",version:"2.0"},{emoji:"",category:8,name:"flag: St. Kitts & Nevis",version:"2.0"},{emoji:"",category:8,name:"flag: North Korea",version:"2.0"},{emoji:"",category:8,name:"flag: South Korea",version:"1.0"},{emoji:"",category:8,name:"flag: Kuwait",version:"2.0"},{emoji:"",category:8,name:"flag: Cayman Islands",version:"2.0"},{emoji:"",category:8,name:"flag: Kazakhstan",version:"2.0"},{emoji:"",category:8,name:"flag: Laos",version:"2.0"},{emoji:"",category:8,name:"flag: Lebanon",version:"2.0"},{emoji:"",category:8,name:"flag: St. Lucia",version:"2.0"},{emoji:"",category:8,name:"flag: Liechtenstein",version:"2.0"},{emoji:"",category:8,name:"flag: Sri Lanka",version:"2.0"},{emoji:"",category:8,name:"flag: Liberia",version:"2.0"},{emoji:"",category:8,name:"flag: Lesotho",version:"2.0"},{emoji:"",category:8,name:"flag: Lithuania",version:"2.0"},{emoji:"",category:8,name:"flag: Luxembourg",version:"2.0"},{emoji:"",category:8,name:"flag: Latvia",version:"2.0"},{emoji:"",category:8,name:"flag: Libya",version:"2.0"},{emoji:"",category:8,name:"flag: Morocco",version:"2.0"},{emoji:"",category:8,name:"flag: Monaco",version:"2.0"},{emoji:"",category:8,name:"flag: Moldova",version:"2.0"},{emoji:"",category:8,name:"flag: Montenegro",version:"2.0"},{emoji:"",category:8,name:"flag: St. Martin",version:"2.0"},{emoji:"",category:8,name:"flag: Madagascar",version:"2.0"},{emoji:"",category:8,name:"flag: Marshall Islands",version:"2.0"},{emoji:"",category:8,name:"flag: North Macedonia",version:"2.0"},{emoji:"",category:8,name:"flag: Mali",version:"2.0"},{emoji:"",category:8,name:"flag: Myanmar (Burma)",version:"2.0"},{emoji:"",category:8,name:"flag: Mongolia",version:"2.0"},{emoji:"",category:8,name:"flag: Macao SAR China",version:"2.0"},{emoji:"",category:8,name:"flag: Northern Mariana Islands",version:"2.0"},{emoji:"",category:8,name:"flag: Martinique",version:"2.0"},{emoji:"",category:8,name:"flag: Mauritania",version:"2.0"},{emoji:"",category:8,name:"flag: Montserrat",version:"2.0"},{emoji:"",category:8,name:"flag: Malta",version:"2.0"},{emoji:"",category:8,name:"flag: Mauritius",version:"2.0"},{emoji:"",category:8,name:"flag: Maldives",version:"2.0"},{emoji:"",category:8,name:"flag: Malawi",version:"2.0"},{emoji:"",category:8,name:"flag: Mexico",version:"2.0"},{emoji:"",category:8,name:"flag: Malaysia",version:"2.0"},{emoji:"",category:8,name:"flag: Mozambique",version:"2.0"},{emoji:"",category:8,name:"flag: Namibia",version:"2.0"},{emoji:"",category:8,name:"flag: New Caledonia",version:"2.0"},{emoji:"",category:8,name:"flag: Niger",version:"2.0"},{emoji:"",category:8,name:"flag: Norfolk Island",version:"2.0"},{emoji:"",category:8,name:"flag: Nigeria",version:"2.0"},{emoji:"",category:8,name:"flag: Nicaragua",version:"2.0"},{emoji:"",category:8,name:"flag: Netherlands",version:"2.0"},{emoji:"",category:8,name:"flag: Norway",version:"2.0"},{emoji:"",category:8,name:"flag: Nepal",version:"2.0"},{emoji:"",category:8,name:"flag: Nauru",version:"2.0"},{emoji:"",category:8,name:"flag: Niue",version:"2.0"},{emoji:"",category:8,name:"flag: New Zealand",version:"2.0"},{emoji:"",category:8,name:"flag: Oman",version:"2.0"},{emoji:"",category:8,name:"flag: Panama",version:"2.0"},{emoji:"",category:8,name:"flag: Peru",version:"2.0"},{emoji:"",category:8,name:"flag: French Polynesia",version:"2.0"},{emoji:"",category:8,name:"flag: Papua New Guinea",version:"2.0"},{emoji:"",category:8,name:"flag: Philippines",version:"2.0"},{emoji:"",category:8,name:"flag: Pakistan",version:"2.0"},{emoji:"",category:8,name:"flag: Poland",version:"2.0"},{emoji:"",category:8,name:"flag: St. Pierre & Miquelon",version:"2.0"},{emoji:"",category:8,name:"flag: Pitcairn Islands",version:"2.0"},{emoji:"",category:8,name:"flag: Puerto Rico",version:"2.0"},{emoji:"",category:8,name:"flag: Palestinian Territories",version:"2.0"},{emoji:"",category:8,name:"flag: Portugal",version:"2.0"},{emoji:"",category:8,name:"flag: Palau",version:"2.0"},{emoji:"",category:8,name:"flag: Paraguay",version:"2.0"},{emoji:"",category:8,name:"flag: Qatar",version:"2.0"},{emoji:"",category:8,name:"flag: Runion",version:"2.0"},{emoji:"",category:8,name:"flag: Romania",version:"2.0"},{emoji:"",category:8,name:"flag: Serbia",version:"2.0"},{emoji:"",category:8,name:"flag: Russia",version:"1.0"},{emoji:"",category:8,name:"flag: Rwanda",version:"2.0"},{emoji:"",category:8,name:"flag: Saudi Arabia",version:"2.0"},{emoji:"",category:8,name:"flag: Solomon Islands",version:"2.0"},{emoji:"",category:8,name:"flag: Seychelles",version:"2.0"},{emoji:"",category:8,name:"flag: Sudan",version:"2.0"},{emoji:"",category:8,name:"flag: Sweden",version:"2.0"},{emoji:"",category:8,name:"flag: Singapore",version:"2.0"},{emoji:"",category:8,name:"flag: St. Helena",version:"2.0"},{emoji:"",category:8,name:"flag: Slovenia",version:"2.0"},{emoji:"",category:8,name:"flag: Svalbard & Jan Mayen",version:"2.0"},{emoji:"",category:8,name:"flag: Slovakia",version:"2.0"},{emoji:"",category:8,name:"flag: Sierra Leone",version:"2.0"},{emoji:"",category:8,name:"flag: San Marino",version:"2.0"},{emoji:"",category:8,name:"flag: Senegal",version:"2.0"},{emoji:"",category:8,name:"flag: Somalia",version:"2.0"},{emoji:"",category:8,name:"flag: Suriname",version:"2.0"},{emoji:"",category:8,name:"flag: South Sudan",version:"2.0"},{emoji:"",category:8,name:"flag: So Tom & Prncipe",version:"2.0"},{emoji:"",category:8,name:"flag: El Salvador",version:"2.0"},{emoji:"",category:8,name:"flag: Sint Maarten",version:"2.0"},{emoji:"",category:8,name:"flag: Syria",version:"2.0"},{emoji:"",category:8,name:"flag: Eswatini",version:"2.0"},{emoji:"",category:8,name:"flag: Tristan da Cunha",version:"2.0"},{emoji:"",category:8,name:"flag: Turks & Caicos Islands",version:"2.0"},{emoji:"",category:8,name:"flag: Chad",version:"2.0"},{emoji:"",category:8,name:"flag: French Southern Territories",version:"2.0"},{emoji:"",category:8,name:"flag: Togo",version:"2.0"},{emoji:"",category:8,name:"flag: Thailand",version:"2.0"},{emoji:"",category:8,name:"flag: Tajikistan",version:"2.0"},{emoji:"",category:8,name:"flag: Tokelau",version:"2.0"},{emoji:"",category:8,name:"flag: Timor-Leste",version:"2.0"},{emoji:"",category:8,name:"flag: Turkmenistan",version:"2.0"},{emoji:"",category:8,name:"flag: Tunisia",version:"2.0"},{emoji:"",category:8,name:"flag: Tonga",version:"2.0"},{emoji:"",category:8,name:"flag: Turkey",version:"2.0"},{emoji:"",category:8,name:"flag: Trinidad & Tobago",version:"2.0"},{emoji:"",category:8,name:"flag: Tuvalu",version:"2.0"},{emoji:"",category:8,name:"flag: Taiwan",version:"2.0"},{emoji:"",category:8,name:"flag: Tanzania",version:"2.0"},{emoji:"",category:8,name:"flag: Ukraine",version:"2.0"},{emoji:"",category:8,name:"flag: Uganda",version:"2.0"},{emoji:"",category:8,name:"flag: U.S. Outlying Islands",version:"2.0"},{emoji:"",category:8,name:"flag: United Nations",version:"4.0"},{emoji:"",category:8,name:"flag: United States",version:"1.0"},{emoji:"",category:8,name:"flag: Uruguay",version:"2.0"},{emoji:"",category:8,name:"flag: Uzbekistan",version:"2.0"},{emoji:"",category:8,name:"flag: Vatican City",version:"2.0"},{emoji:"",category:8,name:"flag: St. Vincent & Grenadines",version:"2.0"},{emoji:"",category:8,name:"flag: Venezuela",version:"2.0"},{emoji:"",category:8,name:"flag: British Virgin Islands",version:"2.0"},{emoji:"",category:8,name:"flag: U.S. Virgin Islands",version:"2.0"},{emoji:"",category:8,name:"flag: Vietnam",version:"2.0"},{emoji:"",category:8,name:"flag: Vanuatu",version:"2.0"},{emoji:"",category:8,name:"flag: Wallis & Futuna",version:"2.0"},{emoji:"",category:8,name:"flag: Samoa",version:"2.0"},{emoji:"",category:8,name:"flag: Kosovo",version:"2.0"},{emoji:"",category:8,name:"flag: Yemen",version:"2.0"},{emoji:"",category:8,name:"flag: Mayotte",version:"2.0"},{emoji:"",category:8,name:"flag: South Africa",version:"2.0"},{emoji:"",category:8,name:"flag: Zambia",version:"2.0"},{emoji:"",category:8,name:"flag: Zimbabwe",version:"2.0"},{emoji:"",category:8,name:"flag: England",version:"5.0"},{emoji:"",category:8,name:"flag: Scotland",version:"5.0"},{emoji:"",category:8,name:"flag: Wales",version:"5.0"}]};function Ce(e,t){var n=document.createElement(e);return t&&(n.className=t),n}function we(e){for(;e.firstChild;)e.removeChild(e.firstChild)}var Te=function(){function e(e,t){this.events=e,this.options=t}return e.prototype.render=function(){var e=this,t=Ce("div","emoji-picker__preview");return this.emoji=Ce("div","emoji-picker__preview-emoji"),t.appendChild(this.emoji),this.name=Ce("div","emoji-picker__preview-name"),t.appendChild(this.name),this.events.on("showPreview",(function(t){return e.showPreview(t)})),this.events.on("hidePreview",(function(){return e.hidePreview()})),t},e.prototype.showPreview=function(e){this.emoji.innerHTML="native"===this.options.style?e.emoji:Ee.parse(e.emoji),this.name.innerHTML=e.name},e.prototype.hidePreview=function(){this.emoji.innerHTML="",this.name.innerHTML=""},e}();function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ae(e,t,n[t])}))}return e}function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Oe=function(){},je={},Pe={},Ie={mark:Oe,measure:Oe};try{"undefined"!=typeof window&&(je=window),"undefined"!=typeof document&&(Pe=document),"undefined"!=typeof MutationObserver&&MutationObserver,"undefined"!=typeof performance&&(Ie=performance)}catch(e){}var Ne=(je.navigator||{}).userAgent,Me=void 0===Ne?"":Ne,xe=je,Le=Pe,Fe=Ie,Be=(xe.document,!!Le.documentElement&&!!Le.head&&"function"==typeof Le.addEventListener&&"function"==typeof Le.createElement),Ue=(~Me.indexOf("MSIE")||Me.indexOf("Trident/"),"group"),Ve=xe.FontAwesomeConfig||{};Le&&"function"==typeof Le.querySelector&&[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=ke(e,2),n=t[0],r=t[1],i=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=Le.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));null!=i&&(Ve[r]=i)}));var He=Re({},{familyPrefix:"fa",replacementClass:"svg-inline--fa",autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},Ve);He.autoReplaceSvg||(He.observeMutations=!1);var Ge=Re({},He);xe.FontAwesomeConfig=Ge;var Je=xe||{};Je.___FONT_AWESOME___||(Je.___FONT_AWESOME___={}),Je.___FONT_AWESOME___.styles||(Je.___FONT_AWESOME___.styles={}),Je.___FONT_AWESOME___.hooks||(Je.___FONT_AWESOME___.hooks={}),Je.___FONT_AWESOME___.shims||(Je.___FONT_AWESOME___.shims=[]);var ze=Je.___FONT_AWESOME___,We=[];Be&&((Le.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Le.readyState)||Le.addEventListener("DOMContentLoaded",(function e(){Le.removeEventListener("DOMContentLoaded",e),We.map((function(e){return e()}))}))),void 0!==r&&void 0!==r.process&&r.process.emit,void 0===i&&setTimeout;var Ke={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function qe(){for(var e=12,t="";e-- >0;)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return t}function $e(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Xe(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n],";")}),"")}function Ye(e){return e.size!==Ke.size||e.x!==Ke.x||e.y!==Ke.y||e.rotate!==Ke.rotate||e.flipX||e.flipY}function Qe(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},o="translate(".concat(32*t.x,", ").concat(32*t.y,") "),a="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(o," ").concat(a," ").concat(s)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}var Ze={x:0,y:0,width:"100%",height:"100%"};function et(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function tt(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,o=e.iconName,a=e.transform,s=e.symbol,c=e.title,u=e.maskId,l=e.titleId,d=e.extra,f=e.watchable,h=void 0!==f&&f,p=r.found?r:n,m=p.width,v=p.height,g="fa-w-".concat(Math.ceil(m/v*16)),y=[Ge.replacementClass,o?"".concat(Ge.familyPrefix,"-").concat(o):"",g].filter((function(e){return-1===d.classes.indexOf(e)})).concat(d.classes).join(" "),_={children:[],attributes:Re({},d.attributes,{"data-prefix":i,"data-icon":o,class:y,role:d.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(v)})};h&&(_.attributes["data-fa-i2svg"]=""),c&&_.children.push({tag:"title",attributes:{id:_.attributes["aria-labelledby"]||"title-".concat(l||qe())},children:[c]});var b=Re({},_,{prefix:i,iconName:o,main:n,mask:r,maskId:u,transform:a,symbol:s,styles:d.styles}),E=r.found&&n.found?function(e){var t,n=e.children,r=e.attributes,i=e.main,o=e.mask,a=e.maskId,s=e.transform,c=i.width,u=i.icon,l=o.width,d=o.icon,f=Qe({transform:s,containerWidth:l,iconWidth:c}),h={tag:"rect",attributes:Re({},Ze,{fill:"white"})},p=u.children?{children:u.children.map(et)}:{},m={tag:"g",attributes:Re({},f.inner),children:[et(Re({tag:u.tag,attributes:Re({},u.attributes,f.path)},p))]},v={tag:"g",attributes:Re({},f.outer),children:[m]},g="mask-".concat(a||qe()),y="clip-".concat(a||qe()),_={tag:"mask",attributes:Re({},Ze,{id:g,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[h,v]},b={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:(t=d,"g"===t.tag?t.children:[t])},_]};return n.push(b,{tag:"rect",attributes:Re({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(g,")")},Ze)}),{children:n,attributes:r}}(b):function(e){var t=e.children,n=e.attributes,r=e.main,i=e.transform,o=Xe(e.styles);if(o.length>0&&(n.style=o),Ye(i)){var a=Qe({transform:i,containerWidth:r.width,iconWidth:r.width});t.push({tag:"g",attributes:Re({},a.outer),children:[{tag:"g",attributes:Re({},a.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:Re({},r.icon.attributes,a.path)}]}]})}else t.push(r.icon);return{children:t,attributes:n}}(b),S=E.children,C=E.attributes;return b.children=S,b.attributes=C,s?function(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,o=e.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Re({},i,{id:!0===o?"".concat(t,"-").concat(Ge.familyPrefix,"-").concat(n):o}),children:r}]}]}(b):function(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,o=e.styles,a=e.transform;if(Ye(a)&&n.found&&!r.found){var s={x:n.width/n.height/2,y:.5};i.style=Xe(Re({},o,{"transform-origin":"".concat(s.x+a.x/16,"em ").concat(s.y+a.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}(b)}var nt=(Ge.measurePerformance&&Fe&&Fe.mark&&Fe.measure,function(e,t,n,r){var i,o,a,s=Object.keys(e),c=s.length,u=void 0!==r?function(e,t){return function(n,r,i,o){return e.call(t,n,r,i,o)}}(t,r):t;for(void 0===n?(i=1,a=e[s[0]]):(i=0,a=n);i<c;i++)a=u(a,e[o=s[i]],o,e);return a});function rt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.skipHooks,i=void 0!==r&&r,o=Object.keys(t).reduce((function(e,n){var r=t[n];return r.icon?e[r.iconName]=r.icon:e[n]=r,e}),{});"function"!=typeof ze.hooks.addPack||i?ze.styles[e]=Re({},ze.styles[e]||{},o):ze.hooks.addPack(e,o),"fas"===e&&rt("fa",t)}var it=ze.styles,ot=ze.shims,at=function(){var e=function(e){return nt(it,(function(t,n,r){return t[r]=nt(n,e,{}),t}),{})};e((function(e,t,n){return t[3]&&(e[t[3]]=n),e})),e((function(e,t,n){var r=t[2];return e[n]=n,r.forEach((function(t){e[t]=n})),e}));var t="far"in it;nt(ot,(function(e,n){var r=n[0],i=n[1],o=n[2];return"far"!==i||t||(i="fas"),e[r]={prefix:i,iconName:o},e}),{})};function st(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}function ct(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,i=e.children,o=void 0===i?[]:i;return"string"==typeof e?$e(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat($e(e[n]),'" ')}),"").trim()}(r),">").concat(o.map(ct).join(""),"</").concat(t,">")}function ut(e){this.name="MissingIcon",this.message=e||"Icon unavailable",this.stack=(new Error).stack}at(),ze.styles,ut.prototype=Object.create(Error.prototype),ut.prototype.constructor=ut;var lt={fill:"currentColor"},dt={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},ft=(Re({},lt,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}),Re({},dt,{attributeName:"opacity"}));function ht(e){var t=e[0],n=e[1],r=ke(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(Ge.familyPrefix,"-").concat(Ue)},children:[{tag:"path",attributes:{class:"".concat(Ge.familyPrefix,"-").concat("secondary"),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(Ge.familyPrefix,"-").concat("primary"),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}function pt(){Ge.autoAddCss&&!_t&&(function(e){if(e&&Be){var t=Le.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=Le.head.childNodes,r=null,i=n.length-1;i>-1;i--){var o=n[i],a=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(r=o)}Le.head.insertBefore(t,r)}}(function(){var e="svg-inline--fa",t=Ge.familyPrefix,n=Ge.replacementClass,r='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';if("fa"!==t||n!==e){var i=new RegExp("\\.".concat("fa","\\-"),"g"),o=new RegExp("\\--".concat("fa","\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(i,".".concat(t,"-")).replace(o,"--".concat(t,"-")).replace(a,".".concat(n))}return r}()),_t=!0)}function mt(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return ct(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(Be){var t=Le.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function vt(e){var t=e.prefix,n=void 0===t?"fa":t,r=e.iconName;if(r)return st(yt.definitions,n,r)||st(ze.styles,n,r)}Re({},lt,{cx:"256",cy:"364",r:"28"}),Re({},dt,{attributeName:"r",values:"28;14;28;28;14;28;"}),Re({},ft,{values:"1;0;1;1;0;1;"}),Re({},lt,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),Re({},ft,{values:"1;0;0;0;0;1;"}),Re({},lt,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),Re({},ft,{values:"0;0;1;1;0;0;"}),ze.styles,ze.styles;var gt,yt=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n;return t=e,(n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach((function(t){e.definitions[t]=Re({},e.definitions[t]||{},i[t]),rt(t,i[t]),at()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var r=n[t],i=r.prefix,o=r.iconName,a=r.icon;e[i]||(e[i]={}),e[i][o]=a})),e}}])&&De(t.prototype,n),e}()),_t=!1,bt=(gt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?Ke:n,i=t.symbol,o=void 0!==i&&i,a=t.mask,s=void 0===a?null:a,c=t.maskId,u=void 0===c?null:c,l=t.title,d=void 0===l?null:l,f=t.titleId,h=void 0===f?null:f,p=t.classes,m=void 0===p?[]:p,v=t.attributes,g=void 0===v?{}:v,y=t.styles,_=void 0===y?{}:y;if(e){var b=e.prefix,E=e.iconName,S=e.icon;return mt(Re({type:"icon"},e),(function(){return pt(),Ge.autoA11y&&(d?g["aria-labelledby"]="".concat(Ge.replacementClass,"-title-").concat(h||qe()):(g["aria-hidden"]="true",g.focusable="false")),tt({icons:{main:ht(S),mask:s?ht(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:b,iconName:E,transform:Re({},Ke,r),symbol:o,title:d,maskId:u,titleId:h,extra:{attributes:g,styles:_,classes:m}})}))}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(e||{}).icon?e:vt(e||{}),r=t.mask;return r&&(r=(r||{}).icon?r:vt(r||{})),gt(n,Re({},t,{mask:r}))});yt.add({prefix:"far",iconName:"building",icon:[448,512,[],"f1ad","M128 148v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12zm140 12h40c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12zm-128 96h40c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12zm128 0h40c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12zm-76 84v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm76 12h40c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12zm180 124v36H0v-36c0-6.6 5.4-12 12-12h19.5V24c0-13.3 10.7-24 24-24h337c13.3 0 24 10.7 24 24v440H436c6.6 0 12 5.4 12 12zM79.5 463H192v-67c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v67h112.5V49L80 48l-.5 415z"]},{prefix:"fas",iconName:"cat",icon:[512,512,[],"f6be","M290.59 192c-20.18 0-106.82 1.98-162.59 85.95V192c0-52.94-43.06-96-96-96-17.67 0-32 14.33-32 32s14.33 32 32 32c17.64 0 32 14.36 32 32v256c0 35.3 28.7 64 64 64h176c8.84 0 16-7.16 16-16v-16c0-17.67-14.33-32-32-32h-32l128-96v144c0 8.84 7.16 16 16 16h32c8.84 0 16-7.16 16-16V289.86c-10.29 2.67-20.89 4.54-32 4.54-61.81 0-113.52-44.05-125.41-102.4zM448 96h-64l-64-64v134.4c0 53.02 42.98 96 96 96s96-42.98 96-96V32l-64 64zm-72 80c-8.84 0-16-7.16-16-16s7.16-16 16-16 16 7.16 16 16-7.16 16-16 16zm80 0c-8.84 0-16-7.16-16-16s7.16-16 16-16 16 7.16 16 16-7.16 16-16 16z"]},{prefix:"fas",iconName:"coffee",icon:[640,512,[],"f0f4","M192 384h192c53 0 96-43 96-96h32c70.6 0 128-57.4 128-128S582.6 32 512 32H120c-13.3 0-24 10.7-24 24v232c0 53 43 96 96 96zM512 96c35.3 0 64 28.7 64 64s-28.7 64-64 64h-32V96h32zm47.7 384H48.3c-47.6 0-61-64-36-64h583.3c25 0 11.8 64-35.9 64z"]},{prefix:"far",iconName:"flag",icon:[512,512,[],"f024","M336.174 80c-49.132 0-93.305-32-161.913-32-31.301 0-58.303 6.482-80.721 15.168a48.04 48.04 0 0 0 2.142-20.727C93.067 19.575 74.167 1.594 51.201.104 23.242-1.71 0 20.431 0 48c0 17.764 9.657 33.262 24 41.562V496c0 8.837 7.163 16 16 16h16c8.837 0 16-7.163 16-16v-83.443C109.869 395.28 143.259 384 199.826 384c49.132 0 93.305 32 161.913 32 58.479 0 101.972-22.617 128.548-39.981C503.846 367.161 512 352.051 512 335.855V95.937c0-34.459-35.264-57.768-66.904-44.117C409.193 67.309 371.641 80 336.174 80zM464 336c-21.783 15.412-60.824 32-102.261 32-59.945 0-102.002-32-161.913-32-43.361 0-96.379 9.403-127.826 24V128c21.784-15.412 60.824-32 102.261-32 59.945 0 102.002 32 161.913 32 43.271 0 96.32-17.366 127.826-32v240z"]},{prefix:"far",iconName:"frown",icon:[496,512,[],"f119","M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm-80-216c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160-64c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32zm-80 128c-40.2 0-78 17.7-103.8 48.6-8.5 10.2-7.1 25.3 3.1 33.8 10.2 8.4 25.3 7.1 33.8-3.1 16.6-19.9 41-31.4 66.9-31.4s50.3 11.4 66.9 31.4c8.1 9.7 23.1 11.9 33.8 3.1 10.2-8.5 11.5-23.6 3.1-33.8C326 321.7 288.2 304 248 304z"]},{prefix:"fas",iconName:"futbol",icon:[512,512,[],"f1e3","M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zm-48 0l-.003-.282-26.064 22.741-62.679-58.5 16.454-84.355 34.303 3.072c-24.889-34.216-60.004-60.089-100.709-73.141l13.651 31.939L256 139l-74.953-41.525 13.651-31.939c-40.631 13.028-75.78 38.87-100.709 73.141l34.565-3.073 16.192 84.355-62.678 58.5-26.064-22.741-.003.282c0 43.015 13.497 83.952 38.472 117.991l7.704-33.897 85.138 10.447 36.301 77.826-29.902 17.786c40.202 13.122 84.29 13.148 124.572 0l-29.902-17.786 36.301-77.826 85.138-10.447 7.704 33.897C442.503 339.952 456 299.015 456 256zm-248.102 69.571l-29.894-91.312L256 177.732l77.996 56.527-29.622 91.312h-96.476z"]},{prefix:"fas",iconName:"history",icon:[512,512,[],"f1da","M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"]},{prefix:"far",iconName:"lightbulb",icon:[352,512,[],"f0eb","M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z"]},{prefix:"fas",iconName:"music",icon:[512,512,[],"f001","M470.38 1.51L150.41 96A32 32 0 0 0 128 126.51v261.41A139 139 0 0 0 96 384c-53 0-96 28.66-96 64s43 64 96 64 96-28.66 96-64V214.32l256-75v184.61a138.4 138.4 0 0 0-32-3.93c-53 0-96 28.66-96 64s43 64 96 64 96-28.65 96-64V32a32 32 0 0 0-41.62-30.49z"]},{prefix:"fas",iconName:"search",icon:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"]},{prefix:"far",iconName:"smile",icon:[496,512,[],"f118","M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm-80-216c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm4 72.6c-20.8 25-51.5 39.4-84 39.4s-63.2-14.3-84-39.4c-8.5-10.2-23.7-11.5-33.8-3.1-10.2 8.5-11.5 23.6-3.1 33.8 30 36 74.1 56.6 120.9 56.6s90.9-20.6 120.9-56.6c8.5-10.2 7.1-25.3-3.1-33.8-10.1-8.4-25.3-7.1-33.8 3.1z"]},{prefix:"fas",iconName:"times",icon:[352,512,[],"f00d","M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"]},{prefix:"fas",iconName:"user",icon:[448,512,[],"f007","M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"]});var Et=bt({prefix:"far",iconName:"building"}).html[0],St=bt({prefix:"fas",iconName:"cat"}).html[0],Ct=bt({prefix:"fas",iconName:"coffee"}).html[0],wt=bt({prefix:"far",iconName:"flag"}).html[0],Tt=bt({prefix:"fas",iconName:"futbol"}).html[0],Dt=bt({prefix:"far",iconName:"frown"}).html[0],At=bt({prefix:"fas",iconName:"history"}).html[0],Rt=bt({prefix:"far",iconName:"lightbulb"}).html[0],kt=bt({prefix:"fas",iconName:"music"}).html[0],Ot=bt({prefix:"fas",iconName:"search"}).html[0],jt=bt({prefix:"far",iconName:"smile"}).html[0],Pt=bt({prefix:"fas",iconName:"times"}).html[0],It=bt({prefix:"fas",iconName:"user"}).html[0];function Nt(){var e=localStorage.getItem("emojiPicker.recent");return(e?JSON.parse(e):[]).filter((function(e){return!!e.emoji}))}var Mt=function(){function e(e,t,n,r,i){this.emoji=e,this.showVariants=t,this.showPreview=n,this.events=r,this.options=i}return e.prototype.render=function(){var e=this;return this.emojiButton=Ce("button","emoji-picker__emoji"),this.emojiButton.innerHTML="native"===this.options.style?this.emoji.emoji:Ee.parse(this.emoji.emoji),this.emojiButton.tabIndex=-1,this.emojiButton.title=this.emoji.name,this.emojiButton.addEventListener("focus",(function(){return e.onEmojiHover()})),this.emojiButton.addEventListener("blur",(function(){return e.onEmojiLeave()})),this.emojiButton.addEventListener("click",(function(){return e.onEmojiClick()})),this.emojiButton.addEventListener("mouseover",(function(){return e.onEmojiHover()})),this.emojiButton.addEventListener("mouseout",(function(){return e.onEmojiLeave()})),this.emojiButton},e.prototype.onEmojiClick=function(){var e,n,r,i;this.emoji.variations&&this.showVariants&&this.options.showVariants||!this.options.showRecents||(e=this.emoji,n=this.options,r=Nt(),i={emoji:e.emoji,name:e.name,key:e.key||e.name},localStorage.setItem("emojiPicker.recent",JSON.stringify(t([i],r.filter((function(e){return!!e.emoji&&e.key!==i.key}))).slice(0,n.recentsCount)))),this.events.emit("emoji",{emoji:this.emoji,showVariants:this.showVariants,button:this.emojiButton})},e.prototype.onEmojiHover=function(){this.showPreview&&this.events.emit("showPreview",this.emoji)},e.prototype.onEmojiLeave=function(){this.showPreview&&this.events.emit("hidePreview")},e}(),xt=function(){function e(e,t,n,r){this.showVariants=t,this.events=n,this.options=r,this.emojis=e.filter((function(e){return!e.version||parseFloat(e.version)<=parseFloat(r.emojiVersion)}))}return e.prototype.render=function(){var e=this,t=Ce("div","emoji-picker__container");return this.emojis.forEach((function(n){return t.appendChild(new Mt(n,e.showVariants,!0,e.events,e.options).render())})),t},e}(),Lt=function(){function e(e){this.message=e}return e.prototype.render=function(){var e=Ce("div","emoji-picker__search-not-found"),t=Ce("div","emoji-picker__search-not-found-icon");t.innerHTML=Dt,e.appendChild(t);var n=Ce("h2");return n.innerHTML=this.message,e.appendChild(n),e},e}(),Ft=function(){function e(e,t,n,r,i){var o=this;this.events=e,this.i18n=t,this.options=n,this.focusedEmojiIndex=0,this.emojisPerRow=this.options.emojisPerRow||8,this.emojiData=r.filter((function(e){return e.version&&parseFloat(e.version)<=parseFloat(n.emojiVersion)&&void 0!==e.category&&i.indexOf(e.category)>=0})),this.events.on("hideVariantPopup",(function(){setTimeout((function(){return o.setFocusedEmoji(o.focusedEmojiIndex)}))}))}return e.prototype.render=function(){var e=this;return this.searchContainer=Ce("div","emoji-picker__search-container"),this.searchField=Ce("input","emoji-picker__search"),this.searchField.placeholder=this.i18n.search,this.searchContainer.appendChild(this.searchField),this.searchIcon=Ce("span","emoji-picker__search-icon"),this.searchIcon.innerHTML=Ot,this.searchIcon.addEventListener("click",(function(t){return e.onClearSearch(t)})),this.searchContainer.appendChild(this.searchIcon),this.searchField.addEventListener("keydown",(function(t){return e.onKeyDown(t)})),this.searchField.addEventListener("keyup",(function(){return e.onKeyUp()})),this.searchContainer},e.prototype.onClearSearch=function(e){var t=this;e.stopPropagation(),this.searchField.value&&(this.searchField.value="",this.resultsContainer=null,this.searchIcon.innerHTML=Ot,this.searchIcon.style.cursor="default",this.events.emit("hideSearchResults"),setTimeout((function(){return t.searchField.focus()})))},e.prototype.setFocusedEmoji=function(e){if(this.resultsContainer){var t=this.resultsContainer.querySelectorAll(".emoji-picker__emoji");t[this.focusedEmojiIndex].tabIndex=-1,this.focusedEmojiIndex=e;var n=t[this.focusedEmojiIndex];n.tabIndex=0,n.focus()}},e.prototype.handleResultsKeydown=function(e){if(this.resultsContainer){var t=this.resultsContainer.querySelectorAll(".emoji-picker__emoji");"ArrowRight"===e.key?this.setFocusedEmoji(Math.min(this.focusedEmojiIndex+1,t.length-1)):"ArrowLeft"===e.key?this.setFocusedEmoji(Math.max(0,this.focusedEmojiIndex-1)):"ArrowDown"===e.key?(e.preventDefault(),this.focusedEmojiIndex<t.length-this.emojisPerRow&&this.setFocusedEmoji(this.focusedEmojiIndex+this.emojisPerRow)):"ArrowUp"===e.key?(e.preventDefault(),this.focusedEmojiIndex>=this.emojisPerRow&&this.setFocusedEmoji(this.focusedEmojiIndex-this.emojisPerRow)):"Escape"===e.key&&this.onClearSearch(e)}},e.prototype.onKeyDown=function(e){"Escape"===e.key&&this.searchField.value&&this.onClearSearch(e)},e.prototype.onKeyUp=function(){var e=this;if(this.searchField.value){this.searchIcon.innerHTML=Pt,this.searchIcon.style.cursor="pointer";var t=this.emojiData.filter((function(t){return t.name.toLowerCase().indexOf(e.searchField.value.toLowerCase())>=0}));this.events.emit("hidePreview"),t.length?(this.resultsContainer=new xt(t,!0,this.events,this.options).render(),this.resultsContainer&&(this.resultsContainer.querySelector(".emoji-picker__emoji").tabIndex=0,this.focusedEmojiIndex=0,this.resultsContainer.addEventListener("keydown",(function(t){return e.handleResultsKeydown(t)})),this.events.emit("showSearchResults",this.resultsContainer))):this.events.emit("showSearchResults",new Lt(this.i18n.notFound).render())}else this.searchIcon.innerHTML=Ot,this.searchIcon.style.cursor="default",this.events.emit("hideSearchResults")},e}(),Bt=function(){function e(e,t,n){this.events=e,this.emoji=t,this.options=n,this.focusedEmojiIndex=0}return e.prototype.getEmoji=function(e){return this.popup.querySelectorAll(".emoji-picker__emoji")[e]},e.prototype.setFocusedEmoji=function(e){this.getEmoji(this.focusedEmojiIndex).tabIndex=-1,this.focusedEmojiIndex=e;var t=this.getEmoji(this.focusedEmojiIndex);t.tabIndex=0,t.focus()},e.prototype.render=function(){var e=this;this.popup=Ce("div","emoji-picker__variant-popup");var t=Ce("div","emoji-picker__variant-overlay");t.addEventListener("click",(function(t){t.stopPropagation(),e.popup.contains(t.target)||e.events.emit("hideVariantPopup")})),this.popup.appendChild(new Mt(this.emoji,!1,!1,this.events,this.options).render()),(this.emoji.variations||[]).forEach((function(t,n){return e.popup.appendChild(new Mt({name:e.emoji.name,emoji:t,key:e.emoji.name+n},!1,!1,e.events,e.options).render())}));var n=this.popup.querySelector(".emoji-picker__emoji");return this.focusedEmojiIndex=0,n.tabIndex=0,setTimeout((function(){return n.focus()})),this.popup.addEventListener("keydown",(function(t){"ArrowRight"===t.key?e.setFocusedEmoji(Math.min(e.focusedEmojiIndex+1,e.popup.querySelectorAll(".emoji-picker__emoji").length-1)):"ArrowLeft"===t.key?e.setFocusedEmoji(Math.max(e.focusedEmojiIndex-1,0)):"Escape"===t.key&&(t.stopPropagation(),e.events.emit("hideVariantPopup"))})),t.appendChild(this.popup),t},e}(),Ut={search:"Search emojis...",categories:{recents:"Recent Emojis",smileys:"Smileys & Emotion",people:"People & Body",animals:"Animals & Nature",food:"Food & Drink",activities:"Activities",travel:"Travel & Places",objects:"Objects",symbols:"Symbols",flags:"Flags"},notFound:"No emojis found"},Vt={recents:At,smileys:jt,people:It,animals:St,food:Ct,activities:Tt,travel:Et,objects:Rt,symbols:kt,flags:wt},Ht=function(){function e(e,t,n){this.options=e,this.events=t,this.i18n=n,this.activeButton=0,this.buttons=[]}return e.prototype.render=function(){var e=this,n=Ce("div","emoji-picker__category-buttons"),r=this.options.showRecents?t(["recents"],this.options.categories||Se.categories):this.options.categories||Se.categories;return r.forEach((function(t){var r=Ce("button","emoji-picker__category-button");r.innerHTML=Vt[t],r.tabIndex=-1,r.title=e.i18n.categories[t],n.appendChild(r),e.buttons.push(r),r.addEventListener("click",(function(){e.events.emit("categoryClicked",t)}))})),n.addEventListener("keydown",(function(t){switch(t.key){case"ArrowRight":e.events.emit("categoryClicked",r[(e.activeButton+1)%e.buttons.length]);break;case"ArrowLeft":e.events.emit("categoryClicked",r[0===e.activeButton?e.buttons.length-1:e.activeButton-1]);break;case"ArrowUp":case"ArrowDown":t.stopPropagation(),t.preventDefault()}})),n},e.prototype.setActiveButton=function(e,t){void 0===t&&(t=!0);var n=this.buttons[this.activeButton];n.classList.remove("active"),n.tabIndex=-1,this.activeButton=e,(n=this.buttons[this.activeButton]).classList.add("active"),n.tabIndex=0,t&&n.focus()},e}(),Gt={};Se.emoji.forEach((function(e){var t=Gt[Se.categories[e.category]];t||(t=Gt[Se.categories[e.category]]=[]),t.push(e)}));var Jt=function(){function e(e,n,r){var i=this;this.events=e,this.i18n=n,this.options=r,this.currentCategory=0,this.headers=[],this.focusedIndex=0,this.handleKeyDown=function(e){switch(i.emojis.removeEventListener("scroll",i.highlightCategory),e.key){case"ArrowRight":i.focusedEmoji.tabIndex=-1,i.focusedIndex===i.currentEmojiCount-1&&i.currentCategory<i.categories.length?(i.options.showCategoryButtons&&i.categoryButtons.setActiveButton(++i.currentCategory),i.setFocusedEmoji(0)):i.setFocusedEmoji(i.focusedIndex+1);break;case"ArrowLeft":i.focusedEmoji.tabIndex=-1,0===i.focusedIndex&&i.currentCategory>0?(i.options.showCategoryButtons&&i.categoryButtons.setActiveButton(--i.currentCategory),i.setFocusedEmoji(i.currentEmojiCount-1)):i.setFocusedEmoji(Math.max(0,i.focusedIndex-1));break;case"ArrowDown":e.preventDefault(),i.focusedEmoji.tabIndex=-1,i.focusedIndex+i.emojisPerRow>=i.currentEmojiCount&&i.currentCategory<i.categories.length?(i.currentCategory++,i.options.showCategoryButtons&&i.categoryButtons.setActiveButton(i.currentCategory),i.setFocusedEmoji(i.focusedIndex%i.emojisPerRow)):i.setFocusedEmoji(i.focusedIndex+i.emojisPerRow);break;case"ArrowUp":if(e.preventDefault(),i.focusedEmoji.tabIndex=-1,i.focusedIndex<i.emojisPerRow&&i.currentCategory>0){var t=i.getEmojiCount(i.currentCategory-1),n=t%i.emojisPerRow;0===n&&(n=i.emojisPerRow);var r=i.focusedIndex,o=r>n-1?t-1:t-n+r;i.currentCategory--,i.options.showCategoryButtons&&i.categoryButtons.setActiveButton(i.currentCategory),i.setFocusedEmoji(o)}else i.setFocusedEmoji(i.focusedIndex>=i.emojisPerRow?i.focusedIndex-i.emojisPerRow:i.focusedIndex)}requestAnimationFrame((function(){return i.emojis.addEventListener("scroll",i.highlightCategory)}))},this.addCategory=function(e,t){var n=Ce("h2","emoji-picker__category-name");n.innerHTML=i.i18n.categories[e]||Ut.categories[e],i.emojis.appendChild(n),i.headers.push(n),i.emojis.appendChild(new xt(t,!0,i.events,i.options).render())},this.selectCategory=function(e,t){void 0===t&&(t=!0),i.emojis.removeEventListener("scroll",i.highlightCategory),i.focusedEmoji&&(i.focusedEmoji.tabIndex=-1);var n=i.categories.indexOf(e);i.currentCategory=n,i.setFocusedEmoji(0,!1),i.options.showCategoryButtons&&i.categoryButtons.setActiveButton(i.currentCategory,t);var r=i.headerOffsets[n];i.emojis.scrollTop=r,requestAnimationFrame((function(){return i.emojis.addEventListener("scroll",i.highlightCategory)}))},this.highlightCategory=function(){if(!document.activeElement||!document.activeElement.classList.contains("emoji-picker__emoji")){var e=i.headerOffsets.findIndex((function(e){return e>Math.round(i.emojis.scrollTop)}));0===e?e=1:e<0&&(e=i.headerOffsets.length),i.currentCategory=e-1,i.options.showCategoryButtons&&i.categoryButtons.setActiveButton(i.currentCategory)}},this.emojisPerRow=r.emojisPerRow||8,this.categories=r.categories||Se.categories,r.showRecents&&(this.categories=t(["recents"],this.categories))}return e.prototype.render=function(){var e=this;return this.container=Ce("div","emoji-picker__emoji-area"),this.options.showCategoryButtons&&(this.categoryButtons=new Ht(this.options,this.events,this.i18n),this.container.appendChild(this.categoryButtons.render())),this.emojis=Ce("div","emoji-picker__emojis"),this.options.showRecents&&(Gt.recents=Nt()),this.categories.forEach((function(t){return e.addCategory(t,Gt[t])})),requestAnimationFrame((function(){e.headerOffsets=Array.prototype.map.call(e.headers,(function(e){return e.offsetTop})),e.selectCategory("smileys",!1),e.currentCategory=e.options.showRecents?1:0,e.options.showCategoryButtons&&e.categoryButtons.setActiveButton(e.currentCategory,!1),setTimeout((function(){setTimeout((function(){return e.emojis.addEventListener("scroll",e.highlightCategory)}))}))})),this.emojis.addEventListener("keydown",this.handleKeyDown),this.events.on("categoryClicked",this.selectCategory),this.container.appendChild(this.emojis),this.container.querySelectorAll(".emoji-picker__emoji")[0].tabIndex=0,this.container},Object.defineProperty(e.prototype,"currentCategoryEl",{get:function(){return this.emojis.querySelectorAll(".emoji-picker__container")[this.currentCategory]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusedEmoji",{get:function(){return this.currentCategoryEl.querySelectorAll(".emoji-picker__emoji")[this.focusedIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentEmojiCount",{get:function(){return this.currentCategoryEl.querySelectorAll(".emoji-picker__emoji").length},enumerable:!0,configurable:!0}),e.prototype.getEmojiCount=function(e){return this.emojis.querySelectorAll(".emoji-picker__container")[e].querySelectorAll(".emoji-picker__emoji").length},e.prototype.setFocusedEmoji=function(e,t){void 0===t&&(t=!0),this.focusedIndex=e,this.focusedEmoji&&(this.focusedEmoji.tabIndex=0,t&&this.focusedEmoji.focus())},e}(),zt={position:"right-start",autoHide:!0,autoFocusSearch:!0,showPreview:!0,showSearch:!0,showRecents:!0,showVariants:!0,showCategoryButtons:!0,recentsCount:50,emojiVersion:"12.1",theme:"light",categories:["smileys","people","animals","food","activities","travel","objects","symbols","flags"],style:"native",emojisPerRow:8,rows:6,emojiSize:"1.8em"};return function(){function t(t){void 0===t&&(t={}),this.events=new S,this.publicEvents=new S,this.pickerVisible=!1,this.options=e(e({},zt),t),this.options.rootElement||(this.options.rootElement=document.body),this.i18n=e(e({},Ut),t.i18n),this.onDocumentClick=this.onDocumentClick.bind(this),this.onDocumentKeydown=this.onDocumentKeydown.bind(this)}return t.prototype.on=function(e,t){this.publicEvents.on(e,t)},t.prototype.off=function(e,t){this.publicEvents.off(e,t)},t.prototype.buildPicker=function(){var e=this;this.pickerEl=Ce("div","emoji-picker"),this.pickerEl.classList.add(this.options.theme),this.options.emojisPerRow&&this.pickerEl.style.setProperty("--emoji-per-row",this.options.emojisPerRow.toString()),this.options.rows&&this.pickerEl.style.setProperty("--row-count",this.options.rows.toString()),this.options.emojiSize&&this.pickerEl.style.setProperty("--emoji-size",this.options.emojiSize),this.options.showCategoryButtons||this.pickerEl.style.setProperty("--category-button-height","0"),this.focusTrap=function(e,t){var n=document,r="string"==typeof e?n.querySelector(e):e,i=g({returnFocusOnDeactivate:!0,escapeDeactivates:!0},t),o={firstTabbableNode:null,lastTabbableNode:null,nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1},a={activate:function(e){if(!o.active){E(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=n.activeElement;var t=e&&e.onActivate?e.onActivate:i.onActivate;return t&&t(),c(),a}},deactivate:s,pause:function(){!o.paused&&o.active&&(o.paused=!0,u())},unpause:function(){o.paused&&o.active&&(o.paused=!1,E(),c())}};return a;function s(e){if(o.active){clearTimeout(p),u(),o.active=!1,o.paused=!1,_.deactivateTrap(a);var t=e&&void 0!==e.onDeactivate?e.onDeactivate:i.onDeactivate;return t&&t(),(e&&void 0!==e.returnFocus?e.returnFocus:i.returnFocusOnDeactivate)&&b((function(){var e;S((e=o.nodeFocusedBeforeActivation,l("setReturnFocus")||e))})),a}}function c(){if(o.active)return _.activateTrap(a),p=b((function(){S(d())})),n.addEventListener("focusin",h,!0),n.addEventListener("mousedown",f,{capture:!0,passive:!1}),n.addEventListener("touchstart",f,{capture:!0,passive:!1}),n.addEventListener("click",y,{capture:!0,passive:!1}),n.addEventListener("keydown",m,{capture:!0,passive:!1}),a}function u(){if(o.active)return n.removeEventListener("focusin",h,!0),n.removeEventListener("mousedown",f,!0),n.removeEventListener("touchstart",f,!0),n.removeEventListener("click",y,!0),n.removeEventListener("keydown",m,!0),a}function l(e){var t=i[e],r=t;if(!t)return null;if("string"==typeof t&&!(r=n.querySelector(t)))throw new Error("`"+e+"` refers to no known node");if("function"==typeof t&&!(r=t()))throw new Error("`"+e+"` did not return a node");return r}function d(){var e;if(!(e=null!==l("initialFocus")?l("initialFocus"):r.contains(n.activeElement)?n.activeElement:o.firstTabbableNode||l("fallbackFocus")))throw new Error("Your focus-trap needs to have at least one focusable element");return e}function f(e){r.contains(e.target)||(i.clickOutsideDeactivates?s({returnFocus:!v.isFocusable(e.target)}):i.allowOutsideClick&&i.allowOutsideClick(e)||e.preventDefault())}function h(e){r.contains(e.target)||e.target instanceof Document||(e.stopImmediatePropagation(),S(o.mostRecentlyFocusedNode||d()))}function m(e){if(!1!==i.escapeDeactivates&&function(e){return"Escape"===e.key||"Esc"===e.key||27===e.keyCode}(e))return e.preventDefault(),void s();(function(e){return"Tab"===e.key||9===e.keyCode})(e)&&function(e){if(E(),e.shiftKey&&e.target===o.firstTabbableNode)return e.preventDefault(),void S(o.lastTabbableNode);e.shiftKey||e.target!==o.lastTabbableNode||(e.preventDefault(),S(o.firstTabbableNode))}(e)}function y(e){i.clickOutsideDeactivates||r.contains(e.target)||i.allowOutsideClick&&i.allowOutsideClick(e)||(e.preventDefault(),e.stopImmediatePropagation())}function E(){var e=v(r);o.firstTabbableNode=e[0]||d(),o.lastTabbableNode=e[e.length-1]||d()}function S(e){e!==n.activeElement&&(e&&e.focus?(e.focus(),o.mostRecentlyFocusedNode=e,function(e){return e.tagName&&"input"===e.tagName.toLowerCase()&&"function"==typeof e.select}(e)&&e.select()):S(d()))}}(this.pickerEl,{clickOutsideDeactivates:!0,initialFocus:this.options.autoFocusSearch?".emoji-picker__search":'.emoji-picker__emoji[tabindex="0"]'}),this.options.zIndex&&(this.pickerEl.style.zIndex=this.options.zIndex+"");var t=Ce("div","emoji-picker__content");if(this.options.showSearch){var n=new Ft(this.events,this.i18n,this.options,Se.emoji,(this.options.categories||[]).map((function(e){return Se.categories.indexOf(e)}))).render();this.pickerEl.appendChild(n)}this.pickerEl.appendChild(t);var r,i=new Jt(this.events,this.i18n,this.options).render();t.appendChild(i),this.events.on("showSearchResults",(function(e){we(t),e.classList.add("search-results"),t.appendChild(e)})),this.events.on("hideSearchResults",(function(){t.firstChild!==i&&(we(t),t.appendChild(i))})),this.options.showPreview&&this.pickerEl.appendChild(new Te(this.events,this.options).render()),this.events.on("emoji",(function(t){var n=t.emoji,i=t.showVariants;n.variations&&i&&e.options.showVariants?(r=new Bt(e.events,n,e.options).render())&&e.pickerEl.appendChild(r):(r&&r.parentNode===e.pickerEl&&e.pickerEl.removeChild(r),"twemoji"===e.options.style?e.publicEvents.emit("emoji",Ee.parse(n.emoji)):e.publicEvents.emit("emoji",n.emoji),e.options.autoHide&&e.hidePicker())})),this.events.on("hideVariantPopup",(function(){r&&(r.classList.add("hiding"),setTimeout((function(){r&&e.pickerEl.removeChild(r),r=null}),175))})),this.wrapper=Ce("div","wrapper"),this.wrapper.style.zIndex=this.options.zIndex,this.wrapper.appendChild(this.pickerEl),this.options.rootElement&&this.options.rootElement.appendChild(this.wrapper),setTimeout((function(){document.addEventListener("click",e.onDocumentClick),document.addEventListener("keydown",e.onDocumentKeydown)}))},t.prototype.onDocumentClick=function(e){this.pickerEl.contains(e.target)||this.hidePicker()},t.prototype.destroyPicker=function(){this.options.rootElement&&(this.options.rootElement.contains(this.wrapper)?this.options.rootElement.removeChild(this.wrapper):this.wrapper&&this.wrapper.remove(),this.popper.destroy(),this.hideInProgress=!1)},t.prototype.hidePicker=function(){this.focusTrap.deactivate(),this.pickerVisible=!1,this.events.off("emoji"),this.events.off("hideVariantPopup"),this.hideInProgress=!0,this.pickerEl.classList.add("hiding"),this.destroyTimeout=setTimeout(this.destroyPicker.bind(this),170),document.removeEventListener("click",this.onDocumentClick),document.removeEventListener("keydown",this.onDocumentKeydown)},t.prototype.showPicker=function(e,t){void 0===t&&(t={}),this.hideInProgress&&(clearTimeout(this.destroyTimeout),this.destroyPicker()),this.pickerVisible=!0,this.buildPicker(),this.popper=ye(e,this.wrapper,{placement:t.position||this.options.position}),this.focusTrap.activate()},t.prototype.togglePicker=function(e,t){void 0===t&&(t={}),this.pickerVisible?this.hidePicker():this.showPicker(e,t)},t.prototype.onDocumentKeydown=function(e){if("Escape"===e.key)this.hidePicker();else if("Tab"===e.key)this.pickerEl.classList.add("keyboard");else if(e.key.match(/^[\w]$/)){var t=this.pickerEl.querySelector(".emoji-picker__search");t&&t.focus()}},t}()}))}).call(this,n(53),n(280).setImmediate)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/emojis.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 24 24",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("5c7a66")()}).e("g",null,null,null,1).e("rect",{fill:"none",height:"24",width:"24"},null,null,0).e("g",null,null,null,2).e("g",null,null,null,0).e("path",{d:"M11.99,2C6.47,2,2,6.48,2,12c0,5.52,4.47,10,9.99,10C17.52,22,22,17.52,22,12C22,6.48,17.52,2,11.99,2z M8.5,8 C9.33,8,10,8.67,10,9.5S9.33,11,8.5,11S7,10.33,7,9.5S7.67,8,8.5,8z M12,18c-2.28,0-4.22-1.66-5-4h10C16.22,16.34,14.28,18,12,18z M15.5,11c-0.83,0-1.5-0.67-1.5-1.5S14.67,8,15.5,8S17,8.67,17,9.5S16.33,11,15.5,11z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){n(679);var r=e.exports=n(16).t(),i={onCreate:function(e){this.state={sessionInfo:e.sessionInfo,type:e.type},this.startFileUpload=e.startFileUpload},onChange:function(e){const t=d(),n=e.target.files[0],r={fileName:n.name,fileType:n.type};this.startFileUpload({id:t,name:n.name,type:this.state.type,size:n.size,status:"loading"}),Promise.all([u(r),l(n,this.state.type)]).then(e=>{const t=e[0].presignedUrl;return fetch(t,{method:"PUT",body:e[1],headers:{ACL:"public-read","Content-Disposition":"attachment"}})}).then(e=>{const n=e.url.split("?")[0];this.startFileUpload({id:t,url:n,status:"done"})}).catch((function(e){this.startFileUpload({id:t,msg:"failed",status:"failed"})}))},onClick:function(){this.getEl("file").click()}},o=(0,n(13).r)("/client$2.26.6/src/components/FileUpload/index.marko",(function(){return e.exports})),a=n(17),s=n(14),c=n(86),u=(c.default,c.getPresignedUrl),l=c.compressFile,d=c.getUniqueNumber,f=n(680),h=n(681),p=n(61),m=n(54);r._=a((function(e,t,n,r,i){t.be("div",{style:m({color:r.input.primaryColor,backgroundColor:r.input.primaryBackgroundColor}),title:r.input.title,class:"cb__upload"},"0",r,null,0,{onclick:n.d("click","onClick",!1)}),"photos"===i.type?(p(t,h,null,null,null,null,n,"1"),t.e("input",{style:m({color:r.input.primaryColor,backgroundColor:r.input.primaryBackgroundColor}),accept:"image/*",type:"file",class:"cb__upload__input"},"@file",r,0,0,{onchange:n.d("change","onChange",!1)})):(p(t,f,null,null,null,null,n,"2"),t.e("input",{style:m({color:r.input.primaryColor,backgroundColor:r.input.primaryBackgroundColor}),type:"file",class:"cb__upload__input"},"@file",r,0,0,{onchange:n.d("change","onChange",!1)})),t.ee()}),{e_:o},i),r.Component=s(i,r._)},function(e,t,n){},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/attachment.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("d58c82")()}).e("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,null,0).e("path",{d:"M2 12.5C2 9.46 4.46 7 7.5 7H18c2.21 0 4 1.79 4 4s-1.79 4-4 4H9.5C8.12 15 7 13.88 7 12.5S8.12 10 9.5 10H17v2H9.41c-.55 0-.55 1 0 1H18c1.1 0 2-.9 2-2s-.9-2-2-2H7.5C5.57 9 4 10.57 4 12.5S5.57 16 7.5 16H17v2H7.5C4.46 18 2 15.54 2 12.5z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/photo.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("987345")()}).e("path",{d:"M0 0h24v24H0z",fill:"none"},null,null,0).e("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){n(683);var r=e.exports=n(16).t(),i={onCreate:function(e){this.widgetState=e.widgetState,this.isMouseDown=e.isMouseDown,this.secondaryButtonAction=e.secondaryButtonAction,this.state={rotate:""}},onInput:function(e){this.widgetState=e.widgetState,this.isMouseDown=e.isMouseDown},onClick:function(){if(!this.isMouseDown)switch(this.widgetState){case u.ERROR:return this.secondaryButtonAction(u.REPORT_PROBLEM);case u.PRIMARY_BUTTON_WITH_INPUT:return this.input.primaryButtonAction(this.widgetState);case u.PRIMARY_BUTTON_WITH_WIDGET_OPEN:return this.rotateLeft(()=>{this.input.primaryButtonAction(u.PRIMARY_BUTTON_WITH_WIDGET_CLOSE)});case u.INVITE_PEOPLE:return this.rotateLeft(()=>{this.input.primaryButtonAction(u.INVITE_PEOPLE)});case u.PRIMARY_BUTTON_WITH_WIDGET_CLOSE:return this.rotateRight(()=>{this.input.primaryButtonAction(u.PRIMARY_BUTTON_WITH_WIDGET_OPEN)});case u.PRIMARY_BUTTON:return this.rotateRight(()=>{this.input.primaryButtonAction(this.widgetState)});case u.AFTER_CLOSE_SESSION_PUBLISHER:case u.AFTER_CLOSE_SESSION_SUBSCRIBER:return this.rotateLeft(()=>{this.input.primaryButtonAction(this.widgetState)})}},rotateLeft:function(e){this.state.rotate="cb__primaryBtn__rotateLeft",setTimeout(()=>{this.state.rotate="",e()},300)},rotateRight:function(e){this.state.rotate="cb__primaryBtn__rotateRight",setTimeout(()=>{this.state.rotate="",e()},300)}},o=(0,n(13).r)("/client$2.26.6/src/components/PrimaryButton/index.marko",(function(){return e.exports})),a=n(17),s=n(14),c=n(55),u=c.default||c,l=n(684),d=n(170),f=n(296),h=n(685),p=n(686),m=n(290),v=m.default||m,g=n(294),y=n(69)(g),_=n(61),b=n(54),E=n(78),S=n(19),C=n(20)("55d2ec"),w=S("div",{class:"mdc-fab__ripple"},"1",null,0,0,{i:C()}),T=S("span",{class:"cb__primaryBtn__notification"},"17",null,1,0,{i:C()}).t("1");r._=a((function(e,t,n,r,i){t.be("div",{style:b({color:r.input.primaryColor,backgroundColor:r.input.primaryBackgroundColor}),class:E(["mdc-fab cb__primaryBtn"])},"0",r,null,1,{onclick:n.d("click",r.input.loading?"":"onClick",!1)}),t.n(w,r),r.input.loading?y({style:{color:r.input.primaryColor}},t,n,"2"):r.input.widgetState===u.ERROR?(t.be("span",{style:b({color:r.input.primaryColor}),class:E(["material-icons","mdc-fab__icon","cb__primaryBtn__icon",i.rotate])},"3",r,null,1),_(t,v,null,null,null,null,n,"4"),t.ee()):r.input.widgetState===u.PRIMARY_BUTTON?(t.be("span",{style:b({color:r.input.primaryColor}),class:E(["material-icons","mdc-fab__icon","cb__primaryBtn__icon",i.rotate])},"5",r,null,1),_(t,f,null,null,null,null,n,"6"),t.ee()):r.input.widgetState===u.PRIMARY_BUTTON_WITH_INPUT?(t.be("span",{style:b({color:r.input.primaryColor}),class:E(["material-icons","mdc-fab__icon","cb__primaryBtn__icon",i.rotate])},"7",r,null,1),_(t,l,null,null,null,null,n,"8"),t.ee()):r.input.widgetState===u.PRIMARY_BUTTON_WITH_WIDGET_OPEN?(t.be("span",{style:b({color:r.input.primaryColor}),class:E(["material-icons","mdc-fab__icon","cb__primaryBtn__icon",i.rotate])},"9",r,null,1),_(t,d,null,null,null,null,n,"10"),t.ee()):r.input.widgetState===u.PRIMARY_BUTTON_WITH_WIDGET_CLOSE?(t.be("span",{style:b({color:r.input.primaryColor}),class:E(["material-icons","mdc-fab__icon","cb__primaryBtn__icon",i.rotate])},"11",r,null,1),_(t,p,null,null,null,null,n,"12"),t.ee()):r.input.widgetState===u.INVITE_PEOPLE?(t.be("span",{style:b({color:r.input.primaryColor}),class:E(["material-icons","mdc-fab__icon","cb__primaryBtn__icon",i.rotate])},"13",r,null,1),_(t,h,null,null,null,null,n,"14"),t.ee()):r.input.widgetState!==u.AFTER_CLOSE_SESSION_PUBLISHER&&r.input.widgetState!==u.AFTER_CLOSE_SESSION_SUBSCRIBER||(t.be("span",{style:b({color:r.input.primaryColor}),class:E(["material-icons","mdc-fab__icon","cb__primaryBtn__icon",i.rotate])},"15",r,null,1),_(t,d,null,null,null,null,n,"16"),t.ee()),r.input.unreadMessage&&!r.input.isDisconnected&&t.n(T,r),t.ee()}),{e_:o},i),r.Component=s(i,r._)},function(e,t,n){},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/arrow_forward.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("51f8b6")()}).e("path",{d:"M0 0h24v24H0z",fill:"none"},null,null,0).e("path",{d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/keyboard_backspace.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("d34575")()}).e("path",{d:"M0 0h24v24H0z",fill:"none"},null,null,0).e("path",{d:"M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){"use strict";var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Icons/menu.marko",(function(){return e.exports})),o=n(17),a=n(14),s=n(19)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},"0",null,2,0,{i:n(20)("26862f")()}).e("path",{d:"M0 0h24v24H0z",fill:"none"},null,null,0).e("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"},null,null,0);r._=o((function(e,t,n,r,i){t.n(s,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){n(688);var r=e.exports=n(16).t(),i=(0,n(13).r)("/client$2.26.6/src/components/Toast/index.marko",(function(){return e.exports})),o=n(17),a=n(14),s={class:"cb__toast"};r._=o((function(e,t,n,r,i){t.e("div",s,"0",r,1).t(r.input.text,r)}),{d_:!0,e_:i}),r.Component=a({},r._)},function(e,t,n){},function(e,t,n){"use strict";var r=n(7);var i=function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},o=n(47),a=o.a.documentElement,s=n(101),c=n(48),u=c.a.pop,l=n(71),d="[\\x20\\t\\r\\n\\f]",f=o.a.documentMode,h=f&&new RegExp(":enabled|:disabled|\\["+d+"*name"+d+"*="+d+"*(?:''|\"\")");r.a.contains=function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))};var p=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function m(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}r.a.escapeSelector=function(e){return(e+"").replace(p,m)};var v,g=c.a.sort;function y(e,t){if(e===t)return v=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)?e==o.a||e.ownerDocument==o.a&&r.a.contains(o.a,e)?-1:t==o.a||t.ownerDocument==o.a&&r.a.contains(o.a,t)?1:0:4&n?-1:1)}r.a.uniqueSort=function(e){var t,n=[],r=0,i=0;if(v=!1,g.call(e,y),v){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return e};var _=o.a,b=a.matches||a.msMatchesSelector;!function(){var e,t,n,o,a,c,p=r.a.expando,m=0,v=0,g=J(),y=J(),E=J(),S=J(),C="(?:\\\\[\\da-fA-F]{1,6}"+d+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",w="\\["+d+"*("+C+")(?:"+d+"*([*^$|!~]?=)"+d+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+C+"))|)"+d+"*\\]",T=":("+C+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+w+")*)|.*)\\)|)",D=new RegExp(d+"+","g"),A=new RegExp("^"+d+"+|((?:^|[^\\\\])(?:\\\\.)*)"+d+"+$","g"),R=new RegExp("^"+d+"*,"+d+"*"),k=new RegExp("^"+d+"*([>+~]|"+d+")"+d+"*"),O=new RegExp(d+"|>"),j=new RegExp(T),P=new RegExp("^"+C+"$"),I={ID:new RegExp("^#("+C+")"),CLASS:new RegExp("^\\.("+C+")"),TAG:new RegExp("^("+C+"|[*])"),ATTR:new RegExp("^"+w),PSEUDO:new RegExp("^"+T),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+d+"*(even|odd|(([+-]|)(\\d*)n|)"+d+"*(?:([+-]|)"+d+"*(\\d+)|))"+d+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+d+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+d+"*((?:-\\d)?\\d*)"+d+"*\\)|)(?=[^-]|$)","i")},N=/^(?:input|select|textarea|button)$/i,M=/^h\d$/i,x=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,L=/[+~]/,F=new RegExp("\\\\[\\da-fA-F]{1,6}"+d+"?|\\\\([^\\r\\n\\f])","g"),B=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},U=function(){Y()},V=te((function(e){return!0===e.disabled&&i(e,"fieldset")}),{dir:"parentNode",next:"legend"});function H(e){throw new Error("Syntax error, unrecognized expression: "+e)}function G(e,n,i,a){var s,u,d,m,v,g,y,_=n&&n.ownerDocument,b=n?n.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==b&&9!==b&&11!==b)return i;if(!a&&(Y(n),n=n||o,c)){if(11!==b&&(v=x.exec(e)))if(s=v[1]){if(9===b)return(d=n.getElementById(s))&&l.a.call(i,d),i;if(_&&(d=_.getElementById(s))&&r.a.contains(n,d))return l.a.call(i,d),i}else{if(v[2])return l.a.apply(i,n.getElementsByTagName(e)),i;if((s=v[3])&&n.getElementsByClassName)return l.a.apply(i,n.getElementsByClassName(s)),i}if(!(S[e+" "]||h&&h.test(e))){if(y=e,_=n,1===b&&(O.test(e)||k.test(e))){for(((_=L.test(e)&&X(n.parentNode)||n)!==n||f)&&((m=n.getAttribute("id"))?m=r.a.escapeSelector(m):n.setAttribute("id",m=p)),u=(g=Z(e)).length;u--;)g[u]=(m?"#"+m:":scope")+" "+ee(g[u]);y=g.join(",")}try{return l.a.apply(i,_.querySelectorAll(y)),i}catch(t){S(e,!0)}finally{m===p&&n.removeAttribute("id")}}}return function(e,n,r,i){var o,a,s,u,d,f="function"==typeof e&&e,h=!i&&Z(e=f.selector||e);if(r=r||[],1===h.length){if((a=h[0]=h[0].slice(0)).length>2&&"ID"===(s=a[0]).type&&9===n.nodeType&&c&&t.relative[a[1].type]){if(!(n=(t.find.ID(s.matches[0].replace(F,B),n)||[])[0]))return r;f&&(n=n.parentNode),e=e.slice(a.shift().value.length)}for(o=I.needsContext.test(e)?0:a.length;o--&&(s=a[o],!t.relative[u=s.type]);)if((d=t.find[u])&&(i=d(s.matches[0].replace(F,B),L.test(a[0].type)&&X(n.parentNode)||n))){if(a.splice(o,1),!(e=i.length&&ee(a)))return l.a.apply(r,i),r;break}}return(f||ae(e,h))(i,n,!c,r,!n||L.test(e)&&X(n.parentNode)||n),r}(e.replace(A,"$1"),n,i,a)}function J(){var e=[];return function n(r,i){return e.push(r+" ")>t.cacheLength&&delete n[e.shift()],n[r+" "]=i}}function z(e){return e[p]=!0,e}function W(e){return function(t){return i(t,"input")&&t.type===e}}function K(e){return function(t){return(i(t,"input")||i(t,"button"))&&t.type===e}}function q(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&V(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function $(e){return z((function(t){return t=+t,z((function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}))}))}function X(e){return e&&void 0!==e.getElementsByTagName&&e}function Y(e){var t,n=e?e.ownerDocument||e:_;n!=o&&9===n.nodeType&&(a=(o=n).documentElement,c=!r.a.isXMLDoc(o),f&&_!=o&&(t=o.defaultView)&&t.top!==t&&t.addEventListener("unload",U))}for(e in G.matches=function(e,t){return G(e,null,null,t)},G.matchesSelector=function(e,t){if(Y(e),c&&!S[t+" "]&&(!h||!h.test(t)))try{return b.call(e,t)}catch(e){S(t,!0)}return G(t,o,null,[e]).length>0},(t=r.a.expr={cacheLength:50,createPseudo:z,match:I,find:{ID:function(e,t){if(void 0!==t.getElementById&&c){var n=t.getElementById(e);return n?[n]:[]}},TAG:function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},CLASS:function(e,t){if(void 0!==t.getElementsByClassName&&c)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(F,B),e[3]=(e[3]||e[4]||e[5]||"").replace(F,B),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||H(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&H(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return I.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&j.test(n)&&(t=Z(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{ID:function(e){var t=e.replace(F,B);return function(e){return e.getAttribute("id")===t}},TAG:function(e){var t=e.replace(F,B).toLowerCase();return"*"===e?function(){return!0}:function(e){return i(e,t)}},CLASS:function(e){var t=g[e+" "];return t||(t=new RegExp("(^|"+d+")"+e+"("+d+"|$)"))&&g(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(i){var o=r.a.attr(i,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o.replace(D," ")+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,o){var a="nth"!==e.slice(0,3),s="last"!==e.slice(-4),c="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,u){var l,d,f,h,v,g=a!==s?"nextSibling":"previousSibling",y=t.parentNode,_=c&&t.nodeName.toLowerCase(),b=!u&&!c,E=!1;if(y){if(a){for(;g;){for(f=t;f=f[g];)if(c?i(f,_):1===f.nodeType)return!1;v=g="only"===e&&!v&&"nextSibling"}return!0}if(v=[s?y.firstChild:y.lastChild],s&&b){for(E=(h=(l=(d=y[p]||(y[p]={}))[e]||[])[0]===m&&l[1])&&l[2],f=h&&y.childNodes[h];f=++h&&f&&f[g]||(E=h=0)||v.pop();)if(1===f.nodeType&&++E&&f===t){d[e]=[m,h,E];break}}else if(b&&(E=h=(l=(d=t[p]||(t[p]={}))[e]||[])[0]===m&&l[1]),!1===E)for(;(f=++h&&f&&f[g]||(E=h=0)||v.pop())&&(!(c?i(f,_):1===f.nodeType)||!++E||(b&&((d=f[p]||(f[p]={}))[e]=[m,E]),f!==t)););return(E-=o)===r||E%r==0&&E/r>=0}}},PSEUDO:function(e,n){var r,i=t.pseudos[e]||t.setFilters[e.toLowerCase()]||H("unsupported pseudo: "+e);return i[p]?i(n):i.length>1?(r=[e,e,"",n],t.setFilters.hasOwnProperty(e.toLowerCase())?z((function(e,t){for(var r,o=i(e,n),a=o.length;a--;)e[r=s.a.call(e,o[a])]=!(t[r]=o[a])})):function(e){return i(e,0,r)}):i}},pseudos:{not:z((function(e){var t=[],n=[],r=ae(e.replace(A,"$1"));return r[p]?z((function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))})):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}})),has:z((function(e){return function(t){return G(e,t).length>0}})),contains:z((function(e){return e=e.replace(F,B),function(t){return(t.textContent||r.a.text(t)).indexOf(e)>-1}})),lang:z((function(e){return P.test(e||"")||H("unsupported lang: "+e),e=e.replace(F,B).toLowerCase(),function(t){var n;do{if(n=c?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===o.activeElement&&o.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:q(!1),disabled:q(!0),checked:function(e){return i(e,"input")&&!!e.checked||i(e,"option")&&!!e.selected},selected:function(e){return f&&e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!t.pseudos.empty(e)},header:function(e){return M.test(e.nodeName)},input:function(e){return N.test(e.nodeName)},button:function(e){return i(e,"input")&&"button"===e.type||i(e,"button")},text:function(e){return i(e,"input")&&"text"===e.type},first:$((function(){return[0]})),last:$((function(e,t){return[t-1]})),eq:$((function(e,t,n){return[n<0?n+t:n]})),even:$((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:$((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:$((function(e,t,n){var r;for(r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:$((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}}).pseudos.nth=t.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[e]=W(e);for(e in{submit:!0,reset:!0})t.pseudos[e]=K(e);function Q(){}function Z(e,n){var r,i,o,a,s,c,u,l=y[e+" "];if(l)return n?0:l.slice(0);for(s=e,c=[],u=t.preFilter;s;){for(a in r&&!(i=R.exec(s))||(i&&(s=s.slice(i[0].length)||s),c.push(o=[])),r=!1,(i=k.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(A," ")}),s=s.slice(r.length)),t.filter)!(i=I[a].exec(s))||u[a]&&!(i=u[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?H(e):y(e,c).slice(0)}function ee(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function te(e,t,n){var r=t.dir,o=t.next,a=o||r,s=n&&"parentNode"===a,c=v++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||s)return e(t,n,i);return!1}:function(t,n,u){var l,d,f=[m,c];if(u){for(;t=t[r];)if((1===t.nodeType||s)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||s)if(d=t[p]||(t[p]={}),o&&i(t,o))t=t[r]||t;else{if((l=d[a])&&l[0]===m&&l[1]===c)return f[2]=l[2];if(d[a]=f,f[2]=e(t,n,u))return!0}return!1}}function ne(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function re(e,t,n,r,i){for(var o,a=[],s=0,c=e.length,u=null!=t;s<c;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),u&&t.push(s)));return a}function ie(e,t,n,r,i,o){return r&&!r[p]&&(r=ie(r)),i&&!i[p]&&(i=ie(i,o)),z((function(o,a,c,u){var d,f,h,p,m=[],v=[],g=a.length,y=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)G(e,t[r],n);return n}(t||"*",c.nodeType?[c]:c,[]),_=!e||!o&&t?y:re(y,m,e,c,u);if(n?n(_,p=i||(o?e:g||r)?[]:a,c,u):p=_,r)for(d=re(p,v),r(d,[],c,u),f=d.length;f--;)(h=d[f])&&(p[v[f]]=!(_[v[f]]=h));if(o){if(i||e){if(i){for(d=[],f=p.length;f--;)(h=p[f])&&d.push(_[f]=h);i(null,p=[],d,u)}for(f=p.length;f--;)(h=p[f])&&(d=i?s.a.call(o,h):m[f])>-1&&(o[d]=!(a[d]=h))}}else p=re(p===a?p.splice(g,p.length):p),i?i(null,a,p,u):l.a.apply(a,p)}))}function oe(e){for(var r,i,o,a=e.length,c=t.relative[e[0].type],u=c||t.relative[" "],l=c?1:0,d=te((function(e){return e===r}),u,!0),f=te((function(e){return s.a.call(r,e)>-1}),u,!0),h=[function(e,t,i){var o=!c&&(i||t!==n)||((r=t).nodeType?d(e,t,i):f(e,t,i));return r=null,o}];l<a;l++)if(i=t.relative[e[l].type])h=[te(ne(h),i)];else{if((i=t.filter[e[l].type].apply(null,e[l].matches))[p]){for(o=++l;o<a&&!t.relative[e[o].type];o++);return ie(l>1&&ne(h),l>1&&ee(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(A,"$1"),i,l<o&&oe(e.slice(l,o)),o<a&&oe(e=e.slice(o)),o<a&&ee(e))}h.push(i)}return ne(h)}function ae(e,i){var a,s=[],d=[],f=E[e+" "];if(!f){for(i||(i=Z(e)),a=i.length;a--;)(f=oe(i[a]))[p]?s.push(f):d.push(f);(f=E(e,function(e,i){var a=i.length>0,s=e.length>0,d=function(d,f,h,p,v){var g,y,_,b=0,E="0",S=d&&[],C=[],w=n,T=d||s&&t.find.TAG("*",v),D=m+=null==w?1:Math.random()||.1;for(v&&(n=f==o||f||v);null!=(g=T[E]);E++){if(s&&g){for(y=0,f||g.ownerDocument==o||(Y(g),h=!c);_=e[y++];)if(_(g,f||o,h)){l.a.call(p,g);break}v&&(m=D)}a&&((g=!_&&g)&&b--,d&&S.push(g))}if(b+=E,a&&E!==b){for(y=0;_=i[y++];)_(S,C,f,h);if(d){if(b>0)for(;E--;)S[E]||C[E]||(C[E]=u.call(p));C=re(C)}l.a.apply(p,C),v&&!d&&C.length>0&&b+i.length>1&&r.a.uniqueSort(p)}return v&&(m=D,n=w),S};return a?z(d):d}(d,s))).selector=e}return f}Q.prototype=t.filters=t.pseudos,t.setFilters=new Q,Y(),r.a.find=G}();var E=n(172),S=function e(t,n,i,o,a,s,c){var u=0,l=t.length,d=null==i;if("object"===Object(E.a)(i))for(u in a=!0,i)e(t,n,u,i[u],!0,s,c);else if(void 0!==o&&(a=!0,"function"!=typeof o&&(c=!0),d&&(c?(n.call(t,o),n=null):(d=n,n=function(e,t,n){return d.call(Object(r.a)(e),n)})),n))for(;u<l;u++)n(t[u],i,c?o:o.call(t[u],u,n(t[u],i)));return a?t:d?n.call(t):l?n(t[0],i):s},C=/[^\x20\t\r\n\f]+/g;r.a.fn.extend({attr:function(e,t){return S(this,r.a.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){r.a.removeAttr(this,e)}))}}),r.a.extend({attr:function(e,t,n){var i,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?r.a.prop(e,t,n):(1===a&&r.a.isXMLDoc(e)||(o=r.a.attrHooks[t.toLowerCase()]),void 0!==n?null===n?void r.a.removeAttr(e,t):o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(i=o.get(e,t))?i:null==(i=e.getAttribute(t))?void 0:i)},attrHooks:{},removeAttr:function(e,t){var n,r=0,i=t&&t.match(C);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),f&&(r.a.attrHooks.type={set:function(e,t){if("radio"===t&&i(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}),r.a.each(r.a.expr.match.bool.source.match(/\w+/g),(function(e,t){r.a.attrHooks[t]={get:function(e){var n,i=r.a.isXMLDoc(e),o=t.toLowerCase();return i||(n=null!=e.getAttribute(t)?o:null),n},set:function(e,t,n){return!1===t?r.a.removeAttr(e,n):e.setAttribute(n,n),n}}}));var w=/^(?:input|select|textarea|button)$/i,T=/^(?:a|area)$/i;r.a.fn.extend({prop:function(e,t){return S(this,r.a.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[r.a.propFix[e]||e]}))}}),r.a.extend({prop:function(e,t,n){var i,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&r.a.isXMLDoc(e)||(t=r.a.propFix[t]||t,o=r.a.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=e.getAttribute("tabindex");return t?parseInt(t,10):w.test(e.nodeName)||T.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),f&&(r.a.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),r.a.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){r.a.propFix[this.toLowerCase()]=this}));var D=function(e){return(e.match(C)||[]).join(" ")},A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,R=r.a.expr.match.needsContext;function k(e,t,n){return"function"==typeof t?r.a.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?r.a.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?r.a.grep(e,(function(e){return s.a.call(t,e)>-1!==n})):r.a.filter(t,e,n)}r.a.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?r.a.find.matchesSelector(i,e)?[i]:[]:r.a.find.matches(e,r.a.grep(t,(function(e){return 1===e.nodeType})))},r.a.fn.extend({find:function(e){var t,n,i=this.length,o=this;if("string"!=typeof e)return this.pushStack(Object(r.a)(e).filter((function(){for(t=0;t<i;t++)if(r.a.contains(o[t],this))return!0})));for(n=this.pushStack([]),t=0;t<i;t++)r.a.find(e,o[t],n);return i>1?r.a.uniqueSort(n):n},filter:function(e){return this.pushStack(k(this,e||[],!1))},not:function(e){return this.pushStack(k(this,e||[],!0))},is:function(e){return!!k(this,"string"==typeof e&&R.test(e)?Object(r.a)(e):e||[],!1).length}});var O,j=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;function P(e){return e.getAttribute&&e.getAttribute("class")||""}function I(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(C)||[]}(r.a.fn.init=function(e,t,n){var i,a;if(!e)return this;if(n=n||O,"string"==typeof e){if((a="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:j.exec(e))&&(a[1]||!t)){if(a[1]){if(t=t instanceof r.a?t[0]:t,r.a.merge(this,r.a.parseHTML(a[1],t&&t.nodeType?t.ownerDocument||t:o.a,!0)),A.test(a[1])&&r.a.isPlainObject(t))for(a in t)"function"==typeof this[a]?this[a](t[a]):this.attr(a,t[a]);return this}return(i=o.a.getElementById(a[2]))&&(this[0]=i,this.length=1),this}return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e)}return e.nodeType?(this[0]=e,this.length=1,this):"function"==typeof e?void 0!==n.ready?n.ready(e):e(r.a):r.a.makeArray(e,this)}).prototype=r.a.fn,O=Object(r.a)(o.a),r.a.fn.extend({addClass:function(e){var t,n,i,o,a,s,c,u=0;if("function"==typeof e)return this.each((function(t){Object(r.a)(this).addClass(e.call(this,t,P(this)))}));if((t=I(e)).length)for(;n=this[u++];)if(o=P(n),i=1===n.nodeType&&" "+D(o)+" "){for(s=0;a=t[s++];)i.indexOf(" "+a+" ")<0&&(i+=a+" ");o!==(c=D(i))&&n.setAttribute("class",c)}return this},removeClass:function(e){var t,n,i,o,a,s,c,u=0;if("function"==typeof e)return this.each((function(t){Object(r.a)(this).removeClass(e.call(this,t,P(this)))}));if(!arguments.length)return this.attr("class","");if((t=I(e)).length)for(;n=this[u++];)if(o=P(n),i=1===n.nodeType&&" "+D(o)+" "){for(s=0;a=t[s++];)for(;i.indexOf(" "+a+" ")>-1;)i=i.replace(" "+a+" "," ");o!==(c=D(i))&&n.setAttribute("class",c)}return this},toggleClass:function(e,t){return"function"==typeof e?this.each((function(n){Object(r.a)(this).toggleClass(e.call(this,n,P(this),t),t)})):"boolean"==typeof t?t?this.addClass(e):this.removeClass(e):this.each((function(){var t,n,i,o;for(n=0,i=Object(r.a)(this),o=I(e);t=o[n++];)i.hasClass(t)?i.removeClass(t):i.addClass(t)}))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+D(P(n))+" ").indexOf(t)>-1)return!0;return!1}}),r.a.fn.extend({val:function(e){var t,n,i,o=this[0];return arguments.length?(i="function"==typeof e,this.each((function(n){var o;1===this.nodeType&&(null==(o=i?e.call(this,n,Object(r.a)(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=r.a.map(o,(function(e){return null==e?"":e+""}))),(t=r.a.valHooks[this.type]||r.a.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))}))):o?(t=r.a.valHooks[o.type]||r.a.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:null==(n=o.value)?"":n:void 0}}),r.a.extend({valHooks:{select:{get:function(e){var t,n,o,a=e.options,s=e.selectedIndex,c="select-one"===e.type,u=c?null:[],l=c?s+1:a.length;for(o=s<0?l:c?s:0;o<l;o++)if((n=a[o]).selected&&!n.disabled&&(!n.parentNode.disabled||!i(n.parentNode,"optgroup"))){if(t=Object(r.a)(n).val(),c)return t;u.push(t)}return u},set:function(e,t){for(var n,i,o=e.options,a=r.a.makeArray(t),s=o.length;s--;)((i=o[s]).selected=r.a.inArray(Object(r.a)(i).val(),a)>-1)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),f&&(r.a.valHooks.option={get:function(e){var t=e.getAttribute("value");return null!=t?t:D(r.a.text(e))}}),r.a.each(["radio","checkbox"],(function(){r.a.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=r.a.inArray(Object(r.a)(e).val(),t)>-1}}}));r.a;r.a.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new window.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||r.a.error("Invalid XML: "+e),t};n(609);r.a.fn.extend({text:function(e){return S(this,(function(e){return void 0===e?r.a.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)}});r.a;window.$=r.a;r.a},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"shimGetUserMedia",(function(){return S})),n.d(r,"shimGetDisplayMedia",(function(){return C})),n.d(r,"shimMediaStream",(function(){return D})),n.d(r,"shimOnTrack",(function(){return A})),n.d(r,"shimGetSendersWithDtmf",(function(){return R})),n.d(r,"shimGetStats",(function(){return k})),n.d(r,"shimSenderReceiverGetStats",(function(){return O})),n.d(r,"shimAddTrackRemoveTrackWithNative",(function(){return j})),n.d(r,"shimAddTrackRemoveTrack",(function(){return P})),n.d(r,"shimPeerConnection",(function(){return I})),n.d(r,"fixNegotiationNeeded",(function(){return N}));var i={};n.r(i),n.d(i,"shimGetUserMedia",(function(){return x})),n.d(i,"shimGetDisplayMedia",(function(){return L})),n.d(i,"shimOnTrack",(function(){return B})),n.d(i,"shimPeerConnection",(function(){return U})),n.d(i,"shimSenderGetStats",(function(){return V})),n.d(i,"shimReceiverGetStats",(function(){return H})),n.d(i,"shimRemoveStream",(function(){return G})),n.d(i,"shimRTCDataChannel",(function(){return J})),n.d(i,"shimAddTransceiver",(function(){return z})),n.d(i,"shimGetParameters",(function(){return W})),n.d(i,"shimCreateOffer",(function(){return K})),n.d(i,"shimCreateAnswer",(function(){return q}));var o={};n.r(o),n.d(o,"shimLocalStreamsAPI",(function(){return X})),n.d(o,"shimRemoteStreamsAPI",(function(){return Y})),n.d(o,"shimCallbacksAPI",(function(){return Q})),n.d(o,"shimGetUserMedia",(function(){return Z})),n.d(o,"shimConstraints",(function(){return ee})),n.d(o,"shimRTCIceServerUrls",(function(){return te})),n.d(o,"shimTrackEventTransceiver",(function(){return ne})),n.d(o,"shimCreateOfferLegacy",(function(){return re})),n.d(o,"shimAudioContext",(function(){return ie}));var a={};function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(a),n.d(a,"shimRTCIceCandidate",(function(){return ce})),n.d(a,"shimMaxMessageSize",(function(){return ue})),n.d(a,"shimSendThrowTypeError",(function(){return le})),n.d(a,"shimConnectionState",(function(){return de})),n.d(a,"removeExtmapAllowMixed",(function(){return fe})),n.d(a,"shimAddIceCandidateNullOrEmpty",(function(){return he}));var c=!0,u=!0;function l(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function d(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var o=function(e){var t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),i.apply(this,[e,o])};var o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function f(e){return"boolean"!=typeof e?new Error("Argument type: "+s(e)+". Please use a boolean."):(c=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function h(e){return"boolean"!=typeof e?new Error("Argument type: "+s(e)+". Please use a boolean."):(u=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function p(){if("object"===("undefined"==typeof window?"undefined":s(window))){if(c)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function m(e,t){u&&console.warn(e+" is deprecated, please use "+t+" instead.")}function v(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var n=e.navigator;if(n.mozGetUserMedia)t.browser="firefox",t.version=l(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=l(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=l(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function g(e){return"[object Object]"===Object.prototype.toString.call(e)}function y(e){return g(e)?Object.keys(e).reduce((function(t,n){var r=g(e[n]),i=r?y(e[n]):e[n],o=r&&!Object.keys(i).length;return void 0===i||o?t:Object.assign(t,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,i))}),{}):e}function _(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var o=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((function(t){e.forEach((function(n){n.type===r&&n.trackId===t.id&&function e(t,n,r){n&&!r.has(n.id)&&(r.set(n.id,n),Object.keys(n).forEach((function(i){i.endsWith("Id")?e(t,t.get(n[i]),r):i.endsWith("Ids")&&n[i].forEach((function(n){e(t,t.get(n),r)}))})))}(e,n,i)}))})),i}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var E=p;function S(e,t){var n=e&&e.navigator;if(n.mediaDevices){var r=function(e){if("object"!==b(e)||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"===b(e[n])?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"==typeof r.ideal?(o[i("min",n)]=r.ideal,t.optional.push(o),(o={})[i("max",n)]=r.ideal,t.optional.push(o)):(o[i("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===b(e.audio)){var o=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};o((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),o(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"===b(e.video)){var a=e.video.facingMode;a=a&&("object"===b(a)?a:{ideal:a});var s,c=t.version<66;if(a&&("user"===a.exact||"environment"===a.exact||"user"===a.ideal||"environment"===a.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||c))if(delete e.video.facingMode,"environment"===a.exact||"environment"===a.ideal?s=["back","rear"]:"user"!==a.exact&&"user"!==a.ideal||(s=["front"]),s)return n.mediaDevices.enumerateDevices().then((function(t){var n=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return s.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&s.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=a.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=r(e.video),E("chrome: "+JSON.stringify(e)),i(e)}));e.video=r(e.video)}return E("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,(function(e){n.webkitGetUserMedia(e,t,(function(e){r&&r(o(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){var a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return i(e,(function(e){return a(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(o(e))}))}))}}}}function C(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function A(e){if("object"===T(e)&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var o=new Event("track");o.track=r.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)})),t.stream.getTracks().forEach((function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var o=new Event("track");o.track=r,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else d(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))}function R(e){if("object"===T(e)&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"===T(e)&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function k(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),r=n[0],i=n[1],o=n[2];if(arguments.length>0&&"function"==typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof r))return t.apply(this,[]);var a=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},s=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var c=function(e){i(s(a(e)))};return t.apply(this,[c,r])}return new Promise((function(n,r){t.apply(e,[function(e){n(s(a(e)))},r])})).then(i,o)}}}function O(e){if("object"===T(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return _(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=r.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),d(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return _(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,n,r,o=arguments[0];return this.getSenders().forEach((function(e){e.track===o&&(t?r=!0:t=e)})),this.getReceivers().forEach((function(e){return e.track===o&&(n?r=!0:n=e),e.track===o})),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}}}function j(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var r=this.getSenders();n.apply(this,arguments);var i=this.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(i)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),i.apply(this,arguments)}}function P(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return j(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(n.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}r.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var o=this.getSenders().find((function(e){return e.track===t}));if(o)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var a=this._streams[n.id];if(a)a.addTrack(t),Promise.resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var s=new e.MediaStream([t]);this._streams[n.id]=s,this._reverseStreams[s.id]=n,this.addStream(s)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=w({},t,(function(){var e=this,t=arguments,r=arguments.length&&"function"==typeof arguments[0];return r?n.apply(this,[function(n){var r=s(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(t){return s(e,t)}))}));e.RTCPeerConnection.prototype[t]=r[t]}));var o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=c(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};var a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach((function(r){n._streams[r].getTracks().find((function(t){return e.track===t}))&&(t=n._streams[r])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function s(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function c(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}}function I(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=w({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}))}function N(e,t){d(e,"negotiationneeded",(function(e){var n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){var n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){m("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var i=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===M(e)&&"object"===M(e.audio)&&(e=JSON.parse(JSON.stringify(e)),i(e.audio,"autoGainControl","mozAutoGainControl"),i(e.audio,"noiseSuppression","mozNoiseSuppression")),o(e)},r&&r.prototype.getSettings){var a=r.prototype.getSettings;r.prototype.getSettings=function(){var e=a.apply(this,arguments);return i(e,"mozAutoGainControl","autoGainControl"),i(e,"mozNoiseSuppression","noiseSuppression"),e}}if(r&&r.prototype.applyConstraints){var s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===M(e)&&(e=JSON.parse(JSON.stringify(e)),i(e,"autoGainControl","mozAutoGainControl"),i(e,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[e])}}}}function L(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e){"object"===F(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function U(e,t){if("object"===F(e)&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n,r,i,o=e.RTCPeerConnection.prototype[t],a=(i=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)},(r=t)in(n={})?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n);e.RTCPeerConnection.prototype[t]=a[t]}));var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),i=e[0],o=e[1],a=e[2];return r.apply(this,[i||null]).then((function(e){if(t.version<53&&!o)try{e.forEach((function(e){e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,r){e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(o,a)}}}function V(e){if("object"===F(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function H(e){if("object"===F(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),d(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function G(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;m("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})}function J(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function z(e){if("object"===F(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((function(e){if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var r=t.apply(this,arguments);if(n){var i=r.sender,o=i.getParameters();(!("encodings"in o)||1===o.encodings.length&&0===Object.keys(o.encodings[0]).length)&&(o.encodings=e.sendEncodings,i.sendEncodings=e.sendEncodings,this.setParametersPromises.push(i.setParameters(o).then((function(){delete i.sendEncodings})).catch((function(){delete i.sendEncodings}))))}return r})}}function W(e){if("object"===F(e)&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function K(e){if("object"===F(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}function q(e){if("object"===F(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e){if("object"===$(e)&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(r){return t.call(n,r,e)})),e.getVideoTracks().forEach((function(r){return t.call(n,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=this,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i&&i.forEach((function(e){n._localStreams?n._localStreams.includes(e)||n._localStreams.push(e):n._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach((function(e){r.includes(e.track)&&t.removeTrack(e)}))}})}}function Y(e){if("object"===$(e)&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}}function Q(e){if("object"===$(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};var s=function(e,t,n){var r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=s,s=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=s}}function Z(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(ee(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function ee(e){return e&&void 0!==e.video?Object.assign({},e,{video:y(e.video)}):e}function te(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],i=0;i<e.iceServers.length;i++){var o=e.iceServers[i];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(m("RTCIceServer.url","RTCIceServer.urls"),(o=JSON.parse(JSON.stringify(o))).urls=o.url,delete o.url,r.push(o)):r.push(e.iceServers[i])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function ne(e){"object"===$(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function re(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}}function ie(e){"object"!==$(e)||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var oe=n(119),ae=n.n(oe);function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===se(e)&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),r=ae.a.parseCandidate(e.candidate),i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,d(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function ue(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=function(e){if(!e||!e.sdp)return!1;var t=ae.a.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=ae.a.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n},i=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},o=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var i=ae.a.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){var e=this.getConfiguration(),s=e.sdpSemantics;"plan-b"===s&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){var c,u=r(arguments[0]),l=i(u),d=o(arguments[0],u);c=0===l&&0===d?Number.POSITIVE_INFINITY:0===l||0===d?Math.max(l,d):Math.min(l,d);var f={};Object.defineProperty(f,"maxMessageSize",{get:function(){return c}}),this._sctp=f}return a.apply(this,arguments)}}}function le(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},d(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function de(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}}function fe(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71||"safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var r=t.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return n.apply(this,arguments)}}}function he(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}var pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.window,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0},s=p,c=v(t),u={browserDetails:c,commonShim:a,extractVersion:l,disableLog:f,disableWarnings:h,sdp:oe};switch(c.browser){case"chrome":if(!r||!I||!n.shimChrome)return s("Chrome shim is not included in this adapter release."),u;if(null===c.version)return s("Chrome shim can not determine version, not shimming."),u;s("adapter.js shimming chrome."),u.browserShim=r,he(t,c),S(t,c),D(t),I(t,c),A(t),P(t,c),R(t),k(t),O(t),N(t,c),ce(t),de(t),ue(t,c),le(t),fe(t,c);break;case"firefox":if(!i||!U||!n.shimFirefox)return s("Firefox shim is not included in this adapter release."),u;s("adapter.js shimming firefox."),u.browserShim=i,he(t,c),x(t,c),U(t,c),B(t),G(t),V(t),H(t),J(t),z(t),W(t),K(t),q(t),ce(t),de(t),ue(t,c),le(t);break;case"safari":if(!o||!n.shimSafari)return s("Safari shim is not included in this adapter release."),u;s("adapter.js shimming safari."),u.browserShim=o,he(t,c),te(t),re(t),Q(t),X(t),Y(t),ne(t),Z(t),ie(t),ce(t),ue(t,c),le(t),fe(t,c);break;default:s("Unsupported browser!")}return u}({window:"undefined"==typeof window?void 0:window});t.default=pe}]);